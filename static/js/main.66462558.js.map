{"version":3,"sources":["../webpack/bootstrap","components/rawl/legends/PianoLegend.tsx","components/rawl/legends/ChordStairs.tsx","components/Slider.js","sampler/sampler.ts","components/rawl/SnippetList.tsx","keySlugMapping.ts","components/AppFooter.tsx","components/ErrorBoundary.tsx","components/rawl/CompositionTitle.tsx","components/rawl/corpora/CorpusLink.tsx","components/rawl/corpora/utils.ts","components/AppContext.tsx","components/rawl/SnippetItem.tsx","components/rawl/getNoteRectangles.tsx","components/rawl/corpora/explanations.ts","components/rawl/SongNarrative.tsx","components/rawl/book/chapters.tsx","components/rawl/parseMidi.ts","../config/polyfills.js","index.js","chip-core.js","config/firebaseConfig.js","handlers/handleSongClick.ts","players/midi/midi-helpers.js","promisify-xhr.js","components/Alert.js","components/TimeSlider.js","components/AppHeader.tsx","components/SignIn.js","components/DropMessage.tsx","components/Timeline.tsx","config/index.js","components/rawl/book/AboutTop100Corpus.tsx","components/rawl/FrozenNotesLayout.tsx","components/rawl/FrozenNotes.tsx","components/rawl/SystemLayout.tsx","components/rawl/layouts/ControlPanel.tsx","components/rawl/legends/guitarChords.ts","components/rawl/layouts/MeasureNumbers.tsx","components/rawl/layouts/MergedVoicesLegend.tsx","components/rawl/book/Citations.tsx","components/rawl/book/cites.ts","components/rawl/book/FileDropBox.tsx","components/rawl/book/Metaphors.tsx","components/rawl/layouts/VoiceName.tsx","components/rawl/autoAnalysis.ts","components/rawl/layouts/LayoutSelector.tsx","components/rawl/measures.ts","components/rawl/CorpusSearch.tsx","components/rawl/OldLandingPage.tsx","components/rawl/ShortcutHelp.tsx","components/rawl/corpora/Corpus.tsx","components/rawl/corpora/Structures.tsx","components/rawl/InlineRawlPlayer.tsx","components/rawl/midiStorage.tsx","components/rawl/pages/DAW.tsx","assets/images/reaper_colormap.png","components/rawl/transformMidi.ts","gm-patch-map.js","players/MIDIFilePlayer.js","players/MIDIPlayer.js","players/Player.js","components/rawl/analysis.ts","components/rawl/corpora/corpora.tsx","components/rawl/book/Book.tsx","components/rawl/AnalysisGrid.tsx","components/rawl/Rawl.tsx","components/rawl/top100Composers.ts","components/App.tsx","util.js","utils/corpusUtils.tsx","components/rawl/legends/chords.tsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","BLACK_KEYS","WHITE_KEYS","BLACK_KEY_LABELS","keyPress","keyframes","PianoKey","div","props","isEnabled","isPlaying","css","FoldButton","button","ScaleLabel","span","ToggleContainer","ToggleIcon","active","ToggleSlider","SliderKnob","isRight","PianoLegend","currentTonic","inline","enabledPitches","playingNotes","setPlayingNotes","React","useState","Set","playNote","note","includes","playArpeggiatedChord","setTimeout","prev","next","delete","keyWidth","keyHeight","rowDistance","padding","style","backgroundColor","zIndex","position","width","height","map","Fragment","className","has","top","left","borderRadius","cursor","onClick","bottom","color","fontWeight","overflow","textAlign","fontSize","textShadow","PITCH_CLASS_TO_LETTER","toString","replace","InlinePianoLegend","FoldablePianoLegend","slug","setHoveredColors","showLegend","setShowLegend","useLocalStorage","hoveredScale","setHoveredScale","showGuitarChords","setShowGuitarChords","getEnabledPitches","chords","TOP_100_COMPOSERS","find","_slug","useMemo","right","FontAwesomeIcon","icon","faUserGraduate","title","faGuitar","display","flexDirection","gap","border","Array","isArray","MAJOR_MODE","MINOR_MODE","modeItem","index","chapterChords","CHROMATIC_CHORDS","margin","justifyContent","marginTop","onMouseEnter","onMouseLeave","background","ChordNote","NOTE_HEIGHT","scaleOut","delay","ChordBoundingBox","clickable","ChordContent","ChordName","TonicContext","createContext","TonicProvider","children","Provider","ChordStairs","memo","propTonic","scale","playbackMode","contextTonic","useContext","playingStates","setPlayingStates","timeoutRef","useRef","hideLabels","titleHeight","chapterChordsSet","modeChordSet","modeChordSetWithoutV","hasIntersection","some","chord","filteredChords","filter","numChords","rehydratedChords","rehydrateChords","minPosition","Math","min","flatMap","positions","pitchOfMinPosition","pitches","forEach","pos","maxPosition","max","totalHeight","tonicChordPosition","findIndex","test","scaledNoteHeight","scaledNoteWidth","scaledHorizontalGap","scaledFontSize","handleChordClick","useCallback","current","timeout","clearTimeout","chordSequence","chordData","playArpeggiatedChordSequence","Date","now","newState","clickedChordIndex","transposedNotes","handleChordMouseEnter","pitch","handleChordMouseLeave","chordIndex","topPosition","at","chordNameOffset","abs","pitchIndex","ARPEGGIO_DELAY_MS","userSelect","pointerEvents","fontFamily","formatChordName","root","intervalString","join","convertChordToGuitarChord","getDisplayChordName","SliderContainer","styled","_templateObject","_taggedTemplateLiteral","SliderRail","_templateObject2","_templateObject3","dragging","StyledRangeInput","input","attrs","type","_templateObject4","concat","Slider","_PureComponent","_this","_classCallCheck","autoBindReact","node","createRef","state","draggedPos","_inherits","_createClass","event","this","clientX","offsetLeft","offsetWidth","setState","onDrag","_this2","preventDefault","persist","document","addEventListener","onMouseMove","onMouseUp","_this3","removeEventListener","onChange","createElement","ref","onMouseDown","PureComponent","samplerLoaded","loadingPromise","sampler","Tone","Sampler","urls","A0","C1","A1","C2","A2","C3","A3","C4","A4","C5","A5","C6","A6","C7","A7","C8","baseUrl","onload","console","log","getContext","toDestination","set","volume","addAudioWorklet","context","rawContext","audioWorklet","addModule","workletNode","AudioWorkletNode","connect","destination","error","originalTriggerAttack","triggerAttack","args","originalTriggerRelease","triggerRelease","getAudioContextState","startAudioContext","start","ensureSamplerLoaded","Promise","resolve","loaded","checkLoaded","resumeAudioContext","activeEvents","activeNotes","chordNumbers","releaseAll","id","Transport","clear","cancel","noteNames","midi","Frequency","toNote","currentTransportTime","seconds","eventId","schedule","time","triggerAttackRelease","playRawMidiNote","midiNumber","duration","noteName","cleanupArpeggiator","onChordStart","onChordEnd","currentTime","noteIndex","SnippetListContainer","isPreview","SnippetItemWrapper","measureCount","PX_IN_MEASURE","isLoading","SlugLabel","SnippetContainer","ComposerInfo","ComposerHeader","ComposerName","YearInfo","snippets","slugs","onSnippetClick","noteHeight","loadingSnippets","deleteSnippet","hoveredColors","snippet","measuresSpan","composerSlug","midiSlug","composerInfo","corpora","corpus","midis","hasMetadata","getComposerInfo","split","word","charAt","toUpperCase","country","getEmojis","composerBirthYear","genre","GenreList","getUniqueStyles","GenreItem","FOOTER_HEIGHT","StyledVolumeSlider","StyledAppFooter","AppFooterMain","TempoSection","LatencySection","DownloadButton","a","PauseButton","TimeSliderWrapper","StyledTempoButton","withRouter","currentSongDurationMs","ejected","paused","handleTimeSliderChange","handleVolumeChange","getCurrentPositionMs","togglePause","latencyCorrectionMs","setLatencyCorrectionMs","location","tempo","setTempo","AppContext","canDownload","currentMidiBuffer","currentMidi","pathname","segments","Boolean","lastSegment","endsWith","handleTempoChange","delta","newTempo","Number","toFixed","disabled","faPlay","faPause","alignItems","transform","lineHeight","marginBottom","fixed","integer","decimal","formatTempo","sign","step","e","target","onDoubleClick","stopPropagation","opacity","href","blob","Blob","URL","createObjectURL","createBlobUrl","download","faDownload","Component","hasError","_","errorInfo","fallback","MetadataContainer","RelatedCorpora","horizontal","CorpusRow","RelatedCorporaDisplay","showMetadata","relatedCorporaSlugs","MUSESCORE_TOP_100_SLUG","corpusSlug","CorpusLink","sourceUrl","onSourceUrlUpdate","editedUrl","setEditedUrl","handleSave","formattedTitle","composer","museScoreUrl","encodeURIComponent","ComposerTitle","displayTitle","rel","textDecoration","marginLeft","dangerouslySetInnerHTML","__html","faArrowUpRightFromSquare","onKeyDown","onBlur","placeholder","faLink","badgeStyle","container","letterSpacing","faList","iconColor","Link","to","whiteSpace","marginRight","beautifySlug","undefined","SnippetItemContainer","SnippetHeader","TimingInfo","SnippetContent","DeleteButton","PlaybackCursor","appContext","rehydratedNotes","rehydratedAnalysis","rehydratedMeasuresAndBeats","rehydrateSnippet","paddedMeasuresAndBeats","endMeasure","paddingLength","slicedMeasures","measures","paddedMeasures","fill","snippetMidiRange","Infinity","voiceNotes","snippetMidiNumberToY","timeRange","startTime","containerWidth","toX","normalizedTime","isNaN","isCurrentlyPlaying","secondsSpan","cursorPosition","currentPlaybackTime","end","isPreviewWithoutTime","tag","transition","notes","midiNumberToY","maxWidth","analysis","measuresAndBeats","startMeasure","phraseStarts","GM_DRUM_KIT","28","31","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","getNoteRectangles","handleNoteClick","handleMouseEnter","handleMouseLeave","secondsToX","enableManualRemeasuring","isDrum","relativeNumber","voiceIndex","isActive","number","pathData","chipState","on","pitchBend","pitchBendData","noteDuration","noteStartX","pitchBendToY","timeToX","point","convertPitchBendToPathData","isHighlighted","placeItems","round","boxSizing","boxShadow","stroke","strokeWidth","Pp","Label","NARRATIVES","qa","q","k","SongNarrative","lastOpenedIndex","setLastOpenedIndex","showNarrative","setShowNarrative","narrative","paddingTop","MODULATIONS_CHAPTER_TITLE","DOUBLE_TONIC_CHAPTER_TITLE","P","C","rn","strings","chordString","trim","ct","string","tonic","text","tags","fontVariantCaps","layout","faKeyboard","citeKey","Citation","CHAPTER_GROUPS","intro","scales","CHAPTERS","titleChords","composers","pretext","FileDropBox","STRICT_NATURAL_MINOR","parseNotes","events","activeChannels","timeEvents","timebase","beats","measuresInTicks","secondsPerQuarterNote","numerator","denominator","lastBeatFractionGone","constructedBeatsInLastMeasure","lastBeatTime","lastTick","createNewBeat","timeUntil","tick","newBeatEndTime","newBeatEndTick","bpm","playTime","denominatorPower","ticks","calculateMeasureAndBeats","subtype","EVENT_META_KEY_SIGNATURE","JSON","stringify","channel","noteOn","EVENT_MIDI","param1","EVENT_MIDI_NOTE_OFF","EVENT_MIDI_NOTE_ON","param2","off","EVENT_MIDI_PITCH_BEND","uniqueMidiNumbers","sort","b","midiToRelativeNumberMap","Map","getNotes","enable","assign","ReactDOM","render","Router","basename","process","App","getElementById","CHIP_CORE","_scriptDir","currentScript","src","readyPromiseResolve","readyPromiseReject","moduleArg","arguments","Module","reject","read_","readAsync","readBinary","moduleOverrides","thisProgram","ENVIRONMENT_IS_WEB","ENVIRONMENT_IS_WORKER","scriptDirectory","locateFile","path","self","indexOf","substr","lastIndexOf","url","xhr","XMLHttpRequest","open","send","responseText","responseType","Uint8Array","response","onerror","status","wasmBinary","wasmMemory","out","err","WebAssembly","_typeof","abort","HEAP8","HEAPU8","HEAP16","HEAP32","HEAPU32","HEAPF32","HEAP64","HEAPF64","ABORT","assert","condition","updateMemoryViews","buffer","Int8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array","__ATPRERUN__","__ATINIT__","__ATPOSTRUN__","preRun","addOnPreRun","callRuntimeCallbacks","initRuntime","FS","init","initialized","ignorePermissions","TTY","postRun","addOnPostRun","cb","unshift","addOnInit","runDependencies","runDependencyWatcher","dependenciesFulfilled","addRunDependency","removeRunDependency","clearInterval","callback","what","RuntimeError","wasmBinaryFile","dataURIPrefix","isDataURI","filename","startsWith","getBinarySync","file","getBinaryPromise","binaryFile","fetch","then","credentials","instantiateArrayBuffer","imports","receiver","binary","instantiate","instance","reason","instantiateAsync","instantiateStreaming","createWasm","info","wasmImports","receiveInstance","wasmExports","ASM_CONSTS","510956","$0","callbacks","getValue","ptr","setValue","BigInt","UTF8Decoder","TextDecoder","UTF8ArrayToString","heapOrArray","idx","maxBytesToRead","endIdx","endPtr","decode","subarray","str","u0","u1","u2","String","fromCharCode","ch","UTF8ToString","___assert_fail","line","func","ExceptionInfo","excPtr","set_type","get_type","set_destructor","destructor","get_destructor","set_caught","caught","get_caught","set_rethrown","rethrown","get_rethrown","set_adjusted_ptr","adjustedPtr","get_adjusted_ptr","get_exception_ptr","___cxa_is_pointer_type","adjusted","___cxa_throw","setErrNo","___errno_location","PATH","isAbs","splitPath","exec","normalizeArray","parts","allowAboveRoot","up","last","normalize","isAbsolute","trailingSlash","dirname","dir","lastSlash","paths","join2","initRandomFill","crypto","view","getRandomValues","randomFill","PATH_FS","resolvedPath","resolvedAbsolute","cwd","TypeError","relative","from","arr","fromParts","toParts","samePartsLength","outputParts","FS_stdin_getChar_buffer","lengthBytesUTF8","len","charCodeAt","stringToUTF8Array","heap","outIdx","maxBytesToWrite","startIdx","u","intArrayFromString","stringy","dontAddNull","u8array","numBytesWritten","FS_stdin_getChar","prompt","readline","ttys","shutdown","register","dev","ops","output","registerDevice","stream_ops","stream","tty","rdev","ErrnoError","seekable","close","fsync","read","offset","get_char","bytesRead","timestamp","write","put_char","default_tty_ops","val","ioctl_tcgets","c_iflag","c_oflag","c_cflag","c_lflag","c_cc","ioctl_tcsets","optional_actions","ioctl_tiocgwinsz","default_tty1_ops","zeroMemory","address","size","alignMemory","alignment","ceil","mmapAlloc","_emscripten_builtin_memalign","MEMFS","ops_table","mount","createNode","parent","isBlkdev","isFIFO","getattr","node_ops","setattr","lookup","mknod","rename","unlink","rmdir","readdir","symlink","llseek","allocate","mmap","msync","link","readlink","chrdev","chrdev_stream_ops","isDir","contents","isFile","usedBytes","isLink","isChrdev","getFileDataAsTypedArray","expandFileStorage","newCapacity","prevCapacity","oldContents","resizeFileStorage","newSize","attr","ino","nlink","uid","gid","atime","mtime","ctime","blksize","blocks","genericErrors","old_node","new_dir","new_name","new_node","lookupNode","entries","newname","oldpath","canOwn","whence","prot","flags","allocated","byteOffset","mmapFlags","asyncLoad","noRunDep","dep","arrayBuffer","preloadPlugins","FS_handledByPreloadPlugin","byteArray","fullname","finish","Browser","handled","plugin","FS_createPreloadedFile","canRead","canWrite","dontCreateFile","preFinish","processData","createDataFile","FS_modeStringToFlags","Error","FS_getMode","IDBFS","dbs","indexedDB","_indexedDB","ret","mozIndexedDB","webkitIndexedDB","msIndexedDB","DB_VERSION","DB_STORE_NAME","syncfs","populate","getLocalSet","local","getRemoteSet","remote","reconcile","quit","values","getDB","req","db","onupgradeneeded","fileStore","transaction","objectStoreNames","contains","objectStore","createObjectStore","indexNames","createIndex","unique","onsuccess","isRealDir","toAbsolute","check","mountpoint","stat","pop","openKeyCursor","primaryKey","loadLocalEntry","lookupPath","storeLocalEntry","entry","mkdirTree","writeFile","chmod","utime","removeLocalEntry","loadRemoteEntry","store","storeRemoteEntry","put","removeRemoteEntry","dst","total","keys","e2","getTime","remove","errored","done","oncomplete","reverse","mounts","devices","streams","nextInode","nameTable","currentPath","filesystems","syncFSRequests","opts","defaults","follow_mount","recurse_count","current_path","islast","isMountpoint","mounted","follow","count","getPath","isRoot","hashName","parentid","hash","hashAddNode","name_next","hashRemoveNode","errCode","mayLookup","FSNode","destroyNode","isSocket","flagsToPermissionString","flag","perms","nodePermissions","mayCreate","mayDelete","isdir","errno","mayOpen","MAX_OPEN_FDS","nextfd","fd","getStreamChecked","getStream","createStream","FSStream","shared","defineProperties","isRead","isWrite","isAppend","closeStream","device","getDevice","major","minor","makedev","ma","mi","getMounts","completed","doCallback","pseudo","mountRoot","unmount","mkdir","dirs","mkdev","newpath","old_path","new_path","old_dir","old_dirname","new_dirname","old_name","dontFollow","lstat","lchmod","fchmod","chown","lchown","fchown","truncate","ftruncate","created","ungotten","readFiles","isClosed","getdents","seeking","bytesWritten","munmap","ioctl","cmd","arg","readFile","encoding","buf","actualNumBytes","ArrayBuffer","isView","byteLength","chdir","createDefaultDirectories","createDefaultDevices","randomBuffer","randomLeft","randomByte","createDevice","createSpecialDirectories","proc_self","createStandardStreams","ensureErrnoError","setErrno","message","constructor","code","stack","staticInit","findObject","dontResolveLastLink","analyzePath","exists","parentExists","parentPath","parentObject","createPath","part","createFile","properties","forceLoadFile","obj","isDevice","isFolder","createLazyFile","LazyUint8Array","lengthKnown","chunks","chunkOffset","chunkSize","setDataGetter","cacheLength","header","datalength","getResponseHeader","hasByteServing","usesGzip","lazyArray","chunkNum","setRequestHeader","overrideMimeType","doXHR","_length","_chunkSize","writeChunks","fn","SYSCALLS","DEFAULT_POLLMASK","calculateAt","dirfd","allowEmpty","getStreamFromFD","doStat","floor","doMsync","addr","varargs","getp","getStr","___syscall_fcntl64","___syscall_ioctl","op","termios","argp","winsize","___syscall_openat","___syscall_stat64","MAX_INT53","MIN_INT53","bigintToI53Checked","num","NaN","__munmap_js","_abort","readEmAsmArgsArray","readEmAsmArgs","sigPtr","runEmAsmFunction","argbuf","_emscripten_asm_const_int","_emscripten_memcpy_big","dest","copyWithin","getHeapMax","growMemory","pages","grow","_emscripten_resize_heap","requestedSize","oldSize","maxHeapSize","x","cutDown","overGrownHeapSize","ENV","getExecutableName","getEnvStrings","env","navigator","languages","stringToAscii","_environ_get","__environ","environ_buf","bufSize","_environ_sizes_get","penviron_count","penviron_buf_size","_fd_close","doReadv","iov","iovcnt","curr","_fd_read","pnum","_fd_seek","newOffset","doWritev","_fd_write","ALLOC_NORMAL","getCFunc","ident","writeArrayToMemory","array","stringToUTF8","outPtr","stringToUTF8OnStack","stackAlloc","ccall","returnType","argTypes","toC","cArgs","converter","stackSave","stackRestore","convertReturnValue","onDone","readMode","writeMode","createPreloadedFile","calledRun","h","g","f","a0","a1","a2","a3","a4","a5","a6","a7","run","doRun","runCaller","ready","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","handleSongClick","deps","isHiddenRoute","firestore","getFirestore","indexData","getDoc","doc","analysisKey","fSlug","midiInfo","midiDoc","midiData","midiBlob","toUint8Array","savedAnalysis","analyses","rawlProps","playbackResolve","loadMidi","EventIterator","curEvent","loopStartPos","elapsedLoops","curTick","debug","EVENT_MIDI_CONTROLLER","loop","_objectSpread","isLoopStart","isLoopEnd","isAllNotesOff","allNotesOff","track","printTrack","charArr","padStart","viz","MIDIFile","getLoopedEvents","tracks","smallestDelta","loopCount","combinedEvents","format","getFormat","tickResolution","getTickResolution","loopCountReached","eventIterator","MIDIEvents","EVENT_META","EVENT_META_SET_TEMPO","trackIterators","every","it","_trackIterators$_i","getTimeEvents","maxPlayTime","_event$delta","tempoBPM","EVENT_META_TIME_SIGNATURE","_trackIterators$_i2","_ref","_toConsumableArray","_ref2","promisify","oldSend","xhrArguments","statusText","Alert","handlePlayerError","hidden","showPlayerError","playerError","TimeSliderContainer","TimeLabel","DurationLabel","TimeSlider","_React$Component","draggedSongPositionMs","currentSongPositionMs","timer","prevProps","setInterval","_this2$props","ms","sec","getTimeLabel","getSongPos","handlePositionDrag","handlePositionDrop","HeaderContainer","NavLinks","HeaderLink","ExternalLink","ExternalLinks","useLocation","user","handleLogin","handleLogout","analysisEnabled","handleToggleAnalysis","getLinkStyle","pathPrefix","SignIn","checked","email","MessageBoxOuter","MessageBox","MessageBoxInner","dropzoneProps","isDragActive","TimelineContainer","TimelineWrapper","TimelineYear","YearMarker","YearLabel","ComposersGroup","ComposerCard","ComposerLink","h3","CountryFlag","FilterIndicator","CloseFilter","selectedCountry","setSelectedCountry","selectedStyle","setSelectedStyle","composersWithoutYear","filteredComposers","filteredYears","ComposerCardContent","styles","formatComposerName","handleCountryClick","handleStyleClick","year","API_BASE","CATALOG_PREFIX","ERROR_FLASH_DURATION_MS","FORMATS","MAX_VOICES","SOUNDFONT_MOUNTPOINT","SOUNDFONT_URL_PATH","SOUNDFONTS","label","items","AboutTop100Corpus","ReadableTextBlock","Container","FrozenNotesDisplay","JsonDisplay","pre","RangeInputs","NumberInput","CopyIndicator","visible","ErrorMessage","StyledSelect","classNamePrefix","SaveButton","unsaved","FlashOverlay","customComponents","Option","components","isSelected","selectTheme","theme","colors","primary","primary75","primary50","primary25","danger","dangerLight","neutral0","neutral5","neutral10","neutral20","neutral30","neutral40","neutral50","neutral60","neutral70","neutral80","neutral90","selectStyles","control","provided","borderColor","menu","option","singleValue","indicatorSeparator","dropdownIndicator","clearIndicator","frozenNotes","saveAnalysis","dataRange","setDataRange","inputRange","setInputRange","tagName","setTagName","setError","copyIndicatorVisible","setCopyIndicatorVisible","menuIsOpen","setMenuIsOpen","tagError","setTagError","unsavedChanges","setUnsavedChanges","flashVisible","setFlashVisible","phraseStartsUpdated","setPhraseStartsUpdated","maxMeasure","validateAndUpdateRange","newRange","parseInt","handleRangeChange","newValue","handleRangeBlur","createFrozenNotes","endTime","notesInVoices","lengthToNotes","TIME_SCALE_FACTOR","midiNumbers","deltaCoding","modulations","getModulations","initialModulation","mod","measure","reduce","latest","relevantModulations","fromEntries","frozenNotesData","snippetPhraseStarts","getPhraseStarts","exportString","resetToDefaults","saveSnippet","updatedAnalysis","snippetToDelete","selectRef","focus","copyToClipboard","clipboard","writeText","allTags","tagSet","tagCounts","countTagOccurrences","add","saveButtonRef","measureStartRef","useEffect","select","updatedSnippets","maxMeasures","updateSnippetPhraseStarts","selectedOption","actionMeta","action","handleSelectChange","options","isClearable","onMenuOpen","onMenuClose","FrozenNotesContainer","HeaderStaff","midiRange","adjustedNotes","getNoteColor","dummyMeasureSelection","selectedMeasure","selectMeasure","splitAtMeasure","mergeAtMeasure","renumberMeasure","sectionSpan","memoizedNoteRectangles","AnalysisGrid","measureSelection","showHeader","showTonalGrid","voiceRectangles","getAverageMidiNumber","sum","getMidiRange","Voice","mouseHandlers","scrollInfo","voiceName","setVoiceMask","mask","voiceMask","xToSeconds","localMidiRange","systemClickHandler","noteRectangles","frozenHeight","frozenMidiRange","DUMMY_CALLBACK","hasVisibleNotes","VoiceName","StackedSystemLayout","voiceNames","positionSeconds","measureStart","isEmbedded","seek","setNoteHeight","secondWidth","setSecondWidth","setSecondWidthCalled","prevPositionSeconds","voicesSortedByAverageMidiNumber","voice","average","sectionSpans","sections","sectionStartInPhrases","optimalSecondWidth","targetWidth","innerWidth","annotatedSections","longestSection","longest","voices","parentRef","sectionRefs","setScrollInfo","debouncedScroll","debounce","handleScroll","scrollLeft","parentDiv","sectionIndex","sectionElement","scrollIntoView","behavior","block","overflowX","overflowY","order","el","MeasureNumbers","Cursor","MERGED_VOICE_NAMES","MERGED_VOICE_MASK","MergedSystemLayout","flattenedNotes","flat","TinyLetter","frameId","cancelAnimationFrame","requestAnimationFrame","registerKeyboardHandler","unregisterKeyboardHandler","debounceSetNoteHeight","debounceSetSecondWidth","handleSecondWidthChange","newWidth","transformOrigin","CHORD_TYPES","PITCH_CLASS_TO_GUITAR_LETTER","1","2","3","4","5","6","7","8","9","10","11","absoluteRoot","chordType","InlineSnippets","setHoveredMeasuresSpan","hoveredSnippetIndex","setHoveredSnippetIndex","filteredSnippets","filterSnippetsByAccess","groupedItems","setGroupedItems","itemRefs","grouped","form","section","measureNum","content","sourceSnippet","timeoutId","prevRight","prevIndex","rect","getBoundingClientRect","prevMeasure","currentMeasure","updated","groupIndex","flexWrap","item","currentTarget","chapter","topic","snippetKey","FORCED_PANNING_LABEL","onForcedPanningChange","forcedPanning","setForcedPanning","isSingleActive","borderBottom","paddingBottom","reload","htmlFor","newVoiceMask","verticalAlign","CitationContainer","CitationIcon","CitationPopup","showCitation","setShowCitation","formattedCitation","setFormattedCitation","citationUrl","setCitationUrl","setPosition","iconRef","CITES","bibtex","authors","author","given","family","editor","issued","whereText","where","hasUrl","rightSpace","faQuoteRight","rings_tuning","alf_aeolian","tagg_loops","nobile","richards","vice_despacito","DropBox","Icon","Text","faMusic","GradientText","GradientGreen","GradientCool","GradientWarm","GradientBright","GradientDark","TextLine","setTop","updatePosition","outerComponentRect","parentElement","scrollY","closest","findTonic","countPitchClasses","bestTonic","bestValue","scores","currentValue","findFirstPhraseStart","earliestOnset","beat","setSystemLayout","prevLayout","snap","buildManualMeasuresAndBeats","manualMeasures","measureStarts","beatsPerMeasure","currentBeatsPerMeasure","previousBeatsPerMeasure","measureIndex","currentMeasureLength","newMeasure","highlightMatch","term","regex","RegExp","SearchContainer","SearchInputContainer","SearchInput","TotalCount","ResultsContainer","searchTerm","setSearchTerm","searchInputRef","totalMidis","setTotalMidis","uniqueMidis","filteredCorpora","searchTerms","toLowerCase","corpusWords","midiWords","groupedCorpora","acc","group","sortedGroups","multiCorpusGroups","singleCorpusEntries","minWidth","renderEmptySearchResults","composerMatched","matchingMidis","borderLeft","paddingLeft","NeonLink","Example","bad","Side","sideImage","Content","ChordStairsContainer","Section","allow","allowFullScreen","shortcuts","Global","Space","ArrowLeft","ArrowRight","h2","category","table","borderCollapse","tr","td","kbd","ShortcutHelp","categoryShortcuts","description","getTagsForMidi","filteredAnalysis","getSnippetTags","posttext","getComposerOrder","hasOrder","PathContainer","MenuContainer","isRawlVisible","ChapterRow","ScrollableContent","ChapterButton","CategorySection","CategoryHeader","ChaptersContainer","twoColumns","TopicContainer","TopicCard","HomeChapter","TopicMenu","TopicBubble","EjectButton","ChapterCategories","CHAPTER_CATEGORIES","order_of_chords","texture","melody","chromaticism","modulation","chord_types","rhythm_and_meter","misc","TopicContent","activeTopic","activeChapter","chapterData","handleSnippetClick","explanation","matchingSnippet","initialChapter","initialTopic","eject","history","useHistory","loading","setLoading","errorMessages","setErrorMessages","setChapterData","setActiveChapter","selectedMeasureStart","setSelectedMeasureStart","setIsRawlVisible","setActiveTopic","setLoadingSnippets","selectFirstTopicFromChapter","chapterIndex","topics","firstTopic","handleChapterSelect","processAnalyses","errors","snippetWithSlug","topicData","categoryChapters","categories","allCategorizedChapters","getMiscChapters","localeCompare","shouldUseTwoColumns","midPoint","formatCategoryLabel","handleTopicClick","ContentArea","RawlContainer","parsingResult","showAnalysisBox","saveMidi","slugify","slugToCheck","query","collection","getDocs","empty","random","substring","firestoreBlob","Bytes","fromUint8Array","docRef","addDoc","indexRef","updateDoc","arrayUnion","saveMidiFromLink","params","URLSearchParams","search","atob","decodeURIComponent","char","method","ok","alert","DropSaveForm","setTitle","setSourceUrl","titleInputRef","handleKeyPress","alt","isNoteOrPitchBendEvent","isGlobalMetaEvent","getTrackName","nameEvent","createTrackNameEvent","deltaTime","createEndOfTrackEvent","ensureTrackEnding","findUnusedChannel","usedChannels","inputData","_forcedPanning","localStorage","getItem","parseMidi","getUsedChannels","channelTracks","trackIndex","mergedEvents","globalMetaEvents","absoluteTime","enhancedEvent","originalTrack","newTracks","processedChannels","trackIndices","leftHandChannel","baseTrackName","leftHandEvents","rightHandEvents","leftName","lastMetaTime","controllerType","rightHandLastEventTime","leftHandLastEventTime","deltaTimeRight","deltaTimeLeft","isFirstTrack","cleanedRightHandEvents","cleanedLeftHandEvents","outputData","writeMidi","GM_INSTRUMENTS","GM_DRUM_KITS","16","24","25","32","require","SYSEX_GM_RESET","SEQUENCED_CONTROLLERS","META_LABELS","_defineProperty","EVENT_META_TEXT","EVENT_META_COPYRIGHT_NOTICE","EVENT_META_TRACK_NAME","EVENT_META_INSTRUMENT_NAME","EVENT_META_LYRICS","EVENT_META_MARKER","EVENT_META_CUE_POINT","printSysex","MIDIPlayer","autoBind","synth","programChangeCb","speed","skipSilence","lastProcessPlayTimestamp","lastSendTimestamp","useWebMIDI","sampleRate","channelsInUse","channelMask","channelProgramNums","textInfo","setChipStateDump","trackNames","channelToTrack","stop","load","midiFile","_this$setChipStateDum","useTrackLoops","elapsedTime","getTrackEvents","getEvents","summarizeMidiEvents","datas","getUint16","doSkipSilence","firstNoteDelay","messageDelay","numSysexEvents","firstNote","eventList","EVENT_SYSEX","EVENT_DIVSYSEX","MIDI_1PARAM_EVENTS","MIDI_2PARAMS_EVENTS","play","endCallback","playbackStartedCallback","reset","performance","resume","processPlaySynth","bufferSize","bufferStart","batchSize","msPerBatch","samplesRemaining","noteOff","EVENT_MIDI_PROGRAM_CHANGE","handleProgramChange","programChange","controlChange","synthStillActive","processPlay","throttleDelayMs","EVENT_MIDI_CHANNEL_AFTERTOUCH","EVENT_MIDI_NOTE_AFTERTOUCH","scaledPlayTime","BUFFER_AHEAD","program","_this$programChangeCb","panic","warn","_this$synth2","_this$synth","getDuration","getPosition","setOutput","getSpeed","setSpeed","setPositionSynth","setPositionWebMidi","wasPaused","numEvents","eventMap","getChannelInUse","getChannelProgramNum","match","iconv","chardet","detect","setChannelMute","isMuted","panicChannel","setUseWebMIDI","core","dummyMidiOutput","midiDevices","fileExtensions","_Player","_len","_key","_callSuper","defaultValue","dependsOn","param","hint","_tp_init","_malloc","filepathMeta","midiFilePlayer","MIDIFilePlayer","emit","range","getNumVoices","getVoiceName","_tp_note_on","_tp_note_off","_tp_pitch_bend","_tp_control_change","_tp_program_change","_tp_panic","_tp_panic_channel","_tp_render","_tp_reset","numBanks","_adl_getBanksCount","_adl_getBankNames","oplBanks","paramDefs","def","webMidiIsInitialized","transientParams","setParameter","soundfontParam","paramDef","updateSoundfontParamDefs","channels","filepath","meta","formatted","subtitle","_loadData","_asyncToGenerator","_regeneratorRuntime","mark","_callee","newTransientParams","wrap","_context","ensureWebMidiInitialized","metadataFromFilepath","getParameter","getSynthengineBasedOnFilename","getOpl3bankBasedOnFilename","_tp_set_ch10_melodic","setTransientParameter","isStopped","getBasePlayerState","abrupt","_x","_x2","fp","opl3def","opl3banks","findBank","bank","bankId","_superPropGet","suspend","pgm","instrumentName","trackName","_this4","_this5","_tp_get_polyphony","userSoundfonts","userSoundfontPath","fluidSynth","_tp_get_fluid_synth","_fluid_synth_set_chorus_on","level","remap01","depthMs","_fluid_synth_set_chorus","_this6","isTransient","_tp_set_synth_engine","ensureEmscFileWithUrl","_loadSoundfont","parseFloat","_tp_set_reverb","setFluidChorus","_tp_set_polyphony","_tp_set_bank","muteAudioDuringCall","audioNode","_EventEmitter","Player","appTogglePause","stopped","metadata","timeCount","renderTime","perfLoggingInterval","fileExtension","startMs","getMetadata","durationMs","getDurationMs","positionMs","getPositionMs","numVoices","getParamDefs","getTempo","getVoiceMask","isPaused","seekMs","processAudioInner","cost","budget","audioprocess","onaudioprocess","outputBuffer","numberOfChannels","getChannelData","system","game","artist","EventEmitter","rehydrateNotes","rehydrateAnalysis","adjustModulations","deltaDecoding","encoded","undeltaCoding","frozenAnalysis","comment","ANALYSIS_STUB","phrasePatch","getNewAnalysis","update","newModulations","sortedMeasures","lastValue","removeIdleModulations","advanceAnalysis","commitAnalysisUpdate","newAnalysis","starts","absoluteSpan","numMeasures","diff","BookContainer","Title","h1","GroupContainer","ComposersGrid","ComposerItem","ComposerWrapper","ComposerList","ul","ComposerListItem","li","ChapterSelector","ChapterTitleTooltip","isHovered","NavChordWrapper","ComposerListColumn","TwoColumnLayout","getChapterSlug","CompositionLink","onLinkClick","showNarrativeIcon","isVocal","ChapterGroup","hideHeader","ChapterArrow","useParams","hoveredChapter","setHoveredChapter","hoveredComposerSlug","setHoveredComposerSlug","handleComposerLinkClick","seekPosition","chapterTitles","selectedChapter","hoveredComposerChapter","findChapterForComposer","startIndex","endIndex","groupChapters","newSlug","NewTonicSymbol","previousTonic","modulationDiff","tonicStart","faClockRotateLeft","currentChapter","currentSnippet","initialTonic","minHeight","renderContent","Redirect","STACKED_RN_HEIGHT","KEY_TO_OFFSET","z","v","VerticalBar","MeasureBar","BeatBar","RemeasuringInput","inputRef","shiftKey","parsedValue","autoFocus","maskImage","WebkitMaskImage","Measure","displayNumber","isPhraseStart","showNonPhraseStarts","selectedPhraseStart","isLastSection","showMeasureBar","hoveredMeasuresSpan","Beat","second","TonalGrid","minX","maxX","fromIndex","toIndex","fromX","octave","modulationsArray","showBeats","relevantBars","bar","measureRenumbering","maxKey","numericKey","secondsToX__","xToSeconds__","getTonic","getSecondsMeasure","getNoteMeasure","setCurrentMidi","setAnalysis","analysisRef","systemLayout","analysisUpdate","setSelectedMeasure","selectedMeasureRef","allNotes","hoveredNote","setHoveredNote","MouseEvent","futureAnalysis","groupByPhrasesTillTheEnd","groupSize","newSections","sectionToRemove","isShift","firstPhraseStart","setPositionMs","running","animate","handleEscapePress","keyCode","targetElement","coloredNotes","notesInVoice","colorPitchClass","systemLayoutProps","absoluteMeasureStart","seekTime","borderTop","flexShrink","flexGrow","newUrl","midiDocRef","mergeAnalyses","existingAnalyses","newAnalyses","setAppElement","AppMainContent","super","keyboardHandlers","seekForRawl","seekRelativeInner","midiPlayer","transformedBuffer","setPlaybackStartedCallback","loadData","parsing","setupMidiPlayer","catch","prevState","newRawlProps","handleSetVoiceMask","startPlayback","onDrop","droppedFiles","reader","FileReader","droppedFilename","ext","extname","sf2Path","forceWrite","ensureEmscFileWithData","chipCore","forceUpdate","currUrl","playSongBuffer","readAsArrayBuffer","setItem","toggleShortcutHelp","showShortcutHelp","handler","resetMidiPlayerState","currentSongNumVoices","songUrl","handleUnlockAudioContext","audioContext","audioContextLocked","audioContextState","updatePlaybackTime","handleSequencerStateUpdate","isEjected","attachMediaKeyHandlers","contentAreaRef","errorTimer","songRequest","firebaseApp","auth","getAuth","adminDocRef","adminSnapshot","default","onAuthStateChanged","loadingUser","loadUserAnalyses","AudioContext","webkitAudioContext","latencyHint","directories","fileToDownload","pow","log2","baseLatency","gainNode","createGain","gain","playerNode","createScriptProcessor","unlockAudioContext","initChipCore","urlSlug","keySlug","valueSlug","userId","userDocRef","userSnapshot","userData","setDoc","finally","audioState","prefix","print","msg","printErr","parse","handlePlayerStateUpdate","processAudio","handleFileSystemReady","sequencerState","appState","prop","seqProp","provider","GoogleAuthProvider","signInWithPopup","signOut","userRef","userDoc","mediaSessionAudio","mediaSession","setActionHandler","seekRelative","ctrlKey","metaKey","HTMLElement","blur","HTMLInputElement","setSpeedRelative","pause","playbackState","mapSequencerStateToAppState","playerState","canPlay","transformedMidi","playFromFirestore","uint8Array","playbackTimer","prevPath","isStructuresRoute","wasStructuresRoute","rawlRoute","Route","Switch","exact","StructuresWithParams","disableClick","component","isOpen","onRequestClose","contentLabel","overlay","updateQueryString","newParams","queryString","stateUrl","replaceState","unlock","body","titlesFromMetadata","allOrNone","copyright","getFilepathFromUrl","emscRuntime","remap","fromLeft","fromRight","toLeft","toRight","Flags","CHORDS","biiio7","vio7","iiio7","vo7","bviio7","ivo7","bvio7","ii","II","II7","ii7","iii","III","iii7","iv","iv7","I","I7","vi","VI","vi7","IV","IV7","V","V7","V43","V9","V13","V7b9","Vsus4","Vsus47","Imaj7","IVmaj7","I5","IV5","V5","bVI","bVII","bvi","bvii","bIII","biii","bII","bII7","viio7","biio7","io7","It","Fr","Ger","Cad64","cad64","i64","ii65","iiø65","io","imaj7","i7","iø7","iio","iio7","iiø7","viio","IPAC","I6","i6","b2","b3","b6","b7","stackChordUp","prevRoot","currentRoot","distanceUp","distanceDown"],"mappings":"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+D,IAC1C,GAAuC,IAAvC,mCAGHk+D,EAAUjkE,KACRijE,EAAkB+B,GAClB/B,EAAkBgC,IAKtBjvD,EAAK4lC,OAAOrvC,QAAQ,CAAC8uC,EAAOsoB,KACEtoB,EAAM5vC,KAC/BmF,GAAU,YAAaA,GAASszD,EAAkBh+D,IAAI0K,EAAMic,WAG7Do3C,EAAUjkE,KAAKijE,EAAkB5nB,MAKrC,MAMM6pB,GAAa,IAAAC,WANW,CAC5Bn0B,OAAQh7B,EAAKg7B,OACb4K,OAAQqoB,IAKV,OAAO,IAAI7zC,WAAW80C,K,6TC5VXE,EAAiB,CAC5B,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,iBACA,kBAGWC,EAAe,CAC1BtkE,EAAI,iBACJiwD,EAAI,iBACJsU,GAAI,iBACJC,GAAI,iBACJC,GAAI,iBACJC,GAAI,iBACJ7hD,GAAI,k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CACA,2BACA,mBAEFS,kBAAmB,KACnBC,MAAO,WAET,CACElS,KAAM,oBACNwR,MAAO,CAAC,oCACRS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,wBACP0T,QAAS,SAEX,CACE/R,KAAM,gBACNwR,MAAO,CACL,6BACA,oDACA,+BACA,sCAEFS,kBAAmB,KACnBC,MAAO,gBACP7T,MAAO,0BACP0T,QAAS,WAEX,CACE/R,KAAM,aACNwR,MAAO,CACL,qBACA,+BACA,gCAEFS,kBAAmB,KACnBC,MAAO,wBACP7T,MAAO,qCACP0T,QAAS,OAEX,CACE/R,KAAM,eACNwR,MAAO,CACL,+DACA,sBACA,qCACA,iEACA,4BACA,yBACA,iDACA,2BACA,4BACA,yBACA,kCACA,cACA,WACA,sBACA,0CAEFS,kBAAmB,KACnBC,MAAO,wBACP7T,MAAO,0BACP0T,QAAS,OAEX,CACE/R,KAAM,UACNwR,MAAO,CAAC,0CACRS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,0BACP0T,QAAS,UAEX,CACE/R,KAAM,cACNwR,MAAO,CACL,mFACA,2CAEFS,kBAAmB,KACnBC,MAAO,oBACPH,QAAS,WAEX,CACE/R,KAAM,WACNwR,MAAO,CACL,mDACA,sCACA,qBACA,iCACA,2CACA,sCAEA,8BAEFU,MAAO,qBACP7T,MAAO,kBACP0T,QAAS,SAEX,CACE/R,KAAM,mBACNwR,MAAO,CACL,8BACA,+CACA,6CAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,eACP0T,QAAS,UAEX,CACE/R,KAAM,WACNwR,MAAO,CACL,uBACA,qBACA,uBACA,mBACA,iBACA,YAEFS,uBAAmBmH,EACnBlH,MAAO,oBACP7T,MAAO,8BACP0T,QAAS,WAEX,CAIE/R,KAAM,QACNwR,MAAO,CACL,gBACA,iEACA,kCACA,wCACA,sDAEA,gBACA,iBACA,2BACA,uDACA,uBACA,mDACA,qCACA,+DACA,+CACA,yBAEA,wDACA,kCACA,wBACA,6CAEA,wDACA,6BACA,mBACA,kBACA,qBAEA,eACA,4CACA,uBACA,wFAEA,8BACA,iDACA,+CACA,oDAEA,qBACA,uCACA,2CAGA,eAEA,0CACA,wCACA,6CACA,iDACA,8CACA,qCACA,sCACA,4FACA,2BACA,iBACA,oDACA,kDACA,wCACA,eACA,sCACA,oDAGJ,CACExR,KAAM,UACNwR,MAAO,CAAC,wBAAyB,kCAEnC,CACExR,KAAM,UACNwR,MAAO,CACL,qBACA,mDACA,uBACA,uBACA,cACA,6BACA,6CACA,yBACA,gCACA,4DAGJ,CACExR,KAAM,OACNwR,MAAO,CACL,6BACA,6CACA,wBACA,wCACA,iCACA,kCACA,qBACA,8BACA,yCACA,0BACA,iCACA,oDACA,iBACA,YACA,wCACA,qCACA,4BACA,4BACA,+BACA,oCACA,4CAGJ,CACExR,KAAM,gBACNwR,MAAO,CACL,qCACA,oEACA,4DAEFS,kBAAmB,KACnBC,MAAO,kBACP7T,MAAO,uBACP0T,QAAS,WAEX,CACE/R,KAAM,qBACNwR,MAAO,CAAC,kCAAmC,+BAC3CS,kBAAmB,KACnBC,MAAO,6BACP7T,MAAO,0BACP0T,QAAS,UAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,qDACA,mCACA,qBACA,sDACA,uBACA,0FACA,wCACA,gCACA,kCAEFS,kBAAmB,KACnBC,MAAO,+BACP7T,MAAO,8BACP0T,QAAS,OAEX,CACE/R,KAAM,gBACNwR,MAAO,CACL,sDACA,oCACA,sDACA,yBACA,+CACA,oBAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,oCACP0T,QAAS,WAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,qEACA,oIAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,8BACP0T,QAAS,SAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,mEACA,qDAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,+BACP0T,QAAS,SAEX,CACE/R,KAAM,gBACNwR,MAAO,CACL,gDACA,wCACA,wDACA,iDACA,yDACA,gFAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,8BACP0T,QAAS,SAEX,CACE/R,KAAM,QACNwR,MAAO,CACL,yCACA,qCACA,yCACA,yEAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,uBACP0T,QAAS,kBAEX,CACE/R,KAAM,aACNwR,MAAO,CAAC,UACRS,kBAAmB,KACnBF,QAAS,QACTG,MAAO,oBAET,CACElS,KAAM,kBACNwR,MAAO,CACL,sCACA,iEACA,+EACA,8CAEFS,kBAAmB,KACnBF,QAAS,QACTG,MAAO,oBAET,CACElS,KAAM,kBACNwR,MAAO,CAAC,2BACRS,kBAAmB,KACnBC,MAAO,gCACP7T,MAAO,oCACP0T,QAAS,SAEX,CACE/R,KAAM,eACNwR,MAAO,CACL,+DACA,yBACA,uDACA,+BACA,oCACA,mBACA,0DACA,uEACA,8CACA,qBACA,4BACA,2BACA,sGACA,uBACA,kCACA,wCACA,qCACA,QACA,gDAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,sCACP0T,QAAS,OAEX,CACE/R,KAAM,YACNwR,MAAO,CACL,kCACA,qCAEFS,kBAAmB,KACnBC,MAAO,UACP7T,MAAO,wBACP0T,QAAS,WAEX,CACE/R,KAAM,iBACNwR,MAAO,CAAC,0BACRS,kBAAmB,KACnBC,MAAO,wBACP7T,MAAO,wCACP0T,QAAS,WAEX,CACE/R,KAAM,WACNwR,MAAO,CACL,kEACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,mCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,oCACA,mCACA,mCACA,mCACA,mCACA,kCAEFS,kBAAmB,KACnBC,MAAO,UACP7T,MAAO,iCACP0T,QAAS,WAEX,CACE/R,KAAM,wBACNwR,MAAO,CACL,uDACA,0CAEFS,kBAAmB,KACnBC,MAAO,UACP7T,MAAO,iBACP0T,QAAS,WAEX,CACE/R,KAAM,yBACNwR,MAAO,CACL,oCACA,uCACA,mCAEFS,kBAAmB,KACnBC,MAAO,4BACP7T,MAAO,wBACP0T,QAAS,eAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,qCACA,gCACA,4BACA,8BACA,8BACA,cAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,iCACP0T,QAAS,QAEX,CACE/R,KAAM,qBACNwR,MAAO,CACL,gBACA,qGAEFS,kBAAmB,KACnBC,MAAO,oBACP7T,MAAO,uBACP0T,QAAS,cAEX,CACE/R,KAAM,YACNwR,MAAO,CACL,8BACA,yCACA,qBACA,yDACA,sDACA,uBACA,qBACA,qBACA,kBACA,kCAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,iBACP0T,QAAS,QAEX,CACE/R,KAAM,qBACNwR,MAAO,CAAC,+CACRS,kBAAmB,KACnBC,MAAO,0BACP7T,MAAO,sBACP0T,QAAS,cAEX,CACE/R,KAAM,mBACNwR,MAAO,CACL,6BACA,oCACA,yCAEFS,kBAAmB,KACnBC,MAAO,sBACP7T,MAAO,oBACP0T,QAAS,WAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,iFACA,iCACA,oCACA,6BACA,mCACA,6BAEFS,kBAAmB,KACnBC,MAAO,aACP7T,MAAO,oCACP0T,QAAS,SAEX,CACE/R,KAAM,gBACNwR,MAAO,CAAC,uBAAwB,qBAGlC,CACExR,KAAM,cACNwR,MAAO,CACL,kCACA,sBACA,oBACA,sCACA,0BACA,sBACA,aACA,4BAEFS,kBAAmB,KACnBC,MAAO,oBACP7T,MAAO,iBACP0T,QAAS,OAEX,CACE/R,KAAM,eACNwR,MAAO,CAAC,mBAAoB,oBAC5BS,kBAAmB,KACnBC,MAAO,oBACP7T,MAAO,mBACP0T,QAAS,OAEX,CACE/R,KAAM,eACNwR,MAAO,CAAC,sBAAuB,yBAC/BS,kBAAmB,KACnBC,MAAO,sBACP7T,MAAO,sBACP0T,QAAS,OAEX,CACE/R,KAAM,eACNwR,MAAO,CACL,4DACA,yDACA,wDACA,oCACA,wCACA,4DAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,mBACP0T,QAAS,SAEX,CACE/R,KAAM,WACNwR,MAAO,CACL,8BACA,mBACA,mBAEFS,kBAAmB,KACnBC,MAAO,oBACP7T,MAAO,mBACP0T,QAAS,OAEX,CACE/R,KAAM,WACNwR,MAAO,CACL,uCACA,iCACA,yCAEFS,kBAAmB,KACnBC,MAAO,qBACP7T,MAAO,mBACP0T,QAAS,UAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,sCACA,mDACA,qCACA,sCAEFS,kBAAmB,KACnBC,MAAO,oBACP7T,MAAO,kBACP0T,QAAS,UAEX,CACE/R,KAAM,cACNwR,MAAO,CACL,mDACA,2EACA,2DAEFS,kBAAmB,KACnBC,MAAO,oBACP7T,MAAO,gBACP0T,QAAS,UAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,8BACA,sCACA,sCACA,sDAEFS,kBAAmB,KACnBC,MAAO,oBACP7T,MAAO,cACP0T,QAAS,UAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,2CACA,mCACA,mCAEFS,kBAAmB,KACnBF,QAAS,UACTG,MAAO,iBAET,CACElS,KAAM,eACNwR,MAAO,CACL,8CACA,sBACA,4DACA,iBACA,uFAEFS,kBAAmB,KACnBC,MAAO,qBACP7T,MAAO,eACP0T,QAAS,SAEX,CACE/R,KAAM,qBACNwR,MAAO,CACL,4BACA,SACA,4BACA,4BACA,6BACA,qCACA,6BACA,qCACA,uDACA,oCAEFS,kBAAmB,KACnBC,MAAO,qBACP7T,MAAO,yBACP0T,QAAS,UAEX,CACE/R,KAAM,eACNwR,MAAO,CACL,yBACA,WACA,0BACA,0BACA,8BACA,yBACA,kBAEFS,kBAAmB,KACnBC,MAAO,yBACP7T,MAAO,6BACP0T,QAAS,UAEX,CACE/R,KAAM,iBACNwR,MAAO,CACL,iBACA,gCACA,gDACA,uBACA,iCACA,wCACA,iBACA,mBACA,uBACA,yCACA,mCACA,+BACA,uCACA,iCACA,yBAEFU,MAAO,oBACP7T,MAAO,gBACP0T,QAAS,iBAEX,CACE/R,KAAM,eACNwR,MAAO,CACL,8BACA,sCACA,qCACA,mCACA,uCACA,qCACA,2EACA,2CACA,uCACA,kDACA,kDACA,4CACA,+BACA,iDACA,uCACA,sCACA,sCACA,0CACA,2CACA,wCACA,uCACA,qCACA,qCACA,sCACA,oCACA,sCACA,0CACA,wCACA,mDACA,mDACA,wCACA,0CACA,wBACA,yCACA,gCACA,8CACA,6CACA,qCACA,yCACA,iDACA,sCACA,kCACA,qCACA,2CACA,mCACA,yCACA,uCACA,2CAEFS,kBAAmB,KACnBC,MAAO,oBACP7T,MAAO,UACP0T,QAAS,OAEX,CACE/R,KAAM,aACNwR,MAAO,CACL,yBACA,2BACA,uEAEFS,kBAAmB,KACnBC,MAAO,uBACP7T,MAAO,yBACP0T,QAAS,WAEX,CACE/R,KAAM,oBACNwR,MAAO,CACL,kBACA,kBACA,2FACA,4BACA,0CACA,wDACA,yCACA,6CACA,iFACA,8BACA,8CACA,uBACA,6EACA,0BACA,uBACA,iBACA,oBACA,wBACA,gBACA,uBACA,yBACA,6BACA,8BACA,8BACA,yCACA,gCACA,iDAEFS,kBAAmB,KACnBC,MAAO,4BACP7T,MAAO,wBACP0T,QAAS,OAEX,CACE/R,KAAM,eACNwR,MAAO,CACL,2BACA,uCACA,mCAEFS,kBAAmB,KACnBC,MAAO,SACPH,QAAS,aAEX,CACE/R,KAAM,cACNwR,MAAO,CACL,oCACA,yBACA,0BACA,0CAEFS,kBAAmB,KACnBC,MAAO,6CACPH,QAAS,aAEX,CACE/R,KAAM,YACNwR,MAAO,CACL,oEACA,wCACA,kBACA,oDAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,aACP0T,QAAS,OAEX,CACE/R,KAAM,cACNwR,MAAO,CACL,iCACA,uCACA,wCAEFS,kBAAmB,KACnBC,MAAO,iBACP7T,MAAO,eACP0T,QAAS,OAEX,CACE/R,KAAM,oBACNwR,MAAO,CAAC,qBAAsB,qBAAsB,sBACpDU,MAAO,sBACP7T,MAAO,kBACP0T,QAAS,OAEX,CACE/R,KAAM,iBACNwR,MAAO,CACL,6EACA,6EACA,mCACA,8BACA,8BACA,gCAEFS,kBAAmB,KACnBF,QAAS,QACTG,MAAO,oBAET,CACElS,KAAM,iBACNwR,MAAO,CACL,yBACA,sBACA,kCACA,iBACA,2CACA,kBACA,sBACA,kBACA,wBACA,0CACA,sBACA,sBACA,kBACA,0BACA,8BACA,mBACA,uBAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,sBACP0T,QAAS,WAEX,CACE/R,KAAM,aACNwR,MAAO,CACL,4BACA,wFACA,iCACA,6CACA,8CACA,mDACA,2BACA,8BACA,sCACA,oCACA,iEACA,cACA,wCACA,mDACA,4BACA,4BACA,sBACA,yBACA,iDACA,uCACA,4BACA,kDACA,gCAEFS,kBAAmB,KACnBC,MAAO,kBACP7T,MAAO,oBACP0T,QAAS,OAEX,CAEE/R,KAAM,cACNwR,MAAO,CACL,kCACA,gBACA,0BACA,wBACA,yBACA,WAEFS,kBAAmB,KACnBC,MAAO,UACP7T,MAAO,YACP0T,QAAS,OAEX,CACE/R,KAAM,aACNwR,MAAO,CAAC,uCACRS,kBAAmB,KACnBC,MAAO,sBACP7T,MAAO,sBACP0T,QAAS,OAEX,CACE/R,KAAM,mBACNwR,MAAO,CACL,wBACA,iCACA,mDACA,sDACA,uCAEFS,kBAAmB,KACnBC,MAAO,aACP7T,MAAO,wBACP0T,QAAS,OAEX,CACE/R,KAAM,aACNwR,MAAO,CACL,2BACA,kDACA,sBACA,gCAEFS,kBAAmB,KACnBC,MAAO,wBACP7T,MAAO,qBACP0T,QAAS,OAEX,CACE/R,KAAM,MACNwR,MAAO,CACL,wDACA,2DACA,oCACA,mBACA,yBACA,kDAEFS,kBAAmB,KACnBC,MAAO,aACP7T,MAAO,kBACP0T,QAAS,eAEX,CACE/R,KAAM,OACNwR,MAAO,CACL,oEACA,kDACA,iDACA,sDACA,+CACA,gEACA,kDACA,oDACA,+DACA,sDACA,qDACA,8CAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,wBACP0T,QAAS,OAEX,CACE/R,KAAM,YACNwR,MAAO,CACL,4GACA,kFAEFS,kBAAmB,KACnBF,QAAS,QACTG,MAAO,oBAET,CACElS,KAAM,cACNwR,MAAO,CACL,2CACA,iDACA,yFAEFS,kBAAmB,KACnBC,MAAO,0CACPH,QAAS,SAEX,CACE/R,KAAM,uBACNwR,MAAO,CACL,gCACA,sFACA,kBACA,sBACA,QACA,SACA,yEAEFS,kBAAmB,KACnBC,MAAO,sBACP7T,MAAO,uBACP0T,QAAS,OAEX,CACE/R,KAAM,QACNwR,MAAO,CACL,iDACA,+CAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,gBACP0T,QAAS,UAEX,CACE/R,KAAM,oBACNwR,MAAO,CACL,+EACA,6DAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,oBACP0T,QAAS,SAEX,CACE/R,KAAM,cACNwR,MAAO,CACL,qEACA,0CACA,gDACA,0DACA,gCACA,0CACA,gCAEFS,kBAAmB,KACnBC,MAAO,0BACP7T,MAAO,2BACP0T,QAAS,SAEX,CACE/R,KAAM,iBACNwR,MAAO,CACL,6BACA,yCACA,iCAEFS,kBAAmB,KACnBC,MAAO,uBACP7T,MAAO,wBACP0T,QAAS,OAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,yCACA,gDAEFS,kBAAmB,MAErB,CACEjS,KAAM,iBACNwR,MAAO,CACL,sEACA,yDAEFS,kBAAmB,KACnBC,MAAO,aACPH,QAAS,UAEX,CACE/R,KAAM,YACNwR,MAAO,CACL,+DACA,oDAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,uBACP0T,QAAS,OAEX,CACE/R,KAAM,sBACNwR,MAAO,CAAC,2CACRS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,mBACP0T,QAAS,UAEX,CACE/R,KAAM,iBACNwR,MAAO,CAAC,eAAgB,gBAAiB,0BACzCS,kBAAmB,KACnBC,MAAO,aACP7T,MAAO,8BACP0T,QAAS,MAEX,CACE/R,KAAM,aACNwR,MAAO,CACL,oCACA,kCAEFS,kBAAmB,KACnBC,MAAO,aACP7T,MAAO,wBACP0T,QAAS,MAEX,CACE/R,KAAM,uBACNwR,MAAO,CACL,kDACA,6CAEFS,kBAAmB,KACnBC,MAAO,UACP7T,MAAO,4BACP0T,QAAS,UAEX,CACE/R,KAAM,iBACNwR,MAAO,CACL,sEACA,8BACA,gCACA,oCACA,oBACA,+CACA,4BAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,2BACP0T,QAAS,OAEX,CACE/R,KAAM,cACNwR,MAAO,CAAC,aAAc,+CACtBS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,qCACP0T,QAAS,MAGX,CACE/R,KAAM,oBACNwR,MAAO,CAAC,6CACRS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,iBACP0T,QAAS,OAEX,CACE/R,KAAM,iBACNwR,MAAO,CACL,qBACA,+BACA,qCAEFS,kBAAmB,KACnBC,MAAO,kBACP7T,MAAO,+BACP0T,QAAS,aAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,sEAEFS,kBAAmB,KACnBF,QAAS,SAEX,CACE/R,KAAM,mBACNwR,MAAO,CACL,cACA,qCACA,+CACA,gDACA,iCACA,eACA,kCAEFS,kBAAmB,KACnBC,MAAO,oBACP7T,MAAO,4BACP0T,QAAS,gBAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,wCACA,sDACA,qBAEFS,kBAAmB,KACnBC,MAAO,oBACP7T,MAAO,0BACP0T,QAAS,cAEX,CACE/R,KAAM,oBACNwR,MAAO,CAAC,wBAAyB,eAAgB,mBACjDS,kBAAmB,KACnBC,MAAO,cACP7T,MAAO,sBACP0T,QAAS,QAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,4CACA,qCACA,4BACA,oCACA,sBACA,uDAEFS,kBAAmB,KACnBC,MAAO,uBACP7T,MAAO,wBACP0T,QAAS,OAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,uCACA,0DACA,gCAEFS,kBAAmB,KACnBC,MAAO,aACP7T,MAAO,qBACP0T,QAAS,UAEX,CACE/R,KAAM,oBACNwR,MAAO,CACL,+BACA,6CACA,uGACA,wBAEFS,kBAAmB,KACnBC,MAAO,+BACP7T,MAAO,0BACP0T,QAAS,UAEX,CACE/R,KAAM,WACNwR,MAAO,CAAC,yCACRS,kBAAmB,KACnBC,MAAO,kBACP7T,MAAO,iBACP0T,QAAS,UAEX,CACE/R,KAAM,mBACNwR,MAAO,CACL,mCACA,yBACA,mCACA,0DAEFS,kBAAmB,KACnBC,MAAO,sBACP7T,MAAO,kBACP0T,QAAS,UAEX,CACE/R,KAAM,YACNwR,MAAO,CAAC,wBACRS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,oBACP0T,QAAS,UAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,iDACA,uEACA,4IACA,mCACA,2BACA,kCACA,uDACA,6BACA,4BACA,mBACA,yCACA,mBACA,eACA,mCACA,kCACA,iDACA,+CAEFS,kBAAmB,KACnBC,MAAO,sBACP7T,MAAO,kBACP0T,QAAS,UAEX,CACE/R,KAAM,eACNwR,MAAO,CAAC,+CACRS,kBAAmB,KACnBC,MAAO,cACP7T,MAAO,2BACP0T,QAAS,SAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,4DACA,iEAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,oBACP0T,QAAS,OAEX,CACE/R,KAAM,sBACNwR,MAAO,CACL,0DACA,qDACA,mDACA,8DACA,+DACA,6DAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,sBACP0T,QAAS,OAEX,CACE/R,KAAM,qBACNwR,MAAO,CACL,gCACA,2EACA,cACA,0DACA,+BACA,8CACA,yCACA,iCACA,iEACA,2BACA,kCACA,+BACA,iBACA,oCACA,4BACA,iCACA,0FACA,sCACA,kDAEFS,kBAAmB,KACnBC,MAAO,wBACP7T,MAAO,8BACP0T,QAAS,UAEX,CACE/R,KAAM,aACNwR,MAAO,CACL,8DACA,oCACA,4BACA,uCAEFS,kBAAmB,KACnBC,MAAO,OACP7T,MAAO,sBACP0T,QAAS,OAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,uDACA,8CAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,sBACP0T,QAAS,WAEX,CACE/R,KAAM,iBACNwR,MAAO,CACL,qCACA,6BACA,gEACA,6FACA,+DAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,6BACP0T,QAAS,UAEX,CACE/R,KAAM,WACNwR,MAAO,CACL,iDACA,8CAEFS,kBAAmB,KACnBC,MAAO,sCACP7T,MAAO,yBACP0T,QAAS,MAEX,CACE/R,KAAM,mBACNwR,MAAO,CAAC,qCACRS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,6BACP0T,QAAS,UAEX,CACE/R,KAAM,eACNwR,MAAO,CACL,0BACA,oCACA,yCACA,6CACA,sDACA,kCACA,8BACA,4BACA,4CACA,oCACA,oCACA,wCACA,gCACA,sJAEFS,kBAAmB,KACnBC,MAAO,eACP7T,MAAO,yBACP0T,QAAS,OAEX,CACE/R,KAAM,QACNwR,MAAO,CAAC,oCACRS,kBAAmB,KACnBC,MAAO,MACP7T,MAAO,sBACP0T,QAAS,SAEX,CACE/R,KAAM,OACNwR,MAAO,CACL,sCACA,gCAEFS,kBAAmB,KACnBC,MAAO,wBACP7T,MAAO,8BACP0T,QAAS,MAEX,CACE/R,KAAM,mBACNwR,MAAO,CAAC,gDACRS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,2BACP0T,QAAS,SAEX,CACE/R,KAAM,sBACNwR,MAAO,CACL,2DACA,yBACA,8DACA,yBAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,gBACP0T,QAAS,aAEX,CACE/R,KAAM,eACNwR,MAAO,CACL,0BACA,SACA,8BACA,6BAEFS,kBAAmB,KACnBC,MAAO,kBACP7T,MAAO,iBACP0T,QAAS,WAEX,CACE/R,KAAM,gBACNwR,MAAO,CACL,6BACA,+BACA,sEAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,wBACP0T,QAAS,SAEX,CACE/R,KAAM,eACNwR,MAAO,CACL,gDACA,iCAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,yBACP0T,QAAS,SAEX,CACE/R,KAAM,YACNwR,MAAO,CACL,6EACA,4BAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,sBACP0T,QAAS,SAEX,CACE/R,KAAM,cACNwR,MAAO,CAAC,iBAAkB,oBAAqB,uBAC/CS,kBAAmB,KACnBC,MAAO,+BACP7T,MAAO,qBACP0T,QAAS,OAEX,CACE/R,KAAM,WACNwR,MAAO,CACL,gCACA,4BACA,mCACA,eAEFS,kBAAmB,KACnBC,MAAO,+BACP7T,MAAO,wBACP0T,QAAS,UAEX,CACE/R,KAAM,uBACNwR,MAAO,CACL,sBACA,UACA,qCAEFS,kBAAmB,KACnBC,MAAO,iCACP7T,MAAO,sBACP0T,QAAS,OAEX,CACE/R,KAAM,qBACNwR,MAAO,CACL,wBACA,+BACA,8BACA,oBACA,8BAEFS,kBAAmB,KACnBC,MAAO,0BACP7T,MAAO,sBACP0T,QAAS,OAEX,CACE/R,KAAM,SACNwR,MAAO,CACL,kBACA,cACA,yBACA,oBACA,8BACA,kBAEFS,kBAAmB,KACnBC,MAAO,2BACP7T,MAAO,iBACP0T,QAAS,SAEX,CACE/R,KAAM,mBACNwR,MAAO,CACL,2BACA,uBACA,0BACA,0BACA,0BACA,uBACA,wBACA,2BAEFS,kBAAmB,KACnBC,MAAO,kBACP7T,MAAO,sBACP0T,QAAS,MAEX,CACE/R,KAAM,UACNwR,MAAO,CACL,yBACA,mCACA,gCACA,kCACA,qDACA,qCACA,4CACA,oCACA,0CACA,qCACA,+CACA,4CACA,sBACA,sBAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,gBACP0T,QAAS,UAEX,CACE/R,KAAM,gBACNwR,MAAO,CACL,gBACA,oCACA,2CACA,8DACA,2BACA,qBACA,0BAEFS,kBAAmB,KACnBC,MAAO,iBACP7T,MAAO,eACP0T,QAAS,eAEX,CACE/R,KAAM,UACNwR,MAAO,CACL,iDACA,4BACA,oBACA,mDACA,qDACA,qBACA,sBACA,oBACA,yBACA,UACA,iCACA,mCAEFS,kBAAmB,KACnBC,MAAO,2BACP7T,MAAO,eACP0T,QAAS,WAEX,CACE/R,KAAM,YACNwR,MAAO,CAAC,8BACRS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,kBACP0T,QAAS,WAEX,CACE/R,KAAM,gBACNwR,MAAO,CACL,0CACA,mCACA,0FAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,wBACP0T,QAAS,OAEX,CACE/R,KAAM,iBACNwR,MAAO,CACL,kBACA,oEAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,oBACP0T,QAAS,MAEX,CACE/R,KAAM,yCACNwR,MAAO,CACL,sCACA,uEACA,6CACA,wBAEFS,kBAAmB,KACnBC,MAAO,yBACP7T,MAAO,gBACP0T,QAAS,OAEX,CACE/R,KAAM,iBACNwR,MAAO,CAAC,4BAA6B,UACrCS,kBAAmB,KACnBC,MAAO,0BACP7T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L,wFAGJ,CACExR,KAAM,gBACNwR,MAAO,CACL,8CACA,0DAEFS,kBAAmB,KACnBC,MAAO,gBACP7T,MAAO,gBACP0T,QAAS,OAEX,CACE/R,KAAM,eACNwR,MAAO,CACL,2CACA,+BACA,oDACA,qEACA,yCAEFS,kBAAmB,KACnBC,MAAO,kBACP7T,MAAO,gCACP0T,QAAS,OAEX,CACE/R,KAAM,mBACNwR,MAAO,CACL,6BACA,mCACA,sCAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,wBACP0T,QAAS,WAEX,CACE/R,KAAM,qBACNwR,MAAO,CAAC,8BACRS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,WACP0T,QAAS,UAEX,CACE/R,KAAM,qBACNwR,MAAO,CACL,4DACA,oEAEFS,kBAAmB,KACnBC,MAAO,wBACP7T,MAAO,aACP0T,QAAS,UAEX,CACE/R,KAAM,UACNwR,MAAO,CAAC,sDACRS,kBAAmB,KACnBC,MAAO,QACP7T,MAAO,uBACP0T,QAAS,SAEX,CACE/R,KAAM,oCACNwR,MAAO,CACL,yBACA,OACA,mCACA,gEACA,WACA,iCACA,+CACA,oBACA,sDACA,iCACA,SACA,wDACA,yDACA,0DACA,iDACA,cACA,sFACA,oCACA,+EACA,6DACA,wCACA,kBACA,mDAEFS,kBAAmB,KACnBC,MAAO,wBACP7T,MAAO,yBACP0T,QAAS,WAEX,CACE/R,KAAM,iBACNwR,MAAO,CACL,iDACA,oDACA,kCACA,qCACA,0CACA,uDACA,6DACA,eACA,8CACA,4BACA,eACA,mCACA,6DACA,aACA,yCACA,mEACA,gDACA,wCAEFS,kBAAmB,KACnBC,MAAO,gBACP7T,MAAO,uBACP0T,QAAS,OAEX,CACE/R,KAAM,iBACNwR,MAAO,CAAC,cAAe,oBACvBS,kBAAmB,KACnBC,MAAO,QACP7T,MAAO,qBACP0T,QAAS,aAEX,CACE/R,KAAM,aACNwR,MAAO,CACL,0BACA,2BACA,6CAEFS,kBAAmB,KACnBC,MAAO,4BACP7T,MAAO,iBACP0T,QAAS,SAEX,CACE/R,KAAM,UACNwR,MAAO,CACL,2BACA,oBACA,yBACA,oBACA,8CACA,+BACA,WACA,oBACA,4BACA,iFACA,oBACA,qBACA,mBACA,8BAEFS,kBAAmB,KACnBC,MAAO,gBACP7T,MAAO,iBACP0T,QAAS,SAEX,CACE/R,KAAM,aACNwR,MAAO,CACL,sEAEFS,kBAAmB,KACnBF,QAAS,SAEX,CACE/R,KAAM,6BACNwR,MAAO,CAAC,sCACRS,kBAAmB,KACnBC,MAAO,aACP7T,MAAO,0BACP0T,QAAS,YAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,oDACA,6CAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,kBACP0T,QAAS,SAEX,CACE/R,KAAM,eACNwR,MAAO,IAET,CACExR,KAAM,iBACNwR,MAAO,CACL,wDACA,0BACA,0EACA,qDAEFS,kBAAmB,KACnBC,MAAO,qBACP7T,MAAO,kBACP0T,QAAS,OAEX,CACE/R,KAAM,mBACNwR,MAAO,CACL,oEACA,2CACA,kCAEFS,kBAAmB,KACnBC,MAAO,wBACP7T,MAAO,wBACP0T,QAAS,SAEX,CACE/R,KAAM,WACNwR,MAAO,CACL,qCACA,4CAEFS,kBAAmB,KACnBC,MAAO,cACP7T,MAAO,mBACP0T,QAAS,SAEX,CACE/R,KAAM,mBACNwR,MAAO,CAAC,2BAA4B,2BACpCS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,wBACP0T,QAAS,UAEX,CAIE/R,KAAM,cACNwR,MAAO,CACL,qDACA,0DACA,yCAEA,iDACA,wDACA,8DACA,yDACA,8CACA,4CACA,kDACA,0DACA,sDACA,uDACA,8CACA,+EACA,+CACA,2DACA,uDACA,iDACA,8DACA,wDACA,yCACA,6CACA,yDACA,6DACA,2DACA,qDACA,sDACA,gDACA,iEACA,wDACA,0DACA,+CACA,oDACA,kDACA,yCACA,6CACA,gDACA,mEACA,qDACA,iDACA,2CACA,+CACA,uDACA,gEACA,wDACA,+CACA,gEAEFS,kBAAmB,KACnBC,MAAO,MACP7T,MAAO,6CACP0T,QAAS,UAEX,CACE/R,KAAM,cACNwR,MAAO,CACL,gDACA,sBACA,kEAEFS,kBAAmB,KACnBF,QAAS,MACTG,MAAO,cAET,CACElS,KAAM,YACNwR,MAAO,CAAC,cAAe,eAAgB,iBAEzC,CACExR,KAAM,gBACNwR,MAAO,CACL,kDACA,4BACA,mDACA,wCACA,wBAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,sBACP0T,QAAS,SAEX,CACE/R,KAAM,eACNwR,MAAO,CACL,gEACA,wDACA,4DAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,uBACP0T,QAAS,UAEX,CACE/R,KAAM,iBACNwR,MAAO,CAAC,2CACRS,kBAAmB,KACnBC,MAAO,OACPH,QAAS,OAEX,CACE/R,KAAM,iBACNwR,MAAO,CACL,2BACA,yBACA,2BACA,uEACA,sDACA,2DACA,6CACA,4CACA,2FACA,iDACA,qCACA,kBACA,mCACA,mBACA,kBACA,aACA,uBACA,wEACA,2BACA,eACA,0BACA,oCAEFU,MAAO,OAEP7T,MAAO,iBACP0T,QAAS,OAEX,CAEE/R,KAAM,eACNwR,MAAO,CACL,gEACA,4EACA,2DACA,kCACA,8EACA,mCACA,sEACA,8DACA,sEAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,WACP0T,QAAS,UAEX,CACE/R,KAAM,sBACNwR,MAAO,CACL,kCACA,+DACA,uDACA,wDAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,yBACP0T,QAAS,WAEX,CACE/R,KAAM,iBACNwR,MAAO,CACL,mCACA,yCAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,eACP0T,QAAS,UAEX,CACE/R,KAAM,iBACNwR,MAAO,CACL,6BACA,mBACA,+EACA,aACA,mFAEFS,kBAAmB,KACnBC,MAAO,aACP7T,MAAO,wBACP0T,QAAS,OAEX,CACE/R,KAAM,mBACNwR,MAAO,CACL,wCACA,wCACA,qCACA,qEACA,mCAEFS,kBAAmB,KACnBC,MAAO,OACP7T,MAAO,cACP0T,QAAS,OAEX,CACE/R,KAAM,oBACNwR,MAAO,CAAC,2DACRS,kBAAmB,KACnBC,MAAO,OACP7T,MAAO,cACP0T,QAAS,OAEX,CACE/R,KAAM,gBACNwR,MAAO,CACL,gBACA,yBACA,kFACA,qDACA,4DACA,oEACA,qDACA,sBACA,qBACA,6CACA,mBACA,uBACA,sBACA,8CACA,6DAEFU,MAAO,gBAEP7T,MAAO,iBAET,CACE2B,KAAM,mBACNwR,MAAO,CACL,kCACA,+BACA,aAIJ,CACExR,KAAM,6BACNwR,MAAO,CAAC,wCACRS,kBAAmB,KACnBC,MAAO,8BACPH,QAAS,OAEX,CACE/R,KAAM,cACNwR,MAAO,CACL,iCACA,+BACA,sBACA,sBACA,mBACA,oCACA,oCAEFS,kBAAmB,KACnBC,MAAO,qBACP7T,MAAO,2BACP0T,QAAS,OAEX,CACE/R,KAAM,QACNwR,MAAO,CACL,+BACA,4EAEFU,MAAO,YACP7T,MAAO,qBAGT,CACE2B,KAAM,gBACNwR,MAAO,CAAC,4CAA6C,sBACrDS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,cACP0T,QAAS,UAEX,CACE/R,KAAM,sBACNwR,MAAO,CACL,qCACA,SACA,mCACA,kCACA,2CACA,+BACA,+BACA,UACA,mBAEFS,kBAAmB,KACnBC,MAAO,qBACP7T,MAAO,qBACP0T,QAAS,QAEX,CACE/R,KAAM,cACNwR,MAAO,CACL,kBACA,mBACA,wBACA,wBACA,qBAEFS,kBAAmB,KACnBC,MAAO,wBACP7T,MAAO,sBACP0T,QAAS,WAEX,CACE/R,KAAM,iBACNwR,MAAO,CACL,UACA,mBACA,UACA,mBACA,eACA,QACA,gBAEFS,kBAAmB,KACnBC,MAAO,kBACP7T,MAAO,gBACP0T,QAAS,OAEX,CACE/R,KAAM,iBACNwR,MAAO,CACL,oCACA,0BACA,iCACA,iDAEFS,kBAAmB,KACnBC,MAAO,uBACP7T,MAAO,2BACP0T,QAAS,UAEX,CACE/R,KAAM,QACNwR,MAAO,CAAC,uCACRS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,WACP0T,QAAS,UAEX,CACE/R,KAAM,mBACNwR,MAAO,CACL,+CACA,qBACA,oCACA,iCACA,+CACA,4BAEFS,kBAAmB,KACnBC,MAAO,yBACP7T,MAAO,kBACP0T,QAAS,OAEX,CACE/R,KAAM,iBACNwR,MAAO,CACL,qDACA,wFACA,uBACA,6CACA,iDACA,kEACA,0CAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,sBACP0T,QAAS,MAEX,CACE/R,KAAM,eACNwR,MAAO,CACL,wCACA,8CACA,gCAEFS,kBAAmB,KACnBC,MAAO,wBACP7T,MAAO,wBACP0T,QAAS,UAEX,CACE/R,KAAM,mBACNwR,MAAO,CACL,2CACA,yBACA,yCACA,8CACA,qDACA,oDACA,6CACA,iCACA,yDACA,gCACA,2DACA,qFACA,oDACA,0DACA,4EACA,8CACA,0BAEFS,kBAAmB,KACnBC,MAAO,wBACP7T,MAAO,sBACP0T,QAAS,UAEX,CACE/R,KAAM,qBACNwR,MAAO,CACL,mCACA,sCACA,mCACA,0BACA,sDACA,yBACA,sCACA,8CACA,gCACA,4CAEFS,kBAAmB,KACnBC,MAAO,sBACP7T,MAAO,sBACP0T,QAAS,UAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,sBACA,mCACA,4BACA,6BACA,gCACA,wCACA,4CACA,oCACA,6BAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,uBACP0T,QAAS,UAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,0BACA,sBACA,4BACA,OACA,iCAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,eACP0T,QAAS,UAEX,CACE/R,KAAM,SACNwR,MAAO,CACL,0CACA,+CACA,uCAIJ,CACExR,KAAM,iBACNwR,MAAO,CACL,qDACA,wCACA,+EAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,sBACP0T,QAAS,OAEX,CACE/R,KAAM,iBACNwR,MAAO,CACL,4BACA,0EACA,uDAEFS,kBAAmB,KACnBC,MAAO,cACP7T,MAAO,iBACP0T,QAAS,OAEX,CACE/R,KAAM,iBACNwR,MAAO,CACL,uBACA,sBACA,+BACA,0CACA,cACA,YACA,6BACA,uCAEFU,MAAO,OACP7T,MAAO,eACP0T,QAAS,OAEX,CACE/R,KAAM,aACNwR,MAAO,CACL,0BACA,sBACA,qBAEFS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,mBACP0T,QAAS,OAEX,CACE/R,KAAM,iBACNwR,MAAO,CACL,sCACA,sBACA,8BACA,qCACA,gBACA,iBACA,4BACA,mDACA,uDACA,0CAEFS,kBAAmB,KACnBC,MAAO,WACP7T,MAAO,iCACP0T,QAAS,OAEX,CACE/R,KAAM,oBACNwR,MAAO,CACL,wCACA,0CACA,uCAEFS,kBAAmB,KACnBC,MAAO,WACP7T,MAAO,qBACP0T,QAAS,UAEX,CACE/R,KAAM,iBACNwR,MAAO,CAAC,gBACRS,kBAAmB,KACnBC,MAAO,cACP7T,MAAO,eACP0T,QAAS,UAEX,CACE/R,KAAM,UACNwR,MAAO,CAAC,+BAAgC,4BACxCS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,4BACP0T,QAAS,MAEX,CACE/R,KAAM,eACNwR,MAAO,CACL,2BACA,mDAEFS,kBAAmB,KACnBC,MAAO,OACP7T,MAAO,4BACP0T,QAAS,OAEX,CACE/R,KAAM,cACNwR,MAAO,CACL,iBACA,kCACA,oCACA,wCACA,0BACA,0CACA,+CAEFS,kBAAmB,KACnBC,MAAO,cACP7T,MAAO,qBACP0T,QAAS,WAEX,CACE/R,KAAM,aACNwR,MAAO,CAAC,iBACRS,kBAAmB,KACnBC,MAAO,mBACPH,QAAS,OAEX,CACE/R,KAAM,iBACNwR,MAAO,CACL,yHACA,0CAEFS,kBAAmB,KACnBC,MAAO,mBACPH,QAAS,SAEX,CACE/R,KAAM,YACNwR,MAAO,CACL,wCACA,6CACA,yDAEFS,kBAAmB,KACnBC,MAAO,iCACP7T,MAAO,oBACP0T,QAAS,sBAEX,CACE/R,KAAM,iBACNwR,MAAO,CAAC,qBACRS,kBAAmB,KACnBC,MAAO,OACP7T,MAAO,eACP0T,QAAS,OAEX,CACE/R,KAAM,gBACNwR,MAAO,CACL,gCACA,4BACA,mCACA,0BAEFS,kBAAmB,KACnBC,MAAO,OACP7T,MAAO,aACP0T,QAAS,sBAEX,CACE/R,KAAM,gBACNwR,MAAO,CACL,yCACA,uBACA,oEACA,mCACA,uDAEFS,kBAAmB,KACnBC,MAAO,OACP7T,MAAO,iCACP0T,QAAS,SAEX,CACE/R,KAAM,cACNwR,MAAO,CAAC,4BAA6B,yBACrCS,kBAAmB,KACnBC,MAAO,OACP7T,MAAO,oBACP0T,QAAS,OAEX,CACE/R,KAAM,gBACNwR,MAAO,CACL,wCACA,6BACA,mCACA,+BACA,0DACA,iDACA,yCACA,4EACA,mDACA,kDACA,2BACA,aACA,iCACA,0FACA,oDAGJ,CACExR,KAAM,gBACNwR,MAAO,CACL,0CACA,wDACA,2BACA,iBACA,oCACA,yBAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,qBACP0T,QAAS,OAEX,CACE/R,KAAM,iBACNwR,MAAO,CAAC,uCACRS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,qBACP0T,QAAS,WAEX,CACE/R,KAAM,gBACNwR,MAAO,CACL,qCACA,0EACA,0CACA,2CACA,wCACA,8BACA,oBACA,oFACA,wFACA,aACA,4CACA,+BACA,kCACA,gCACA,4EACA,wDAEFS,kBAAmB,KACnBC,MAAO,aACP7T,MAAO,wBACP0T,QAAS,OAEX,CACE/R,KAAM,oBACNwR,MAAO,CACL,oDACA,yCACA,iEAEFS,kBAAmB,KACnBC,MAAO,QACP7T,MAAO,qCACP0T,QAAS,OAEX,CACE/R,KAAM,sBACNwR,MAAO,CACL,mEACA,6DAEFS,kBAAmB,KACnBC,MAAO,6BACP7T,MAAO,8BACP0T,QAAS,OAEX,CACE/R,KAAM,cACNwR,MAAO,CACL,sBACA,sCACA,wBACA,oBACA,wBAEA,yBACA,6BACA,0BAEFS,kBAAmB,KACnBC,MAAO,OACP7T,MAAO,0BACP0T,QAAS,OAEX,CACE/R,KAAM,mBACNwR,MAAO,CACL,kCACA,sBACA,sCACA,kCACA,+BACA,0BACA,sCACA,+CAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,yBACP0T,QAAS,OAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,yDACA,8BACA,gEACA,6BACA,2BACA,iCACA,2BACA,mCACA,4BACA,kCACA,8BACA,8CACA,iCACA,4BACA,sCACA,qCACA,6BAEFS,kBAAmB,KACnBC,MAAO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,MAAO,WACP0T,QAAS,WAEX,CACE/R,KAAM,UACNwR,MAAO,CACL,gDACA,gCAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,qCACP0T,QAAS,SAEX,CACE/R,KAAM,OACNwR,MAAO,CACL,gDACA,iBACA,gBACA,aACA,oBACA,sBACA,uBACA,sBACA,mBACA,mBACA,2DACA,qBACA,wBACA,oBACA,kBACA,oBACA,aACA,gBACA,kBACA,kBACA,yBACA,yBACA,mCACA,gBACA,sCACA,kBACA,kBACA,kBACA,eACA,4BACA,yBACA,6BACA,wCACA,0BACA,mBACA,uDACA,eACA,oCACA,qBACA,sBACA,wBACA,wBACA,kFACA,uBACA,gBACA,cACA,oBACA,eACA,6CACA,WACA,YACA,uBACA,oBACA,aACA,sBACA,cACA,gBACA,gBACA,gBACA,kBACA,+BACA,kBACA,wBACA,cACA,cACA,wBACA,sBACA,kBACA,iBACA,mBACA,gBACA,gBACA,sBACA,0BACA,kCACA,uBACA,sBACA,aACA,eACA,eACA,cACA,kBACA,iBACA,mBACA,mBACA,mBACA,wBACA,8BACA,4BACA,+BACA,4BACA,8BACA,qBACA,0BACA,eACA,qBACA,sBACA,kCACA,wBACA,gBACA,qCACA,4CACA,sBACA,qBACA,iBACA,qBACA,mBACA,kBACA,oBACA,oBACA,oBACA,gBACA,gBACA,8BACA,oBACA,uBACA,YACA,6BACA,UACA,YACA,WACA,aACA,0BACA,iBACA,iBAEFO,QAAS,YAEX,CACE/R,KAAM,qBACNwR,MAAO,CAAC,6DACRS,kBAAmB,KACnBF,QAAS,UACTG,MAAO,YACP7T,MAAO,YAET,CACE2B,KAAM,kBACNwR,MAAO,CACL,yEACA,oEAEFS,kBAAmB,KACnB5T,MAAO,eAET,CACE2B,KAAM,eACNwR,MAAO,CACL,0CACA,qCAEFS,kBAAmB,KACnBC,MAAO,mBACPH,QAAS,MAEX,CACE/R,KAAM,wBACNwR,MAAO,CACL,+BACA,+DAEFS,kBAAmB,KACnBF,QAAS,eACTG,MAAO,YACP7T,MAAO,QAET,CACE2B,KAAM,qBACNwR,MAAO,CACL,4CACA,6BACA,2CACA,2CACA,6CAEFS,kBAAmB,KACnBC,MAAO,sCACP7T,MAAO,kBACP0T,QAAS,UAEX,CACE/R,KAAM,oBACNwR,MAAO,CACL,wCACA,oDACA,YAEFS,kBAAmB,KACnBC,MAAO,aACP7T,MAAO,wBACP0T,QAAS,WAEX,CACE/R,KAAM,YACNwR,MAAO,CACL,6BACA,4BACA,6CACA,iCAEFS,kBAAmB,KACnBC,MAAO,sBACP7T,MAAO,wBACP0T,QAAS,MAEX,CACE/R,KAAM,YACNwR,MAAO,CAAC,oBAAqB,2CAC7BS,uBAAmBmH,EACnBlH,MAAO,aACP7T,MAAO,kBACP0T,aAASqH,GAEX,CACEpZ,KAAM,oBACNwR,MAAO,CAAC,0CACRS,uBAAmBmH,EACnBlH,MAAO,aACP7T,MAAO,sBACP0T,aAASqH,GAEX,CACEpZ,KAAM,OACNwR,MAAO,CAAC,0BACRS,uBAAmBmH,EACnBlH,MAAO,gBACP7T,MAAO,sBACP0T,aAASqH,GAEX,CACEpZ,KAAM,gBACNwR,MAAO,CAAC,sCACRS,kBAAmB,KACnBC,MAAO,OACP7T,MAAO,WACP0T,QAAS,OAEX,CACE/R,KAAM,iBACNwR,MAAO,CAAC,uCACRS,kBAAmB,KACnBC,MAAO,mBACP7T,MAAO,qBACP0T,QAAS,YAEX,CACE/R,KAAM,aACNwR,MAAO,CACL,2DACA,qCAEFS,kBAAmB,KACnBC,MAAO,UACPH,QAAS,OAEX,CACE/R,KAAM,gBACNwR,MAAO,CACL,6BACA,4DACA,kCAEFS,kBAAmB,KACnBC,MAAO,wBACP7T,MAAO,wBACP0T,QAAS,WAEX,CACE/R,KAAM,UACNwR,MAAO,CACL,2BACA,8CAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,UACP0T,QAAS,SAEX,CACE/R,KAAM,WACNwR,MAAO,CACL,wBACA,6CACA,oBACA,sBAEFS,kBAAmB,KACnBC,MAAO,kCACPH,QAAS,MAEX,CACE/R,KAAM,cACNwR,MAAO,CACL,wBACA,oCACA,oCAEFS,kBAAmB,KACnBC,MAAO,YACPH,QAAS,OAEX,CACE/R,KAAM,aACNwR,MAAO,CACL,0CACA,kCAEFS,kBAAmB,KACnBC,MAAO,MACPH,QAAS,OAEX,CACE/R,KAAM,SACNwR,MAAO,CACL,wBACA,gBACA,yBACA,2BAEFS,kBAAmB,KACnBC,MAAO,aACPH,QAAS,SAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,qDACA,gCAEFS,kBAAmB,KACnBC,MAAO,aACPH,QAAS,aAEX,CACE/R,KAAM,mBACNwR,MAAO,CACL,uCACA,sEACA,2CAEFO,QAAS,SAEX,CACE/R,KAAM,qBACNwR,MAAO,CACL,gDACA,iCACA,sCAEFS,kBAAmB,KACnBC,MAAO,mBACPH,QAAS,aAEX,CACE/R,KAAM,uBACNwR,MAAO,CACL,8DACA,+DAEFS,kBAAmB,KACnBC,MAAO,WACPH,QAAS,YAEX,CACE/R,KAAM,aACNwR,MAAO,CACL,4CACA,wBAEFO,QAAS,QACTG,MAAO,QACPD,kBAAmB,MAErB,CACEjS,KAAM,gBACNwR,MAAO,CAAC,oBAAqB,0BAC7BS,kBAAmB,KACnBC,MAAO,mBACPH,QAAS,SAEX,CACE/R,KAAM,kBACNwR,MAAO,CACL,8CACA,sEAEFS,kBAAmB,KACnBF,QAAS,QACTG,MAAO,oBAET,CACElS,KAAM,eACNwR,MAAO,CACL,yCACA,8DACA,yDAEFS,kBAAmB,KACnBF,QAAS,QACTG,MAAO,oBAET,CACElS,KAAM,mBACNwR,MAAO,CACL,4BACA,6CACA,aACA,kBAEFS,kBAAmB,KACnBF,QAAS,QACTG,MAAO,oBAET,CACElS,KAAM,aACNwR,MAAO,CACL,mCACA,uCACA,8BACA,kBAEFS,kBAAmB,KACnBC,MAAO,mBACPH,QAAS,SAEX,CACE/R,KAAM,EAAAkX,uBACNy9C,SAAU,UACVnjD,MAAO,CACL,qBACA,6DACA,aACA,yBACA,WACA,2CACA,yBACA,uCACA,iCACA,4CAEA,aACA,eACA,yCACA,mBACA,0CACA,6BACA,kCACA,qBACA,+BACA,6BAEA,6CACA,kBACA,wDACA,mBACA,sBACA,2DACA,qBACA,kBACA,qBACA,iCAEA,kEACA,kCACA,gEACA,iDACA,wBACA,wBACA,+BACA,wBACA,mBACA,sBAEA,2DACA,uBACA,aACA,0BACA,oCACA,sBACA,2BACA,oCAEA,oBAEA,oCACA,8BACA,4BACA,wBACA,0CACA,4CACA,uBACA,gDACA,4CACA,+CAEA,0CACA,wCACA,aACA,mCACA,aACA,+BAEA,aACA,2CACA,2BACA,yCAEA,sBACA,gBACA,4EACA,2CACA,iBACA,0BACA,gCACA,4BACA,mCACA,sBAEA,iCACA,sDACA,gBACA,2BACA,gCACA,4BACA,4CACA,mCACA,sCACA,qBAEA,kBACA,mCACA,yFACA,wBACA,oDACA,8BACA,gCACA,oBACA,gDACA,gCACA,qBAGJ,CACExR,KAAM,QACNwR,MAAO,CACL,+CACA,mCACA,gCAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,WACP0T,QAAS,oBAEX,CACE/R,KAAM,gBACNwR,MAAO,CAAC,wBAAyB,wBACjCS,kBAAmB,KACnBC,MAAO,MACPH,QAAS,OAEX,CACE/R,KAAM,WACNwR,MAAO,CACL,kDACA,4BACA,2CACA,yBAEFS,kBAAmB,KACnBC,MAAO,mBACPH,QAAS,OAEX,CACE/R,KAAM,aACNwR,MAAO,CAAC,8BAA+B,0BACvCS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,WACP0T,QAAS,UAEX,CACE/R,KAAM,aACNwR,MAAO,CACL,0BACA,wBACA,uDACA,sBAEFS,kBAAmB,KACnBC,MAAO,MACPH,QAAS,MAEX,CACE/R,KAAM,4CACNwR,MAAO,CACL,uDACA,6BAIJ,CACExR,KAAM,8BACNwR,MAAO,CACL,YACA,eACA,wDAEA,wBAEA,sCACA,gCACA,oCACA,oFACA,0CACA,yBACA,qBACA,gCACA,gCACA,mCACA,yCACA,6BACA,eACA,mDACA,0BACA,qCACA,8BACA,mBAEA,oBACA,qDAIJ,CACExR,KAAM,YACNwR,MAAO,CACL,gDACA,oDACA,6DACA,wBACA,8BAEFS,kBAAmB,KACnBC,MAAO,YACP7T,MAAO,UACP0T,QAAS,SAGX,CACE/R,KAAM,WACNwR,MAAO,CACL,eACA,eACA,aACA,iBACA,0BAIJ,CACExR,KAAM,kBACNwR,MAAO,CAAC,uBACRU,MAAO,WACPD,kBAAmB,KACnBF,QAAS,OAGX,CACE/R,KAAM,cACNwR,MAAO,CACL,4CACA,0CAEFS,kBAAmB,KACnBF,QAAS,eAEX,CACE/R,KAAM,mBACNwR,MAAO,CAAC,qBAAsB,mCAC9BS,kBAAmB,KACnBC,MAAO,sCAET,CACElS,KAAM,QACNwR,MAAO,CACL,6EACA,+DACA,cACA,0DACA,kDAEFS,kBAAmB,KACnB5T,MAAO,YACP0T,QAAS,WAGX,CACE/R,KAAM,WACNwR,MAAO,CACL,4BAEA,oBAEA,sCACA,oBACA,sBACA,+BAEA,iCACA,uBACA,kBACA,kCAEA,0BAEA,oBACA,eAEA,6BAEA,gBACA,8BACA,gCAEA,uCACA,mBAEA,mBAEA,oBACA,iBAEA,mBAEA,mBAEA,SAEA,sBACA,iEACA,wCAEA,qBAEA,8BAEA,yBAEA,mBACA,mCACA,yBACA,yBAEA,qBAEA,UAEA,iDAEA,6BACA,QAEA,gDAEA,2BACA,2BACA,uBACA,yBACA,eACA,qBAEA,eACA,mBACA,kBACA,8CACA,uBACA,yBACA,yBACA,6BACA,UACA,aAEA,4BAEA,qBAEA,uBAEA,mCACA,6BACA,iDACA,8CACA,yBACA,+BAEA,gBACA,gBAEA,uBACA,eACA,iBACA,WACA,iBAEA,yBACA,yBACA,uCAEA,uCACA,qBACA,wBAEA,oDACA,6CACA,mCACA,6BAEA,uDAEA,4BACA,WACA,kCACA,uDACA,4CAEA,SACA,kBACA,yBAEA,UACA,qBACA,uBACA,wCACA,iDACA,+DACA,qCACA,cAEA,2BACA,8CACA,yCACA,6BACA,uEACA,kCACA,aAEA,sBACA,uBACA,gBACA,cACA,yBAEA,oCACA,qBACA,gBACA,aACA,wBAEA,iBACA,eAEA,WACA,mCAEA,oCAEA,cACA,qBACA,qCACA,gCACA,WAEA,iBACA,qCACA,kCACA,0CACA,sCACA,cACA,sCACA,2CACA,8CACA,uEACA,sDACA,sCACA,oCACA,gFACA,4DA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","file":"static/js/main.66462558.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([252,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { faGuitar, faUserGraduate } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as React from \"react\";\nimport styled, { css, keyframes } from \"styled-components\";\nimport { useLocalStorage } from \"usehooks-ts\";\nimport { playArpeggiatedChord } from \"../../../sampler/sampler\";\nimport { PITCH_CLASS_TO_LETTER } from \"../AnalysisGrid\";\nimport { TOP_100_COMPOSERS } from \"../top100Composers\";\nimport ChordStairs from \"./ChordStairs\";\nimport { CHROMATIC_CHORDS, MAJOR_MODE, MINOR_MODE, Mode } from \"./chords\";\nconst BLACK_KEYS = [1, 3, -1, 6, 8, 10, -1];\nconst WHITE_KEYS = [0, 2, 4, 5, 7, 9, 11];\n\nconst BLACK_KEY_LABELS = [\"b2\", \"b3\", -1, \"#4\", \"b6\", \"b7\", -1];\n\nconst KEY_WIDTH = 26;\nconst KEY_HEIGHT = 70;\nconst ROW_DISTANCE = 40;\nconst PADDING = 2.5;\nconst INLINE_KEY_WIDTH = 10;\nconst INLINE_KEY_HEIGHT = 24;\nconst INLINE_ROW_DISTANCE = 15;\nconst INLINE_PADDING = 2;\n\nconst keyPress = keyframes`\n  0% {\n    transform: scale(1);\n  }\n  50% {\n    transform: scale(0.95);\n  }\n  100% {\n    transform: scale(1);\n  }\n`;\n\nconst PianoKey = styled.div<{ isPlaying?: boolean; isEnabled?: boolean }>`\n  position: absolute;\n  user-select: none;\n  font-size: 16px;\n  font-weight: 700;\n  text-align: center;\n  vertical-align: bottom;\n  color: white;\n  text-shadow:\n    0.5px 0.5px 0px black,\n    -0.5px 0.5px 0px black,\n    0.5px -0.5px 0px black,\n    -0.5px -0.5px 0px black;\n  display: grid;\n  align-content: end;\n  box-sizing: border-box;\n  transform-origin: top;\n  opacity: ${(props) => (props.isEnabled ? 1 : 0)};\n  ${(props) =>\n    props.isPlaying &&\n    css`\n      animation: ${keyPress} 0.2s ease-out;\n    `}\n`;\n\nconst FoldButton = styled.button`\n  position: absolute;\n  bottom: 0px;\n  right: 0px;\n  border: none;\n  font-size: 18px;\n  cursor: pointer;\n  width: 25px;\n  height: 25px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 100001;\n  background: #ccc;\n  color: black;\n  &:hover {\n    background: #444;\n  }\n`;\n\nconst ScaleLabel = styled.span`\n  cursor: pointer;\n  padding: 2px 6px;\n  border-radius: 4px;\n  transition: background-color 0.2s;\n  color: gray;\n\n  &:hover {\n    color: white;\n  }\n`;\n\nconst ToggleContainer = styled.div`\n  position: absolute;\n  top: 5px;\n  left: 5px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  z-index: 3;\n  padding: 2px;\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.2);\n`;\n\nconst ToggleIcon = styled.div<{ active: boolean }>`\n  color: ${(props) => (props.active ? \"white\" : \"#666\")};\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst ToggleSlider = styled.div`\n  width: 32px;\n  height: 16px;\n  background: #444;\n  border-radius: 8px;\n  position: relative;\n  cursor: pointer;\n  transition: background-color 0.2s;\n\n  &:hover {\n    background: #555;\n  }\n`;\n\nconst SliderKnob = styled.div<{ isRight: boolean }>`\n  width: 12px;\n  height: 12px;\n  background: white;\n  border-radius: 50%;\n  position: absolute;\n  top: 2px;\n  left: 2px;\n  transition: transform 0.2s;\n  transform: translateX(${(props) => (props.isRight ? \"16px\" : \"0\")});\n`;\n\nexport const PianoLegend: React.FC<{\n  currentTonic?: number;\n  inline?: boolean;\n  enabledPitches?: number[];\n}> = ({\n  currentTonic = 0,\n  inline = false,\n  enabledPitches = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],\n}) => {\n  const [playingNotes, setPlayingNotes] = React.useState<Set<number>>(\n    new Set(),\n  );\n\n  const playNote = (note: number) => {\n    if (!inline && enabledPitches.includes(note)) {\n      const transposedNote = note + currentTonic;\n      playArpeggiatedChord([transposedNote]);\n      setPlayingNotes(new Set([...playingNotes, note]));\n      setTimeout(() => {\n        setPlayingNotes((prev) => {\n          const next = new Set(prev);\n          next.delete(note);\n          return next;\n        });\n      }, 200);\n    }\n  };\n\n  const keyWidth = inline ? INLINE_KEY_WIDTH : KEY_WIDTH;\n  const keyHeight = inline ? INLINE_KEY_HEIGHT : KEY_HEIGHT;\n  const rowDistance = inline ? INLINE_ROW_DISTANCE : ROW_DISTANCE;\n  const padding = inline ? INLINE_PADDING : PADDING;\n\n  return (\n    <div style={{ backgroundColor: \"black\", padding: \"0\", zIndex: 100000 }}>\n      <div\n        style={{\n          position: \"relative\",\n          width: WHITE_KEYS.length * (keyWidth + padding),\n          height: keyHeight + rowDistance,\n        }}\n      >\n        {[0, 1, 2, 3, 4, 5, 6].map((i) => (\n          <React.Fragment key={i}>\n            <PianoKey\n              key={`w_${i}`}\n              className={\n                (inline || enabledPitches.includes(WHITE_KEYS[i])) &&\n                `noteColor_${[WHITE_KEYS[i]]}_colors`\n              }\n              isEnabled={inline || enabledPitches.includes(WHITE_KEYS[i])}\n              isPlaying={playingNotes.has(WHITE_KEYS[i])}\n              style={{\n                top: rowDistance,\n                left: (keyWidth + padding) * i,\n                width: keyWidth,\n                height: keyHeight,\n                borderRadius: inline ? \"3px\" : \"5px\",\n                cursor:\n                  inline || enabledPitches.includes(WHITE_KEYS[i])\n                    ? \"pointer\"\n                    : \"default\",\n              }}\n              onClick={() => playNote(WHITE_KEYS[i])}\n            >\n              <div style={{ position: \"relative\" }}>\n                {!inline && (\n                  <>\n                    {i === 0 && (\n                      <span\n                        style={{\n                          position: \"absolute\",\n                          bottom: \"18px\",\n                          left: \"2px\",\n                          color: \"black\",\n                          fontWeight: \"bold\",\n                          width: \"0\",\n                          overflow: \"visible\",\n                          textAlign: \"center\",\n                          fontSize: \"14px\",\n                          textShadow: \"none\",\n                          zIndex: 3,\n                        }}\n                      >\n                        {PITCH_CLASS_TO_LETTER[currentTonic]}\n                      </span>\n                    )}\n                    {i + 1}\n                  </>\n                )}\n              </div>\n            </PianoKey>\n            {BLACK_KEYS[i] !== -1 ? (\n              <PianoKey\n                key={`b_${i}`}\n                className={\n                  (inline || enabledPitches.includes(BLACK_KEYS[i])) &&\n                  `noteColor_${[BLACK_KEYS[i]]}_colors`\n                }\n                isEnabled={inline || enabledPitches.includes(BLACK_KEYS[i])}\n                isPlaying={playingNotes.has(BLACK_KEYS[i])}\n                style={{\n                  top: 0,\n                  left: (keyWidth + padding) * (i + 0.5),\n                  zIndex: 2,\n                  width: keyWidth,\n                  height: keyHeight,\n                  borderRadius: inline ? \"3px\" : \"5px\",\n                  cursor:\n                    inline || enabledPitches.includes(BLACK_KEYS[i])\n                      ? \"pointer\"\n                      : \"default\",\n                  backgroundColor: \"black\",\n                }}\n                onClick={() => playNote(BLACK_KEYS[i])}\n              >\n                {!inline &&\n                  BLACK_KEY_LABELS[i]\n                    .toString()\n                    .replace(\"b\", \"♭\")\n                    .replace(\"#\", \"♯\")}\n              </PianoKey>\n            ) : null}\n          </React.Fragment>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport const InlinePianoLegend: React.FC<{ enabledPitches?: number[] }> = ({\n  enabledPitches = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],\n}) => {\n  return <PianoLegend inline enabledPitches={enabledPitches} />;\n};\n\nexport const FoldablePianoLegend: React.FC<{\n  slug?: string;\n  mode?: Mode | Mode[];\n  currentTonic?: number;\n  setHoveredColors?: (colors: string[] | null) => void;\n}> = ({ slug, mode, currentTonic, setHoveredColors }) => {\n  const [showLegend, setShowLegend] = useLocalStorage(\"showLegend\", true);\n  const [hoveredScale, setHoveredScale] = React.useState<\n    \"major\" | \"minor\" | null\n  >(null);\n  const [showGuitarChords, setShowGuitarChords] = React.useState(false);\n\n  const getEnabledPitches = () => {\n    if (hoveredScale === \"major\") {\n      return WHITE_KEYS;\n    } else if (hoveredScale === \"minor\") {\n      return [0, 2, 3, 5, 7, 8, 10];\n    }\n    return [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11];\n  };\n\n  const chords = TOP_100_COMPOSERS.find(({ slug: _slug }) => slug === _slug)\n    ?.chords;\n\n  const content = React.useMemo(() => {\n    return (\n      <div\n        key=\"piano-legend\"\n        style={{ position: \"fixed\", bottom: 51, right: 36, zIndex: 100000 }}\n      >\n        {showLegend ? (\n          <div>\n            <ToggleContainer>\n              <ToggleIcon active={!showGuitarChords}>\n                <FontAwesomeIcon icon={faUserGraduate} />\n              </ToggleIcon>\n              <ToggleSlider\n                onClick={() => {\n                  setShowGuitarChords((prev) => !prev);\n                }}\n                title={\n                  showGuitarChords\n                    ? \"Show Roman numerals\"\n                    : \"Show guitar chords\"\n                }\n              >\n                <SliderKnob isRight={showGuitarChords} />\n              </ToggleSlider>\n              <ToggleIcon active={showGuitarChords}>\n                <FontAwesomeIcon icon={faGuitar} />\n              </ToggleIcon>\n            </ToggleContainer>\n            <FoldButton onClick={() => setShowLegend(false)}>x</FoldButton>\n\n            <div\n              style={{\n                display: \"flex\",\n                flexDirection: \"column\",\n                gap: 35,\n                backgroundColor: \"black\",\n                padding: 10,\n                border: \"1px solid #666\",\n                zIndex: 100000,\n              }}\n            >\n              {(Array.isArray(mode)\n                ? mode\n                : mode\n                ? [mode]\n                : [MAJOR_MODE, MINOR_MODE]\n              ).map((modeItem, index) => (\n                <ChordStairs\n                  key={`mode-${index}`}\n                  mode={modeItem}\n                  chapterChords={chords}\n                  currentTonic={currentTonic}\n                  setHoveredColors={setHoveredColors}\n                  showGuitarChords={showGuitarChords}\n                />\n              ))}\n              {chords && (\n                <ChordStairs\n                  mode={CHROMATIC_CHORDS}\n                  chapterChords={chords}\n                  currentTonic={currentTonic}\n                  setHoveredColors={setHoveredColors}\n                  showGuitarChords={showGuitarChords}\n                />\n              )}\n              <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n                <div\n                  style={{\n                    margin: \"auto\",\n                    display: \"flex\",\n                    flexDirection: \"row\",\n                  }}\n                >\n                  <PianoLegend\n                    currentTonic={currentTonic ?? 0}\n                    enabledPitches={getEnabledPitches()}\n                  />\n                  <PianoLegend\n                    currentTonic={(currentTonic ?? 0) + 12}\n                    enabledPitches={getEnabledPitches()}\n                  />\n                </div>\n                <div\n                  style={{\n                    overflow: \"visible\",\n                    color: \"white\",\n                    display: \"flex\",\n                    gap: \"16px\",\n                    justifyContent: \"center\",\n                    marginTop: \"8px\",\n                  }}\n                >\n                  <ScaleLabel\n                    onMouseEnter={() => setHoveredScale(\"major\")}\n                    onMouseLeave={() => setHoveredScale(null)}\n                  >\n                    major\n                  </ScaleLabel>\n                  <ScaleLabel\n                    onMouseEnter={() => setHoveredScale(\"minor\")}\n                    onMouseLeave={() => setHoveredScale(null)}\n                  >\n                    natural minor\n                  </ScaleLabel>\n                </div>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <button\n            onClick={() => setShowLegend(true)}\n            style={{ background: \"none\" }}\n          >\n            <InlinePianoLegend />\n          </button>\n        )}\n      </div>\n    );\n  }, [\n    showLegend,\n    slug,\n    mode,\n    currentTonic,\n    chords,\n    setShowLegend,\n    hoveredScale,\n    showGuitarChords,\n  ]);\n\n  return content;\n};\n","import * as React from \"react\";\nimport {\n  createContext,\n  useCallback,\n  useContext,\n  useRef,\n  useState,\n} from \"react\";\nimport styled, { css, keyframes } from \"styled-components\";\nimport {\n  ARPEGGIO_DELAY_MS,\n  playArpeggiatedChord,\n  playArpeggiatedChordSequence,\n} from \"../../../sampler/sampler\";\nimport { PitchClass } from \"../analysis\";\nimport { Mode } from \"../book/chapters\";\nimport { Chord, formatChordName, rehydrateChords } from \"./chords\";\nimport { convertChordToGuitarChord } from \"./guitarChords\";\n\nconst TITLE_HEIGHT = 27;\n\nconst NOTE_HEIGHT = 3;\nconst NOTE_WIDTH = 30;\nconst HORIZONTAL_GAP = 12;\n\nconst ChordNote = styled.div<{ isPlaying?: boolean; delay?: number }>`\n  user-select: none;\n  border-radius: 4px;\n  width: ${NOTE_WIDTH}px;\n  height: ${NOTE_HEIGHT * 2}px;\n  transform-origin: center;\n  ${(props) =>\n    props.isPlaying &&\n    css`\n      animation: ${scaleOut} 0.6s ease-out;\n      animation-delay: ${props.delay}ms;\n      animation-fill-mode: forwards;\n    `}\n`;\n\nconst scaleOut = keyframes`\n  0% {\n    transform: scale(1);\n  }\n  30% {\n    transform: scale(1.5);\n  }\n  100% {\n    transform: scale(1);\n  }\n`;\n\nconst ChordBoundingBox = styled.div<{\n  clickable?: boolean;\n}>`\n  position: absolute;\n  cursor: ${(props) => (props.clickable ? \"pointer\" : \"inherit\")};\n  background: transparent;\n  z-index: 1;\n  transform-origin: center;\n`;\n\nconst ChordContent = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n`;\n\nconst ChordName = styled.div`\n  width: ${NOTE_WIDTH}px;\n  display: flex;\n  justify-content: center;\n  text-align: center;\n  position: absolute;\n`;\n\n// Create the context\nconst TonicContext = createContext<number>(0);\n\n// Create the provider component\nexport const TonicProvider: React.FC<{\n  currentTonic: number;\n  children: React.ReactNode;\n}> = ({ currentTonic, children }) => {\n  return (\n    <TonicContext.Provider value={currentTonic}>\n      {children}\n    </TonicContext.Provider>\n  );\n};\n\n// Add a hook to use the context\nconst useTonicContext = () => {\n  const context = useContext(TonicContext);\n  return context;\n};\n\nconst ChordStairs: React.FC<{\n  mode: Mode;\n  chapterChords?: string[];\n  currentTonic?: number;\n  scale?: number;\n  playbackMode?: \"separate\" | \"together\" | \"no\";\n  setHoveredColors?: (colors: string[] | null) => void;\n  showGuitarChords?: boolean;\n}> = React.memo(\n  ({\n    mode,\n    chapterChords,\n    currentTonic: propTonic,\n    scale = 1,\n    playbackMode = \"separate\",\n    setHoveredColors,\n    showGuitarChords = false,\n  }) => {\n    const contextTonic = useTonicContext();\n    const currentTonic = propTonic ?? contextTonic;\n\n    const [playingStates, setPlayingStates] = useState<{\n      [key: number]: number;\n    }>({});\n    const timeoutRef = useRef<NodeJS.Timeout[]>([]);\n\n    const { title, chords } = mode;\n    const hideLabels = playbackMode !== \"separate\";\n    const titleHeight = hideLabels ? 0 : TITLE_HEIGHT;\n\n    // Check if we should show the chord stairs\n    const chapterChordsSet = new Set(chapterChords || []) as Set<Chord>;\n    const modeChordSet = new Set(mode.chords);\n    // Only remove V for intersection check\n    const modeChordSetWithoutV = new Set(modeChordSet);\n    modeChordSetWithoutV.delete(\"V\");\n    modeChordSetWithoutV.delete(\"V7\");\n    const hasIntersection = [...chapterChordsSet].some((chord) =>\n      modeChordSetWithoutV.has(chord),\n    );\n\n    // Use original modeChordSet (with V) for filtering\n    const filteredChords = chords.filter(\n      (chord) => !chapterChords || chapterChordsSet.has(chord),\n    );\n\n    const numChords = filteredChords.length;\n\n    const rehydratedChords = rehydrateChords(filteredChords);\n\n    // Find minimum position across all chords\n    const minPosition = Math.min(\n      ...rehydratedChords.flatMap((chord) => chord.positions),\n    );\n\n    // Find which chord and which note has the minimum position\n    const pitchOfMinPosition = rehydratedChords.find((chord) =>\n      chord.positions.includes(minPosition),\n    )?.pitches[0];\n\n    // Shift all positions up by the minimum position (making the lowest note at position 0)\n    rehydratedChords.forEach((chord) => {\n      chord.positions = chord.positions.map((pos) => pos - minPosition);\n    });\n\n    const maxPosition = Math.max(\n      ...rehydratedChords.flatMap((chord) => chord.positions),\n    );\n\n    const height = maxPosition + 1;\n\n    // Calculate total height including margin top and text, plus half note height for last note\n    const totalHeight = (height + 1) * NOTE_HEIGHT;\n\n    const tonicChordPosition = filteredChords.findIndex((chord) =>\n      /^(i|I)$/.test(chord),\n    );\n\n    // Scale the constants\n    const scaledNoteHeight = NOTE_HEIGHT * scale;\n    const scaledNoteWidth = NOTE_WIDTH * scale;\n    const scaledHorizontalGap = (hideLabels ? 0 : HORIZONTAL_GAP) * scale;\n    const scaledFontSize = 16 * scale;\n\n    const handleChordClick = useCallback(\n      (chord: Chord, positions: number[], pitchOfMinPosition: number) => {\n        if (playbackMode === \"no\") return;\n\n        // Clear any existing timeouts\n        timeoutRef.current.forEach((timeout) => clearTimeout(timeout));\n        timeoutRef.current = [];\n\n        if (playbackMode === \"together\") {\n          // Reset playing states\n          setPlayingStates({});\n\n          // Prepare chord sequence\n          const chordSequence = rehydratedChords.map((chordData) =>\n            chordData.positions.map(\n              (position) => position + pitchOfMinPosition + currentTonic,\n            ),\n          );\n\n          // Play the sequence with animation callbacks\n          playArpeggiatedChordSequence(\n            chordSequence,\n            (index) => {\n              setPlayingStates((prev) => ({\n                ...prev,\n                [index]: Date.now(),\n              }));\n            },\n            (index) => {\n              setPlayingStates((prev) => {\n                const newState = { ...prev };\n                delete newState[index];\n                return newState;\n              });\n            },\n          );\n        } else {\n          // For single chord playback\n          const clickedChordIndex = rehydratedChords.findIndex(\n            (c) => c.name === chord && c.positions === positions,\n          );\n\n          // Set new timestamp for this chord\n          setPlayingStates((prev) => ({\n            [clickedChordIndex]: Date.now(),\n          }));\n\n          const transposedNotes = positions.map(\n            (position) => position + pitchOfMinPosition + currentTonic,\n          );\n          playArpeggiatedChord(transposedNotes);\n\n          const timeout = setTimeout(() => {\n            setPlayingStates({});\n          }, 600);\n\n          timeoutRef.current = [timeout];\n        }\n      },\n      [currentTonic, playbackMode, rehydratedChords],\n    );\n\n    const handleChordMouseEnter = useCallback(\n      (pitches: number[]) => {\n        if (setHoveredColors) {\n          setHoveredColors(\n            pitches.map((pitch) => `noteColor_${pitch % 12}_colors`),\n          );\n        }\n      },\n      [setHoveredColors],\n    );\n\n    const handleChordMouseLeave = useCallback(() => {\n      if (setHoveredColors) {\n        setHoveredColors(null);\n      }\n    }, [setHoveredColors]);\n\n    const getDisplayChordName = (name: string, pitches: number[]) => {\n      if (!showGuitarChords) return formatChordName(name);\n\n      const root = pitches[0];\n      const intervals = pitches.slice(1).map((p, i) => p - pitches[i]);\n      const intervalString = intervals.join(\" \");\n\n      const guitarChord = convertChordToGuitarChord(\n        ((root + currentTonic) % 12) as PitchClass,\n        intervalString,\n      );\n\n      return guitarChord || formatChordName(name);\n    };\n\n    return !hasIntersection && chapterChords ? (\n      <></>\n    ) : (\n      <div\n        key={title}\n        style={{\n          width:\n            numChords * scaledNoteWidth + (numChords - 1) * scaledHorizontalGap,\n          height: totalHeight * scale + titleHeight,\n          position: \"relative\",\n          fontSize: scaledFontSize,\n          marginTop: titleHeight,\n          display: \"inline-block\",\n        }}\n      >\n        {rehydratedChords.map(({ name, pitches, positions }, chordIndex) => {\n          const topPosition =\n            (maxPosition - positions.at(-1)) * scaledNoteHeight;\n          const bottomPosition =\n            (maxPosition - positions[0]) * scaledNoteHeight;\n          const chordNameOffset =\n            (chordIndex < tonicChordPosition ? -29 : 14) * scale;\n          const height =\n            bottomPosition -\n            topPosition +\n            scaledNoteHeight * 2 +\n            Math.abs(chordNameOffset) +\n            20 * scale;\n\n          return (\n            <ChordBoundingBox\n              key={`bounding-box-${chordIndex}`}\n              onClick={() =>\n                handleChordClick(name, positions, pitchOfMinPosition)\n              }\n              onMouseEnter={() => handleChordMouseEnter(pitches)}\n              onMouseLeave={handleChordMouseLeave}\n              clickable={playbackMode !== \"no\"}\n              style={{\n                left: chordIndex * (scaledNoteWidth + scaledHorizontalGap),\n                top: Math.min(topPosition + chordNameOffset, topPosition),\n                width: scaledNoteWidth,\n                height,\n              }}\n            >\n              <ChordContent>\n                <>\n                  {pitches.map((pitch, pitchIndex) => (\n                    <ChordNote\n                      key={`${chordIndex}-${pitchIndex}-${\n                        playingStates[chordIndex] || 0\n                      }`}\n                      className={`noteColor_${pitch % 12}_colors`}\n                      isPlaying={chordIndex in playingStates}\n                      delay={pitchIndex * ARPEGGIO_DELAY_MS}\n                      style={{\n                        position: \"absolute\",\n                        width: scaledNoteWidth,\n                        height: scaledNoteHeight * 2,\n                        top:\n                          (maxPosition - positions[pitchIndex]) *\n                            scaledNoteHeight +\n                          -Math.min(topPosition + chordNameOffset, topPosition),\n                      }}\n                    />\n                  ))}\n                  {!hideLabels && (\n                    <ChordName\n                      style={{\n                        top:\n                          chordIndex < tonicChordPosition\n                            ? (maxPosition - positions.at(-1)) *\n                                scaledNoteHeight -\n                              29 +\n                              -Math.min(\n                                topPosition + chordNameOffset,\n                                topPosition,\n                              )\n                            : (maxPosition - positions[0]) * scaledNoteHeight +\n                              14 +\n                              -Math.min(\n                                topPosition + chordNameOffset,\n                                topPosition,\n                              ),\n                        userSelect: \"none\",\n                        pointerEvents: \"none\",\n                        fontFamily: \"Tahoma\",\n                      }}\n                    >\n                      {getDisplayChordName(name, pitches)}\n                    </ChordName>\n                  )}\n                </>\n              </ChordContent>\n            </ChordBoundingBox>\n          );\n        })}\n        {!hideLabels && title && (\n          <div\n            style={{\n              position: \"absolute\",\n              bottom: -titleHeight / 2,\n              left: 0,\n              fontSize: scaledFontSize * 0.9,\n              color: \"#aaa\",\n              userSelect: \"none\",\n            }}\n          >\n            {title}\n          </div>\n        )}\n      </div>\n    );\n  },\n);\n\nexport default ChordStairs;\n","import autoBindReact from \"auto-bind/react\";\nimport React, { PureComponent } from \"react\";\nimport styled from \"styled-components\";\n\n// Slider color constants\nconst COLORS = {\n  TRACK_FILLED: \"#fff\", // Light gray for filled portion of track\n  TRACK_EMPTY: \"#000\", // Dark gray for empty portion of track\n  TRACK_BORDER: \"#888\", // Medium gray for borders\n  THUMB_BACKGROUND: \"#fff\", // Light gray for thumb (same as filled track)\n  THUMB_BORDER: \"#aaa\", // Medium gray for thumb border\n  THUMB_SHADOW: \"rgba(0, 0, 0, 0.4)\", // Semi-transparent black for shadow\n};\n\nconst SliderContainer = styled.div`\n  height: var(--charH);\n  padding: 0;\n  cursor: pointer;\n  position: relative;\n  width: 100%;\n  box-sizing: border-box;\n  border: 0;\n  display: inline-block;\n`;\n\nconst SliderRail = styled.div`\n  width: calc(100% + var(--charW1));\n  height: 3px;\n  margin-top: -2px;\n  background: none;\n  position: absolute;\n  top: 50%;\n  box-sizing: border-box;\n  border: 1px solid var(--clickable);\n`;\n\nconst SliderKnob = styled.div`\n  height: var(--charH);\n  width: var(--charW1);\n  margin: 0;\n  border-radius: 0;\n  background-color: #fff;\n  position: absolute;\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  left: ${(props) => props.pos};\n  transition: ${(props) => (props.dragging ? \"none\" : \"left 0.37s linear\")};\n`;\n\nexport const StyledRangeInput = styled.input.attrs({ type: \"range\" })`\n  -webkit-appearance: none;\n  background: transparent;\n  width: 100%;\n\n  &::-webkit-slider-runnable-track {\n    width: 100%;\n    height: 4px;\n    background: ${(props) => `linear-gradient(to right, \n      ${COLORS.TRACK_FILLED} ${(props.value / props.max) * 100}%, \n      ${COLORS.TRACK_EMPTY} ${(props.value / props.max) * 100}%)`};\n    border-radius: 2px;\n    border: 1px solid ${COLORS.TRACK_BORDER};\n  }\n\n  &::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    height: 16px;\n    width: 16px;\n    border-radius: 50%;\n    background: ${COLORS.THUMB_BACKGROUND};\n    border: 1px solid ${COLORS.THUMB_BORDER};\n    margin-top: -7px; /* Centers the thumb on the track */\n    cursor: pointer;\n    box-shadow: 0 1px 3px ${COLORS.THUMB_SHADOW};\n  }\n\n  &::-moz-range-track {\n    width: 100%;\n    height: 4px;\n    background: ${(props) => `linear-gradient(to right, \n      ${COLORS.TRACK_FILLED} ${(props.value / props.max) * 100}%, \n      ${COLORS.TRACK_EMPTY} ${(props.value / props.max) * 100}%)`};\n    border-radius: 2px;\n    border: 1px solid ${COLORS.TRACK_BORDER};\n  }\n\n  &::-moz-range-progress {\n    background-color: ${COLORS.TRACK_FILLED};\n    height: 4px;\n    border-radius: 2px;\n  }\n\n  &::-moz-range-thumb {\n    height: 16px;\n    width: 16px;\n    border-radius: 50%;\n    background: ${COLORS.THUMB_BACKGROUND};\n    border: 1px solid ${COLORS.THUMB_BORDER};\n    cursor: pointer;\n    box-shadow: 0 1px 3px ${COLORS.THUMB_SHADOW};\n  }\n`;\n\nexport default class Slider extends PureComponent {\n  constructor(props) {\n    super(props);\n    autoBindReact(this);\n\n    this.node = React.createRef();\n    this.state = {\n      dragging: false,\n      draggedPos: null,\n    };\n  }\n\n  onMouseMove(event) {\n    if (this.state.dragging) {\n      const node = this.node.current;\n      const pos = Math.max(\n        Math.min((event.clientX - node.offsetLeft) / node.offsetWidth, 1),\n        0,\n      );\n      this.setState({\n        draggedPos: pos,\n      });\n      this.props.onDrag(pos);\n    }\n  }\n\n  onMouseDown(event) {\n    event.preventDefault();\n    event.persist();\n    document.addEventListener(\"mousemove\", this.onMouseMove);\n    document.addEventListener(\"mouseup\", this.onMouseUp);\n    this.setState({ dragging: true }, () => this.onMouseMove(event));\n  }\n\n  onMouseUp(event) {\n    document.removeEventListener(\"mouseup\", this.onMouseUp);\n    document.removeEventListener(\"mousemove\", this.onMouseMove);\n    // Wait a moment to prevent 'snapback' (pos momentarily won't match draggedPos)\n    setTimeout(() => {\n      this.setState({ dragging: false });\n    }, 150);\n    this.props.onChange(this.state.draggedPos);\n  }\n\n  render() {\n    const pos =\n      Math.max(\n        Math.min(\n          this.state.dragging ? this.state.draggedPos : this.props.pos,\n          1,\n        ),\n        0,\n      ) *\n        100 +\n      \"%\";\n\n    return (\n      <SliderContainer ref={this.node} onMouseDown={this.onMouseDown}>\n        <SliderRail />\n        <SliderKnob pos={pos} dragging={this.state.dragging} />\n      </SliderContainer>\n    );\n  }\n}\n","import * as Tone from \"tone\";\n\n// Add type definitions for our custom method\ndeclare module \"tone/build/esm/core/context/BaseContext\" {\n  interface BaseContext {\n    addAudioWorklet: () => Promise<void>;\n  }\n}\n\nexport const ARPEGGIO_DELAY_MS = 30;\nlet samplerLoaded = false;\nlet loadingPromise: Promise<void> | null = null;\n\nconst BASE_URL = \"https://tonejs.github.io/audio/salamander/\";\n\nexport const sampler = new Tone.Sampler({\n  urls: {\n    A0: \"A0.mp3\",\n    C1: \"C1.mp3\",\n    \"D#1\": \"Ds1.mp3\",\n    \"F#1\": \"Fs1.mp3\",\n    A1: \"A1.mp3\",\n    C2: \"C2.mp3\",\n    \"D#2\": \"Ds2.mp3\",\n    \"F#2\": \"Fs2.mp3\",\n    A2: \"A2.mp3\",\n    C3: \"C3.mp3\",\n    \"D#3\": \"Ds3.mp3\",\n    \"F#3\": \"Fs3.mp3\",\n    A3: \"A3.mp3\",\n    C4: \"C4.mp3\",\n    \"D#4\": \"Ds4.mp3\",\n    \"F#4\": \"Fs4.mp3\",\n    A4: \"A4.mp3\",\n    C5: \"C5.mp3\",\n    \"D#5\": \"Ds5.mp3\",\n    \"F#5\": \"Fs5.mp3\",\n    A5: \"A5.mp3\",\n    C6: \"C6.mp3\",\n    \"D#6\": \"Ds6.mp3\",\n    \"F#6\": \"Fs6.mp3\",\n    A6: \"A6.mp3\",\n    C7: \"C7.mp3\",\n    \"D#7\": \"Ds7.mp3\",\n    \"F#7\": \"Fs7.mp3\",\n    A7: \"A7.mp3\",\n    C8: \"C8.mp3\",\n  },\n  baseUrl: BASE_URL,\n  onload: () => {\n    console.log(\"Sampler loaded\");\n    console.log(\"Audio Context State:\", Tone.getContext().state);\n    samplerLoaded = true;\n  },\n})\n  .toDestination()\n  .set({\n    volume: -6,\n  });\n\n// Enable Audio Worklet processing\nTone.getContext().addAudioWorklet = async () => {\n  const context = Tone.getContext().rawContext;\n  if (context.audioWorklet) {\n    try {\n      await context.audioWorklet.addModule(\n        `data:text/javascript;charset=utf-8,\n        class ToneProcessor extends AudioWorkletProcessor {\n          process(inputs, outputs) {\n            // Pass audio through\n            const output = outputs[0];\n            const input = inputs[0];\n            for (let channel = 0; channel < output.length; ++channel) {\n              const inputChannel = input[channel];\n              const outputChannel = output[channel];\n              for (let i = 0; i < outputChannel.length; ++i) {\n                outputChannel[i] = inputChannel ? inputChannel[i] : 0;\n              }\n            }\n            return true;\n          }\n        }\n        registerProcessor('tone-processor', ToneProcessor);`,\n      );\n\n      const workletNode = new AudioWorkletNode(context, \"tone-processor\");\n      sampler.connect(workletNode);\n      workletNode.connect(context.destination);\n      console.log(\"Audio Worklet enabled successfully\");\n    } catch (error) {\n      console.error(\"Failed to add Audio Worklet:\", error);\n    }\n  }\n};\n\nconst originalTriggerAttack = sampler.triggerAttack;\nsampler.triggerAttack = function (...args) {\n  console.log(\"Audio Context State:\", Tone.getContext().state);\n  return originalTriggerAttack.apply(this, args);\n};\n\nconst originalTriggerRelease = sampler.triggerRelease;\nsampler.triggerRelease = function (...args) {\n  console.log(\"Audio Context State:\", Tone.getContext().state);\n  return originalTriggerRelease.apply(this, args);\n};\n\nexport const getAudioContextState = () => {\n  return Tone.getContext().state;\n};\n\nexport const startAudioContext = async () => {\n  try {\n    await Tone.start();\n    await Tone.getContext().addAudioWorklet();\n    console.log(\"Audio context started successfully with Audio Worklet\");\n    return true;\n  } catch (error) {\n    console.error(\"Failed to start audio context:\", error);\n    throw error;\n  }\n};\n\nexport const ensureSamplerLoaded = async () => {\n  if (samplerLoaded) {\n    return;\n  }\n\n  if (loadingPromise) {\n    return loadingPromise;\n  }\n\n  loadingPromise = new Promise((resolve) => {\n    if (sampler.loaded) {\n      console.log(\"Sampler already loaded\");\n      samplerLoaded = true;\n      resolve();\n      return;\n    }\n\n    const checkLoaded = () => {\n      if (sampler.loaded) {\n        console.log(\"Sampler loaded successfully\");\n        samplerLoaded = true;\n        resolve();\n      } else {\n        setTimeout(checkLoaded, 100);\n      }\n    };\n\n    checkLoaded();\n  });\n\n  await loadingPromise;\n  console.log(\"Sampler loaded, audio context state:\", getAudioContextState());\n};\n\nexport const resumeAudioContext = async () => {\n  await Tone.start();\n  console.log(\"resuming audio context\");\n};\n\nconst C3_MIDI_NUMBER = 48;\n\nlet activeEvents: number[] = [];\nlet activeNotes: string[] = [];\n\nexport const playArpeggiatedChord = async (chordNumbers: number[]) => {\n  await ensureSamplerLoaded();\n\n  // 1. Stop all currently playing sounds immediately\n  sampler.releaseAll(0);\n\n  // 2. Clear all scheduled events\n  activeEvents.forEach((id) => Tone.Transport.clear(id));\n  Tone.Transport.cancel();\n\n  // 3. Reset our tracking arrays\n  activeEvents = [];\n  activeNotes = [];\n\n  // 4. Convert to MIDI notes starting from C3\n  const midiNotes = chordNumbers.map((note) => C3_MIDI_NUMBER + note);\n  const noteNames = midiNotes.map((midi) =>\n    Tone.Frequency(midi, \"midi\").toNote(),\n  );\n\n  // 5. Ensure Transport is started\n  if (Tone.Transport.state !== \"started\") {\n    Tone.Transport.start();\n  }\n\n  // 6. Schedule notes using Transport time\n  const currentTransportTime = Tone.Transport.seconds;\n\n  noteNames.forEach((note, index) => {\n    const scheduleTime =\n      currentTransportTime + (index * ARPEGGIO_DELAY_MS) / 1000;\n\n    const eventId = Tone.Transport.schedule((time) => {\n      activeNotes.push(note);\n      sampler.triggerAttackRelease(note, 0.5, time);\n    }, scheduleTime);\n\n    activeEvents.push(eventId);\n  });\n};\n\n// Add new function for playing raw MIDI notes\nexport const playRawMidiNote = async (midiNumber: number, duration: number) => {\n  await ensureSamplerLoaded();\n\n  sampler.releaseAll(0);\n  activeEvents.forEach((id) => Tone.Transport.clear(id));\n  Tone.Transport.cancel();\n\n  activeEvents = [];\n  activeNotes = [];\n\n  const noteName = Tone.Frequency(midiNumber, \"midi\").toNote();\n\n  if (Tone.Transport.state !== \"started\") {\n    Tone.Transport.start();\n  }\n\n  const eventId = Tone.Transport.schedule((time) => {\n    activeNotes.push(noteName);\n    sampler.triggerAttackRelease(noteName, duration / 1000, time);\n  }, Tone.Transport.seconds);\n\n  activeEvents.push(eventId);\n};\n\n// Add a cleanup function that can be called when needed (e.g., component unmount)\nexport const cleanupArpeggiator = () => {\n  sampler.releaseAll(0);\n  activeEvents.forEach((id) => Tone.Transport.clear(id));\n  Tone.Transport.cancel();\n  activeEvents = [];\n  activeNotes = [];\n};\n\nexport const playArpeggiatedChordSequence = async (\n  chordSequence: number[][],\n  onChordStart?: (index: number) => void,\n  onChordEnd?: (index: number) => void,\n) => {\n  await ensureSamplerLoaded();\n\n  // Clear any existing events\n  Tone.Transport.cancel();\n  sampler.releaseAll(0);\n  activeEvents = [];\n  activeNotes = [];\n\n  // Ensure transport is started\n  if (Tone.Transport.state !== \"started\") {\n    Tone.Transport.start();\n  }\n\n  const currentTime = Tone.Transport.seconds;\n  const CHORD_SPACING = 0.7; // 700ms between chords\n\n  chordSequence.forEach((chord, chordIndex) => {\n    // Schedule each note in the chord\n    chord.forEach((note, noteIndex) => {\n      const noteTime =\n        currentTime +\n        chordIndex * CHORD_SPACING + // Delay for each chord\n        (noteIndex * ARPEGGIO_DELAY_MS) / 1000; // Arpeggio delay within chord\n\n      const eventId = Tone.Transport.schedule((time) => {\n        sampler.triggerAttackRelease(\n          Tone.Frequency(note + C3_MIDI_NUMBER, \"midi\").toNote(),\n          0.7,\n          time,\n        );\n\n        // Call onChordStart only for the first note of each chord\n        if (noteIndex === 0 && onChordStart) {\n          onChordStart(chordIndex);\n        }\n\n        // Schedule chord end callback after last note\n        if (noteIndex === chord.length - 1 && onChordEnd) {\n          Tone.Transport.schedule(() => {\n            onChordEnd(chordIndex);\n          }, time + 0.7); // 600ms animation duration\n        }\n      }, noteTime);\n\n      activeEvents.push(eventId);\n    });\n  });\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport {\n  GenreItem,\n  GenreList,\n  getEmojis,\n  getUniqueStyles,\n  hasMetadata,\n} from \"../../utils/corpusUtils\";\nimport { Snippet } from \"./analysis\";\nimport { corpora } from \"./corpora/corpora\";\nimport SnippetItem, { PX_IN_MEASURE } from \"./SnippetItem\";\n\nconst SnippetListContainer = styled.div<{ isPreview?: boolean }>`\n  display: flex;\n  flex-wrap: wrap;\n  gap: ${(props) => (props.isPreview ? \"60px\" : \"20px\")};\n  padding-bottom: 10px;\n`;\n\nconst SnippetItemWrapper = styled.div<{\n  isPreview?: boolean;\n  measureCount: number;\n  isLoading?: boolean;\n}>`\n  flex: 0 0 auto;\n  margin-bottom: ${(props) => (props.isPreview ? \"0px\" : \"20px\")};\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  cursor: pointer;\n  width: ${(props) => props.measureCount * PX_IN_MEASURE}px;\n  align-items: start;\n  gap: 4px;\n\n  ${(props) =>\n    props.isLoading &&\n    `\n    &::after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: rgba(0, 0, 0, 0.7);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      z-index: 10000;\n    }\n    \n    &::before {\n      content: '';\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      width: 20px;\n      height: 20px;\n      border: 2px solid #fff;\n      border-top-color: transparent;\n      border-radius: 50%;\n      z-index: 10001;\n      animation: spinner 1s linear infinite;\n    }\n    \n    @keyframes spinner {\n      to {transform: translate(-50%, -50%) rotate(360deg);}\n    }\n  `}\n`;\n\nconst SlugLabel = styled.div`\n  color: #fff;\n  font-size: 12px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  width: 100%;\n  margin: 0;\n`;\n\nconst SnippetContainer = styled.div`\n  min-width: 0;\n  width: 100%;\n  margin: 0;\n`;\n\nconst ComposerInfo = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  padding: 4px;\n  font-size: 0.8rem;\n  color: #fff;\n  border-top: 1px solid #333;\n  margin-top: 4px;\n`;\n\nconst ComposerHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst ComposerName = styled.span`\n  color: #fff;\n`;\n\nconst YearInfo = styled.span`\n  color: #999;\n  font-size: 0.8em;\n`;\n\ninterface SnippetListProps {\n  snippets: Snippet[];\n  slugs?: string[];\n  onSnippetClick: (snippet: Snippet) => void;\n  isPreview?: boolean;\n  noteHeight?: number;\n  loadingSnippets?: Set<string>;\n  deleteSnippet?: (index: number) => void;\n  hoveredColors?: string[] | null;\n}\n\nconst getComposerInfo = (midiSlug: string) => {\n  const matchingCorpora = corpora.filter((corpus) =>\n    corpus.midis.some((midi) => midi === midiSlug),\n  );\n  return matchingCorpora.find(hasMetadata) || null;\n};\n\nconst SnippetList: React.FC<SnippetListProps> = ({\n  snippets,\n  slugs,\n  onSnippetClick,\n  isPreview = false,\n  noteHeight = 3,\n  loadingSnippets = new Set(),\n  deleteSnippet,\n  hoveredColors,\n}) => {\n  return (\n    <SnippetListContainer isPreview={isPreview}>\n      {snippets.map((snippet, index) => {\n        const measureCount =\n          snippet.measuresSpan[1] - snippet.measuresSpan[0] + 1;\n        const composerSlug = (snippet as any).composerSlug;\n        const midiSlug = slugs?.[index];\n        const composerInfo = midiSlug ? getComposerInfo(midiSlug) : null;\n\n        return (\n          <SnippetItemWrapper\n            key={index}\n            isPreview={isPreview}\n            measureCount={measureCount}\n            onClick={() => onSnippetClick(snippet)}\n            isLoading={loadingSnippets.has(composerSlug)}\n          >\n            {midiSlug && <SlugLabel>{midiSlug}</SlugLabel>}\n            <SnippetContainer>\n              <SnippetItem\n                snippet={snippet}\n                index={index}\n                isPreview={isPreview}\n                noteHeight={noteHeight}\n                deleteSnippet={deleteSnippet}\n                hoveredColors={hoveredColors}\n              />\n            </SnippetContainer>\n            {composerInfo && (\n              <ComposerInfo>\n                <ComposerHeader>\n                  <ComposerName>\n                    {composerInfo.slug\n                      .split(\"_\")\n                      .map(\n                        (word) => word.charAt(0).toUpperCase() + word.slice(1),\n                      )\n                      .join(\" \")}\n                  </ComposerName>\n                  {composerInfo.country && (\n                    <div>{getEmojis(composerInfo.country)}</div>\n                  )}\n                  {composerInfo.composerBirthYear && (\n                    <YearInfo>({composerInfo.composerBirthYear})</YearInfo>\n                  )}\n                </ComposerHeader>\n                {(composerInfo.genre || composerInfo.style) && (\n                  <GenreList>\n                    {getUniqueStyles(\n                      composerInfo.genre,\n                      composerInfo.style,\n                    ).map((style, index) => (\n                      <GenreItem key={index}>{style}</GenreItem>\n                    ))}\n                  </GenreList>\n                )}\n              </ComposerInfo>\n            )}\n          </SnippetItemWrapper>\n        );\n      })}\n    </SnippetListContainer>\n  );\n};\n\nexport default SnippetList;\n","const keySlugMapping: Record<string, string> = {\n  \"match-1\": \"Maple_Leaf_Rag_Scott_Joplin\",\n  \"match-2\": \"s.-xarhakos---stoy-thoma---greek-music-055\",\n  \"match-3\": \"may-be---yiruma\",\n  \"match-4\": \"Sweden_Minecraft\",\n  \"match-5\": \"arabesque-l.-66-no.-1-in-e-major\",\n  \"match-6\": \"gol-e-sang---anoushiravan-rohani\",\n  \"match-7\": \"philip-glass---facades\",\n  \"match-8\": \"fear-not-this-night-guild-wars-2-piano-version\",\n  \"match-9\": \"dragonborn---skyrim-theme-song-piano-solo\",\n  \"match-10\": \"s.-xarhakos---mpoyrnovalia---greek-music-079\",\n  \"match-11\": \"Clair_de_Lune__Debussy\",\n  \"match-12\": \"il-coure-mio---anoushiravan-rohani\",\n  \"match-13\": \"philip-glass---pruit-igoe\",\n  \"match-14\": \"the_entertainer_scott_joplin\",\n  \"match-15\": \"it-s-your-day---yiruma\",\n  \"match-16\": \"dry-hands-minecraft\",\n\n  \"river-1\": \"river_flows_in_you_minus1\",\n  \"river-2\": \"river_flows_in_you_0\",\n  \"river-3\": \"river_flows_in_you_plus1\",\n  \"river-4\": \"river_flows_in_you_plus2\",\n  \"river-5\": \"river_flows_in_you_plus3\",\n  \"river-6\": \"river_flows_in_you_plus4\",\n  \"river-7\": \"river_flows_in_you_plus5\",\n\n  \"epoch-1\": \"sadness-and-sorrow-for-piano-solo\",\n  \"epoch-2\":\n    \"unravel-acoustic-ver-tokyo-ghoul-theishter-sheet-music-full-sheets\",\n  \"epoch-3\":\n    \"slow-waltz-24-pieces-for-children-op.39-no.-23---dmitry-kabalevsky\",\n  \"epoch-4\": \"souvenir-de-porto-rico-200-i.e.-206-follower-special\",\n  \"epoch-5\": \"lost-patrol-main-theme---chris-glaister-jonathan-dunn\",\n  \"epoch-6\": \"nocturne-op.21-no1---ignacy-feliks-dobrzynski\",\n  \"epoch-7\": \"grieg_lyric_2_waltz_yaskawa\",\n  \"epoch-8\": \"neon-mixtape-tour---choose-your-seeds\",\n  \"epoch-9\": \"saman---olafur-arnalds\",\n  \"epoch-10\": \"mendelssohn-opus-67-no.-2-aka-lost-illusions\",\n};\n\nexport default keySlugMapping;\n","import { faDownload, faPause, faPlay } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React, { memo, useContext } from \"react\";\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"./AppContext\";\nimport { StyledRangeInput } from \"./Slider\";\nimport TimeSlider from \"./TimeSlider\";\n\nexport const FOOTER_HEIGHT = 25;\n\nconst StyledVolumeSlider = styled.div`\n  flex-shrink: 0;\n  width: 10%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 0 10px;\n\n  &::before {\n    content: \"Vol\";\n    margin-right: 10px;\n  }\n\n  ${StyledRangeInput} {\n    width: 100%;\n  }\n`;\n\nconst StyledAppFooter = styled.div`\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: ${FOOTER_HEIGHT}px;\n  background: var(--background);\n  display: flex;\n  align-items: center;\n  padding: 0;\n  z-index: 10000000;\n  border-top: 1px solid var(--border);\n`;\n\nconst AppFooterMain = styled.div`\n  display: flex;\n  align-items: center;\n  flex: 1;\n  min-width: 0; // Prevents flex items from overflowing\n`;\n\nconst TempoSection = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 7em;\n  flex-shrink: 0;\n  margin: 0 20px;\n`;\n\nconst LatencySection = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 8em;\n  flex-shrink: 0;\n  margin: 0 20px;\n`;\n\nconst DownloadButton = styled.a`\n  width: 20px;\n  flex-shrink: 0;\n  text-align: center;\n  margin-left: 10px;\n`;\n\nconst PauseButton = styled.button`\n  width: 50px;\n  height: ${FOOTER_HEIGHT}px;\n  flex-shrink: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 16px;\n  line-height: 1;\n  margin-right: 10px;\n`;\n\nconst TimeSliderWrapper = styled.div`\n  flex: 2;\n  min-width: 300px;\n  margin: 0 10px;\n`;\n\nconst StyledTempoButton = styled.button`\n  width: 24px;\n  height: 24px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-weight: bold;\n  color: #333;\n  border: 1px solid #999;\n  border-radius: 3px;\n  background: linear-gradient(to bottom, #f8f8f8 0%, #e0e0e0 100%);\n  box-shadow:\n    0 1px 2px rgba(0, 0, 0, 0.2),\n    inset 0 1px 0 rgba(255, 255, 255, 0.8),\n    inset 0 0 2px rgba(255, 255, 255, 0.5);\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  padding: 2px 0;\n  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.8);\n  transition: all 0.05s ease-in-out;\n  font-family:\n    Times New Roman,\n    serif;\n\n  &:active {\n    transform: translateY(1px);\n    box-shadow:\n      0 0 2px rgba(0, 0, 0, 0.2),\n      inset 0 1px 0 rgba(255, 255, 255, 0.8),\n      inset 0 0 2px rgba(255, 255, 255, 0.5);\n  }\n`;\n\nconst AppFooter: React.FC<\n  {\n    currentSongDurationMs: number;\n    ejected: boolean;\n    paused: boolean;\n    volume: number;\n    handleTimeSliderChange: any;\n    handleVolumeChange: any;\n    getCurrentPositionMs: any;\n    togglePause: any;\n    latencyCorrectionMs: number;\n    setLatencyCorrectionMs: (latency: number) => void;\n    tempo: number;\n    setTempo: (tempo: number) => void;\n  } & RouteComponentProps\n> = ({\n  currentSongDurationMs,\n  ejected,\n  paused,\n  volume,\n  handleTimeSliderChange,\n  handleVolumeChange,\n  getCurrentPositionMs,\n  togglePause,\n  latencyCorrectionMs,\n  setLatencyCorrectionMs,\n  location,\n  tempo,\n  setTempo,\n}) => {\n  const context = useContext(AppContext);\n  const canDownload = context?.currentMidiBuffer && context?.currentMidi;\n\n  const createBlobUrl = () => {\n    if (!context?.currentMidiBuffer) return \"\";\n    const blob = new Blob([context.currentMidiBuffer], { type: \"audio/midi\" });\n    return URL.createObjectURL(blob);\n  };\n\n  const getDownloadFilename = () => {\n    if (!context?.currentMidi) return \"download.mid\";\n    return `${context.currentMidi.title}.mid`;\n  };\n\n  const { pathname } = location;\n\n  const segments = pathname.split(\"/\").filter(Boolean);\n\n  let lastSegment = segments.length > 0 ? segments[segments.length - 1] : \"\";\n  if (!lastSegment.endsWith(\".mid\")) {\n    lastSegment = `${lastSegment}.mid`;\n  }\n\n  const handleTempoChange = (delta: number) => {\n    const newTempo = Math.max(0.1, Math.min(4, tempo + delta));\n    setTempo(Number(newTempo.toFixed(2)));\n  };\n\n  const formatTempo = (tempo: number) => {\n    const fixed = tempo.toFixed(2);\n    const [integer, decimal] = fixed.split(\".\");\n    if (decimal === \"00\") return integer;\n    if (decimal.endsWith(\"0\")) return `${integer}.${decimal[0]}`;\n    return fixed;\n  };\n\n  return (\n    <StyledAppFooter>\n      <AppFooterMain>\n        <PauseButton\n          onClick={togglePause}\n          title={paused ? \"Resume (use Space)\" : \"Pause (use Space)\"}\n          className=\"box-button\"\n          disabled={ejected}\n        >\n          <FontAwesomeIcon icon={paused ? faPlay : faPause} />\n        </PauseButton>\n\n        <TimeSliderWrapper>\n          <TimeSlider\n            paused={paused}\n            currentSongDurationMs={currentSongDurationMs}\n            getCurrentPositionMs={getCurrentPositionMs}\n            onChange={handleTimeSliderChange}\n          />\n        </TimeSliderWrapper>\n\n        <TempoSection>\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              alignItems: \"center\",\n            }}\n          >\n            <StyledTempoButton\n              onClick={() => handleTempoChange(-0.1)}\n              title={`Change tempo (Minus key)`}\n            >\n              <div\n                style={{\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  alignItems: \"center\",\n                  justifyContent: \"center\",\n                  height: \"100%\",\n                  transform: \"translateY(-1px)\", // Fine-tuned adjustment\n                }}\n              >\n                <span\n                  style={{\n                    fontSize: \"16px\",\n                    lineHeight: \"0.8\",\n                    fontWeight: \"bold\",\n                    marginBottom: \"-3px\", // Overlap adjustment\n                  }}\n                >\n                  _\n                </span>\n                <span\n                  style={{\n                    fontSize: \"16px\",\n                    lineHeight: \"0.8\",\n                    fontWeight: \"bold\",\n                  }}\n                >\n                  -\n                </span>\n              </div>\n            </StyledTempoButton>\n            <span\n              style={{\n                margin: \"0 15px\",\n                fontFamily: \"monospace\",\n                width: \"40px\",\n                textAlign: \"center\",\n                display: \"inline-block\",\n              }}\n            >\n              {formatTempo(tempo)}x\n            </span>\n            <StyledTempoButton\n              onClick={() => handleTempoChange(0.1)}\n              title={`Change tempo (Plus key)`}\n            >\n              <div\n                style={{\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  alignItems: \"center\",\n                  justifyContent: \"center\",\n                  height: \"100%\",\n                  transform: \"translateY(-1px)\", // Fine-tuned adjustment\n                }}\n              >\n                <span\n                  style={{\n                    fontSize: \"16px\",\n                    lineHeight: \"0.8\",\n                    fontWeight: \"bold\",\n                    marginBottom: \"-3px\", // Overlap adjustment\n                  }}\n                >\n                  +\n                </span>\n                <span\n                  style={{\n                    fontSize: \"16px\",\n                    lineHeight: \"0.8\",\n                    fontWeight: \"bold\",\n                  }}\n                >\n                  =\n                </span>\n              </div>\n            </StyledTempoButton>\n          </div>\n        </TempoSection>\n\n        <LatencySection>\n          <button\n            onClick={() => setLatencyCorrectionMs(latencyCorrectionMs - 100)}\n          >\n            -lat\n          </button>\n          <span style={{ fontFamily: \"monospace\" }}>\n            {`${\n              Math.sign(latencyCorrectionMs / 1000) >= 0 ? \"+\" : \"-\"\n            }${Math.abs(latencyCorrectionMs / 1000)\n              .toFixed(2)\n              .charAt(0)}.${Math.abs(latencyCorrectionMs / 1000)\n              .toFixed(2)\n              .charAt(2)}`}\n            s\n          </span>\n          <button\n            onClick={() => setLatencyCorrectionMs(latencyCorrectionMs + 100)}\n          >\n            lat+\n          </button>\n        </LatencySection>\n\n        <StyledVolumeSlider>\n          <StyledRangeInput\n            title=\"Volume\"\n            min={0}\n            max={150}\n            step={1}\n            onChange={(e) => handleVolumeChange(e.target.value)}\n            onDoubleClick={(e) => {\n              handleVolumeChange(100);\n              e.preventDefault();\n              e.stopPropagation();\n            }}\n            value={volume}\n          />\n        </StyledVolumeSlider>\n\n        <DownloadButton\n          style={{\n            color: canDownload ? \"var(--neutral4)\" : \"var(--neutral6)\",\n            cursor: canDownload ? \"pointer\" : \"not-allowed\",\n            pointerEvents: canDownload ? \"auto\" : \"none\",\n            opacity: canDownload ? 1 : 0.5,\n          }}\n          href={createBlobUrl()}\n          download={getDownloadFilename()}\n          title={\n            canDownload ? \"Download MIDI file\" : \"No MIDI file to download\"\n          }\n        >\n          <FontAwesomeIcon icon={faDownload} />\n        </DownloadButton>\n      </AppFooterMain>\n    </StyledAppFooter>\n  );\n};\n\nexport default memo(withRouter(AppFooter));\n","import React, { Component, ErrorInfo, ReactNode } from \"react\";\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n}\n\nclass ErrorBoundary extends Component<Props, State> {\n  public state: State = {\n    hasError: false,\n  };\n\n  public static getDerivedStateFromError(_: Error): State {\n    return { hasError: true };\n  }\n\n  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error(\"Uncaught error:\", error, errorInfo);\n  }\n\n  public render() {\n    if (this.state.hasError) {\n      return this.props.fallback || <h1>Sorry.. there was an error</h1>;\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","import {\n  faArrowUpRightFromSquare,\n  faLink,\n} from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport {\n  GenreList,\n  getEmojis,\n  getUniqueStyles,\n  hasMetadata,\n} from \"../../utils/corpusUtils\";\nimport { ComposerTitle } from \"./book/Book\";\nimport { corpora, MUSESCORE_TOP_100_SLUG } from \"./corpora/corpora\";\nimport { CorpusLink } from \"./corpora/CorpusLink\";\nimport { TOP_100_COMPOSERS } from \"./top100Composers\";\n\nconst MUSESCORE_ICON = `\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 32\">\n  <path d=\"M5.529 8.944h.087c.088-3.375 2.677-6.18 5.968-6.18 2.15 0 3.685.92 4.475 2.19-1.14.482-2.018 1.622-2.018 3.025 0 1.885 1.58 3.331 3.51 3.331 1.93 0 3.51-1.622 3.51-3.769 0-3.638-3.334-6.97-7.766-6.97-4.43 0-7.81 3.55-7.81 7.715 0 .175 0 .35.044.657m13.69 13.369 3.64-5.61L6.363 9.644l-.044.043 12.9 12.624Zm4.65-3.726c0 4.821-4.125 8.152-8.336 8.152-3.291 0-5.705-1.183-6.889-2.805 1.492-.877 2.37-2.367 2.37-4.251 0-2.806-2.282-5.085-5.31-5.085C2.502 14.597 0 17.183 0 20.558c0 5.48 5.177 10.87 12.329 10.87C19.48 31.429 24 25.819 24 19.464c0-.351 0-.57-.044-.877h-.087Z\" fill=\"white\"/>\n</svg>\n`;\n\nexport type CompositionTitleProps = {\n  slug: string;\n  sourceUrl: string | null;\n  onSourceUrlUpdate: (newUrl: string) => void;\n};\n\nconst MetadataContainer = styled.div`\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  margin-left: 10px;\n`;\n\nexport const RelatedCorpora = styled.div<{ horizontal?: boolean }>`\n  display: flex;\n  flex-direction: ${(props) => (props.horizontal ? \"row\" : \"column\")};\n  gap: ${(props) => (props.horizontal ? \"30px\" : \"8px\")};\n`;\n\nexport const CorpusRow = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nexport const RelatedCorporaDisplay: React.FC<{\n  slug: string;\n  horizontal?: boolean;\n  showMetadata?: boolean;\n}> = ({ slug, horizontal = false, showMetadata = true }) => {\n  const relatedCorporaSlugs = React.useMemo(() => {\n    return corpora\n      .filter((corpus) => corpus.midis.includes(slug))\n      .filter((corpus) => corpus.slug !== MUSESCORE_TOP_100_SLUG)\n      .map((corpus) => corpus.slug);\n  }, [slug]);\n\n  if (relatedCorporaSlugs.length === 0) return null;\n\n  return (\n    <RelatedCorpora horizontal={horizontal}>\n      {relatedCorporaSlugs.map((corpusSlug) => {\n        const corpus = corpora.find((c) => c.slug === corpusSlug);\n        if (!corpus) return null;\n\n        return (\n          <CorpusRow key={corpusSlug}>\n            <CorpusLink slug={corpusSlug} />\n            {showMetadata && hasMetadata(corpus) && (\n              <MetadataContainer>\n                {corpus.country && <div>{getEmojis(corpus.country)}</div>}\n                {(corpus.genre || corpus.style) && (\n                  <GenreList>\n                    {getUniqueStyles(corpus.genre, corpus.style).join(\", \")}\n                  </GenreList>\n                )}\n                {corpus.composerBirthYear && (\n                  <span style={{ color: \"#999\" }}>\n                    *{corpus.composerBirthYear}\n                  </span>\n                )}\n              </MetadataContainer>\n            )}\n          </CorpusRow>\n        );\n      })}\n    </RelatedCorpora>\n  );\n};\n\nconst CompositionTitle: React.FC<CompositionTitleProps> = ({\n  slug,\n  sourceUrl,\n  onSourceUrlUpdate,\n}) => {\n  const [editedUrl, setEditedUrl] = React.useState(sourceUrl || \"\");\n\n  const handleSave = () => {\n    if (editedUrl !== sourceUrl) {\n      onSourceUrlUpdate(editedUrl);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"Enter\") {\n      handleSave();\n    }\n  };\n\n  const formattedTitle = slug\n    .replace(/---/g, \" – \")\n    .replace(/-/g, \" \")\n    .replace(/_/g, \" \");\n\n  const composerInfo = React.useMemo(() => {\n    return TOP_100_COMPOSERS.find((composer) => composer.slug === slug);\n  }, [slug]);\n\n  const searchQuery = encodeURIComponent(formattedTitle);\n  const museScoreUrl = `https://musescore.com/sheetmusic?sort=view_count&text=${searchQuery}`;\n\n  return (\n    <div\n      style={{\n        padding: \"10px\",\n        backgroundColor: \"rgba(0, 0, 0, 0.8)\",\n        color: \"white\",\n        fontSize: \"16px\",\n        display: \"flex\",\n        alignItems: \"flex-start\",\n        justifyContent: \"space-between\",\n      }}\n    >\n      <h1\n        style={{\n          margin: 0,\n          fontSize: \"1em\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          gap: \"8px\",\n          alignItems: \"flex-start\",\n        }}\n      >\n        <div>\n          {composerInfo ? (\n            <ComposerTitle\n              composer={composerInfo.composer}\n              displayTitle={composerInfo.displayTitle}\n            />\n          ) : (\n            formattedTitle\n          )}\n          {sourceUrl ? (\n            <a\n              href={sourceUrl}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              style={{\n                color: \"gray\",\n                textDecoration: \"none\",\n                cursor: \"pointer\",\n              }}\n            >\n              {sourceUrl.includes(\"musescore.com\") ? (\n                <span\n                  style={{\n                    display: \"inline-block\",\n                    width: \"12px\",\n                    height: \"12px\",\n                    marginLeft: \"20px\",\n                  }}\n                  dangerouslySetInnerHTML={{ __html: MUSESCORE_ICON }}\n                />\n              ) : (\n                <FontAwesomeIcon\n                  icon={faArrowUpRightFromSquare}\n                  style={{ width: \"15px\", marginLeft: \"10px\" }}\n                />\n              )}\n            </a>\n          ) : (\n            <>\n              <input\n                type=\"text\"\n                value={editedUrl}\n                onChange={(e) => setEditedUrl(e.target.value)}\n                onKeyDown={handleKeyDown}\n                onBlur={handleSave}\n                style={{\n                  marginLeft: \"10px\",\n                  fontSize: \"0.8em\",\n                  width: \"200px\",\n                  background: \"rgba(255, 255, 255, 0.1)\",\n                  border: \"none\",\n                  color: \"white\",\n                  padding: \"2px 5px\",\n                }}\n                placeholder=\"Enter source URL\"\n              />\n              <a\n                href={museScoreUrl}\n                target=\"_blank\"\n                rel=\"noreferrer\"\n                style={{\n                  color: \"gray\",\n                  textDecoration: \"none\",\n                  cursor: \"pointer\",\n                  marginLeft: \"10px\",\n                }}\n                title=\"Search on MuseScore\"\n              >\n                <FontAwesomeIcon icon={faLink} />\n              </a>\n            </>\n          )}\n        </div>\n\n        <RelatedCorporaDisplay slug={slug} />\n      </h1>\n    </div>\n  );\n};\n\nexport default CompositionTitle;\n","import { faList } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { beautifySlug } from \"./utils\";\n\nconst badgeStyle = {\n  container: {\n    fontSize: \"0.9em\",\n    letterSpacing: \"0.05em\",\n    color: \"#ddd\",\n    textDecoration: \"none\",\n    cursor: \"pointer\",\n  } as const,\n  icon: faList,\n  iconColor: \"#ddd\",\n};\n\nconst capitalizeWords = (text: string): string => {\n  return text\n    .split(\" \")\n    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n    .join(\" \");\n};\n\nexport const CorpusLink: React.FC<{ slug: string }> = ({ slug }) => {\n  return (\n    <Link\n      to={`/corpus/${slug}`}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      style={{\n        ...badgeStyle.container,\n        whiteSpace: \"nowrap\",\n        cursor: \"pointer\",\n      }}\n    >\n      <FontAwesomeIcon\n        icon={badgeStyle.icon}\n        style={{\n          width: \"12px\",\n          marginRight: \"6px\",\n          color: badgeStyle.iconColor,\n        }}\n      />\n      {capitalizeWords(beautifySlug(slug))}\n    </Link>\n  );\n};\n","export const beautifySlug = (slug: string): string => {\n  return slug.replace(/---/g, \" – \").replace(/-/g, \" \").replace(/_/g, \" \");\n};\n","import { User } from \"firebase/auth\";\nimport React from \"react\";\nimport { Analysis, MeasuresSpan } from \"./rawl/analysis\";\nimport { RawlProps } from \"./rawl/Rawl\";\n\nexport type CurrentMidi = {\n  id: string;\n  title: string;\n  slug: string;\n  sourceUrl: string | null;\n  isHiddenRoute: boolean;\n} | null;\n\nexport interface AppContextType {\n  handleSongClick: (slug: string, isHiddenRoute?: boolean) => Promise<void>;\n  rawlProps: RawlProps | null;\n  analyses: Record<string, Analysis>;\n  saveAnalysis: (analysis: Analysis) => void;\n  resetMidiPlayerState: () => void;\n  registerKeyboardHandler: (\n    id: string,\n    handler: (e: KeyboardEvent) => void,\n  ) => void;\n  unregisterKeyboardHandler: (id: string) => void;\n  currentMidi: CurrentMidi | null;\n  setCurrentMidi: (currentMidi: CurrentMidi | null) => void;\n  user: User | null;\n  seek: (seekMs: number) => void;\n  currentPlaybackTime: number | null;\n  eject: () => void;\n  currentMidiBuffer: ArrayBuffer | null;\n  hoveredMeasuresSpan: MeasuresSpan | null;\n  setHoveredMeasuresSpan: (span: MeasuresSpan | null) => void;\n  togglePause: () => void;\n  handleLogin: () => void;\n  handleLogout: () => void;\n  handleToggleAnalysis: () => void;\n  analysisEnabled: boolean;\n}\n\nexport const AppContext = React.createContext<AppContextType | undefined>(\n  undefined,\n);\n","import React, { useCallback, useContext, useMemo } from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../AppContext\";\nimport { Snippet, rehydrateSnippet } from \"./analysis\";\nimport EnhancedFrozenNotes from \"./FrozenNotes\";\n\nexport const PX_IN_MEASURE = 90;\n\nconst SnippetItemContainer = styled.div<{\n  width: number;\n  isPreview?: boolean;\n  isPreviewWithoutTime?: boolean;\n}>`\n  display: flex;\n  flex-direction: column;\n  width: ${(props) => props.width}px;\n  border-radius: ${(props) => (props.isPreview ? \"0\" : \"5px\")};\n  overflow: hidden;\n`;\n\nconst SnippetHeader = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px;\n  background-color: #222;\n`;\n\nconst TimingInfo = styled.div`\n  color: #888;\n  font-size: 0.8em;\n  margin-top: 4px;\n  text-align: center;\n`;\n\nconst SnippetContent = styled.div`\n  overflow-y: auto;\n  overflow-x: hidden;\n`;\n\nconst DeleteButton = styled.button`\n  background-color: #ff4136;\n  color: white;\n  border: none;\n  padding: 5px 10px;\n  border-radius: 3px;\n  cursor: pointer;\n  &:hover {\n    background-color: #ff7066;\n  }\n`;\n\nconst PlaybackCursor = styled.div`\n  position: absolute;\n  width: 2px;\n  height: 100%;\n  background-color: #ff6b00;\n  pointer-events: none;\n  z-index: 9999;\n  opacity: 0.8;\n  top: 0;\n  left: 0;\n  will-change: transform;\n  transform: translateX(0);\n  backface-visibility: hidden;\n`;\n\ninterface SnippetItemProps {\n  snippet: Snippet;\n  index: number;\n  deleteSnippet?: (index: number) => void;\n  noteHeight: number;\n  isPreview?: boolean;\n  hoveredColors?: string[] | null;\n}\n\nconst SnippetItem: React.FC<SnippetItemProps> = ({\n  snippet,\n  index,\n  deleteSnippet,\n  noteHeight,\n  isPreview = false,\n  hoveredColors,\n}) => {\n  const appContext = useContext(AppContext);\n  const { currentMidi } = appContext;\n\n  const { rehydratedNotes, rehydratedAnalysis, rehydratedMeasuresAndBeats } =\n    useMemo(() => rehydrateSnippet(snippet), [snippet]);\n\n  const paddedMeasuresAndBeats = useMemo(() => {\n    const startMeasure = snippet.measuresSpan[0];\n    const endMeasure = snippet.measuresSpan[1];\n\n    // Ensure we don't create an array with negative length\n    const paddingLength = Math.max(0, startMeasure - 1);\n\n    // Slice the measures array to include only the selected range\n    const slicedMeasures = rehydratedMeasuresAndBeats.measures.slice(\n      0,\n      endMeasure + 1,\n    );\n\n    const paddedMeasures = [\n      ...Array(paddingLength).fill(rehydratedMeasuresAndBeats.measures[0] || 0),\n      ...slicedMeasures,\n    ];\n\n    return {\n      ...rehydratedMeasuresAndBeats,\n      measures: paddedMeasures,\n    };\n  }, [snippet, rehydratedMeasuresAndBeats]);\n\n  const snippetMidiRange = useMemo(() => {\n    let min = Infinity;\n    let max = -Infinity;\n    rehydratedNotes.forEach((voiceNotes) => {\n      voiceNotes.forEach((note) => {\n        const midiNumber = note.note.midiNumber;\n        min = Math.min(min, midiNumber);\n        max = Math.max(max, midiNumber);\n      });\n    });\n    return [min, max] as [number, number];\n  }, [rehydratedNotes]);\n\n  const snippetMidiNumberToY = useCallback(\n    (midiNumber: number) => (snippetMidiRange[1] - midiNumber + 1) * noteHeight,\n    [snippetMidiRange, noteHeight],\n  );\n\n  const timeRange = useMemo(() => {\n    const startMeasure = snippet.measuresSpan[0];\n    const endMeasure = snippet.measuresSpan[1];\n    const startTime = paddedMeasuresAndBeats.measures[startMeasure - 1] || 0;\n    const endTime = paddedMeasuresAndBeats.measures[endMeasure] || startTime;\n    return [startTime, endTime] as [number, number];\n  }, [snippet, paddedMeasuresAndBeats]);\n\n  const containerWidth = useMemo(() => {\n    return (rehydratedMeasuresAndBeats.measures.length - 1) * PX_IN_MEASURE;\n  }, [timeRange]);\n\n  const toX = useCallback(\n    (seconds: number) => {\n      const normalizedTime =\n        (seconds - timeRange[0]) / (timeRange[1] - timeRange[0]);\n      return isNaN(normalizedTime) ? 0 : normalizedTime * containerWidth; // Use containerWidth instead of 400\n    },\n    [timeRange, containerWidth],\n  );\n\n  const isCurrentlyPlaying = useMemo(() => {\n    const snippetSlug = (snippet as any).composerSlug;\n    if (!currentMidi || !snippet.secondsSpan) return false;\n\n    const isPlaying = currentMidi.slug === snippetSlug;\n\n    return isPlaying;\n  }, [currentMidi, snippet]);\n\n  const cursorPosition = useMemo(() => {\n    if (\n      !isCurrentlyPlaying ||\n      !snippet.secondsSpan ||\n      appContext.currentPlaybackTime === null ||\n      appContext.currentPlaybackTime < snippet.secondsSpan[0]\n    ) {\n      return null;\n    }\n\n    const [start, end] = snippet.secondsSpan;\n    const currentTime = appContext.currentPlaybackTime;\n\n    // Calculate position as a percentage of the time range\n    const timeProgress = (currentTime - start) / (end - start);\n    const xPos = timeProgress * containerWidth;\n\n    return xPos;\n  }, [\n    isCurrentlyPlaying,\n    snippet.secondsSpan,\n    appContext.currentPlaybackTime,\n    containerWidth,\n  ]);\n\n  return (\n    <SnippetItemContainer\n      width={containerWidth}\n      isPreview={isPreview}\n      isPreviewWithoutTime={isPreview && snippet.secondsSpan === undefined}\n    >\n      {!isPreview && (\n        <SnippetHeader>\n          {!isPreview && deleteSnippet && (\n            <DeleteButton onClick={() => deleteSnippet(index)}>\n              Delete\n            </DeleteButton>\n          )}\n          <span>\n            {snippet.tag.replace(\":\", \": \")}{\" \"}\n            <span style={{ color: \"gray\" }}>\n              {snippet.measuresSpan.join(\"..\")}\n            </span>\n          </span>\n          {snippet.secondsSpan &&\n            Array.isArray(snippet.secondsSpan) &&\n            typeof snippet.secondsSpan[0] === \"number\" && (\n              <TimingInfo>\n                {snippet.secondsSpan[0].toFixed(2)}s -{\" \"}\n                {snippet.secondsSpan[1].toFixed(2)}s\n              </TimingInfo>\n            )}\n        </SnippetHeader>\n      )}\n      <SnippetContent style={{ position: \"relative\" }}>\n        {cursorPosition !== null && (\n          <PlaybackCursor\n            style={{\n              transform: `translateX(${cursorPosition}px)`,\n              transition:\n                appContext.currentPlaybackTime > snippet.secondsSpan[0]\n                  ? \"transform 0.74s linear\"\n                  : \"none\",\n            }}\n          />\n        )}\n        <EnhancedFrozenNotes\n          notes={rehydratedNotes}\n          midiNumberToY={snippetMidiNumberToY}\n          maxWidth={containerWidth}\n          analysis={rehydratedAnalysis}\n          measuresAndBeats={paddedMeasuresAndBeats}\n          noteHeight={noteHeight}\n          startMeasure={snippet.measuresSpan[0]}\n          toX={toX}\n          timeRange={timeRange}\n          isPreview={isPreview}\n          phraseStarts={snippet.phraseStarts || []}\n          hoveredColors={hoveredColors}\n        />\n      </SnippetContent>\n    </SnippetItemContainer>\n  );\n};\n\nexport default SnippetItem;\n","import * as React from \"react\";\nimport { SecondsConverter, SecondsSpan } from \"./Rawl\";\nimport { ColoredNote, Note, PitchBendPoint } from \"./parseMidi\";\n\n// Also useful emojis\n// 🤯 🎯 🪤 💣 🔫 💢\n\n// https://www.stevenestrella.com/midi/gmdrums.gif\nconst GM_DRUM_KIT = {\n  28: \"🤜\",\n  31: \"🕒\", //\"Metronome Click\",\n  35: \"🦵\", //\"Acoustic Bass Drum\",\n  36: \"🦶🏼\", //\"Bass Drum 1\",\n  37: \"🏑\", //\"Side Stick\",\n  38: \"🥁\", //\"Acoustic Snare\",\n  39: \"👏\", //\"Hand Clap\",\n  40: \"⚡\", //\"Electric Snare\",\n  41: \"0️⃣\", //\"Low Floor Tom\",\n  42: \"🔒\", // \"Closed Hi Hat\",\n  43: \"1️⃣\", //\"High Floor Tom\",\n  44: \"🚴‍♀️\", //\"Pedal Hi-Hat\",\n  45: \"2️⃣\", //\"Low Tom\",\n  46: \"💿\", //\"Open Hi-Hat\",\n  47: \"3️⃣\", // \"Low-Mid Tom\",\n  48: \"4️⃣\", //\"Hi-Mid Tom\",\n  49: \"💥\", //\"Crash Cymbal 1\",\n  50: \"5️⃣\", //\"High Tom\",\n  51: \"🚗\", //\"Ride Cymbal 1\",\n  52: \"🇨🇳\", //\"Chinese Cymbal\",\n  53: \"🛎️\", //\"Ride Bell\",\n  54: \"⏰\", //\"Tambourine\",\n  55: \"💦\", //\"Splash Cymbal\",\n  56: \"🐄\",\n  57: \"🔥\", //\"Crash Cymbal 2\",\n  58: \"📳\",\n  59: \"🚙\", //\"Ride Cymbal 2\",\n  60: \"🔼\",\n  61: \"🔽\",\n  62: \"🕺\",\n  63: \"💃\",\n  64: \"🪘\",\n  65: \"⬆️\",\n  66: \"⬇️\",\n  67: \"🗼\",\n  68: \"🍦\",\n  69: \"🍡\",\n  70: \"🎉\",\n  71: \"🐦\",\n  72: \"💨\",\n  73: \"#️⃣\",\n  74: \"📶\",\n  75: \"🔑\",\n  76: \"🪵\",\n  77: \"🌳\",\n  78: \"🐭\",\n  79: \"🇧🇷\",\n  80: \"⨻\",\n  81: \"△\",\n  82: \"⚱️\", //'Shaker',\n  83: \"🎅🏻\", //\"Jingle Bell\",\n  84: \"🚿\",\n  85: \"🌰\",\n  86: \"🍺\",\n  87: \"🛢️\",\n};\n\ntype MouseEventHanlder = (note: Note) => void;\nexport type MouseHandlers = {\n  handleNoteClick: MouseEventHanlder | null;\n  handleMouseEnter: MouseEventHanlder;\n  handleMouseLeave: () => void;\n  hoveredNote: Note | null;\n  systemClickHandler: (\n    e: React.MouseEvent,\n    xToSeconds?: (number) => number,\n  ) => void;\n};\n\nconst convertPitchBendToPathData = (\n  pitchBendData: PitchBendPoint[],\n  span: SecondsSpan,\n  noteHeight: number,\n  secondsToX: SecondsConverter,\n): string => {\n  const pitchBendRange = 8192;\n  const noteDuration = span[1] - span[0];\n  const noteStartX = secondsToX(span[0]);\n\n  const pitchBendToY = (value) => {\n    const normalizedValue = (value + pitchBendRange) / (2 * pitchBendRange); // Normalize to 0-1\n    return noteHeight * (1 - normalizedValue) * 4 + noteHeight / 2; // Invert because SVG's Y increases downwards\n  };\n\n  // Map a time value to the SVG's X coordinate, relative to the note's duration\n  const timeToX = (time) => {\n    const relativeTime = time - span[0]; // Time relative to the note's start\n    const normalizedTime = relativeTime / noteDuration; // Normalize to 0-1\n    return normalizedTime * (secondsToX(span[1]) - noteStartX); // Scale to note's width\n  };\n\n  // Start the path data string at the first pitch bend point\n  let pathData = `M ${timeToX(pitchBendData[0].time)} ${pitchBendToY(\n    pitchBendData[0].value,\n  )}`;\n\n  // Add line segments to each subsequent pitch bend point\n  pitchBendData.forEach((point, index) => {\n    if (index > 0) {\n      // Skip the first point as it's already used in 'M'\n      pathData += ` L ${timeToX(point.time)} ${pitchBendToY(point.value)}`;\n    }\n  });\n\n  return pathData;\n};\n\nexport const getNoteRectangles = (\n  notes: ColoredNote[],\n  midiNumberToY: (number: number) => number,\n  noteHeight: number,\n  handleNoteClick: MouseEventHanlder,\n  handleMouseEnter: MouseEventHanlder,\n  handleMouseLeave: () => void,\n  secondsToX: SecondsConverter,\n  enableManualRemeasuring: boolean,\n  hoveredColors: string[] | null,\n) => {\n  return notes.map((note) => {\n    const {\n      isDrum,\n      note: { midiNumber, relativeNumber },\n      color,\n      voiceIndex,\n      isActive,\n    } = note;\n    const number = relativeNumber === undefined ? midiNumber : relativeNumber;\n    const top = midiNumberToY(isDrum ? number + 12 : number) - noteHeight;\n    const left = secondsToX(note.span[0]);\n\n    const pathData = note.chipState?.on?.pitchBend\n      ? convertPitchBendToPathData(\n          note.chipState.on.pitchBend,\n          note.span,\n          noteHeight,\n          secondsToX,\n        )\n      : null;\n    const width = secondsToX(note.span[1]) - secondsToX(note.span[0]);\n\n    const isHighlighted = !hoveredColors || hoveredColors.includes(color);\n\n    return isDrum ? (\n      isActive && (\n        <div\n          style={{\n            position: \"absolute\",\n            fontSize: \"16px\",\n            height: \"10px\",\n            width: \"auto\",\n            overflow: \"visible\",\n            left,\n            top,\n            fontFamily: \"Helvetica, sans-serif\",\n            color: \"white\",\n            placeItems: \"center\",\n            transform: \"translateX(-50%)\", // Shift the div left by half its width\n            whiteSpace: \"nowrap\", // Prevent text wrapping\n            zIndex: 1000,\n          }}\n        >\n          {GM_DRUM_KIT[midiNumber] || midiNumber}\n        </div>\n      )\n    ) : (\n      <div\n        key={`nr_${note.id}`}\n        className={`${color} voiceShape-${voiceIndex}`}\n        style={{\n          position: \"absolute\",\n          height: `${isActive && isHighlighted ? noteHeight * 2 : 0.5}px`,\n          width,\n          overflow: \"visible\",\n          top: isActive && isHighlighted ? top : top + noteHeight * 2 - 0.5,\n          left,\n          pointerEvents: handleNoteClick ? \"auto\" : \"none\",\n          zIndex: Math.round(10 + (width > 0 ? 1000 / width : 1000)),\n          boxSizing: \"border-box\",\n          display: \"grid\",\n          boxShadow: isActive && isHighlighted ? \"0 0 0px 0.5px black\" : \"\",\n          cursor: enableManualRemeasuring\n            ? \"e-resize\"\n            : handleNoteClick\n            ? \"pointer\"\n            : \"default\",\n        }}\n        onClick={(e) => {\n          e.stopPropagation();\n          if (handleNoteClick) {\n            handleNoteClick(note);\n          }\n        }}\n        onMouseEnter={(e) => !isDrum && handleMouseEnter(note)}\n        onMouseLeave={() => !isDrum && handleMouseLeave()}\n      >\n        {pathData && isActive && isHighlighted && (\n          <div style={{ position: \"relative\", width: \"100%\", height: \"100%\" }}>\n            <svg\n              style={{\n                position: \"absolute\",\n                top: 0,\n                left: 0,\n                height: \"100%\",\n                width: \"100%\",\n                overflow: \"visible\",\n              }}\n            >\n              <path d={pathData} stroke=\"white\" strokeWidth=\"4\" fill=\"none\" />\n              <path d={pathData} stroke=\"black\" strokeWidth=\"2\" fill=\"none\" />\n            </svg>\n          </div>\n        )}\n      </div>\n    );\n  });\n};\n","const EXPLANATIONS: Record<string, string> = {\n  \"parallel:symmetry\": \"Mixed use of I and i within the same section\",\n  \"form:sentence\":\n    \"Idea (2 measures), its restatement (2 measures), fragmentation of the idea (1+1 measures), cadence (2 measures)\",\n};\n\nexport default EXPLANATIONS;\n","import React, { ReactNode, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useLocalStorage } from \"usehooks-ts\";\nimport { a, c, k, q } from \"./book/chapters\";\nimport { TonicProvider } from \"./legends/ChordStairs\";\n\nconst Pp = styled.div`\n  margin-bottom: 15px;\n`;\n\nconst Label = styled.span`\n  font-weight: bold;\n  color: #666;\n`;\n\nconst m = (n: number) => <>m. {n}</>;\n\nconst FoldButton = styled.button`\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  border: none;\n  font-size: 18px;\n  cursor: pointer;\n  width: 25px;\n  height: 25px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 100001;\n  background: #ccc;\n  color: black;\n  &:hover {\n    background: #444;\n  }\n`;\n\ntype QAPair = {\n  q: string | ReactNode;\n  a?: ReactNode;\n};\n\nexport const NARRATIVES: Record<string, { qa: QAPair[] }> = {\n  \"happy-birthday\": {\n    qa: [\n      {\n        q: \"How many colors are in this score?\",\n        a: (\n          <>\n            Seven colors. This is an C major scale starting from a white note (a{\" \"}\n            <i>tonic</i>). Play with this scale: {k(\"white-keys\")}\n          </>\n        ),\n      },\n      {\n        q: 'Click on the \"melody\" in the top right panel to solo the melody. Listen to it separately. What repeats four times in it?',\n        a: \"A motive starting with two short notes is repeated four times, starting at the ends of measures 1, 3, 5, and 7.\",\n      },\n      // {\n      //   q: (\n      //     <>\n      //       If you have stereo sound output now, enable the{\" \"}\n      //       {FORCED_PANNING_LABEL} mode (the page will refresh). Now listen to\n      //       the song again. What do you hear?\n      //     </>\n      //   ),\n      //   a: \"The melody is now in the right ear and the accompaniment in the left one.\",\n      // },\n    ],\n  },\n  \"someone-like-you\": {\n    qa: [\n      {\n        q: (\n          <>\n            <Pp>\n              This score follows{\" \"}\n              {a(\n                \"https://www.youtube.com/watch?v=hLQl3WQQoQ0\",\n                \"the YouTube version\",\n              )}{\" \"}\n              closely.{\" \"}\n              {a(\n                \"https://genius.com/Adele-someone-like-you-lyrics\",\n                \"Lyrics on Genius\",\n              )}\n            </Pp>\n            <Pp>\n              Name the chords of the loop that's used in the intro and in all\n              verses.\n            </Pp>\n          </>\n        ),\n        a: <>It's {c`I iii vi IV`}</>,\n      },\n      {\n        q: <>The loop in the chorus is slightly different. Name its chords.</>,\n        a: <>It's {c`I V vi IV`}</>,\n      },\n      {\n        q: (\n          <>\n            Solo the vocal part - click on the \"Choir Aahs\" in the top right\n            voice legend. The main motive of the verse melody is one measure\n            long, starting from the end of {m(4)}. How many times does it repeat\n            almost verbatim and what happens with it afterwards?\n          </>\n        ),\n        a: (\n          <>\n            The {c`5 3 2 1 6`} repeats about five times and then mutates with\n            each measure - uses different contours for the same notes, gets more\n            shorter notes to the end.\n          </>\n        ),\n      },\n    ],\n  },\n  \"despacito-piano-cover-peter-bence\": {\n    qa: [\n      {\n        q: (\n          <>\n            People argue about the tonic here. {q(\"vice_despacito\")} I'll teach\n            you how to recolor. Select the measure number 1. Then, hover any\n            note to make it a white tonic note. To apply the coloring, click on\n            the desired tonic.\n          </>\n        ),\n      },\n    ],\n  },\n};\n\nexport const SongNarrative: React.FC<{\n  slug: string;\n  currentTonic?: number;\n}> = ({ slug, currentTonic }) => {\n  const [lastOpenedIndex, setLastOpenedIndex] = useState(0);\n  const [showNarrative, setShowNarrative] = useLocalStorage(\n    \"showNarrative\",\n    true,\n  );\n\n  const narrative = NARRATIVES[slug as keyof typeof NARRATIVES];\n\n  if (!narrative) {\n    return null;\n  }\n\n  const content = (\n    <div\n      style={{\n        position: \"absolute\",\n        top: 10,\n        right: -10,\n        width: \"457px\",\n        zIndex: 100000,\n      }}\n    >\n      {showNarrative ? (\n        <div>\n          <FoldButton onClick={() => setShowNarrative(false)}>x</FoldButton>\n          <div\n            style={{\n              backgroundColor: \"black\",\n              padding: 10,\n              border: \"1px solid #666\",\n              zIndex: 100000,\n              maxWidth: \"40em\",\n            }}\n          >\n            {narrative.qa.map((qa, index) => {\n              if (index > lastOpenedIndex) {\n                return null;\n              }\n\n              return (\n                <TonicProvider currentTonic={currentTonic}>\n                  <div key={index} style={{ marginBottom: \"2.5rem\" }}>\n                    <div style={{ marginBottom: \"0.5rem\" }}>\n                      <Label>Q:</Label>{\" \"}\n                      <span style={{ color: \"#fff\" }}>{qa.q}</span>\n                    </div>\n\n                    {index < lastOpenedIndex\n                      ? qa.a && (\n                          <div style={{ paddingTop: \"10px\" }}>\n                            <Label>A:</Label>{\" \"}\n                            <span style={{ color: \"#fff\" }}>{qa.a}</span>\n                          </div>\n                        )\n                      : (qa.a || index < narrative.qa.length - 1) && (\n                          <button\n                            style={{\n                              padding: \"10px\",\n                              marginTop: \"10px\",\n                              backgroundColor: \"#4a90e2\",\n                              color: \"white\",\n                              border: \"none\",\n                              borderRadius: \"4px\",\n                              cursor: \"pointer\",\n                            }}\n                            onClick={() => setLastOpenedIndex(index + 1)}\n                          >\n                            {qa.a ? \"Show answer\" : \"Show next question\"}\n                          </button>\n                        )}\n                  </div>\n                </TonicProvider>\n              );\n            })}\n          </div>\n        </div>\n      ) : (\n        <button\n          onClick={() => setShowNarrative(true)}\n          style={{\n            position: \"absolute\",\n            top: 0,\n            right: 0,\n            background: \"none\",\n            border: \"none\",\n            cursor: \"pointer\",\n            fontSize: \"24px\",\n            padding: 0,\n          }}\n        >\n          💬\n        </button>\n      )}\n    </div>\n  );\n\n  return content;\n};\n","import { faKeyboard } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport {\n  Chord,\n  MAJOR_MODE,\n  MINOR_MODE,\n  STRICT_NATURAL_MINOR,\n} from \"../legends/chords\";\nimport ChordStairs, { TonicProvider } from \"../legends/ChordStairs\";\nimport { PianoLegend } from \"../legends/PianoLegend\";\nimport { TOP_100_COMPOSERS } from \"../top100Composers\";\nimport { CompositionLink } from \"./Book\";\nimport { Citation } from \"./Citations\";\nimport { CITES } from \"./cites\";\nimport { FileDropBox } from \"./FileDropBox\";\nimport Metaphors from \"./Metaphors\";\n\nexport const MODULATIONS_CHAPTER_TITLE = \"Modulations\";\nexport const DOUBLE_TONIC_CHAPTER_TITLE = \"Double-tonic\";\n\nconst P = styled.div`\n  margin-bottom: 30px;\n  line-height: 1.6;\n`;\n\nconst C = ({ c, title }: { c: Chord[]; title: string }) => (\n  <span\n    style={{\n      display: \"inline-block\",\n      position: \"relative\",\n      top: \"5px\",\n      padding: \"3px 3px\",\n    }}\n    title={title.replace(/b/g, \"♭\").replace(/#/g, \"♯\")}\n  >\n    <ChordStairs\n      mode={{ title: \"\", chords: c }}\n      scale={0.85}\n      playbackMode=\"together\"\n    />\n  </span>\n);\n\nexport const rn = (strings: TemplateStringsArray) => (\n  <span\n    style={{\n      fontFamily: \"Fira Sans\",\n      fontWeight: \"700\",\n      fontSize: \"1.1em\",\n    }}\n  >\n    {strings[0].replace(\"7\", \"⁷\")}\n  </span>\n);\n\nconst cl = (slug: string) => (\n  <>\n    “\n    <CompositionLink\n      composer={TOP_100_COMPOSERS.find((c) => c.slug === slug)}\n    />\n    ”\n  </>\n);\n\nexport const c = (strings: TemplateStringsArray) => {\n  const chordString = strings[0].trim();\n  const chords = chordString.split(/\\s+/);\n  return <C c={chords as Chord[]} title={chordString} />;\n};\n\nconst ct = (string: string, tonic: number) => (\n  <TonicProvider currentTonic={tonic}>{c([string] as any)}</TonicProvider>\n);\n\nexport const a = (href: string, text: string) => (\n  <a\n    href={href}\n    target=\"_blank\"\n    rel=\"noopener noreferrer\"\n    style={{ color: \"orange\", whiteSpace: \"nowrap\" }}\n  >\n    {text}\n  </a>\n);\n\nconst A = (href: string) => (\n  <a\n    href={`/f/${href}`}\n    target=\"_blank\"\n    rel=\"noopener noreferrer\"\n    style={{ color: \"orange\", whiteSpace: \"nowrap\" }}\n  >\n    {href}\n  </a>\n);\n\nexport const s = (tags: TemplateStringsArray) => {\n  const tag = tags[0];\n  return (\n    <a\n      href={`/s/${tag.replace(\":\", \"/\")}`}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      style={{\n        borderRadius: \"10px\",\n        display: \"inline-block\",\n        // border: \"0.5px solid #888\",\n        padding: \"0px 15px 0px 0px\",\n        cursor: \"pointer\",\n        whiteSpace: \"nowrap\",\n      }}\n    >\n      <span style={{ fontVariantCaps: \"small-caps\", fontSize: \"0.9em\" }}>\n        {tag\n          .split(\":\")[0]\n          .replace(/_/g, \" \")\n          .replace(/(?<![A-Za-z])b(?![A-Za-z])/g, \"♭\")}\n      </span>{\" \"}\n      <span style={{ color: \"#888\", fontSize: \"0.9em\" }}>\n        {tag\n          .split(\":\")[1]\n          .replace(/_/g, \" \")\n          .replace(/(?<![A-Za-z])b(?![A-Za-z])/g, \"♭\")}\n      </span>\n    </a>\n  );\n};\n\nconst n = (text: TemplateStringsArray) => (\n  <span style={{ whiteSpace: \"nowrap\" }}>{text}</span>\n);\n\nexport const k = (layout: string, title?: string) => {\n  return (\n    <a\n      href={`https://vpavlenko.github.io/layouts/${layout}`}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n      style={{\n        display: \"inline-block\",\n        color: \"white\",\n        margin: \"10px 20px 10px 0\",\n        padding: \"7px\",\n        borderRadius: \"3px\",\n        boxShadow: \"0 0 2px 2px gray\",\n      }}\n    >\n      <FontAwesomeIcon icon={faKeyboard} style={{ marginRight: \"10px\" }} />\n      {title ?? layout.replace(/-/g, \" \")}\n    </a>\n  );\n};\n\nexport const q = (citeKey: keyof typeof CITES) => (\n  <Citation citeKey={citeKey} />\n);\n\nexport const CHAPTER_GROUPS: Record<string, [number, number]> = {\n  intro: [1, 1],\n  \"loops: four-chord progressions\": [2, 6],\n  \"diatonic functional harmony\": [7, 11],\n  \"borrowed chords\": [12, 14],\n  \"applied chords and modulation\": [15, 19],\n  scales: [20, 20],\n  \"seventh and extended chords\": [21, 24],\n  style: [25, 25],\n};\n\nexport const CHAPTERS: Array<{\n  title: string;\n  titleChords?: Chord[];\n  mode?: Mode | Mode[];\n  pretext?: () => React.JSX.Element;\n  composers: (typeof TOP_100_COMPOSERS)[number][\"slug\"][];\n}> = [\n  {\n    title: \"Intro\",\n    titleChords: [\"I\"],\n    composers: [\"happy-birthday\"],\n    pretext: () => (\n      <>\n        <h2>Structures in Western music</h2>\n        <P>\n          I invite you to my journey through 100 pieces of composers whose music\n          is popular nowadays.\n        </P>\n        <P>\n          I use my own piano-roll-based notation with notes colored into 12\n          colors, always starting from the main note – <i>the tonic</i>. This\n          simplifies visual analysis: chords like {c`IV V I`} and other\n          structures become visible, scores become readable and interpretable.\n        </P>\n        <P>This is the color scheme we'll use through the entire book:</P>\n        <P>\n          <PianoLegend />\n        </P>\n        <P>\n          You don't need any knowledge of standard notation throughout this\n          journey.\n        </P>\n\n        <h2>12 notes</h2>\n        <P>\n          There are twelve notes in each octave of a piano:{\" \"}\n          {c`1 b2 2 b3 3 4 #4 5 b6 6 b7 7`}\n        </P>\n        <P>\n          Throughout the book I'll mention keyboard layouts to try out different\n          concepts by playing them directly from your computer keyboard. Here\n          are two keyboards showcasing all 12 notes:\n        </P>\n        <P>\n          {k(\"traditional-layout\")}\n          {k(\"flat-chromatic-layout\")}\n        </P>\n        <P>\n          Each color is present several times on a piano keyboard – in different\n          octaves: {c`1 3 5 1 3 5 1 3 5 1 3 5 1`}\n        </P>\n        {/* \n        <P>\n          The distance between two consecutive keys is called a semitone.{\" \"}\n          {c`1 b2`}, {c`4 #4`}, {c`b6 6`} and {c`6 b7`} are one semitone apart.\n          All distances between two consecutive notes on a piano keyboard is the\n          same since mid-19th century. {q(\"rings_tuning\")}\n        </P> */}\n\n        <h2>Chords in a major scale</h2>\n        <P>\n          Some pieces are built entirely on a subset of seven notes called a\n          major scale: {c`1 2 3 4 5 6 7 1 2 3 4 5 6 7 1`}\n        </P>\n        <P>{k(\"major-scale\")}</P>\n        <P>\n          If you play three colors, it's called <i>a chord</i>. How to draw a\n          nice chord from a scale? You pick a <i>root</i> color - eg. {c`1`},\n          and then you pick every other note after it: skip {c`2`}, take {c`3`},\n          skip {c`4`}, take {c`5`}. This way we get a \"one\" chord - {n`1-3-5`}{\" \"}\n          {c`1 3 5`} {c`I`}.\n        </P>\n        <P>\n          We can do this from any note of the scale:\n          <ul>\n            <li>\n              {n`2-4-6`} {c`2 4 6`} {c`ii`}\n            </li>\n            <li>\n              {n`3-5-7`} {c`3 5 7`} {c`iii`}\n            </li>\n            <li>\n              {n`4-6-1`} {c`4 6 1`} {c`IV`} – in seven-note scales 8=1, 9=2 etc.\n            </li>\n            <li>\n              {n`5-7-2`} {c`5 7 2`} {c`V`}\n            </li>\n            <li>\n              {n`6-1-3`} {c`6 1 3`} {c`vi`}\n            </li>\n            <li>\n              {n`7-2-4`} {c`7 2 4`} {c`viio`}\n            </li>\n          </ul>\n        </P>\n        <P>\n          Chords are words in the Western musical language. Western music is\n          melody plus chords.\n        </P>\n        <P>\n          Here are all seven chords that we can build on a major scale this way:{\" \"}\n          {c`I ii iii IV V vi viio I`}\n        </P>\n        <P>\n          In this intro we'll have a close look at the song \"Happy Birthday\".\n          The arrangement we're gonna analyze uses three chords played in the\n          left hand, underneath the melody: {c`I`}, {c`IV`} and {c`V`}, in this\n          order: {c`I V V I I IV V I`}\n        </P>\n        <P>Click on the link below to open the score:</P>\n        {/* <P>\n          However, our arrangement builds a major scale starting from the note\n          F.\n        </P>\n        <P>\n          <PianoLegend currentTonic={5} />\n        </P>\n        <P>\n          This is legal: all musical structures are relative and can be shifted\n          up or down a fixed amount of semitones.\n        </P>\n        <P>\n          For instance, let's consider this string of chords in C major:{\" \"}\n          {c`I V V I I IV V I`}\n        </P>\n        <P>\n          <TonicProvider currentTonic={1}>\n            In C# major it looks the same but sounds differently:{\" \"}\n            {c`I V V I I IV V I`}\n          </TonicProvider>\n        </P>\n        <P>\n          Now, open the score of \"Happy Birthday\" and let's start analyzing.\n        </P> */}\n      </>\n    ),\n  },\n  {\n    title: \"Single loop in major\",\n    titleChords: [\"I\", \"iii\", \"vi\", \"IV\"],\n    mode: {\n      title: \"6 common triads in a major mode\",\n      chords: [\"ii\", \"IV\", \"vi\", \"I\", \"iii\", \"V\"],\n    },\n    pretext: () => (\n      <>\n        <h2>Our path</h2>\n        <P>\n          The word <i>harmony</i> in music theory means \"which colors are\n          combined together in a given piece or a style\". Usually colors are\n          organized in chords, so a talk on harmony starts with \"what's the\n          order or chords\".\n        </P>\n        <P>\n          The chapters of this book go through pieces in order of increasing\n          harmonic complexity. We start with pieces which use only seven colors\n          (<i>pitch classes</i>):\n          <ul>\n            <li>major scale: {c`1 2 3 4 5 6 7 1`}</li>\n            <li>minor scale: {c`1 2 b3 4 5 b6 b7 1`}</li>\n          </ul>\n        </P>\n        <P>\n          We begin with the pieces with simple harmony – like{\" \"}\n          {c`I vi IV V I vi IV V`} or {c`i i bVI V i i bVI V`} – the diatonic\n          harmony.\n        </P>\n        <P>\n          Then we progress all the way to complex chromatic harmony, like{\" \"}\n          {c`i iio7 V43 i6 Ger viio7/V i64 V7b9 i`} and{\" \"}\n          {c`Imaj7 V7/IV IVmaj7 iv7 Imaj7 V7/ii V7/V V7 Imaj7`}\n        </P>\n\n        <P>\n          Many things influence each piece: a composer combines ideas of\n          harmony, melody, voice-leading, texture, rhythm, form. I picked\n          harmony as the main axis of this book. I discuss other aspects of\n          music as a set of questions and answers below the scores of each\n          piece.\n        </P>\n\n        <h2>Loops</h2>\n        <P>In Western music, chords usually change at regular times.</P>\n        <P>\n          The easiest way of organizing chords is to put them in a loop. The\n          most common length of the loop is four chords.\n        </P>\n        <P>\n          There are six common chords that can be built on a major scale:{\" \"}\n          {c`I ii iii IV V vi I`}\n        </P>\n        <P>\n          We have four places to fill in with chords in a loop. If you put{\" \"}\n          {c`I`} on the first place, you can fill in the rest three distinct\n          chords in {n`5 × 4 × 3 = 60`} ways.\n        </P>\n        <P>\n          However, historically just a few of these hypothetical loops take up\n          the majority of the songs. Some popular loops are:\n          <ul>\n            <li>\n              {a(\n                \"https://en.wikipedia.org/wiki/%2750s_progression\",\n                \"'50s progression\",\n              )}{\" \"}\n              has two common rotations:\n              <ul style={{ marginBottom: \"1em\" }}>\n                <li> {c`I vi IV V I vi IV V`}</li>\n                <li>{c`IV V I vi IV V I vi`}</li>\n              </ul>\n            </li>\n            <li>{c`I iii vi IV I iii vi IV`}</li>\n          </ul>\n        </P>\n        <h2>Roman numeral analysis</h2>\n        <P>\n          Let's notate six chords that we find in pieces built on a major scale\n          by using Roman numeral analysis.\n        </P>\n        <P>\n          <ChordStairs\n            mode={{\n              title: \"\",\n              chords: [\"I\", \"ii\", \"iii\", \"IV\", \"V\", \"vi\"],\n            }}\n          />\n        </P>\n        <P>\n          Pronounced: \"a one chord\", \"a two chord\", \"a three chord\", \"a four\n          chord\", \"a five chord\", \"a six chord\".\n        </P>\n        <P>\n          If we look at the intervals of each chord starting from the root,\n          there are two types of chords:\n          <ul>\n            <li>\n              {rn`I`} {c`I`}, {rn`IV`} {c`IV`}, {rn`V`} {c`V`} – intervals 4+3,\n              major chords written in uppercase Roman numerals\n            </li>\n            <li>\n              {rn`ii`} {c`ii`}, {rn`iii`} {c`iii`}, {rn`vi`} {c`vi`} – intervals\n              3+4, minor chords written in lowercase Roman numeral\n            </li>\n          </ul>\n        </P>\n\n        <P>\n          Be careful: the terms \"major chord\" / \"minor chord\" are not the same\n          thing as \"major scale\" / \"minor scale\". As we see, in a major scale we\n          have three major chords and three minor chords. We'll clarify this\n          when we reach a chapter on pieces in a minor scale.\n        </P>\n        <P>\n          Listen to the songs below and analyze the loops they are built upon.\n        </P>\n      </>\n    ),\n    composers: [\n      \"the-office\",\n      \"runaway---kanye-west-ramin-djawadi-arr.-by-alex-patience\",\n      \"doki-doki-literature-club-ost---your-reality\",\n      \"Viva_La_Vida_Coldplay\",\n    ],\n  },\n  {\n    title: \"Different loops for verse/chorus\",\n    titleChords: [\"I\", \"V\", \"vi\", \"IV\"],\n    mode: {\n      title: \"6 common triads in a major mode\",\n      chords: [\"ii\", \"IV\", \"vi\", \"I\", \"iii\", \"V\"],\n    },\n    pretext: () => (\n      <>\n        <h2>Form</h2>\n        <P>\n          The word <i>form</i> in music theory means \"how parts of a piece are\n          organized together\". How are they different, and what is common in\n          them that holds the whole piece together.\n        </P>\n        <P>\n          A song may have several parts: intro, verse, pre-chorus, chorus,\n          bridge. Some songs use different loops for different parts. For\n          example, a verse can go like {c`I vi IV V`} and a chorus can go like{\" \"}\n          {c`vi IV I V`}\n        </P>\n        <P>\n          Throughout the book you can hover over colorful chords to see their\n          Roman numerals.\n        </P>\n        <P>\n          As you analyze pieces in this chapter, listen to them on YouTube and\n          read the lyrics to understand which parts they have. Then, as you\n          follow the score below, see if different parts use contrasting loops.\n        </P>\n        <h2>Timeline of loops</h2>\n        <P>\n          Making pieces entirely of four-chord loops is a recent innovation – it\n          gained popularity in the 1950s. {q(\"tagg_loops\")} {q(\"nobile\")}{\" \"}\n          Neither Mozart nor Chopin composed like that.\n        </P>\n        <P>In the songs below you'll find another popular loop: </P>\n        <P>\n          {a(\n            \"https://en.wikipedia.org/wiki/I%E2%80%93V%E2%80%93vi%E2%80%93IV_progression\",\n            \"I–V–vi–IV progression\",\n          )}{\" \"}\n          has two common rotations: {c`I V vi IV`} and {c`vi IV I V`}\n        </P>\n        <P>\n          Unlike the{\" \"}\n          {a(\n            \"https://en.wikipedia.org/wiki/%2750s_progression\",\n            \"'50s progression\",\n          )}{\" \"}\n          {c`I vi IV V`}, the {c`I V vi IV`} only started gaining popularity\n          after the '70s and peaked in 2000s - as you can check on Wikipedia\n          sorting examples by year. This is an arbitrary cultural event - the\n          history might as well go the other way around.\n        </P>\n        <P>\n          As you have heard many old songs through radio and films during your\n          lifetime, you might have learned their precedence. Do you hear the\n          former progression as \"older\", \"more ancient\"?\n        </P>\n\n        <h2>Intervals</h2>\n        <P>\n          A smallest interval between the two notes in Western music is called a\n          semitone. Here are semitones built up from all notes of a major scale:{\" \"}\n          {c`1 b2`}, {c`2 b3`}, {c`3 4`}, {c`4 #4`}, {c`5 b6`}, {c`6 b7`},{\" \"}\n          {c`7 1`} Physically, all semitones between two consecutive notes are\n          the same.\n        </P>\n        {/* <P>Another two intervals that are important are three semitones and four semitones</P> */}\n        <h2>Other resources</h2>\n        <P>\n          If you're lost in my narrative, try these instead:\n          <ul>\n            <li>{a(\"https://www.lightnote.co/\", \"Lightnote\")}</li>\n            <li>{a(\"https://book-one.hooktheory.com/\", \"Hooktheory\")}</li>\n            <li>\n              {a(\n                \"https://learningmusic.ableton.com/\",\n                \"Ableton's Guide on Music\",\n              )}\n            </li>\n          </ul>\n        </P>\n        <h2>Drop your MIDI files</h2>\n        <P>\n          If you have your own MIDI file and you want to see it colored, drag\n          and drop it to this website.\n        </P>\n        <P>\n          <FileDropBox />\n        </P>\n        <P>\n          If you want me to color a specific piece, reach out via{\" \"}\n          <a href=\"mailto:cxielamiko@gmail.com\">cxielamiko@gmail.com</a> or{\" \"}\n          <a href=\"https://t.me/vitalypavlenko\">https://t.me/vitalypavlenko</a>\n        </P>\n      </>\n    ),\n    composers: [\n      \"someone-like-you\",\n      \"someone-you-loved-lewis-capaldi\",\n      \"Ed_Sheeran_Perfect\",\n      \"dont-stop-believing-piano\",\n      \"A_Thousand_Miles\",\n    ],\n  },\n  {\n    title: \"Loops in minor\",\n    titleChords: [\"iv\", \"i\"],\n    mode: {\n      title: \"natural minor without bIII\",\n      chords: [\"iv\", \"v\", \"bVI\", \"bVII\", \"i\"],\n    },\n    pretext: () => (\n      <>\n        <h2>Chords in natural minor</h2>\n        <P>\n          Another scale that's widely used in Western music is a natural minor\n          scale: {c`1 2 b3 4 5 b6 b7 1 2 b3 4 5 b6 b7 1`}\n        </P>\n        <P>\n          For this scale we can also form chords by taking every other note from\n          each root. This way we'll get seven chords:{\" \"}\n          {c`i iio bIII iv v bVI bVII i`}\n        </P>\n        <P>\n          In this chapter we'll look at pieces which have loops made of a subset\n          of these chords:\n        </P>\n        <P>\n          <ChordStairs mode={STRICT_NATURAL_MINOR} />\n        </P>\n        <P>A note on pronunciation: {rn`♭VI`} is a \"flat-six major chord\"</P>\n        <P>\n          Some of these pieces have four-chord loops, while others have longer\n          strings of chords. As you analyze them, try to find any patterns. Is\n          there a pair of chords which often go together? Is there a frequent\n          sequence of three chords?\n        </P>\n        <h2>Major and minor chords</h2>\n        <P>\n          There are two types of triads commonly used in Western music: major\n          chords and minor chords.\n        </P>\n        <P>\n          Here are pairs of minor vs major chords - not in any particular mode,\n          just \"in the air\":\n          <ul>\n            <li>\n              {c`i`} {c`I`}\n            </li>\n            <li>\n              {c`ii`} {c`II`}\n            </li>\n            <li>\n              {c`biii`} {c`bIII`}\n            </li>\n            <li>\n              {c`iii`} {c`III`}\n            </li>\n            <li>\n              {c`iv`} {c`IV`}\n            </li>\n            <li>\n              {c`v`} {c`V`}\n            </li>\n            <li>\n              {c`bvi`} {c`bVI`}\n            </li>\n            <li>\n              {c`vi`} {c`VI`}\n            </li>\n            <li>\n              {c`bvii`} {c`bVII`}\n            </li>\n          </ul>\n        </P>\n        <P>\n          Minor chords have a smaller interval of three semitones at the bottom\n          and a bigger interval of four semitones at the top.\n        </P>\n        <P>\n          Major chords has a smaller interval of three semitones at the top and\n          a bigger interval of four semitones at the bottom.\n        </P>\n        <P>\n          One interesting observation is that chords built on roots 1 {c`1`}, 4{\" \"}\n          {c`4`} and 5 {c`5`} are:\n          <ul>\n            <li>\n              major chords {c`I`} {c`IV`} {c`V`} if built on a major scale\n            </li>\n            <li>\n              major chords {c`i`} {c`iv`} {c`v`} if built on a minor scale\n            </li>\n          </ul>\n        </P>\n        <P>\n          So that's the connection between a major scale and major chords, and\n          also between a minor scale and minor chords.\n        </P>\n      </>\n    ),\n    composers: [\n      \"still-dre---variation-composition\",\n      \"Im_Blue_Eiffel_65\",\n      \"Never_Gonna_Give_You_Up\",\n      \"Lovely_Billie_Eilish\",\n      \"Interstellar\",\n    ],\n  },\n\n  {\n    title: \"i i ♭VI V\",\n    titleChords: [\"i\", \"i\", \"bVI\", \"V\"],\n    mode: {\n      title: \"\",\n      chords: [\"i\", \"bVI\", \"V\"],\n    },\n    pretext: () => (\n      <>\n        <h2>i i ♭VI V</h2>\n        <P>\n          These songs exploit an endless loop of {c`i i bVI V i i bVI V`}. So,\n          they don't fit within the natural minor scale {c`1 2 b3 4 5 b6 b7 1`},\n          since {c`V`} uses a note {c`7`}\n        </P>\n        <P>\n          You might say that these songs are using an extended minor scale:{\" \"}\n          {c`1 2 b3 4 5 b6 b7 7 1`}\n        </P>\n        <P>\n          Or you might say that the chord {c`V`} is drawn from a harmonic minor\n          scale, unlike all other chords: {c`1 2 b3 4 5 b6 7 1`}\n        </P>\n        <P>\n          Songs besides the top 100 that have the same pattern:\n          <ul>\n            <li>\n              {a(\n                \"/f/road-trippin---red-hot-chili-peppers\",\n                \"Red Hot Chili Peppers. Road trippin'\",\n              )}\n            </li>\n            <li>\n              {a(\n                \"/f/seven-nation-army-arr.-nikodem-lorenz\",\n                \"The White Stripes. Seven Nations Army\",\n              )}\n            </li>\n            <li>\n              {a(\n                \"/f/loonboon---laura-shigihara-arranged-by-piano-keyng\",\n                \"Laura Shigihara. Loonboon\",\n              )}\n            </li>\n          </ul>\n        </P>\n        {/* <h2>Historical context</h2>\n        <P>\n          Until a natural minor mode gained popularity, a minor mode mostly used{\" \"}\n          {c`V`}. However, the examples below are modern, because they are made\n          of an endless four-measure loop – which is also a modern thing. The\n          truly old examples will appear in the next chapter.\n        </P> */}\n      </>\n    ),\n    composers: [\n      \"Requiem_for_a_Dream\",\n      \"we-are-number-one-but-it-s-a-piano-transcript\",\n      \"Believer_-_Imagine_Dragons\",\n    ],\n  },\n\n  {\n    title: DOUBLE_TONIC_CHAPTER_TITLE,\n    pretext: () => (\n      <>\n        <h2>Natural minor = major</h2>\n        <P>Here's a C major scale: {c`1 2 3 4 5 6 7`}</P>\n        <P>Here's an A minor scale: {ct(`1 2 b3 4 5 b6 b7`, -3)}</P>\n        <P>\n          Here's an A minor scale played the note ♭3:\n          {ct(`b3 4 5 b6 b7 1 2`, -3)}\n        </P>\n        <P>\n          Notice that C major scale and A minor scale played from {c`b3`} sound\n          exactly the same.\n        </P>\n        <P>\n          Therefore, these two sequences of chords sound the same even if they\n          look different:\n        </P>\n        <P>\n          <ul>\n            <li>{c`I ii iii IV V vi`} - in a C major scale</li>\n            <li>{ct(`bIII iv v bVI bVII i`, -3)} - in a A minor scale</li>\n          </ul>\n        </P>\n        <P>\n          This is a fundamental relation. Each major scale has a <i>relative</i>{\" \"}\n          minor scale. They both share the exact set of piano notes. What's\n          different is the tonic note from which we start to count the scale.\n        </P>\n        <P>\n          So, a scale isn't just a set of notes. What makes a set of notes a\n          scale is a sense of tonic. The tonic note {c`1`} should be played\n          frequently. Melodies often start with {c`1`} and almost always end on\n          it. The <i>tonic chord</i> - {c`I`} or {c`i`} - should be played at\n          key moments within the piece. When exactly?\n        </P>\n        <h2>Double-tonic loops</h2>\n        <P>Consider this loop in C major: {c`vi IV I V`}</P>\n        <P>\n          I can reinterpret the same notes in A minor:{\" \"}\n          {ct(`i bVI bIII bVII`, -3)}\n        </P>\n        <P>When a piece uses this loop, what's the correct interpretation?</P>\n        <P>\n          In short, the situation is as complex as it is: there's no single\n          correct interpretation. You may hear it one way or the other. The\n          other people in the internet may hear it not the same way as you.\n          Those people may argue about the correct tonic in a particular song.\n          These arguments may or may not make sense to you. Should you even\n          bother?\n        </P>\n        <P>This situation is called \"double-tonic\". {q(\"richards\")}</P>\n        <P>\n          Below I present two colorings: major next to minor. I've chosen the\n          minor coloring inside the scores. To learn how to change the coloring,\n          read instructions inside \"Despacito\".\n        </P>\n      </>\n    ),\n    composers: [\n      \"despacito-piano-cover-peter-bence\",\n      \"river-flows-in-you\",\n      \"Yann_Tiersen_Amelie\",\n      \"All_Of_Me_-_John_Legend_Piano_Cover_-_ReiK\",\n      \"Let_Her_Go_Passenger\",\n      \"Another_Love__-_Tom_Odell_Professional\",\n      \"alan-walker---alone-piano\",\n      \"old-town-road---lil-nas-x-ft.-billy-ray-cyrus\",\n    ],\n  },\n  {\n    title: \"Functional natural minor\",\n    titleChords: [\"bVII\", \"V\", \"i\"],\n    composers: [\n      \"Game_of_Thrones_Easy_piano\",\n      \"sadness-and-sorrow-for-piano-solo\",\n      \"gurenge--demon-slayer-kimetsu-no-yaiba-op\",\n      \"Hallelujah\",\n    ],\n    pretext: () => (\n      <>\n        <h2>Major and minor chords in modes</h2>\n        <P>\n          Recall: six common chords in a natural minor mode are{\" \"}\n          {c`i bIII iv v bVI\n        bVII`}\n          <ul>\n            <li>\n              Three minor chords in a minor mode are {c`i`}, {c`iv`} and {c`v`}\n            </li>\n            <li>\n              Three major chords in a minor mode are {c`bIII`}, {c`bVI`} and{\" \"}\n              {c`bVII`}\n            </li>\n          </ul>\n        </P>\n        <P>\n          Recall: six common chords in a major mode are {c`I ii iii IV V vi`}\n          <ul>\n            <li>\n              Three minor chords: {c`ii`}, {c`iii`} and {c`vi`}\n            </li>\n            <li>\n              Three major chords: {c`I`}, {c`IV`} and {c`V`}\n            </li>\n          </ul>\n        </P>\n        <h2>Historical context</h2>\n        <P>\n          Throughout the 19th century, there was no such thing as a natural\n          minor mode with solely {c`v`} chord and without any {c`7`} note in\n          minor. No composers wrote that way.\n        </P>\n        <P>\n          A modern natural minor is a recent invention – it gained popularity in\n          1970s. {q(\"alf_aeolian\")} So, all examples below are pretty modern.\n        </P>\n        <P>\n          We'll look at the older version of minor in the next few chapters.\n        </P>\n      </>\n    ),\n  },\n  {\n    title: \"Triadic minor with V\",\n    titleChords: [\"V\", \"i\"],\n    pretext: () => (\n      <>\n        <h2>Chords in a minor with {rn`V`}</h2>\n        <P>\n          So, an older version of a minor mode has these chords:{\" \"}\n          {c`i bIII iv v V bVI bVII`}\n        </P>\n        <P>\n          Most sections end with {c`V`} or {c`V i`} chords – you'll see a lot of{\" \"}\n          {c`7`} notes at the right border of the scores.\n        </P>\n        <P>\n          The chord {c`v`} is usually used at the beginning of the section – eg.\n          as {c`i v`}. In most pieces it's not used at all.\n        </P>\n        <P>\n          In some pieces a {c`V`} is replaced with its synonym {c`V7`}.\n        </P>\n        <h2>Functional harmony</h2>\n        <P>\n          Some musicians call it \"functional harmony\". What does it mean? It\n          implies that chords aren't just being put at completely random orders\n          for each new piece.\n        </P>\n        <P>\n          Sections most often start with {c`i`}. They most often end with{\" \"}\n          {c`bVI bVII V i`}, {c`iv V i`}, {c`bVI V i`}.\n        </P>\n        <P>\n          Chord pairs {c`V i`} and {c`V bVI`} are frequent, whereas {c`V iv`} or{\" \"}\n          {c`V bVII`} are rare. {c`V v`} is extremely rare, it almost \"makes no\n          sense\".\n        </P>\n        <P>\n          A {c`i bVII`} will most likely be continued with {c`bVI`}\n        </P>\n        <P>\n          Some chord chunks are also frequent: {c`iv i V i`}, {c`i bVII bVI V`},{\" \"}\n          {c`bVII bIII`}. They are used like formulas.\n        </P>\n        <P>\n          Composers may use them consciously or subconsciously. As they compose,\n          they play a draft and discard something that \"doesn't sound well\". But\n          how can anything sound well?\n        </P>\n        <P>\n          We hear something as \"nice\" because it was very probable in all pieces\n          of music that we have been listening to throughout our whole life.\n        </P>\n        <P>\n          And our hearing system constantly tries to predict what will happen\n          next. So, if there are rules, probabilities, frequencies or other for\n          a brain to memorize pieces faster, then a brain will be constantly\n          extracting those rules and updating its model of Western music in\n          background - during our entire life.\n        </P>\n      </>\n    ),\n    mode: {\n      title: \"minor with V\",\n      chords: [\"iv\", \"bVI\", \"i\", \"bIII\", \"v\", \"Vsus4\", \"V\", \"V7\", \"bVII\"],\n    },\n    composers: [\n      \"Bella_Ciao\",\n      \"Gravity_Falls_Opening\",\n      \"Pirates_of_the_Caribbean_-_Hes_a_Pirate\",\n      \"Pokemon_Theme_Song\",\n      \"attack-on-titan-theme-guren-no-yumiya\",\n      \"Je_Te_Laisserai_Des_Mots_-_Patrick_Watson\",\n    ],\n  },\n  {\n    title: \"Functional major\",\n    titleChords: [\"V\", \"V7\", \"I\"],\n    mode: {\n      title: \"major\",\n      chords: [\"ii\", \"IV\", \"vi\", \"I\", \"iii\", \"V\", \"V7\"],\n    },\n    pretext: () => (\n      <>\n        <h2>Functional major</h2>\n        <P>\n          There's a functional harmony for major mode as well. Some chord pairs\n          and longer sequences are more probable than other.\n        </P>\n        <P>\n          Interestingly, functional major and functional minor modes have some\n          parallels. The most solid ending in them is {c`V I`} or {c`V i`},\n          respectively.\n        </P>\n        <P>\n          {k(\"v7-to-major-i\", \"V7 to I\")} {k(\"V7-to-minor-i\", \"V7 to i\")}\n        </P>\n        <P>\n          In both of them you can use {c`V7`} as a synonym for {c`V`}. And the\n          endings like {c`V7 I`} or {c`V7 i`} are even more solid.\n        </P>\n        <P>\n          {c`IV`} in major has a similar distribution around those two chords as{\" \"}\n          {c`iv`}.\n        </P>\n        <P>\n          As you listen to the pieces, pay attention to chord pairs. Do you hear\n          some of them as \"very common\"?\n        </P>\n        <h2>Common types of chords</h2>\n        <P>\n          Most modern Western pieces are built as two parallel streams: chords\n          and melody. Chords are \"aligned\" with the melody. Some notes in melody\n          – downbeats, countour turnaround points – usually use one of the notes\n          of the current chord.\n        </P>\n        <P>\n          If we look at the intervals between notes of a chord, we'll see that\n          there are three types of chords that are used in modern Western music:\n          <ul>\n            <li>\n              Major chords (4 semitones + 3 semitones):{\" \"}\n              {c`I II bIII IV V bVI bVII`} etc. There are 12 different major\n              chords – you can build one on any of the twelve notes.\n            </li>\n            <li>\n              Minor chords (3 semitones + 4 semitones): {c`i ii iii iv v vi`}\n              etc. Again, there are 12 different minor chords.\n            </li>\n            <li>\n              Dominanth seventh chords (4 semitones + 3 semitones + 3\n              semitones): So far we've only seen {c`V7`}. However, there are\n              pieces where other chords of the same interval are used:{\" \"}\n              {c`I7 V7/V V7/vi IV7 V7 V7/ii V7/iii`}\n            </li>\n          </ul>\n        </P>\n        <h2>Why these colors?</h2>\n        <P>\n          Previously, people tried to design colored notations by assigning\n          colors to notes in a rainbow order. This is an obvious idea. However,\n          it doesn't help to highlight the structures that are actually frequent\n          in Western music.\n        </P>\n        <P>\n          There are three main groups of chords in functional harmony:\n          <ul>\n            <li>\n              tonic chords begin and end sections: {c`I`} and {c`i`}\n            </li>\n            <li>\n              dominants end sections or precede tonic chords at the end: {c`V`},{\" \"}\n              {c`V7`}, {c`bVII`}\n            </li>\n            <li>\n              predominants preced dominants at the end: {c`IV`}, {c`iv`},{\" \"}\n              {c`ii`} and others\n            </li>\n          </ul>\n        </P>\n        <P>\n          My coloring makes these three groups as visually distinct as possible.\n          And also, it makes colors of common chords to blend together. This is\n          because I also follow the rainbow, but in the order of thirds:\n          {c`b2 2 4 #4 b6 6 1 b3 3 5 b7 7`}\n        </P>\n        <P>\n          <Metaphors />\n        </P>\n        <P>\n          <ChordStairs mode={MAJOR_MODE} />\n        </P>\n        <P>\n          <ChordStairs mode={MINOR_MODE} />\n        </P>\n        <P>\n          Same vibe: <ul>{A(\"michishirube---violet-evergarden-ed\")}</ul>\n        </P>\n      </>\n    ),\n    composers: [\n      \"Canon_in_D\",\n      \"a-thousand-years\",\n      \"John_Lennon_Imagine\",\n      \"sign-of-the-times---harry-styles\",\n      \"Cant_Help_Falling_In_Love\",\n    ],\n  },\n  {\n    title: \"Classical V7 i\",\n    titleChords: [\"V7\", \"i\"],\n    composers: [\n      \"Carol_of_the_Bells\",\n      \"Waltz_No._2_The_Second_Waltz_by_Dmitri_Shostakovich_for_Piano\",\n      \"theme-from-schindler-s-list---piano-solo\",\n    ],\n  },\n  {\n    title: \"Circle of fifths\",\n    titleChords: [\"i\", \"iv\", \"bVII\", \"bIII\"],\n    pretext: () => (\n      <>\n        <h2>Circle of fifths in minor</h2>\n        <P>\n          If four-chord loops didn't quite appear throughout 17..19th centuries,\n          eight-chord loops did. The most important loop since Baroque era was\n          The Circle of Fifths progression.\n        </P>\n        <P>The model example: {c`i iv bVII bIII bVI iio V i`}</P>\n        <P>\n          The idea is to take the next chord's root three notes up from a\n          previous chord's root, going around a scale.\n        </P>\n        <P>Here are the roots of these chords: {c`1 4 b7 b3 b6 2 5 1`}</P>\n        <P>\n          There are options. A rare {c`iio`} chord may be replaced with {c`iv`},\n          which sounds \"similar\": these chords share two notes. This way we'll\n          get {c`i iv bVII bIII bVI iv V i`}\n        </P>\n      </>\n    ),\n    mode: {\n      title: \"circle of fifths\",\n      chords: [\"i\", \"iv\", \"bVII\", \"bIII\", \"bVI\", \"iio7\", \"bII\", \"V7\"],\n    },\n    composers: [\n      \"passacaglia---handel-halvorsen\",\n      \"g-minor-bach-original\",\n      \"mariage-d-amour---paul-de-senneville-marriage-d-amour\",\n      \"vivaldi---summer---piano\",\n    ],\n  },\n  {\n    title: \"IV in minor\",\n    titleChords: [\"IV\", \"i\"],\n    pretext: () => (\n      <>\n        <h2>Recap with some terminology</h2>\n        <P>\n          Most modern Western pieces are structured as follows: their entire\n          sections are either in a major mode {c`I ii iii IV V vi V7 I`} or in a\n          minor mode {c`i bIII iv v V bVI bVII V7 i`}. This is called a{\" \"}\n          <i>diatonic harmony</i> – meaning that we build chords as three notes\n          taken <i>in thirds</i> (1-3-5, 2-4-6 etc.) from the mode's scale (with\n          the exception of {c`V`}/{c`V7`} in a minor mode).\n        </P>\n        <P>\n          One way of organizing chord changes is a loop or several loops. Loops\n          have a length of four measures. The time is therefore divided into\n          four-measure phrases which we show with white vertical bars.\n        </P>\n        <P>\n          Another way of organizing chord changes is a functional harmony: a\n          string of chords starts with a <i>tonic chord</i> {c`I`} or {c`i`} and\n          progresses according to local transition probabilities up to a{\" \"}\n          <i>cadential formula</i> (i.e. a typical ending) – most often ending\n          with {c`V I`} in a major mode and with {c`bVI bVII i`} or {c`V i`} in\n          minor mode.\n        </P>\n        <h2>Chromatic chords</h2>\n        <P>\n          A chromatic chord is a chord used in a mode where there's no way to\n          build it in thirds using mode's scale degrees. There are two popular\n          extensions of a diatonic harmony with chromatic chords: borrowed\n          chords and applied chords.\n        </P>\n        <P>\n          As we'll see further, chromatic chords are most often either major\n          chords, minor chords or dominant seventh chords. Therefore, the rule\n          \"to use common types of chords\" is more important for composers than\n          the rule \"to stick to a certain scale of 7 or 8 notes\".\n        </P>\n        <h2>Dorian {rn`IV`} in minor</h2>\n        <P>\n          Some pieces use a {c`IV`} chord inside an otherwise minor mode piece:{\" \"}\n          {c`i IV i`}. Therefore the total chord palette in that piece becomes{\" \"}\n          {c`i bIII iv IV v V bVI bVII V7 i`}\n        </P>\n        <P>Most pieces use this chord only at a single particular place.</P>\n        <P>\n          Some people say that {c`IV`} in {c`i IV i`} is <i>borrowed</i> from\n          major into minor.\n        </P>\n        <P>\n          Some people call this chord a <i>dorian</i>. Here's what they mean:\n          there's a concept of a dorian scale {c`1 2 b3 4 5 6 b7 1`}. If a piece\n          is using this scale as a primary one, then {c`IV`} is a diatonic to\n          it: it's in the scale. This scale yields these chords:{\" \"}\n          {c`i bIII IV v bVI bVII i`}\n        </P>\n        <P>\n          There are no pieces throughout top 100 corpus that are built entirely\n          using a dorian mode. There are degrees to which a {c`6`} note is used\n          within a minor mode, most often as a {c`IV`} chord. See examples:{\" \"}\n          {s`dorian: episodic`}\n        </P>\n      </>\n    ),\n    mode: {\n      title: \"dorian minor\",\n      chords: [\"iv\", \"IV\", \"bVI\", \"i\", \"bIII\", \"v\", \"bVII\"],\n    },\n    composers: [\n      \"nothing-else-matters---metallica\",\n      \"dragonborn---skyrim-theme-song-piano-solo\",\n      \"solas---jamie-duffy\",\n      \"isabella-s-lullaby-the-promised-neverland-emotional-anime-on-piano-vol.-2\",\n      \"Mad_world_Piano\",\n    ],\n  },\n  {\n    title: \"iv in major\",\n    titleChords: [\"iv\", \"I\"],\n    pretext: () => (\n      <>\n        <h2>{rn`iv`} in major</h2>\n        <P>{s`chromatic_chords:iv`}</P>\n      </>\n    ),\n    composers: [\n      \"calum-scott---you-are-the-reason-piano-sheet-lyrics-lyrics-version-link-in-description\",\n      \"how-far-i-ll-go-~-moana-ost\",\n    ],\n  },\n  {\n    title: \"♭VII in major\",\n    titleChords: [\"bVII\", \"I\"],\n    mode: {\n      title: \"Mario cadence\",\n      chords: [\"bVI\", \"bVII\", \"I\"],\n    },\n    composers: [\n      \"when-i-was-your-man---bruno-mars-600e3a\",\n      \"Take_on_me\",\n\n      \"Super_Mario_Bros_Main_Theme\",\n      \"welcome-to-the-black-parade---my-chemical-romance\",\n    ],\n  },\n  {\n    title: \"V7/V\",\n    titleChords: [\"V7/V\", \"V\"],\n    pretext: () => (\n      <>\n        <h2>Applied dominant: {rn`V7/V`}</h2>\n        <P>\n          There are diatonic major pieces where the only chromatic chord is{\" \"}\n          {c`II7`} or {c`II`} - a major chord built on a {c`2`} root instead of\n          a diatonic {c`ii`} chord. How to explain this chord?\n        </P>\n        <P>\n          Most often it's followed by the {c`V`} chord: {c`II7 V`}. Or, as they\n          say, {c`II7`} is resolved to {c`V`}.{\" \"}\n        </P>\n        <P>\n          Let's recolor it: let's treat this {c`V`} as a brief {ct(`I`, -5)}{\" \"}\n          tonic chord. So, a C major's {c`II7 V`} is a G major's{\" \"}\n          {ct(`V7 I`, -5)}. Because of that, the {c`V7/V`} chord is called{\" \"}\n          {rn`V7/V`} (pronounced \"five seven of five\"), especially when\n          preceding the {rn`V`} chord.\n        </P>\n        <P>\n          We briefly <i>tonicize</i> the {rn`V`} chord (or the {c`5`} scale\n          degree) - we make it a <i>local tonic</i> just for the duration of\n          these two chords. A {rn`V7/V`} chord is also called a{\" \"}\n          <i>secondary dominant</i> or an <i>applied dominant</i>.\n        </P>\n        <P>\n          Sometimes {c`II7`} is on its own, not followed by {c`V`}\n        </P>\n      </>\n    ),\n    mode: {\n      title: \"\",\n      chords: [\"V7/V\", \"V7\", \"I\"],\n    },\n    composers: [\n      \"piano-man-piano\",\n      \"Disney_Pixar_Up_Theme\",\n      \"Test_Drive_How_to_Train_Your_Dragon\",\n      \"Dawn_Pride_and_Prejudice\",\n    ],\n  },\n  {\n    title: \"V7/vi\",\n    titleChords: [\"V7/vi\", \"vi\"],\n    mode: {\n      title: \"major with V/vi\",\n      chords: [\"ii\", \"IV\", \"vi\", \"I\", \"iii\", \"V/vi\", \"Vsus4\", \"V\", \"V7\"],\n    },\n    pretext: () => (\n      <>\n        <h2>{rn`V7/vi`}</h2>\n        <P>\n          Another applied chord that's common is {c`V/vi`} or {c`V7/vi`}. It's\n          usually resolved as {c`V7/vi vi`}, therefore tonicizing a {c`vi`}{\" \"}\n          chord making it a local tonic: {c`V7/vi vi`} in C major equals to{\" \"}\n          {ct(`V7 i`, -3)} in A minor. So, this applied chord tonicizes a\n          relative minor. In a context this sounds like{\" \"}\n          {ct(`I V7 I V7/vi vi V7 I`, -12)}\n        </P>\n      </>\n    ),\n    composers: [\n      \"your-song-piano\",\n      \"sia---snowman\",\n      \"my-lie-watashi-no-uso---your-lie-in-april\",\n      \"kimi-no-na-wa---sparkle-theishter-2016\",\n    ],\n  },\n  {\n    title: \"Vsus4\",\n    titleChords: [\"Vsus4\", \"V\"],\n    mode: [\n      { title: \"major\", chords: [...MAJOR_MODE.chords, \"Vsus4\"] },\n      { title: \"minor\", chords: [...MINOR_MODE.chords, \"Vsus4\"] },\n    ],\n    pretext: () => (\n      <>\n        <h2>{rn`Vsus4`}</h2>\n        <P>\n          There's a frequent diatonic chord that isn't either minor or major\n          chord: a {c`Vsus4`} chord. It has intervals of 5+2 semitones. It's\n          most commonly resolved as {c`Vsus4 V`}, maybe further as{\" \"}\n          {c`Vsus4 V I`}. Sometimes it's used as {c`Vsus47`}: {c`Vsus47 V7 I`}\n        </P>\n        <P>\n          <i>sus4</i> means that a {ct(`1`, 12)} in it - so called a{\" \"}\n          <i>perfect fourth</i> (i.e. 5 semitones) over the root - is{\" \"}\n          <i>suspended</i> and then resolved into {c`7`}: {c`1 7 Vsus4 V`}.\n          Although in modern composition it's not necessarily resolved:{\" \"}\n          {s`V:sus4`} {s`V:sus4_unresolved`}\n        </P>\n      </>\n    ),\n    composers: [\"Pokemon_Theme_Song\", \"my-heart-will-go-on\"],\n  },\n  {\n    title: \"V7/ii\",\n    titleChords: [\"V7/ii\", \"ii\"],\n    mode: [\n      MAJOR_MODE,\n      {\n        title: \"applied chords\",\n        chords: [\"V7/ii\", \"ii\", \"V7/V\", \"V\", \"V7/vi\", \"vi\"],\n      },\n    ],\n    pretext: () => (\n      <>\n        <h2>Applied chords in a major mode</h2>\n        <P>Let's list all possible applied chords in major.</P>\n        <P>\n          {rn`V7/I`} is just a {rn`V7`}: {c`V7 I`}\n        </P>\n        <P>\n          {rn`V7/ii`} is a major chord on {c`6`}, so instead of a diatonic{\" \"}\n          {c`vi`} we get a {c`V/ii`} or a {c`V7/ii`}. It's resolved to {c`ii`}.\n          I put it in a context to distinguish it from a standard {rn`V7`} in\n          another key: {c`I V7 I V7/ii ii V7 I`}\n        </P>\n        <P>\n          {rn`V7/iii`} is a major chord on {c`7`}, so instead of a rarely used\n          diminished 3+3 semitones chord {c`viio`} we get a {c`V/iii`} or a{\" \"}\n          {c`V7/iii`}: {c`I V7 I V7/iii iii V7 I`}\n        </P>\n        <p>\n          {rn`V/IV`} is simply {rn`I`} {c`I`}. However, {rn`V7/IV`} {c`V7/IV`}{\" \"}\n          makes sense: it's a non-diatonic chord. {c`I V7 I V7/IV IV V7 I`}\n        </p>\n      </>\n    ),\n    composers: [\n      \"Omori_Duet\",\n      \"abba--the-winner-takes-it-all\",\n      \"All_I_Want_for_Christmas_is_You\",\n    ],\n  },\n  {\n    title: MODULATIONS_CHAPTER_TITLE,\n    mode: {\n      chords: [\"V7\", \"I\", \"i\"],\n      title: \"\",\n    },\n    pretext: () => (\n      <>\n        <h2>Modulations in classical music: endless V7 to I and V7 to i</h2>\n      </>\n    ),\n    composers: [\n      \"minuet-bwv-anhang-114-in-g-major\",\n      \"flight-of-the-bumblebee\",\n\n      \"wa-mozart-marche-turque-turkish-march-fingered\",\n\n      \"Fr_Elise\",\n    ],\n  },\n  {\n    title: \"blues, penta, hexa\",\n    titleChords: [\"1\", \"b3\", \"4\", \"5\", \"b7\"],\n    pretext: () => (\n      <>\n        <P>\n          {k(\"blues-scale\")} {k(\"minor-pentatonic\")}\n        </P>\n        <P>\n          {s`scale:blues`} {s`scale:minor_pentatonic`}{\" \"}\n          {s`scale:major_pentatonic`} {s`scale:hexatonic_minor`}{\" \"}\n          {s`scale:hexatonic_major`}\n        </P>\n      </>\n    ),\n    mode: {\n      title: \"scales of 5 and 6 notes\",\n      chords: [\"1\", \"b3\", \"4\", \"#4\", \"5\", \"b7\"],\n    },\n    composers: [\n      \"Undertale_-_Megalovania_Piano_ver._3\",\n      \"Jojo_s_Bizarre_Adventure_Golden_Wind_Giornos_Theme_Ver_2\",\n      \"fairy-tail-main-theme\",\n      \"africa---toto\",\n    ],\n  },\n  {\n    title: \"maj7\",\n    titleChords: [\"IVmaj7\", \"Imaj7\"],\n    mode: {\n      title: \"\",\n      chords: [\"ii7\", \"IVmaj7\", \"vi7\", \"Imaj7\", \"iii7\", \"V13\"],\n    },\n    pretext: () => (\n      <>\n        <h2>Diatonic seventh chords</h2>\n        <P>\n          The most frequent chords in Western music are triads. They are built\n          on a scale by taking every other note starting from the root.\n        </P>\n        <P>\n          Let's see what we get if we take four notes instead of three using the\n          same idea. Here's a major scale: {c`1 2 3 4 5 6 7 1 2 3 4 5 6 7 1`}\n        </P>\n        <P>\n          <ul>\n            <li>\n              {c`1 3 5 7`} {c`Imaj7`} {rn`Imaj7`} – intervals 4+3+4, a\n              combination of {c`I iii`}, a major seventh chord\n            </li>\n            <li>\n              {c`2 4 6 1`} {c`ii7`} {rn`ii7`} – intervals 3+4+3, a combination\n              of {c`ii IV`}, a minor seventh chord\n            </li>\n            <li>\n              {c`3 5 7 2`} {c`iii7`} {rn`iii7`} – intervals 3+4+3, a combination\n              of {c`iii V`}, a minor seventh chord\n            </li>\n            <li>\n              {c`4 6 1 3`} {c`IVmaj7`} {rn`IVmaj7`} – intervals 4+3+4, a\n              combination of {c`IV vi`}\n            </li>\n            <li>\n              {c`5 7 2 4`} {c`V7`} {rn`V7`} – intervals 4+3+3, a combination of{\" \"}\n              {c`V viio`}, a dominant seventh chord\n            </li>\n            <li>\n              {c`6 1 3 5`} {c`vi7`} {rn`vi7`} – intervals 3+4+3, a combination\n              of {c`vi I`}, a minor seventh chord\n            </li>\n          </ul>\n        </P>\n        <P>\n          While it's easy to find minor seventh chords and dominanth seventh\n          chords in classical music (Mozart and Chopin), major seventh chords\n          emerged as a popular tool only since late 19th century. Erik Satie's\n          example below - {ct(`4 IVmaj7 IVmaj7 1 Imaj7 Imaj7`, 2)} - is the\n          earliest example I've found that consistently uses it as a main idea\n          of a piece.\n        </P>\n        <P></P>\n      </>\n    ),\n    composers: [\n      \"Sweden_Minecraft\",\n      \"Golden_Hour__JVKE_Updated_Ver.\",\n      \"Gymnopdie_No._1__Satie\",\n      \"ylang-ylang---fkj-transcribed-by-lilroo\",\n      \"yuri-on-ice---piano-theme-full\",\n      \"congratulations---mac-miller\",\n      \"Clair_de_Lune__Debussy\",\n    ],\n  },\n  {\n    title: \"ii V I jazz\",\n    titleChords: [\"ii7\", \"V7\", \"Imaj7\"],\n    mode: {\n      title: \"jazz\",\n      chords: [\"ii7\", \"V7\", \"Imaj7\", \"iiø7\", \"V7b9\", \"i7\"],\n    },\n    composers: [\n      \"Fly_Me_to_the_Moon\",\n      \"autumn-leaves-jazz-piano\",\n      \"it-s-been-a-long-long-time---harry-james\",\n      \"Love_Like_You_Steven_Universe\",\n      \"ye-niqu-keru-yoru-ni-kakeru---racing-into-the-night\",\n      \"Merry_Go_Round_of_Life_Howls_Moving_Castle_Piano_Tutorial_\",\n      \"mii-channel-piano\",\n    ],\n  },\n  {\n    title: \"viio7, io7, biio7\",\n    titleChords: [\"viio7\", \"io7\", \"biio7\"],\n    pretext: () => (\n      <>\n        <h2>Fully diminished seventh chords</h2>\n        <P>\n          They have an intervalic structure 3+3+3(+3). There are exactly three\n          of them on a piano:\n        </P>\n        <P>\n          <ul>\n            <li>\n              {c`1 b3 #4 6`} {c`io7 biiio7 #ivo7 vio7`}\n            </li>\n            <li>\n              {c`b2 3 5 b7`} {c`biio7 iiio7 vo7 bviio7`}\n            </li>\n            <li>\n              {c`2 4 b6 7`} {c`iio7 ivo7 bvio7 viio7`}\n            </li>\n          </ul>\n        </P>\n        <P>\n          Or you can play them all together, which is even more fun:{\" \"}\n          {c`io7 biio7 iio7 biiio7 iiio7 ivo7 #ivo7 vo7 bvio7 vio7 bviio7 viio7`}\n        </P>\n        <P>\n          As you can see, they are fully symmetrical, so they don't have any{\" \"}\n          <i>root</i>. This makes them harder to notate.\n        </P>\n        <P>\n          They have many usages: {s`modulation:pivot`} {s`cto7:to_I`}{\" \"}\n          {s`cto7:to_V`} {s`applied:viio7/ii`} {s`applied:viio7/iv`}{\" \"}\n          {s`applied:viio7/V`}\n        </P>\n      </>\n    ),\n    composers: [\n      \"anastasia---once-upon-a-december\",\n      \"la-vie-en-rose-solo-accordion\",\n      \"prelude-i-in-c-major-bwv-846---well-tempered-clavier-first-book\",\n      \"the_entertainer_scott_joplin\",\n      \"Chopin_-_Nocturne_Op_9_No_2_E_Flat_Major\",\n    ],\n  },\n  {\n    title: \"V/V/V\",\n    titleChords: [\"V7/vi\", \"V7/ii\", \"V7/V\", \"V7\"],\n    pretext: () => (\n      <>\n        <h2>Chain of dominants</h2>\n      </>\n    ),\n    composers: [\n      \"Liebestraum_No._3_in_A_Major\",\n      \"dance-of-the-sugar-plum-fairy\",\n    ],\n  },\n\n  {\n    title: \"Style\",\n    pretext: () => (\n      <>\n        Here we present two most popular pieces by each composers. Can you see\n        that pieces of the same composer look more similar to each other than to\n        other composers?\n      </>\n    ),\n    composers: [\n      \"Fr_Elise\",\n      \"Sonate_No._14_Moonlight_1st_Movement\",\n      \"Merry_Go_Round_of_Life_Howls_Moving_Castle_Piano_Tutorial_\",\n      \"One_Summers_Day_Spirited_Away\",\n      \"Chopin_-_Nocturne_Op_9_No_2_E_Flat_Major\",\n      \"Waltz_in_A_MinorChopin\",\n      \"Liebestraum_No._3_in_A_Major\",\n      \"tude_S._1413_in_G_Minor_La_Campanella__Liszt\",\n      \"river-flows-in-you\",\n      \"Kiss_The_Rain_-_Yiruma_-_10th_Anniversary_Version_Piano_Updated_2019\",\n      \"Sweden_Minecraft\",\n      \"Wet_Hands_Minecraft\",\n      \"Gravity_Falls_Opening\",\n      \"eda-s-requiem---brad-breeck-piano\",\n\n      \"Maple_Leaf_Rag_Scott_Joplin\",\n      \"runaway---kanye-west-ramin-djawadi-arr.-by-alex-patience\",\n      \"kanye-west-homecoming-piano-cover\",\n      \"Viva_La_Vida_Coldplay\",\n      \"the-scientist---coldplay-piano-arrangement\",\n      \"mariage-d-amour---paul-de-senneville-marriage-d-amour\",\n      \"ballade-pour-adeline---richard-clayderman\",\n      \"Undertale_-_Megalovania_Piano_ver._3\",\n      \"Fallen_Down_Undertale\",\n      \"Clair_de_Lune__Debussy\",\n      \"arabesque-l.-66-no.-1-in-e-major\",\n      \"Super_Mario_Bros_Main_Theme\",\n      \"Zeldas_Lullaby\",\n      \"Gymnopdie_No._1__Satie\",\n      \"satie-e.---gnossienne-no.-1\",\n      \"wa-mozart-marche-turque-turkish-march-fingered\",\n      \"lacrimosa---requiem\",\n      \"Lovely_Billie_Eilish\",\n      \"Billie_Eilish_Bad_Guy\",\n      \"Ed_Sheeran_Perfect\",\n      \"Ed_Sheeran_Shape_of_you\",\n      \"Golden_Hour__JVKE_Updated_Ver.\",\n      \"what-falling-in-love-feels-like---jake25.17-fanmade-extended-version\",\n      \"dragonborn---skyrim-theme-song-piano-solo\",\n      \"secunda-the-elder-scrolls-v-skyrim\",\n      \"Dawn_Pride_and_Prejudice\",\n      \"liz-on-top-of-the-world\",\n      \"Canon_in_D\",\n      \"pachelbel-chaconne-in-f-minor\",\n      \"mii-channel-piano\",\n      \"wii-sports-theme-piano\",\n    ],\n  },\n];\n\nexport type Mode = { title: string; chords: Chord[] };\n","import MIDIEvents from \"midievents\";\nimport { SecondsSpan } from \"./Rawl\";\nimport { MeasuresAndBeats } from \"./SystemLayout\";\n\nconst DRUM_CHANNEL = 9;\n\nexport type Note = {\n  note: {\n    midiNumber: number;\n    relativeNumber?: number;\n  };\n  isDrum: boolean;\n  id: number;\n  span: SecondsSpan;\n  chipState?: { on: any; off: any };\n  voiceIndex: number;\n};\n\nexport type ColoredNote = Note & {\n  color: string;\n  isActive: boolean;\n};\n\nexport type PitchBendPoint = {\n  time: number;\n  value: number;\n};\n\nexport type NotesInVoices = Note[][];\n\nexport type ColoredNotesInVoices = ColoredNote[][];\n\nexport type MidiSource = {\n  events: any;\n  activeChannels: any;\n  timebase: any;\n  timeEvents: any;\n  ticksPerBeat: number;\n};\n\nexport type ParsingResult = {\n  notes: NotesInVoices;\n  measuresAndBeats?: MeasuresAndBeats;\n};\n\nlet id = 0;\n\nconst getNotes = (events, channel, voiceIndex): Note[] => {\n  const notes: Note[] = [];\n  const noteOn = {};\n  events.forEach((event) => {\n    if (event.channel === channel && event.type === MIDIEvents.EVENT_MIDI) {\n      const midiNumber = event.param1;\n      if (\n        event.subtype === MIDIEvents.EVENT_MIDI_NOTE_OFF ||\n        (event.subtype === MIDIEvents.EVENT_MIDI_NOTE_ON && noteOn[midiNumber])\n      ) {\n        if (channel === DRUM_CHANNEL && midiNumber > 87) {\n          return;\n          // probably a bug? can't be played by a default MIDI sound font\n        }\n        if (midiNumber in noteOn) {\n          if (channel !== DRUM_CHANNEL && noteOn[midiNumber].param2 === 0) {\n            return;\n          }\n          if (event.playTime >= noteOn[midiNumber].playTime) {\n            notes.push({\n              note: {\n                midiNumber,\n              },\n              id,\n              isDrum: channel === DRUM_CHANNEL,\n              span: [noteOn[midiNumber].playTime / 1000, event.playTime / 1000],\n              chipState: { on: noteOn[midiNumber], off: event },\n              voiceIndex,\n            });\n\n            id++;\n          }\n          delete noteOn[midiNumber];\n        }\n      }\n      if (event.subtype === MIDIEvents.EVENT_MIDI_PITCH_BEND) {\n        // TODO: Process pitch bend range change messages.\n        // https://chat.openai.com/share/8332f454-6d52-4911-a40c-f11c251fea1b\n        for (const midiNumber in noteOn) {\n          (noteOn[midiNumber].pitchBend ||= []).push({\n            time: event.playTime / 1000,\n            value: (event.param2 << 7) + event.param1,\n          });\n        }\n      }\n      if (event.subtype === MIDIEvents.EVENT_MIDI_NOTE_ON) {\n        noteOn[midiNumber] = event;\n      }\n    }\n  });\n  if (channel === DRUM_CHANNEL) {\n    const uniqueMidiNumbers = [\n      ...new Set(notes.map((note) => note.note.midiNumber)),\n    ].sort((a, b) => a - b);\n\n    const midiToRelativeNumberMap = new Map();\n    uniqueMidiNumbers.forEach((midiNumber, index) => {\n      midiToRelativeNumberMap.set(midiNumber, index * 2);\n    });\n\n    notes.forEach((note) => {\n      note.note.relativeNumber = midiToRelativeNumberMap.get(\n        note.note.midiNumber,\n      );\n    });\n  }\n  return notes;\n};\n\n// We can also find key events:\n// key: 0,\n// scale: 0,\n// subtype: 89,\n// type: 255,\n// Except that in practice these events are always key=0 scale=0 (no one is setting them)\n// Although classical music MIDI might have it.\n\nfunction calculateMeasureAndBeats(timeEvents, timebase) {\n  const measures = [0];\n  const beats = [];\n  const measuresInTicks = [0];\n  let secondsPerQuarterNote = 0.5;\n  let numerator = 4;\n  let denominator = 4;\n  let lastBeatFractionGone = 0;\n  let constructedBeatsInLastMeasure = 0;\n  let lastBeatTime = 0; // either measures[-1] or beats[-1]\n  let lastTick = 0; // Track the last tick time\n\n  const createNewBeat = (timeUntil, tick) => {\n    const newBeatEndTime =\n      lastBeatTime +\n      (1 - lastBeatFractionGone) * ((secondsPerQuarterNote / denominator) * 4);\n\n    const newBeatEndTick =\n      lastTick + (1 - lastBeatFractionGone) * ((timebase / denominator) * 4);\n\n    if (newBeatEndTime - 0.005 <= timeUntil) {\n      if (constructedBeatsInLastMeasure + 1 >= numerator) {\n        measures.push(newBeatEndTime);\n        measuresInTicks.push(Math.round(newBeatEndTick)); // Push measure in ticks\n        constructedBeatsInLastMeasure = 0;\n      } else {\n        beats.push(newBeatEndTime);\n        constructedBeatsInLastMeasure++;\n      }\n      lastBeatFractionGone = 0;\n      lastBeatTime = newBeatEndTime;\n      lastTick = newBeatEndTick;\n      return true;\n    } else {\n      lastBeatFractionGone +=\n        (timeUntil - lastBeatTime) /\n        ((secondsPerQuarterNote / denominator) * 4);\n      lastBeatTime = timeUntil;\n      lastTick = tick; // Update the last tick position\n      return false;\n    }\n  };\n\n  timeEvents.forEach((event) => {\n    const { bpm, playTime, tick } = event;\n\n    while (createNewBeat(playTime / 1000, tick));\n\n    if (event.type === \"timeSignature\") {\n      numerator = event.numerator;\n      denominator = 2 ** event.denominatorPower;\n    } else {\n      secondsPerQuarterNote = 60 / bpm;\n    }\n  });\n\n  if (measures.length >= 2) {\n    measures.push(2 * measures.at(-1) - measures.at(-2));\n    measuresInTicks.push(2 * measuresInTicks.at(-1) - measuresInTicks.at(-2));\n  }\n\n  return { measures, beats, ticks: { measures: measuresInTicks } };\n}\n\nexport const parseNotes = ({\n  events,\n  activeChannels,\n  timeEvents,\n  timebase,\n}: MidiSource): ParsingResult => {\n  const measuresAndBeats = calculateMeasureAndBeats(timeEvents, timebase);\n  events.forEach((event) => {\n    if (event.subtype === MIDIEvents.EVENT_META_KEY_SIGNATURE) {\n      console.log(\"KEY SIGNATURE\" + JSON.stringify(event));\n    }\n  });\n  const notes = activeChannels.map((channel, index) =>\n    getNotes(events, channel, index),\n  );\n  return {\n    measuresAndBeats,\n    notes,\n  };\n};\n","'use strict';\n\nif (typeof Promise === 'undefined') {\n  // Rejection tracking prevents a common issue where React gets into an\n  // inconsistent state due to an error, but it gets swallowed by a Promise,\n  // and the user has no idea what causes React's erratic future behavior.\n  require('promise/lib/rejection-tracking').enable();\n  window.Promise = require('promise/lib/es6-extensions.js');\n}\n\n// fetch() polyfill for making API calls.\nrequire('whatwg-fetch');\n\n// Object.assign() is commonly used with React.\n// It will use the native implementation if it's present and isn't buggy.\nObject.assign = require('object-assign');\n\n// In tests, polyfill requestAnimationFrame since jsdom doesn't provide it yet.\n// We don't polyfill it in the browser--this is user's responsibility.\nif (process.env.NODE_ENV === 'test') {\n  require('raf').polyfill(global);\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nReactDOM.render((\n  <Router basename={process.env.PUBLIC_URL}>\n    <App/>\n  </Router>\n), document.getElementById('root'));\n","/*eslint-disable*/\n\nvar CHIP_CORE = (() => {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  \n  return (\nfunction(moduleArg = {}) {\n\nvar Module=moduleArg;var readyPromiseResolve,readyPromiseReject;Module[\"ready\"]=new Promise((resolve,reject)=>{readyPromiseResolve=resolve;readyPromiseReject=reject});var moduleOverrides=Object.assign({},Module);var arguments_=[];var thisProgram=\"./this.program\";var quit_=(status,toThrow)=>{throw toThrow};var ENVIRONMENT_IS_WEB=true;var ENVIRONMENT_IS_WORKER=false;var scriptDirectory=\"\";function locateFile(path){if(Module[\"locateFile\"]){return Module[\"locateFile\"](path,scriptDirectory)}return scriptDirectory+path}var read_,readAsync,readBinary,setWindowTitle;if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(ENVIRONMENT_IS_WORKER){scriptDirectory=self.location.href}else if(typeof document!=\"undefined\"&&document.currentScript){scriptDirectory=document.currentScript.src}if(_scriptDir){scriptDirectory=_scriptDir}if(scriptDirectory.indexOf(\"blob:\")!==0){scriptDirectory=scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,\"\").lastIndexOf(\"/\")+1)}else{scriptDirectory=\"\"}{read_=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.send(null);return xhr.responseText};if(ENVIRONMENT_IS_WORKER){readBinary=url=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);xhr.responseType=\"arraybuffer\";xhr.send(null);return new Uint8Array(xhr.response)}}readAsync=(url,onload,onerror)=>{var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,true);xhr.responseType=\"arraybuffer\";xhr.onload=()=>{if(xhr.status==200||xhr.status==0&&xhr.response){onload(xhr.response);return}onerror()};xhr.onerror=onerror;xhr.send(null)}}setWindowTitle=title=>document.title=title}else{}var out=Module[\"print\"]||console.log.bind(console);var err=Module[\"printErr\"]||console.error.bind(console);Object.assign(Module,moduleOverrides);moduleOverrides=null;if(Module[\"arguments\"])arguments_=Module[\"arguments\"];if(Module[\"thisProgram\"])thisProgram=Module[\"thisProgram\"];if(Module[\"quit\"])quit_=Module[\"quit\"];var wasmBinary;if(Module[\"wasmBinary\"])wasmBinary=Module[\"wasmBinary\"];var noExitRuntime=Module[\"noExitRuntime\"]||true;if(typeof WebAssembly!=\"object\"){abort(\"no native wasm support detected\")}var wasmMemory;var ABORT=false;var EXITSTATUS;function assert(condition,text){if(!condition){abort(text)}}var HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAP64,HEAPU64,HEAPF64;function updateMemoryViews(){var b=wasmMemory.buffer;Module[\"HEAP8\"]=HEAP8=new Int8Array(b);Module[\"HEAP16\"]=HEAP16=new Int16Array(b);Module[\"HEAPU8\"]=HEAPU8=new Uint8Array(b);Module[\"HEAPU16\"]=HEAPU16=new Uint16Array(b);Module[\"HEAP32\"]=HEAP32=new Int32Array(b);Module[\"HEAPU32\"]=HEAPU32=new Uint32Array(b);Module[\"HEAPF32\"]=HEAPF32=new Float32Array(b);Module[\"HEAPF64\"]=HEAPF64=new Float64Array(b);Module[\"HEAP64\"]=HEAP64=new BigInt64Array(b);Module[\"HEAPU64\"]=HEAPU64=new BigUint64Array(b)}var wasmTable;var __ATPRERUN__=[];var __ATINIT__=[];var __ATPOSTRUN__=[];var runtimeInitialized=false;function preRun(){if(Module[\"preRun\"]){if(typeof Module[\"preRun\"]==\"function\")Module[\"preRun\"]=[Module[\"preRun\"]];while(Module[\"preRun\"].length){addOnPreRun(Module[\"preRun\"].shift())}}callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=true;if(!Module[\"noFSInit\"]&&!FS.init.initialized)FS.init();FS.ignorePermissions=false;TTY.init();callRuntimeCallbacks(__ATINIT__)}function postRun(){if(Module[\"postRun\"]){if(typeof Module[\"postRun\"]==\"function\")Module[\"postRun\"]=[Module[\"postRun\"]];while(Module[\"postRun\"].length){addOnPostRun(Module[\"postRun\"].shift())}}callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnInit(cb){__ATINIT__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var runDependencies=0;var runDependencyWatcher=null;var dependenciesFulfilled=null;function getUniqueRunDependency(id){return id}function addRunDependency(id){runDependencies++;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}}function removeRunDependency(id){runDependencies--;if(Module[\"monitorRunDependencies\"]){Module[\"monitorRunDependencies\"](runDependencies)}if(runDependencies==0){if(runDependencyWatcher!==null){clearInterval(runDependencyWatcher);runDependencyWatcher=null}if(dependenciesFulfilled){var callback=dependenciesFulfilled;dependenciesFulfilled=null;callback()}}}function abort(what){if(Module[\"onAbort\"]){Module[\"onAbort\"](what)}what=\"Aborted(\"+what+\")\";err(what);ABORT=true;EXITSTATUS=1;what+=\". Build with -sASSERTIONS for more info.\";var e=new WebAssembly.RuntimeError(what);readyPromiseReject(e);throw e}var dataURIPrefix=\"data:application/octet-stream;base64,\";function isDataURI(filename){return filename.startsWith(dataURIPrefix)}var wasmBinaryFile;wasmBinaryFile=\"chip-core.wasm\";if(!isDataURI(wasmBinaryFile)){wasmBinaryFile=locateFile(wasmBinaryFile)}function getBinarySync(file){if(file==wasmBinaryFile&&wasmBinary){return new Uint8Array(wasmBinary)}if(readBinary){return readBinary(file)}throw\"both async and sync fetching of the wasm failed\"}function getBinaryPromise(binaryFile){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch==\"function\"){return fetch(binaryFile,{credentials:\"same-origin\"}).then(response=>{if(!response[\"ok\"]){throw\"failed to load wasm binary file at '\"+binaryFile+\"'\"}return response[\"arrayBuffer\"]()}).catch(()=>getBinarySync(binaryFile))}}return Promise.resolve().then(()=>getBinarySync(binaryFile))}function instantiateArrayBuffer(binaryFile,imports,receiver){return getBinaryPromise(binaryFile).then(binary=>WebAssembly.instantiate(binary,imports)).then(instance=>instance).then(receiver,reason=>{err(`failed to asynchronously prepare wasm: ${reason}`);abort(reason)})}function instantiateAsync(binary,binaryFile,imports,callback){if(!binary&&typeof WebAssembly.instantiateStreaming==\"function\"&&!isDataURI(binaryFile)&&typeof fetch==\"function\"){return fetch(binaryFile,{credentials:\"same-origin\"}).then(response=>{var result=WebAssembly.instantiateStreaming(response,imports);return result.then(callback,function(reason){err(`wasm streaming compile failed: ${reason}`);err(\"falling back to ArrayBuffer instantiation\");return instantiateArrayBuffer(binaryFile,imports,callback)})})}return instantiateArrayBuffer(binaryFile,imports,callback)}function createWasm(){var info={\"a\":wasmImports};function receiveInstance(instance,module){var exports=instance.exports;wasmExports=exports;wasmMemory=wasmExports[\"r\"];updateMemoryViews();wasmTable=wasmExports[\"pb\"];addOnInit(wasmExports[\"s\"]);removeRunDependency(\"wasm-instantiate\");return exports}addRunDependency(\"wasm-instantiate\");function receiveInstantiationResult(result){receiveInstance(result[\"instance\"])}if(Module[\"instantiateWasm\"]){try{return Module[\"instantiateWasm\"](info,receiveInstance)}catch(e){err(`Module.instantiateWasm callback failed with error: ${e}`);readyPromiseReject(e)}}instantiateAsync(wasmBinary,wasmBinaryFile,info,receiveInstantiationResult).catch(readyPromiseReject);return{}}var ASM_CONSTS={510956:$0=>{console.log(\"Error during V2M conversion.\",$0)}};var callRuntimeCallbacks=callbacks=>{while(callbacks.length>0){callbacks.shift()(Module)}};function getValue(ptr,type=\"i8\"){if(type.endsWith(\"*\"))type=\"*\";switch(type){case\"i1\":return HEAP8[ptr>>0];case\"i8\":return HEAP8[ptr>>0];case\"i16\":return HEAP16[ptr>>1];case\"i32\":return HEAP32[ptr>>2];case\"i64\":return HEAP64[ptr>>3];case\"float\":return HEAPF32[ptr>>2];case\"double\":return HEAPF64[ptr>>3];case\"*\":return HEAPU32[ptr>>2];default:abort(`invalid type for getValue: ${type}`)}}function setValue(ptr,value,type=\"i8\"){if(type.endsWith(\"*\"))type=\"*\";switch(type){case\"i1\":HEAP8[ptr>>0]=value;break;case\"i8\":HEAP8[ptr>>0]=value;break;case\"i16\":HEAP16[ptr>>1]=value;break;case\"i32\":HEAP32[ptr>>2]=value;break;case\"i64\":HEAP64[ptr>>3]=BigInt(value);break;case\"float\":HEAPF32[ptr>>2]=value;break;case\"double\":HEAPF64[ptr>>3]=value;break;case\"*\":HEAPU32[ptr>>2]=value;break;default:abort(`invalid type for setValue: ${type}`)}}var UTF8Decoder=typeof TextDecoder!=\"undefined\"?new TextDecoder(\"utf8\"):undefined;var UTF8ArrayToString=(heapOrArray,idx,maxBytesToRead)=>{var endIdx=idx+maxBytesToRead;var endPtr=idx;while(heapOrArray[endPtr]&&!(endPtr>=endIdx))++endPtr;if(endPtr-idx>16&&heapOrArray.buffer&&UTF8Decoder){return UTF8Decoder.decode(heapOrArray.subarray(idx,endPtr))}var str=\"\";while(idx<endPtr){var u0=heapOrArray[idx++];if(!(u0&128)){str+=String.fromCharCode(u0);continue}var u1=heapOrArray[idx++]&63;if((u0&224)==192){str+=String.fromCharCode((u0&31)<<6|u1);continue}var u2=heapOrArray[idx++]&63;if((u0&240)==224){u0=(u0&15)<<12|u1<<6|u2}else{u0=(u0&7)<<18|u1<<12|u2<<6|heapOrArray[idx++]&63}if(u0<65536){str+=String.fromCharCode(u0)}else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|ch&1023)}}return str};var UTF8ToString=(ptr,maxBytesToRead)=>ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):\"\";var ___assert_fail=(condition,filename,line,func)=>{abort(`Assertion failed: ${UTF8ToString(condition)}, at: `+[filename?UTF8ToString(filename):\"unknown filename\",line,func?UTF8ToString(func):\"unknown function\"])};function ExceptionInfo(excPtr){this.excPtr=excPtr;this.ptr=excPtr-24;this.set_type=function(type){HEAPU32[this.ptr+4>>2]=type};this.get_type=function(){return HEAPU32[this.ptr+4>>2]};this.set_destructor=function(destructor){HEAPU32[this.ptr+8>>2]=destructor};this.get_destructor=function(){return HEAPU32[this.ptr+8>>2]};this.set_caught=function(caught){caught=caught?1:0;HEAP8[this.ptr+12>>0]=caught};this.get_caught=function(){return HEAP8[this.ptr+12>>0]!=0};this.set_rethrown=function(rethrown){rethrown=rethrown?1:0;HEAP8[this.ptr+13>>0]=rethrown};this.get_rethrown=function(){return HEAP8[this.ptr+13>>0]!=0};this.init=function(type,destructor){this.set_adjusted_ptr(0);this.set_type(type);this.set_destructor(destructor)};this.set_adjusted_ptr=function(adjustedPtr){HEAPU32[this.ptr+16>>2]=adjustedPtr};this.get_adjusted_ptr=function(){return HEAPU32[this.ptr+16>>2]};this.get_exception_ptr=function(){var isPointer=___cxa_is_pointer_type(this.get_type());if(isPointer){return HEAPU32[this.excPtr>>2]}var adjusted=this.get_adjusted_ptr();if(adjusted!==0)return adjusted;return this.excPtr}}var exceptionLast=0;var uncaughtExceptionCount=0;var ___cxa_throw=(ptr,type,destructor)=>{var info=new ExceptionInfo(ptr);info.init(type,destructor);exceptionLast=ptr;uncaughtExceptionCount++;throw exceptionLast};var setErrNo=value=>{HEAP32[___errno_location()>>2]=value;return value};var PATH={isAbs:path=>path.charAt(0)===\"/\",splitPath:filename=>{var splitPathRe=/^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;return splitPathRe.exec(filename).slice(1)},normalizeArray:(parts,allowAboveRoot)=>{var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last===\".\"){parts.splice(i,1)}else if(last===\"..\"){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up;up--){parts.unshift(\"..\")}}return parts},normalize:path=>{var isAbsolute=PATH.isAbs(path),trailingSlash=path.substr(-1)===\"/\";path=PATH.normalizeArray(path.split(\"/\").filter(p=>!!p),!isAbsolute).join(\"/\");if(!path&&!isAbsolute){path=\".\"}if(path&&trailingSlash){path+=\"/\"}return(isAbsolute?\"/\":\"\")+path},dirname:path=>{var result=PATH.splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return\".\"}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir},basename:path=>{if(path===\"/\")return\"/\";path=PATH.normalize(path);path=path.replace(/\\/$/,\"\");var lastSlash=path.lastIndexOf(\"/\");if(lastSlash===-1)return path;return path.substr(lastSlash+1)},join:function(){var paths=Array.prototype.slice.call(arguments);return PATH.normalize(paths.join(\"/\"))},join2:(l,r)=>PATH.normalize(l+\"/\"+r)};var initRandomFill=()=>{if(typeof crypto==\"object\"&&typeof crypto[\"getRandomValues\"]==\"function\"){return view=>crypto.getRandomValues(view)}else abort(\"initRandomDevice\")};var randomFill=view=>(randomFill=initRandomFill())(view);var PATH_FS={resolve:function(){var resolvedPath=\"\",resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:FS.cwd();if(typeof path!=\"string\"){throw new TypeError(\"Arguments to path.resolve must be strings\")}else if(!path){return\"\"}resolvedPath=path+\"/\"+resolvedPath;resolvedAbsolute=PATH.isAbs(path)}resolvedPath=PATH.normalizeArray(resolvedPath.split(\"/\").filter(p=>!!p),!resolvedAbsolute).join(\"/\");return(resolvedAbsolute?\"/\":\"\")+resolvedPath||\".\"},relative:(from,to)=>{from=PATH_FS.resolve(from).substr(1);to=PATH_FS.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!==\"\")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!==\"\")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split(\"/\"));var toParts=trim(to.split(\"/\"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push(\"..\")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join(\"/\")}};var FS_stdin_getChar_buffer=[];var lengthBytesUTF8=str=>{var len=0;for(var i=0;i<str.length;++i){var c=str.charCodeAt(i);if(c<=127){len++}else if(c<=2047){len+=2}else if(c>=55296&&c<=57343){len+=4;++i}else{len+=3}}return len};var stringToUTF8Array=(str,heap,outIdx,maxBytesToWrite)=>{if(!(maxBytesToWrite>0))return 0;var startIdx=outIdx;var endIdx=outIdx+maxBytesToWrite-1;for(var i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343){var u1=str.charCodeAt(++i);u=65536+((u&1023)<<10)|u1&1023}if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6;heap[outIdx++]=128|u&63}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}else{if(outIdx+3>=endIdx)break;heap[outIdx++]=240|u>>18;heap[outIdx++]=128|u>>12&63;heap[outIdx++]=128|u>>6&63;heap[outIdx++]=128|u&63}}heap[outIdx]=0;return outIdx-startIdx};function intArrayFromString(stringy,dontAddNull,length){var len=length>0?length:lengthBytesUTF8(stringy)+1;var u8array=new Array(len);var numBytesWritten=stringToUTF8Array(stringy,u8array,0,u8array.length);if(dontAddNull)u8array.length=numBytesWritten;return u8array}var FS_stdin_getChar=()=>{if(!FS_stdin_getChar_buffer.length){var result=null;if(typeof window!=\"undefined\"&&typeof window.prompt==\"function\"){result=window.prompt(\"Input: \");if(result!==null){result+=\"\\n\"}}else if(typeof readline==\"function\"){result=readline();if(result!==null){result+=\"\\n\"}}if(!result){return null}FS_stdin_getChar_buffer=intArrayFromString(result,true)}return FS_stdin_getChar_buffer.shift()};var TTY={ttys:[],init(){},shutdown(){},register(dev,ops){TTY.ttys[dev]={input:[],output:[],ops:ops};FS.registerDevice(dev,TTY.stream_ops)},stream_ops:{open(stream){var tty=TTY.ttys[stream.node.rdev];if(!tty){throw new FS.ErrnoError(43)}stream.tty=tty;stream.seekable=false},close(stream){stream.tty.ops.fsync(stream.tty)},fsync(stream){stream.tty.ops.fsync(stream.tty)},read(stream,buffer,offset,length,pos){if(!stream.tty||!stream.tty.ops.get_char){throw new FS.ErrnoError(60)}var bytesRead=0;for(var i=0;i<length;i++){var result;try{result=stream.tty.ops.get_char(stream.tty)}catch(e){throw new FS.ErrnoError(29)}if(result===undefined&&bytesRead===0){throw new FS.ErrnoError(6)}if(result===null||result===undefined)break;bytesRead++;buffer[offset+i]=result}if(bytesRead){stream.node.timestamp=Date.now()}return bytesRead},write(stream,buffer,offset,length,pos){if(!stream.tty||!stream.tty.ops.put_char){throw new FS.ErrnoError(60)}try{for(var i=0;i<length;i++){stream.tty.ops.put_char(stream.tty,buffer[offset+i])}}catch(e){throw new FS.ErrnoError(29)}if(length){stream.node.timestamp=Date.now()}return i}},default_tty_ops:{get_char(tty){return FS_stdin_getChar()},put_char(tty,val){if(val===null||val===10){out(UTF8ArrayToString(tty.output,0));tty.output=[]}else{if(val!=0)tty.output.push(val)}},fsync(tty){if(tty.output&&tty.output.length>0){out(UTF8ArrayToString(tty.output,0));tty.output=[]}},ioctl_tcgets(tty){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(tty,optional_actions,data){return 0},ioctl_tiocgwinsz(tty){return[24,80]}},default_tty1_ops:{put_char(tty,val){if(val===null||val===10){err(UTF8ArrayToString(tty.output,0));tty.output=[]}else{if(val!=0)tty.output.push(val)}},fsync(tty){if(tty.output&&tty.output.length>0){err(UTF8ArrayToString(tty.output,0));tty.output=[]}}}};var zeroMemory=(address,size)=>{HEAPU8.fill(0,address,address+size);return address};var alignMemory=(size,alignment)=>Math.ceil(size/alignment)*alignment;var mmapAlloc=size=>{size=alignMemory(size,65536);var ptr=_emscripten_builtin_memalign(65536,size);if(!ptr)return 0;return zeroMemory(ptr,size)};var MEMFS={ops_table:null,mount(mount){return MEMFS.createNode(null,\"/\",16384|511,0)},createNode(parent,name,mode,dev){if(FS.isBlkdev(mode)||FS.isFIFO(mode)){throw new FS.ErrnoError(63)}if(!MEMFS.ops_table){MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}}}var node=FS.createNode(parent,name,mode,dev);if(FS.isDir(node.mode)){node.node_ops=MEMFS.ops_table.dir.node;node.stream_ops=MEMFS.ops_table.dir.stream;node.contents={}}else if(FS.isFile(node.mode)){node.node_ops=MEMFS.ops_table.file.node;node.stream_ops=MEMFS.ops_table.file.stream;node.usedBytes=0;node.contents=null}else if(FS.isLink(node.mode)){node.node_ops=MEMFS.ops_table.link.node;node.stream_ops=MEMFS.ops_table.link.stream}else if(FS.isChrdev(node.mode)){node.node_ops=MEMFS.ops_table.chrdev.node;node.stream_ops=MEMFS.ops_table.chrdev.stream}node.timestamp=Date.now();if(parent){parent.contents[name]=node;parent.timestamp=node.timestamp}return node},getFileDataAsTypedArray(node){if(!node.contents)return new Uint8Array(0);if(node.contents.subarray)return node.contents.subarray(0,node.usedBytes);return new Uint8Array(node.contents)},expandFileStorage(node,newCapacity){var prevCapacity=node.contents?node.contents.length:0;if(prevCapacity>=newCapacity)return;var CAPACITY_DOUBLING_MAX=1024*1024;newCapacity=Math.max(newCapacity,prevCapacity*(prevCapacity<CAPACITY_DOUBLING_MAX?2:1.125)>>>0);if(prevCapacity!=0)newCapacity=Math.max(newCapacity,256);var oldContents=node.contents;node.contents=new Uint8Array(newCapacity);if(node.usedBytes>0)node.contents.set(oldContents.subarray(0,node.usedBytes),0)},resizeFileStorage(node,newSize){if(node.usedBytes==newSize)return;if(newSize==0){node.contents=null;node.usedBytes=0}else{var oldContents=node.contents;node.contents=new Uint8Array(newSize);if(oldContents){node.contents.set(oldContents.subarray(0,Math.min(newSize,node.usedBytes)))}node.usedBytes=newSize}},node_ops:{getattr(node){var attr={};attr.dev=FS.isChrdev(node.mode)?node.id:1;attr.ino=node.id;attr.mode=node.mode;attr.nlink=1;attr.uid=0;attr.gid=0;attr.rdev=node.rdev;if(FS.isDir(node.mode)){attr.size=4096}else if(FS.isFile(node.mode)){attr.size=node.usedBytes}else if(FS.isLink(node.mode)){attr.size=node.link.length}else{attr.size=0}attr.atime=new Date(node.timestamp);attr.mtime=new Date(node.timestamp);attr.ctime=new Date(node.timestamp);attr.blksize=4096;attr.blocks=Math.ceil(attr.size/attr.blksize);return attr},setattr(node,attr){if(attr.mode!==undefined){node.mode=attr.mode}if(attr.timestamp!==undefined){node.timestamp=attr.timestamp}if(attr.size!==undefined){MEMFS.resizeFileStorage(node,attr.size)}},lookup(parent,name){throw FS.genericErrors[44]},mknod(parent,name,mode,dev){return MEMFS.createNode(parent,name,mode,dev)},rename(old_node,new_dir,new_name){if(FS.isDir(old_node.mode)){var new_node;try{new_node=FS.lookupNode(new_dir,new_name)}catch(e){}if(new_node){for(var i in new_node.contents){throw new FS.ErrnoError(55)}}}delete old_node.parent.contents[old_node.name];old_node.parent.timestamp=Date.now();old_node.name=new_name;new_dir.contents[new_name]=old_node;new_dir.timestamp=old_node.parent.timestamp;old_node.parent=new_dir},unlink(parent,name){delete parent.contents[name];parent.timestamp=Date.now()},rmdir(parent,name){var node=FS.lookupNode(parent,name);for(var i in node.contents){throw new FS.ErrnoError(55)}delete parent.contents[name];parent.timestamp=Date.now()},readdir(node){var entries=[\".\",\"..\"];for(var key in node.contents){if(!node.contents.hasOwnProperty(key)){continue}entries.push(key)}return entries},symlink(parent,newname,oldpath){var node=MEMFS.createNode(parent,newname,511|40960,0);node.link=oldpath;return node},readlink(node){if(!FS.isLink(node.mode)){throw new FS.ErrnoError(28)}return node.link}},stream_ops:{read(stream,buffer,offset,length,position){var contents=stream.node.contents;if(position>=stream.node.usedBytes)return 0;var size=Math.min(stream.node.usedBytes-position,length);if(size>8&&contents.subarray){buffer.set(contents.subarray(position,position+size),offset)}else{for(var i=0;i<size;i++)buffer[offset+i]=contents[position+i]}return size},write(stream,buffer,offset,length,position,canOwn){if(buffer.buffer===HEAP8.buffer){canOwn=false}if(!length)return 0;var node=stream.node;node.timestamp=Date.now();if(buffer.subarray&&(!node.contents||node.contents.subarray)){if(canOwn){node.contents=buffer.subarray(offset,offset+length);node.usedBytes=length;return length}else if(node.usedBytes===0&&position===0){node.contents=buffer.slice(offset,offset+length);node.usedBytes=length;return length}else if(position+length<=node.usedBytes){node.contents.set(buffer.subarray(offset,offset+length),position);return length}}MEMFS.expandFileStorage(node,position+length);if(node.contents.subarray&&buffer.subarray){node.contents.set(buffer.subarray(offset,offset+length),position)}else{for(var i=0;i<length;i++){node.contents[position+i]=buffer[offset+i]}}node.usedBytes=Math.max(node.usedBytes,position+length);return length},llseek(stream,offset,whence){var position=offset;if(whence===1){position+=stream.position}else if(whence===2){if(FS.isFile(stream.node.mode)){position+=stream.node.usedBytes}}if(position<0){throw new FS.ErrnoError(28)}return position},allocate(stream,offset,length){MEMFS.expandFileStorage(stream.node,offset+length);stream.node.usedBytes=Math.max(stream.node.usedBytes,offset+length)},mmap(stream,length,position,prot,flags){if(!FS.isFile(stream.node.mode)){throw new FS.ErrnoError(43)}var ptr;var allocated;var contents=stream.node.contents;if(!(flags&2)&&contents.buffer===HEAP8.buffer){allocated=false;ptr=contents.byteOffset}else{if(position>0||position+length<contents.length){if(contents.subarray){contents=contents.subarray(position,position+length)}else{contents=Array.prototype.slice.call(contents,position,position+length)}}allocated=true;ptr=mmapAlloc(length);if(!ptr){throw new FS.ErrnoError(48)}HEAP8.set(contents,ptr)}return{ptr:ptr,allocated:allocated}},msync(stream,buffer,offset,length,mmapFlags){MEMFS.stream_ops.write(stream,buffer,0,length,offset,false);return 0}}};var asyncLoad=(url,onload,onerror,noRunDep)=>{var dep=!noRunDep?getUniqueRunDependency(`al ${url}`):\"\";readAsync(url,arrayBuffer=>{assert(arrayBuffer,`Loading data file \"${url}\" failed (no arrayBuffer).`);onload(new Uint8Array(arrayBuffer));if(dep)removeRunDependency(dep)},event=>{if(onerror){onerror()}else{throw`Loading data file \"${url}\" failed.`}});if(dep)addRunDependency(dep)};var preloadPlugins=Module[\"preloadPlugins\"]||[];var FS_handledByPreloadPlugin=(byteArray,fullname,finish,onerror)=>{if(typeof Browser!=\"undefined\")Browser.init();var handled=false;preloadPlugins.forEach(plugin=>{if(handled)return;if(plugin[\"canHandle\"](fullname)){plugin[\"handle\"](byteArray,fullname,finish,onerror);handled=true}});return handled};var FS_createPreloadedFile=(parent,name,url,canRead,canWrite,onload,onerror,dontCreateFile,canOwn,preFinish)=>{var fullname=name?PATH_FS.resolve(PATH.join2(parent,name)):parent;var dep=getUniqueRunDependency(`cp ${fullname}`);function processData(byteArray){function finish(byteArray){if(preFinish)preFinish();if(!dontCreateFile){FS.createDataFile(parent,name,byteArray,canRead,canWrite,canOwn)}if(onload)onload();removeRunDependency(dep)}if(FS_handledByPreloadPlugin(byteArray,fullname,finish,()=>{if(onerror)onerror();removeRunDependency(dep)})){return}finish(byteArray)}addRunDependency(dep);if(typeof url==\"string\"){asyncLoad(url,byteArray=>processData(byteArray),onerror)}else{processData(url)}};var FS_modeStringToFlags=str=>{var flagModes={\"r\":0,\"r+\":2,\"w\":512|64|1,\"w+\":512|64|2,\"a\":1024|64|1,\"a+\":1024|64|2};var flags=flagModes[str];if(typeof flags==\"undefined\"){throw new Error(`Unknown file open mode: ${str}`)}return flags};var FS_getMode=(canRead,canWrite)=>{var mode=0;if(canRead)mode|=292|73;if(canWrite)mode|=146;return mode};var IDBFS={dbs:{},indexedDB:()=>{if(typeof indexedDB!=\"undefined\")return indexedDB;var ret=null;if(typeof window==\"object\")ret=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;assert(ret,\"IDBFS used, but indexedDB not supported\");return ret},DB_VERSION:21,DB_STORE_NAME:\"FILE_DATA\",mount:function(mount){return MEMFS.mount.apply(null,arguments)},syncfs:(mount,populate,callback)=>{IDBFS.getLocalSet(mount,(err,local)=>{if(err)return callback(err);IDBFS.getRemoteSet(mount,(err,remote)=>{if(err)return callback(err);var src=populate?remote:local;var dst=populate?local:remote;IDBFS.reconcile(src,dst,callback)})})},quit:()=>{Object.values(IDBFS.dbs).forEach(value=>value.close());IDBFS.dbs={}},getDB:(name,callback)=>{var db=IDBFS.dbs[name];if(db){return callback(null,db)}var req;try{req=IDBFS.indexedDB().open(name,IDBFS.DB_VERSION)}catch(e){return callback(e)}if(!req){return callback(\"Unable to connect to IndexedDB\")}req.onupgradeneeded=e=>{var db=e.target.result;var transaction=e.target.transaction;var fileStore;if(db.objectStoreNames.contains(IDBFS.DB_STORE_NAME)){fileStore=transaction.objectStore(IDBFS.DB_STORE_NAME)}else{fileStore=db.createObjectStore(IDBFS.DB_STORE_NAME)}if(!fileStore.indexNames.contains(\"timestamp\")){fileStore.createIndex(\"timestamp\",\"timestamp\",{unique:false})}};req.onsuccess=()=>{db=req.result;IDBFS.dbs[name]=db;callback(null,db)};req.onerror=e=>{callback(e.target.error);e.preventDefault()}},getLocalSet:(mount,callback)=>{var entries={};function isRealDir(p){return p!==\".\"&&p!==\"..\"}function toAbsolute(root){return p=>PATH.join2(root,p)}var check=FS.readdir(mount.mountpoint).filter(isRealDir).map(toAbsolute(mount.mountpoint));while(check.length){var path=check.pop();var stat;try{stat=FS.stat(path)}catch(e){return callback(e)}if(FS.isDir(stat.mode)){check.push.apply(check,FS.readdir(path).filter(isRealDir).map(toAbsolute(path)))}entries[path]={\"timestamp\":stat.mtime}}return callback(null,{type:\"local\",entries:entries})},getRemoteSet:(mount,callback)=>{var entries={};IDBFS.getDB(mount.mountpoint,(err,db)=>{if(err)return callback(err);try{var transaction=db.transaction([IDBFS.DB_STORE_NAME],\"readonly\");transaction.onerror=e=>{callback(e.target.error);e.preventDefault()};var store=transaction.objectStore(IDBFS.DB_STORE_NAME);var index=store.index(\"timestamp\");index.openKeyCursor().onsuccess=event=>{var cursor=event.target.result;if(!cursor){return callback(null,{type:\"remote\",db:db,entries:entries})}entries[cursor.primaryKey]={\"timestamp\":cursor.key};cursor.continue()}}catch(e){return callback(e)}})},loadLocalEntry:(path,callback)=>{var stat,node;try{var lookup=FS.lookupPath(path);node=lookup.node;stat=FS.stat(path)}catch(e){return callback(e)}if(FS.isDir(stat.mode)){return callback(null,{\"timestamp\":stat.mtime,\"mode\":stat.mode})}else if(FS.isFile(stat.mode)){node.contents=MEMFS.getFileDataAsTypedArray(node);return callback(null,{\"timestamp\":stat.mtime,\"mode\":stat.mode,\"contents\":node.contents})}else{return callback(new Error(\"node type not supported\"))}},storeLocalEntry:(path,entry,callback)=>{try{if(FS.isDir(entry[\"mode\"])){FS.mkdirTree(path,entry[\"mode\"])}else if(FS.isFile(entry[\"mode\"])){FS.writeFile(path,entry[\"contents\"],{canOwn:true})}else{return callback(new Error(\"node type not supported\"))}FS.chmod(path,entry[\"mode\"]);FS.utime(path,entry[\"timestamp\"],entry[\"timestamp\"])}catch(e){return callback(e)}callback(null)},removeLocalEntry:(path,callback)=>{try{var stat=FS.stat(path);if(FS.isDir(stat.mode)){FS.rmdir(path)}else if(FS.isFile(stat.mode)){FS.unlink(path)}}catch(e){return callback(e)}callback(null)},loadRemoteEntry:(store,path,callback)=>{var req=store.get(path);req.onsuccess=event=>{callback(null,event.target.result)};req.onerror=e=>{callback(e.target.error);e.preventDefault()}},storeRemoteEntry:(store,path,entry,callback)=>{try{var req=store.put(entry,path)}catch(e){callback(e);return}req.onsuccess=()=>{callback(null)};req.onerror=e=>{callback(e.target.error);e.preventDefault()}},removeRemoteEntry:(store,path,callback)=>{var req=store.delete(path);req.onsuccess=()=>{callback(null)};req.onerror=e=>{callback(e.target.error);e.preventDefault()}},reconcile:(src,dst,callback)=>{var total=0;var create=[];Object.keys(src.entries).forEach(function(key){var e=src.entries[key];var e2=dst.entries[key];if(!e2||e[\"timestamp\"].getTime()!=e2[\"timestamp\"].getTime()){create.push(key);total++}});var remove=[];Object.keys(dst.entries).forEach(function(key){if(!src.entries[key]){remove.push(key);total++}});if(!total){return callback(null)}var errored=false;var db=src.type===\"remote\"?src.db:dst.db;var transaction=db.transaction([IDBFS.DB_STORE_NAME],\"readwrite\");var store=transaction.objectStore(IDBFS.DB_STORE_NAME);function done(err){if(err&&!errored){errored=true;return callback(err)}}transaction.onerror=e=>{done(this.error);e.preventDefault()};transaction.oncomplete=e=>{if(!errored){callback(null)}};create.sort().forEach(path=>{if(dst.type===\"local\"){IDBFS.loadRemoteEntry(store,path,(err,entry)=>{if(err)return done(err);IDBFS.storeLocalEntry(path,entry,done)})}else{IDBFS.loadLocalEntry(path,(err,entry)=>{if(err)return done(err);IDBFS.storeRemoteEntry(store,path,entry,done)})}});remove.sort().reverse().forEach(path=>{if(dst.type===\"local\"){IDBFS.removeLocalEntry(path,done)}else{IDBFS.removeRemoteEntry(store,path,done)}})}};var FS={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:\"/\",initialized:false,ignorePermissions:true,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath(path,opts={}){path=PATH_FS.resolve(path);if(!path)return{path:\"\",node:null};var defaults={follow_mount:true,recurse_count:0};opts=Object.assign(defaults,opts);if(opts.recurse_count>8){throw new FS.ErrnoError(32)}var parts=path.split(\"/\").filter(p=>!!p);var current=FS.root;var current_path=\"/\";for(var i=0;i<parts.length;i++){var islast=i===parts.length-1;if(islast&&opts.parent){break}current=FS.lookupNode(current,parts[i]);current_path=PATH.join2(current_path,parts[i]);if(FS.isMountpoint(current)){if(!islast||islast&&opts.follow_mount){current=current.mounted.root}}if(!islast||opts.follow){var count=0;while(FS.isLink(current.mode)){var link=FS.readlink(current_path);current_path=PATH_FS.resolve(PATH.dirname(current_path),link);var lookup=FS.lookupPath(current_path,{recurse_count:opts.recurse_count+1});current=lookup.node;if(count++>40){throw new FS.ErrnoError(32)}}}}return{path:current_path,node:current}},getPath(node){var path;while(true){if(FS.isRoot(node)){var mount=node.mount.mountpoint;if(!path)return mount;return mount[mount.length-1]!==\"/\"?`${mount}/${path}`:mount+path}path=path?`${node.name}/${path}`:node.name;node=node.parent}},hashName(parentid,name){var hash=0;for(var i=0;i<name.length;i++){hash=(hash<<5)-hash+name.charCodeAt(i)|0}return(parentid+hash>>>0)%FS.nameTable.length},hashAddNode(node){var hash=FS.hashName(node.parent.id,node.name);node.name_next=FS.nameTable[hash];FS.nameTable[hash]=node},hashRemoveNode(node){var hash=FS.hashName(node.parent.id,node.name);if(FS.nameTable[hash]===node){FS.nameTable[hash]=node.name_next}else{var current=FS.nameTable[hash];while(current){if(current.name_next===node){current.name_next=node.name_next;break}current=current.name_next}}},lookupNode(parent,name){var errCode=FS.mayLookup(parent);if(errCode){throw new FS.ErrnoError(errCode,parent)}var hash=FS.hashName(parent.id,name);for(var node=FS.nameTable[hash];node;node=node.name_next){var nodeName=node.name;if(node.parent.id===parent.id&&nodeName===name){return node}}return FS.lookup(parent,name)},createNode(parent,name,mode,rdev){var node=new FS.FSNode(parent,name,mode,rdev);FS.hashAddNode(node);return node},destroyNode(node){FS.hashRemoveNode(node)},isRoot(node){return node===node.parent},isMountpoint(node){return!!node.mounted},isFile(mode){return(mode&61440)===32768},isDir(mode){return(mode&61440)===16384},isLink(mode){return(mode&61440)===40960},isChrdev(mode){return(mode&61440)===8192},isBlkdev(mode){return(mode&61440)===24576},isFIFO(mode){return(mode&61440)===4096},isSocket(mode){return(mode&49152)===49152},flagsToPermissionString(flag){var perms=[\"r\",\"w\",\"rw\"][flag&3];if(flag&512){perms+=\"w\"}return perms},nodePermissions(node,perms){if(FS.ignorePermissions){return 0}if(perms.includes(\"r\")&&!(node.mode&292)){return 2}else if(perms.includes(\"w\")&&!(node.mode&146)){return 2}else if(perms.includes(\"x\")&&!(node.mode&73)){return 2}return 0},mayLookup(dir){var errCode=FS.nodePermissions(dir,\"x\");if(errCode)return errCode;if(!dir.node_ops.lookup)return 2;return 0},mayCreate(dir,name){try{var node=FS.lookupNode(dir,name);return 20}catch(e){}return FS.nodePermissions(dir,\"wx\")},mayDelete(dir,name,isdir){var node;try{node=FS.lookupNode(dir,name)}catch(e){return e.errno}var errCode=FS.nodePermissions(dir,\"wx\");if(errCode){return errCode}if(isdir){if(!FS.isDir(node.mode)){return 54}if(FS.isRoot(node)||FS.getPath(node)===FS.cwd()){return 10}}else{if(FS.isDir(node.mode)){return 31}}return 0},mayOpen(node,flags){if(!node){return 44}if(FS.isLink(node.mode)){return 32}else if(FS.isDir(node.mode)){if(FS.flagsToPermissionString(flags)!==\"r\"||flags&512){return 31}}return FS.nodePermissions(node,FS.flagsToPermissionString(flags))},MAX_OPEN_FDS:4096,nextfd(){for(var fd=0;fd<=FS.MAX_OPEN_FDS;fd++){if(!FS.streams[fd]){return fd}}throw new FS.ErrnoError(33)},getStreamChecked(fd){var stream=FS.getStream(fd);if(!stream){throw new FS.ErrnoError(8)}return stream},getStream:fd=>FS.streams[fd],createStream(stream,fd=-1){if(!FS.FSStream){FS.FSStream=function(){this.shared={}};FS.FSStream.prototype={};Object.defineProperties(FS.FSStream.prototype,{object:{get(){return this.node},set(val){this.node=val}},isRead:{get(){return(this.flags&2097155)!==1}},isWrite:{get(){return(this.flags&2097155)!==0}},isAppend:{get(){return this.flags&1024}},flags:{get(){return this.shared.flags},set(val){this.shared.flags=val}},position:{get(){return this.shared.position},set(val){this.shared.position=val}}})}stream=Object.assign(new FS.FSStream,stream);if(fd==-1){fd=FS.nextfd()}stream.fd=fd;FS.streams[fd]=stream;return stream},closeStream(fd){FS.streams[fd]=null},chrdev_stream_ops:{open(stream){var device=FS.getDevice(stream.node.rdev);stream.stream_ops=device.stream_ops;if(stream.stream_ops.open){stream.stream_ops.open(stream)}},llseek(){throw new FS.ErrnoError(70)}},major:dev=>dev>>8,minor:dev=>dev&255,makedev:(ma,mi)=>ma<<8|mi,registerDevice(dev,ops){FS.devices[dev]={stream_ops:ops}},getDevice:dev=>FS.devices[dev],getMounts(mount){var mounts=[];var check=[mount];while(check.length){var m=check.pop();mounts.push(m);check.push.apply(check,m.mounts)}return mounts},syncfs(populate,callback){if(typeof populate==\"function\"){callback=populate;populate=false}FS.syncFSRequests++;if(FS.syncFSRequests>1){err(`warning: ${FS.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`)}var mounts=FS.getMounts(FS.root.mount);var completed=0;function doCallback(errCode){FS.syncFSRequests--;return callback(errCode)}function done(errCode){if(errCode){if(!done.errored){done.errored=true;return doCallback(errCode)}return}if(++completed>=mounts.length){doCallback(null)}}mounts.forEach(mount=>{if(!mount.type.syncfs){return done(null)}mount.type.syncfs(mount,populate,done)})},mount(type,opts,mountpoint){var root=mountpoint===\"/\";var pseudo=!mountpoint;var node;if(root&&FS.root){throw new FS.ErrnoError(10)}else if(!root&&!pseudo){var lookup=FS.lookupPath(mountpoint,{follow_mount:false});mountpoint=lookup.path;node=lookup.node;if(FS.isMountpoint(node)){throw new FS.ErrnoError(10)}if(!FS.isDir(node.mode)){throw new FS.ErrnoError(54)}}var mount={type:type,opts:opts,mountpoint:mountpoint,mounts:[]};var mountRoot=type.mount(mount);mountRoot.mount=mount;mount.root=mountRoot;if(root){FS.root=mountRoot}else if(node){node.mounted=mount;if(node.mount){node.mount.mounts.push(mount)}}return mountRoot},unmount(mountpoint){var lookup=FS.lookupPath(mountpoint,{follow_mount:false});if(!FS.isMountpoint(lookup.node)){throw new FS.ErrnoError(28)}var node=lookup.node;var mount=node.mounted;var mounts=FS.getMounts(mount);Object.keys(FS.nameTable).forEach(hash=>{var current=FS.nameTable[hash];while(current){var next=current.name_next;if(mounts.includes(current.mount)){FS.destroyNode(current)}current=next}});node.mounted=null;var idx=node.mount.mounts.indexOf(mount);node.mount.mounts.splice(idx,1)},lookup(parent,name){return parent.node_ops.lookup(parent,name)},mknod(path,mode,dev){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;var name=PATH.basename(path);if(!name||name===\".\"||name===\"..\"){throw new FS.ErrnoError(28)}var errCode=FS.mayCreate(parent,name);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.mknod){throw new FS.ErrnoError(63)}return parent.node_ops.mknod(parent,name,mode,dev)},create(path,mode){mode=mode!==undefined?mode:438;mode&=4095;mode|=32768;return FS.mknod(path,mode,0)},mkdir(path,mode){mode=mode!==undefined?mode:511;mode&=511|512;mode|=16384;return FS.mknod(path,mode,0)},mkdirTree(path,mode){var dirs=path.split(\"/\");var d=\"\";for(var i=0;i<dirs.length;++i){if(!dirs[i])continue;d+=\"/\"+dirs[i];try{FS.mkdir(d,mode)}catch(e){if(e.errno!=20)throw e}}},mkdev(path,mode,dev){if(typeof dev==\"undefined\"){dev=mode;mode=438}mode|=8192;return FS.mknod(path,mode,dev)},symlink(oldpath,newpath){if(!PATH_FS.resolve(oldpath)){throw new FS.ErrnoError(44)}var lookup=FS.lookupPath(newpath,{parent:true});var parent=lookup.node;if(!parent){throw new FS.ErrnoError(44)}var newname=PATH.basename(newpath);var errCode=FS.mayCreate(parent,newname);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.symlink){throw new FS.ErrnoError(63)}return parent.node_ops.symlink(parent,newname,oldpath)},rename(old_path,new_path){var old_dirname=PATH.dirname(old_path);var new_dirname=PATH.dirname(new_path);var old_name=PATH.basename(old_path);var new_name=PATH.basename(new_path);var lookup,old_dir,new_dir;lookup=FS.lookupPath(old_path,{parent:true});old_dir=lookup.node;lookup=FS.lookupPath(new_path,{parent:true});new_dir=lookup.node;if(!old_dir||!new_dir)throw new FS.ErrnoError(44);if(old_dir.mount!==new_dir.mount){throw new FS.ErrnoError(75)}var old_node=FS.lookupNode(old_dir,old_name);var relative=PATH_FS.relative(old_path,new_dirname);if(relative.charAt(0)!==\".\"){throw new FS.ErrnoError(28)}relative=PATH_FS.relative(new_path,old_dirname);if(relative.charAt(0)!==\".\"){throw new FS.ErrnoError(55)}var new_node;try{new_node=FS.lookupNode(new_dir,new_name)}catch(e){}if(old_node===new_node){return}var isdir=FS.isDir(old_node.mode);var errCode=FS.mayDelete(old_dir,old_name,isdir);if(errCode){throw new FS.ErrnoError(errCode)}errCode=new_node?FS.mayDelete(new_dir,new_name,isdir):FS.mayCreate(new_dir,new_name);if(errCode){throw new FS.ErrnoError(errCode)}if(!old_dir.node_ops.rename){throw new FS.ErrnoError(63)}if(FS.isMountpoint(old_node)||new_node&&FS.isMountpoint(new_node)){throw new FS.ErrnoError(10)}if(new_dir!==old_dir){errCode=FS.nodePermissions(old_dir,\"w\");if(errCode){throw new FS.ErrnoError(errCode)}}FS.hashRemoveNode(old_node);try{old_dir.node_ops.rename(old_node,new_dir,new_name)}catch(e){throw e}finally{FS.hashAddNode(old_node)}},rmdir(path){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;var name=PATH.basename(path);var node=FS.lookupNode(parent,name);var errCode=FS.mayDelete(parent,name,true);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.rmdir){throw new FS.ErrnoError(63)}if(FS.isMountpoint(node)){throw new FS.ErrnoError(10)}parent.node_ops.rmdir(parent,name);FS.destroyNode(node)},readdir(path){var lookup=FS.lookupPath(path,{follow:true});var node=lookup.node;if(!node.node_ops.readdir){throw new FS.ErrnoError(54)}return node.node_ops.readdir(node)},unlink(path){var lookup=FS.lookupPath(path,{parent:true});var parent=lookup.node;if(!parent){throw new FS.ErrnoError(44)}var name=PATH.basename(path);var node=FS.lookupNode(parent,name);var errCode=FS.mayDelete(parent,name,false);if(errCode){throw new FS.ErrnoError(errCode)}if(!parent.node_ops.unlink){throw new FS.ErrnoError(63)}if(FS.isMountpoint(node)){throw new FS.ErrnoError(10)}parent.node_ops.unlink(parent,name);FS.destroyNode(node)},readlink(path){var lookup=FS.lookupPath(path);var link=lookup.node;if(!link){throw new FS.ErrnoError(44)}if(!link.node_ops.readlink){throw new FS.ErrnoError(28)}return PATH_FS.resolve(FS.getPath(link.parent),link.node_ops.readlink(link))},stat(path,dontFollow){var lookup=FS.lookupPath(path,{follow:!dontFollow});var node=lookup.node;if(!node){throw new FS.ErrnoError(44)}if(!node.node_ops.getattr){throw new FS.ErrnoError(63)}return node.node_ops.getattr(node)},lstat(path){return FS.stat(path,true)},chmod(path,mode,dontFollow){var node;if(typeof path==\"string\"){var lookup=FS.lookupPath(path,{follow:!dontFollow});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(63)}node.node_ops.setattr(node,{mode:mode&4095|node.mode&~4095,timestamp:Date.now()})},lchmod(path,mode){FS.chmod(path,mode,true)},fchmod(fd,mode){var stream=FS.getStreamChecked(fd);FS.chmod(stream.node,mode)},chown(path,uid,gid,dontFollow){var node;if(typeof path==\"string\"){var lookup=FS.lookupPath(path,{follow:!dontFollow});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(63)}node.node_ops.setattr(node,{timestamp:Date.now()})},lchown(path,uid,gid){FS.chown(path,uid,gid,true)},fchown(fd,uid,gid){var stream=FS.getStreamChecked(fd);FS.chown(stream.node,uid,gid)},truncate(path,len){if(len<0){throw new FS.ErrnoError(28)}var node;if(typeof path==\"string\"){var lookup=FS.lookupPath(path,{follow:true});node=lookup.node}else{node=path}if(!node.node_ops.setattr){throw new FS.ErrnoError(63)}if(FS.isDir(node.mode)){throw new FS.ErrnoError(31)}if(!FS.isFile(node.mode)){throw new FS.ErrnoError(28)}var errCode=FS.nodePermissions(node,\"w\");if(errCode){throw new FS.ErrnoError(errCode)}node.node_ops.setattr(node,{size:len,timestamp:Date.now()})},ftruncate(fd,len){var stream=FS.getStreamChecked(fd);if((stream.flags&2097155)===0){throw new FS.ErrnoError(28)}FS.truncate(stream.node,len)},utime(path,atime,mtime){var lookup=FS.lookupPath(path,{follow:true});var node=lookup.node;node.node_ops.setattr(node,{timestamp:Math.max(atime,mtime)})},open(path,flags,mode){if(path===\"\"){throw new FS.ErrnoError(44)}flags=typeof flags==\"string\"?FS_modeStringToFlags(flags):flags;mode=typeof mode==\"undefined\"?438:mode;if(flags&64){mode=mode&4095|32768}else{mode=0}var node;if(typeof path==\"object\"){node=path}else{path=PATH.normalize(path);try{var lookup=FS.lookupPath(path,{follow:!(flags&131072)});node=lookup.node}catch(e){}}var created=false;if(flags&64){if(node){if(flags&128){throw new FS.ErrnoError(20)}}else{node=FS.mknod(path,mode,0);created=true}}if(!node){throw new FS.ErrnoError(44)}if(FS.isChrdev(node.mode)){flags&=~512}if(flags&65536&&!FS.isDir(node.mode)){throw new FS.ErrnoError(54)}if(!created){var errCode=FS.mayOpen(node,flags);if(errCode){throw new FS.ErrnoError(errCode)}}if(flags&512&&!created){FS.truncate(node,0)}flags&=~(128|512|131072);var stream=FS.createStream({node:node,path:FS.getPath(node),flags:flags,seekable:true,position:0,stream_ops:node.stream_ops,ungotten:[],error:false});if(stream.stream_ops.open){stream.stream_ops.open(stream)}if(Module[\"logReadFiles\"]&&!(flags&1)){if(!FS.readFiles)FS.readFiles={};if(!(path in FS.readFiles)){FS.readFiles[path]=1}}return stream},close(stream){if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if(stream.getdents)stream.getdents=null;try{if(stream.stream_ops.close){stream.stream_ops.close(stream)}}catch(e){throw e}finally{FS.closeStream(stream.fd)}stream.fd=null},isClosed(stream){return stream.fd===null},llseek(stream,offset,whence){if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if(!stream.seekable||!stream.stream_ops.llseek){throw new FS.ErrnoError(70)}if(whence!=0&&whence!=1&&whence!=2){throw new FS.ErrnoError(28)}stream.position=stream.stream_ops.llseek(stream,offset,whence);stream.ungotten=[];return stream.position},read(stream,buffer,offset,length,position){if(length<0||position<0){throw new FS.ErrnoError(28)}if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if((stream.flags&2097155)===1){throw new FS.ErrnoError(8)}if(FS.isDir(stream.node.mode)){throw new FS.ErrnoError(31)}if(!stream.stream_ops.read){throw new FS.ErrnoError(28)}var seeking=typeof position!=\"undefined\";if(!seeking){position=stream.position}else if(!stream.seekable){throw new FS.ErrnoError(70)}var bytesRead=stream.stream_ops.read(stream,buffer,offset,length,position);if(!seeking)stream.position+=bytesRead;return bytesRead},write(stream,buffer,offset,length,position,canOwn){if(length<0||position<0){throw new FS.ErrnoError(28)}if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if((stream.flags&2097155)===0){throw new FS.ErrnoError(8)}if(FS.isDir(stream.node.mode)){throw new FS.ErrnoError(31)}if(!stream.stream_ops.write){throw new FS.ErrnoError(28)}if(stream.seekable&&stream.flags&1024){FS.llseek(stream,0,2)}var seeking=typeof position!=\"undefined\";if(!seeking){position=stream.position}else if(!stream.seekable){throw new FS.ErrnoError(70)}var bytesWritten=stream.stream_ops.write(stream,buffer,offset,length,position,canOwn);if(!seeking)stream.position+=bytesWritten;return bytesWritten},allocate(stream,offset,length){if(FS.isClosed(stream)){throw new FS.ErrnoError(8)}if(offset<0||length<=0){throw new FS.ErrnoError(28)}if((stream.flags&2097155)===0){throw new FS.ErrnoError(8)}if(!FS.isFile(stream.node.mode)&&!FS.isDir(stream.node.mode)){throw new FS.ErrnoError(43)}if(!stream.stream_ops.allocate){throw new FS.ErrnoError(138)}stream.stream_ops.allocate(stream,offset,length)},mmap(stream,length,position,prot,flags){if((prot&2)!==0&&(flags&2)===0&&(stream.flags&2097155)!==2){throw new FS.ErrnoError(2)}if((stream.flags&2097155)===1){throw new FS.ErrnoError(2)}if(!stream.stream_ops.mmap){throw new FS.ErrnoError(43)}return stream.stream_ops.mmap(stream,length,position,prot,flags)},msync(stream,buffer,offset,length,mmapFlags){if(!stream.stream_ops.msync){return 0}return stream.stream_ops.msync(stream,buffer,offset,length,mmapFlags)},munmap:stream=>0,ioctl(stream,cmd,arg){if(!stream.stream_ops.ioctl){throw new FS.ErrnoError(59)}return stream.stream_ops.ioctl(stream,cmd,arg)},readFile(path,opts={}){opts.flags=opts.flags||0;opts.encoding=opts.encoding||\"binary\";if(opts.encoding!==\"utf8\"&&opts.encoding!==\"binary\"){throw new Error(`Invalid encoding type \"${opts.encoding}\"`)}var ret;var stream=FS.open(path,opts.flags);var stat=FS.stat(path);var length=stat.size;var buf=new Uint8Array(length);FS.read(stream,buf,0,length,0);if(opts.encoding===\"utf8\"){ret=UTF8ArrayToString(buf,0)}else if(opts.encoding===\"binary\"){ret=buf}FS.close(stream);return ret},writeFile(path,data,opts={}){opts.flags=opts.flags||577;var stream=FS.open(path,opts.flags,opts.mode);if(typeof data==\"string\"){var buf=new Uint8Array(lengthBytesUTF8(data)+1);var actualNumBytes=stringToUTF8Array(data,buf,0,buf.length);FS.write(stream,buf,0,actualNumBytes,undefined,opts.canOwn)}else if(ArrayBuffer.isView(data)){FS.write(stream,data,0,data.byteLength,undefined,opts.canOwn)}else{throw new Error(\"Unsupported data type\")}FS.close(stream)},cwd:()=>FS.currentPath,chdir(path){var lookup=FS.lookupPath(path,{follow:true});if(lookup.node===null){throw new FS.ErrnoError(44)}if(!FS.isDir(lookup.node.mode)){throw new FS.ErrnoError(54)}var errCode=FS.nodePermissions(lookup.node,\"x\");if(errCode){throw new FS.ErrnoError(errCode)}FS.currentPath=lookup.path},createDefaultDirectories(){FS.mkdir(\"/tmp\");FS.mkdir(\"/home\");FS.mkdir(\"/home/web_user\")},createDefaultDevices(){FS.mkdir(\"/dev\");FS.registerDevice(FS.makedev(1,3),{read:()=>0,write:(stream,buffer,offset,length,pos)=>length});FS.mkdev(\"/dev/null\",FS.makedev(1,3));TTY.register(FS.makedev(5,0),TTY.default_tty_ops);TTY.register(FS.makedev(6,0),TTY.default_tty1_ops);FS.mkdev(\"/dev/tty\",FS.makedev(5,0));FS.mkdev(\"/dev/tty1\",FS.makedev(6,0));var randomBuffer=new Uint8Array(1024),randomLeft=0;var randomByte=()=>{if(randomLeft===0){randomLeft=randomFill(randomBuffer).byteLength}return randomBuffer[--randomLeft]};FS.createDevice(\"/dev\",\"random\",randomByte);FS.createDevice(\"/dev\",\"urandom\",randomByte);FS.mkdir(\"/dev/shm\");FS.mkdir(\"/dev/shm/tmp\")},createSpecialDirectories(){FS.mkdir(\"/proc\");var proc_self=FS.mkdir(\"/proc/self\");FS.mkdir(\"/proc/self/fd\");FS.mount({mount(){var node=FS.createNode(proc_self,\"fd\",16384|511,73);node.node_ops={lookup(parent,name){var fd=+name;var stream=FS.getStreamChecked(fd);var ret={parent:null,mount:{mountpoint:\"fake\"},node_ops:{readlink:()=>stream.path}};ret.parent=ret;return ret}};return node}},{},\"/proc/self/fd\")},createStandardStreams(){if(Module[\"stdin\"]){FS.createDevice(\"/dev\",\"stdin\",Module[\"stdin\"])}else{FS.symlink(\"/dev/tty\",\"/dev/stdin\")}if(Module[\"stdout\"]){FS.createDevice(\"/dev\",\"stdout\",null,Module[\"stdout\"])}else{FS.symlink(\"/dev/tty\",\"/dev/stdout\")}if(Module[\"stderr\"]){FS.createDevice(\"/dev\",\"stderr\",null,Module[\"stderr\"])}else{FS.symlink(\"/dev/tty1\",\"/dev/stderr\")}var stdin=FS.open(\"/dev/stdin\",0);var stdout=FS.open(\"/dev/stdout\",1);var stderr=FS.open(\"/dev/stderr\",1)},ensureErrnoError(){if(FS.ErrnoError)return;FS.ErrnoError=function ErrnoError(errno,node){this.name=\"ErrnoError\";this.node=node;this.setErrno=function(errno){this.errno=errno};this.setErrno(errno);this.message=\"FS error\"};FS.ErrnoError.prototype=new Error;FS.ErrnoError.prototype.constructor=FS.ErrnoError;[44].forEach(code=>{FS.genericErrors[code]=new FS.ErrnoError(code);FS.genericErrors[code].stack=\"<generic error, no stack>\"})},staticInit(){FS.ensureErrnoError();FS.nameTable=new Array(4096);FS.mount(MEMFS,{},\"/\");FS.createDefaultDirectories();FS.createDefaultDevices();FS.createSpecialDirectories();FS.filesystems={\"MEMFS\":MEMFS,\"IDBFS\":IDBFS}},init(input,output,error){FS.init.initialized=true;FS.ensureErrnoError();Module[\"stdin\"]=input||Module[\"stdin\"];Module[\"stdout\"]=output||Module[\"stdout\"];Module[\"stderr\"]=error||Module[\"stderr\"];FS.createStandardStreams()},quit(){FS.init.initialized=false;for(var i=0;i<FS.streams.length;i++){var stream=FS.streams[i];if(!stream){continue}FS.close(stream)}},findObject(path,dontResolveLastLink){var ret=FS.analyzePath(path,dontResolveLastLink);if(!ret.exists){return null}return ret.object},analyzePath(path,dontResolveLastLink){try{var lookup=FS.lookupPath(path,{follow:!dontResolveLastLink});path=lookup.path}catch(e){}var ret={isRoot:false,exists:false,error:0,name:null,path:null,object:null,parentExists:false,parentPath:null,parentObject:null};try{var lookup=FS.lookupPath(path,{parent:true});ret.parentExists=true;ret.parentPath=lookup.path;ret.parentObject=lookup.node;ret.name=PATH.basename(path);lookup=FS.lookupPath(path,{follow:!dontResolveLastLink});ret.exists=true;ret.path=lookup.path;ret.object=lookup.node;ret.name=lookup.node.name;ret.isRoot=lookup.path===\"/\"}catch(e){ret.error=e.errno}return ret},createPath(parent,path,canRead,canWrite){parent=typeof parent==\"string\"?parent:FS.getPath(parent);var parts=path.split(\"/\").reverse();while(parts.length){var part=parts.pop();if(!part)continue;var current=PATH.join2(parent,part);try{FS.mkdir(current)}catch(e){}parent=current}return current},createFile(parent,name,properties,canRead,canWrite){var path=PATH.join2(typeof parent==\"string\"?parent:FS.getPath(parent),name);var mode=FS_getMode(canRead,canWrite);return FS.create(path,mode)},createDataFile(parent,name,data,canRead,canWrite,canOwn){var path=name;if(parent){parent=typeof parent==\"string\"?parent:FS.getPath(parent);path=name?PATH.join2(parent,name):parent}var mode=FS_getMode(canRead,canWrite);var node=FS.create(path,mode);if(data){if(typeof data==\"string\"){var arr=new Array(data.length);for(var i=0,len=data.length;i<len;++i)arr[i]=data.charCodeAt(i);data=arr}FS.chmod(node,mode|146);var stream=FS.open(node,577);FS.write(stream,data,0,data.length,0,canOwn);FS.close(stream);FS.chmod(node,mode)}return node},createDevice(parent,name,input,output){var path=PATH.join2(typeof parent==\"string\"?parent:FS.getPath(parent),name);var mode=FS_getMode(!!input,!!output);if(!FS.createDevice.major)FS.createDevice.major=64;var dev=FS.makedev(FS.createDevice.major++,0);FS.registerDevice(dev,{open(stream){stream.seekable=false},close(stream){if(output&&output.buffer&&output.buffer.length){output(10)}},read(stream,buffer,offset,length,pos){var bytesRead=0;for(var i=0;i<length;i++){var result;try{result=input()}catch(e){throw new FS.ErrnoError(29)}if(result===undefined&&bytesRead===0){throw new FS.ErrnoError(6)}if(result===null||result===undefined)break;bytesRead++;buffer[offset+i]=result}if(bytesRead){stream.node.timestamp=Date.now()}return bytesRead},write(stream,buffer,offset,length,pos){for(var i=0;i<length;i++){try{output(buffer[offset+i])}catch(e){throw new FS.ErrnoError(29)}}if(length){stream.node.timestamp=Date.now()}return i}});return FS.mkdev(path,mode,dev)},forceLoadFile(obj){if(obj.isDevice||obj.isFolder||obj.link||obj.contents)return true;if(typeof XMLHttpRequest!=\"undefined\"){throw new Error(\"Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.\")}else if(read_){try{obj.contents=intArrayFromString(read_(obj.url),true);obj.usedBytes=obj.contents.length}catch(e){throw new FS.ErrnoError(29)}}else{throw new Error(\"Cannot load without read() or XMLHttpRequest.\")}},createLazyFile(parent,name,url,canRead,canWrite){function LazyUint8Array(){this.lengthKnown=false;this.chunks=[]}LazyUint8Array.prototype.get=function LazyUint8Array_get(idx){if(idx>this.length-1||idx<0){return undefined}var chunkOffset=idx%this.chunkSize;var chunkNum=idx/this.chunkSize|0;return this.getter(chunkNum)[chunkOffset]};LazyUint8Array.prototype.setDataGetter=function LazyUint8Array_setDataGetter(getter){this.getter=getter};LazyUint8Array.prototype.cacheLength=function LazyUint8Array_cacheLength(){var xhr=new XMLHttpRequest;xhr.open(\"HEAD\",url,false);xhr.send(null);if(!(xhr.status>=200&&xhr.status<300||xhr.status===304))throw new Error(\"Couldn't load \"+url+\". Status: \"+xhr.status);var datalength=Number(xhr.getResponseHeader(\"Content-length\"));var header;var hasByteServing=(header=xhr.getResponseHeader(\"Accept-Ranges\"))&&header===\"bytes\";var usesGzip=(header=xhr.getResponseHeader(\"Content-Encoding\"))&&header===\"gzip\";var chunkSize=1024*1024;if(!hasByteServing)chunkSize=datalength;var doXHR=(from,to)=>{if(from>to)throw new Error(\"invalid range (\"+from+\", \"+to+\") or no bytes requested!\");if(to>datalength-1)throw new Error(\"only \"+datalength+\" bytes available! programmer error!\");var xhr=new XMLHttpRequest;xhr.open(\"GET\",url,false);if(datalength!==chunkSize)xhr.setRequestHeader(\"Range\",\"bytes=\"+from+\"-\"+to);xhr.responseType=\"arraybuffer\";if(xhr.overrideMimeType){xhr.overrideMimeType(\"text/plain; charset=x-user-defined\")}xhr.send(null);if(!(xhr.status>=200&&xhr.status<300||xhr.status===304))throw new Error(\"Couldn't load \"+url+\". Status: \"+xhr.status);if(xhr.response!==undefined){return new Uint8Array(xhr.response||[])}return intArrayFromString(xhr.responseText||\"\",true)};var lazyArray=this;lazyArray.setDataGetter(chunkNum=>{var start=chunkNum*chunkSize;var end=(chunkNum+1)*chunkSize-1;end=Math.min(end,datalength-1);if(typeof lazyArray.chunks[chunkNum]==\"undefined\"){lazyArray.chunks[chunkNum]=doXHR(start,end)}if(typeof lazyArray.chunks[chunkNum]==\"undefined\")throw new Error(\"doXHR failed!\");return lazyArray.chunks[chunkNum]});if(usesGzip||!datalength){chunkSize=datalength=1;datalength=this.getter(0).length;chunkSize=datalength;out(\"LazyFiles on gzip forces download of the whole file when length is accessed\")}this._length=datalength;this._chunkSize=chunkSize;this.lengthKnown=true};if(typeof XMLHttpRequest!=\"undefined\"){if(!ENVIRONMENT_IS_WORKER)throw\"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc\";var lazyArray=new LazyUint8Array;Object.defineProperties(lazyArray,{length:{get:function(){if(!this.lengthKnown){this.cacheLength()}return this._length}},chunkSize:{get:function(){if(!this.lengthKnown){this.cacheLength()}return this._chunkSize}}});var properties={isDevice:false,contents:lazyArray}}else{var properties={isDevice:false,url:url}}var node=FS.createFile(parent,name,properties,canRead,canWrite);if(properties.contents){node.contents=properties.contents}else if(properties.url){node.contents=null;node.url=properties.url}Object.defineProperties(node,{usedBytes:{get:function(){return this.contents.length}}});var stream_ops={};var keys=Object.keys(node.stream_ops);keys.forEach(key=>{var fn=node.stream_ops[key];stream_ops[key]=function forceLoadLazyFile(){FS.forceLoadFile(node);return fn.apply(null,arguments)}});function writeChunks(stream,buffer,offset,length,position){var contents=stream.node.contents;if(position>=contents.length)return 0;var size=Math.min(contents.length-position,length);if(contents.slice){for(var i=0;i<size;i++){buffer[offset+i]=contents[position+i]}}else{for(var i=0;i<size;i++){buffer[offset+i]=contents.get(position+i)}}return size}stream_ops.read=(stream,buffer,offset,length,position)=>{FS.forceLoadFile(node);return writeChunks(stream,buffer,offset,length,position)};stream_ops.mmap=(stream,length,position,prot,flags)=>{FS.forceLoadFile(node);var ptr=mmapAlloc(length);if(!ptr){throw new FS.ErrnoError(48)}writeChunks(stream,HEAP8,ptr,length,position);return{ptr:ptr,allocated:true}};node.stream_ops=stream_ops;return node}};var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt(dirfd,path,allowEmpty){if(PATH.isAbs(path)){return path}var dir;if(dirfd===-100){dir=FS.cwd()}else{var dirstream=SYSCALLS.getStreamFromFD(dirfd);dir=dirstream.path}if(path.length==0){if(!allowEmpty){throw new FS.ErrnoError(44)}return dir}return PATH.join2(dir,path)},doStat(func,path,buf){try{var stat=func(path)}catch(e){if(e&&e.node&&PATH.normalize(path)!==PATH.normalize(FS.getPath(e.node))){return-54}throw e}HEAP32[buf>>2]=stat.dev;HEAP32[buf+4>>2]=stat.mode;HEAPU32[buf+8>>2]=stat.nlink;HEAP32[buf+12>>2]=stat.uid;HEAP32[buf+16>>2]=stat.gid;HEAP32[buf+20>>2]=stat.rdev;HEAP64[buf+24>>3]=BigInt(stat.size);HEAP32[buf+32>>2]=4096;HEAP32[buf+36>>2]=stat.blocks;var atime=stat.atime.getTime();var mtime=stat.mtime.getTime();var ctime=stat.ctime.getTime();HEAP64[buf+40>>3]=BigInt(Math.floor(atime/1e3));HEAPU32[buf+48>>2]=atime%1e3*1e3;HEAP64[buf+56>>3]=BigInt(Math.floor(mtime/1e3));HEAPU32[buf+64>>2]=mtime%1e3*1e3;HEAP64[buf+72>>3]=BigInt(Math.floor(ctime/1e3));HEAPU32[buf+80>>2]=ctime%1e3*1e3;HEAP64[buf+88>>3]=BigInt(stat.ino);return 0},doMsync(addr,stream,len,flags,offset){if(!FS.isFile(stream.node.mode)){throw new FS.ErrnoError(43)}if(flags&2){return 0}var buffer=HEAPU8.slice(addr,addr+len);FS.msync(stream,buffer,offset,len,flags)},varargs:undefined,get(){var ret=HEAP32[SYSCALLS.varargs>>2];SYSCALLS.varargs+=4;return ret},getp(){return SYSCALLS.get()},getStr(ptr){var ret=UTF8ToString(ptr);return ret},getStreamFromFD(fd){var stream=FS.getStreamChecked(fd);return stream}};function ___syscall_fcntl64(fd,cmd,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(fd);switch(cmd){case 0:{var arg=SYSCALLS.get();if(arg<0){return-28}while(FS.streams[arg]){arg++}var newStream;newStream=FS.createStream(stream,arg);return newStream.fd}case 1:case 2:return 0;case 3:return stream.flags;case 4:{var arg=SYSCALLS.get();stream.flags|=arg;return 0}case 5:{var arg=SYSCALLS.getp();var offset=0;HEAP16[arg+offset>>1]=2;return 0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:setErrNo(28);return-1;default:{return-28}}}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return-e.errno}}function ___syscall_ioctl(fd,op,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(fd);switch(op){case 21509:{if(!stream.tty)return-59;return 0}case 21505:{if(!stream.tty)return-59;if(stream.tty.ops.ioctl_tcgets){var termios=stream.tty.ops.ioctl_tcgets(stream);var argp=SYSCALLS.getp();HEAP32[argp>>2]=termios.c_iflag||0;HEAP32[argp+4>>2]=termios.c_oflag||0;HEAP32[argp+8>>2]=termios.c_cflag||0;HEAP32[argp+12>>2]=termios.c_lflag||0;for(var i=0;i<32;i++){HEAP8[argp+i+17>>0]=termios.c_cc[i]||0}return 0}return 0}case 21510:case 21511:case 21512:{if(!stream.tty)return-59;return 0}case 21506:case 21507:case 21508:{if(!stream.tty)return-59;if(stream.tty.ops.ioctl_tcsets){var argp=SYSCALLS.getp();var c_iflag=HEAP32[argp>>2];var c_oflag=HEAP32[argp+4>>2];var c_cflag=HEAP32[argp+8>>2];var c_lflag=HEAP32[argp+12>>2];var c_cc=[];for(var i=0;i<32;i++){c_cc.push(HEAP8[argp+i+17>>0])}return stream.tty.ops.ioctl_tcsets(stream.tty,op,{c_iflag:c_iflag,c_oflag:c_oflag,c_cflag:c_cflag,c_lflag:c_lflag,c_cc:c_cc})}return 0}case 21519:{if(!stream.tty)return-59;var argp=SYSCALLS.getp();HEAP32[argp>>2]=0;return 0}case 21520:{if(!stream.tty)return-59;return-28}case 21531:{var argp=SYSCALLS.getp();return FS.ioctl(stream,op,argp)}case 21523:{if(!stream.tty)return-59;if(stream.tty.ops.ioctl_tiocgwinsz){var winsize=stream.tty.ops.ioctl_tiocgwinsz(stream.tty);var argp=SYSCALLS.getp();HEAP16[argp>>1]=winsize[0];HEAP16[argp+2>>1]=winsize[1]}return 0}case 21524:{if(!stream.tty)return-59;return 0}case 21515:{if(!stream.tty)return-59;return 0}default:return-28}}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return-e.errno}}function ___syscall_openat(dirfd,path,flags,varargs){SYSCALLS.varargs=varargs;try{path=SYSCALLS.getStr(path);path=SYSCALLS.calculateAt(dirfd,path);var mode=varargs?SYSCALLS.get():0;return FS.open(path,flags,mode).fd}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return-e.errno}}function ___syscall_stat64(path,buf){try{path=SYSCALLS.getStr(path);return SYSCALLS.doStat(FS.stat,path,buf)}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return-e.errno}}var MAX_INT53=9007199254740992;var MIN_INT53=-9007199254740992;var bigintToI53Checked=num=>num<MIN_INT53||num>MAX_INT53?NaN:Number(num);function __munmap_js(addr,len,prot,flags,fd,offset){offset=bigintToI53Checked(offset);try{if(isNaN(offset))return 61;var stream=SYSCALLS.getStreamFromFD(fd);if(prot&2){SYSCALLS.doMsync(addr,stream,len,flags,offset)}FS.munmap(stream)}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return-e.errno}}var _abort=()=>{abort(\"\")};var readEmAsmArgsArray=[];var readEmAsmArgs=(sigPtr,buf)=>{readEmAsmArgsArray.length=0;var ch;while(ch=HEAPU8[sigPtr++]){buf+=ch!=105&&buf%8?4:0;readEmAsmArgsArray.push(ch==106?HEAP64[buf>>3]:ch==105?HEAP32[buf>>2]:HEAPF64[buf>>3]);buf+=ch==105?4:8}return readEmAsmArgsArray};var runEmAsmFunction=(code,sigPtr,argbuf)=>{var args=readEmAsmArgs(sigPtr,argbuf);return ASM_CONSTS[code].apply(null,args)};var _emscripten_asm_const_int=(code,sigPtr,argbuf)=>runEmAsmFunction(code,sigPtr,argbuf);var _emscripten_memcpy_big=(dest,src,num)=>HEAPU8.copyWithin(dest,src,src+num);var getHeapMax=()=>2147483648;var growMemory=size=>{var b=wasmMemory.buffer;var pages=(size-b.byteLength+65535)/65536;try{wasmMemory.grow(pages);updateMemoryViews();return 1}catch(e){}};var _emscripten_resize_heap=requestedSize=>{var oldSize=HEAPU8.length;requestedSize>>>=0;var maxHeapSize=getHeapMax();if(requestedSize>maxHeapSize){return false}var alignUp=(x,multiple)=>x+(multiple-x%multiple)%multiple;for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296);var newSize=Math.min(maxHeapSize,alignUp(Math.max(requestedSize,overGrownHeapSize),65536));var replacement=growMemory(newSize);if(replacement){return true}}return false};var ENV={};var getExecutableName=()=>thisProgram||\"./this.program\";var getEnvStrings=()=>{if(!getEnvStrings.strings){var lang=(typeof navigator==\"object\"&&navigator.languages&&navigator.languages[0]||\"C\").replace(\"-\",\"_\")+\".UTF-8\";var env={\"USER\":\"web_user\",\"LOGNAME\":\"web_user\",\"PATH\":\"/\",\"PWD\":\"/\",\"HOME\":\"/home/web_user\",\"LANG\":lang,\"_\":getExecutableName()};for(var x in ENV){if(ENV[x]===undefined)delete env[x];else env[x]=ENV[x]}var strings=[];for(var x in env){strings.push(`${x}=${env[x]}`)}getEnvStrings.strings=strings}return getEnvStrings.strings};var stringToAscii=(str,buffer)=>{for(var i=0;i<str.length;++i){HEAP8[buffer++>>0]=str.charCodeAt(i)}HEAP8[buffer>>0]=0};var _environ_get=(__environ,environ_buf)=>{var bufSize=0;getEnvStrings().forEach((string,i)=>{var ptr=environ_buf+bufSize;HEAPU32[__environ+i*4>>2]=ptr;stringToAscii(string,ptr);bufSize+=string.length+1});return 0};var _environ_sizes_get=(penviron_count,penviron_buf_size)=>{var strings=getEnvStrings();HEAPU32[penviron_count>>2]=strings.length;var bufSize=0;strings.forEach(string=>bufSize+=string.length+1);HEAPU32[penviron_buf_size>>2]=bufSize;return 0};function _fd_close(fd){try{var stream=SYSCALLS.getStreamFromFD(fd);FS.close(stream);return 0}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return e.errno}}var doReadv=(stream,iov,iovcnt,offset)=>{var ret=0;for(var i=0;i<iovcnt;i++){var ptr=HEAPU32[iov>>2];var len=HEAPU32[iov+4>>2];iov+=8;var curr=FS.read(stream,HEAP8,ptr,len,offset);if(curr<0)return-1;ret+=curr;if(curr<len)break;if(typeof offset!==\"undefined\"){offset+=curr}}return ret};function _fd_read(fd,iov,iovcnt,pnum){try{var stream=SYSCALLS.getStreamFromFD(fd);var num=doReadv(stream,iov,iovcnt);HEAPU32[pnum>>2]=num;return 0}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return e.errno}}function _fd_seek(fd,offset,whence,newOffset){offset=bigintToI53Checked(offset);try{if(isNaN(offset))return 61;var stream=SYSCALLS.getStreamFromFD(fd);FS.llseek(stream,offset,whence);HEAP64[newOffset>>3]=BigInt(stream.position);if(stream.getdents&&offset===0&&whence===0)stream.getdents=null;return 0}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return e.errno}}var doWritev=(stream,iov,iovcnt,offset)=>{var ret=0;for(var i=0;i<iovcnt;i++){var ptr=HEAPU32[iov>>2];var len=HEAPU32[iov+4>>2];iov+=8;var curr=FS.write(stream,HEAP8,ptr,len,offset);if(curr<0)return-1;ret+=curr;if(typeof offset!==\"undefined\"){offset+=curr}}return ret};function _fd_write(fd,iov,iovcnt,pnum){try{var stream=SYSCALLS.getStreamFromFD(fd);var num=doWritev(stream,iov,iovcnt);HEAPU32[pnum>>2]=num;return 0}catch(e){if(typeof FS==\"undefined\"||!(e.name===\"ErrnoError\"))throw e;return e.errno}}var ALLOC_NORMAL=0;var getCFunc=ident=>{var func=Module[\"_\"+ident];return func};var writeArrayToMemory=(array,buffer)=>{HEAP8.set(array,buffer)};var stringToUTF8=(str,outPtr,maxBytesToWrite)=>stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite);var stringToUTF8OnStack=str=>{var size=lengthBytesUTF8(str)+1;var ret=stackAlloc(size);stringToUTF8(str,ret,size);return ret};var ccall=(ident,returnType,argTypes,args,opts)=>{var toC={\"string\":str=>{var ret=0;if(str!==null&&str!==undefined&&str!==0){ret=stringToUTF8OnStack(str)}return ret},\"array\":arr=>{var ret=stackAlloc(arr.length);writeArrayToMemory(arr,ret);return ret}};function convertReturnValue(ret){if(returnType===\"string\"){return UTF8ToString(ret)}if(returnType===\"boolean\")return Boolean(ret);return ret}var func=getCFunc(ident);var cArgs=[];var stack=0;if(args){for(var i=0;i<args.length;i++){var converter=toC[argTypes[i]];if(converter){if(stack===0)stack=stackSave();cArgs[i]=converter(args[i])}else{cArgs[i]=args[i]}}}var ret=func.apply(null,cArgs);function onDone(ret){if(stack!==0)stackRestore(stack);return convertReturnValue(ret)}ret=onDone(ret);return ret};var FSNode=function(parent,name,mode,rdev){if(!parent){parent=this}this.parent=parent;this.mount=parent.mount;this.mounted=null;this.id=FS.nextInode++;this.name=name;this.mode=mode;this.node_ops={};this.stream_ops={};this.rdev=rdev};var readMode=292|73;var writeMode=146;Object.defineProperties(FSNode.prototype,{read:{get:function(){return(this.mode&readMode)===readMode},set:function(val){val?this.mode|=readMode:this.mode&=~readMode}},write:{get:function(){return(this.mode&writeMode)===writeMode},set:function(val){val?this.mode|=writeMode:this.mode&=~writeMode}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}});FS.FSNode=FSNode;FS.createPreloadedFile=FS_createPreloadedFile;FS.staticInit();var wasmImports={a:___assert_fail,b:___cxa_throw,c:___syscall_fcntl64,h:___syscall_ioctl,i:___syscall_openat,o:___syscall_stat64,p:__munmap_js,e:_abort,k:_emscripten_asm_const_int,j:_emscripten_memcpy_big,n:_emscripten_resize_heap,l:_environ_get,m:_environ_sizes_get,d:_fd_close,g:_fd_read,q:_fd_seek,f:_fd_write};var wasmExports=createWasm();var ___wasm_call_ctors=()=>(___wasm_call_ctors=wasmExports[\"s\"])();var _cqt_init=Module[\"_cqt_init\"]=(a0,a1,a2,a3,a4,a5)=>(_cqt_init=Module[\"_cqt_init\"]=wasmExports[\"t\"])(a0,a1,a2,a3,a4,a5);var _cqt_calc=Module[\"_cqt_calc\"]=(a0,a1)=>(_cqt_calc=Module[\"_cqt_calc\"]=wasmExports[\"u\"])(a0,a1);var _cqt_render_line=Module[\"_cqt_render_line\"]=a0=>(_cqt_render_line=Module[\"_cqt_render_line\"]=wasmExports[\"v\"])(a0);var _cqt_bin_to_freq=Module[\"_cqt_bin_to_freq\"]=a0=>(_cqt_bin_to_freq=Module[\"_cqt_bin_to_freq\"]=wasmExports[\"w\"])(a0);var _fluid_synth_noteon=Module[\"_fluid_synth_noteon\"]=(a0,a1,a2,a3)=>(_fluid_synth_noteon=Module[\"_fluid_synth_noteon\"]=wasmExports[\"x\"])(a0,a1,a2,a3);var _fluid_synth_noteoff=Module[\"_fluid_synth_noteoff\"]=(a0,a1,a2)=>(_fluid_synth_noteoff=Module[\"_fluid_synth_noteoff\"]=wasmExports[\"y\"])(a0,a1,a2);var _fluid_synth_write_float=Module[\"_fluid_synth_write_float\"]=(a0,a1,a2,a3,a4,a5,a6,a7)=>(_fluid_synth_write_float=Module[\"_fluid_synth_write_float\"]=wasmExports[\"z\"])(a0,a1,a2,a3,a4,a5,a6,a7);var _fluid_synth_all_notes_off=Module[\"_fluid_synth_all_notes_off\"]=(a0,a1)=>(_fluid_synth_all_notes_off=Module[\"_fluid_synth_all_notes_off\"]=wasmExports[\"A\"])(a0,a1);var _adl_rt_noteOn=Module[\"_adl_rt_noteOn\"]=(a0,a1,a2,a3)=>(_adl_rt_noteOn=Module[\"_adl_rt_noteOn\"]=wasmExports[\"B\"])(a0,a1,a2,a3);var _adl_rt_noteOff=Module[\"_adl_rt_noteOff\"]=(a0,a1,a2)=>(_adl_rt_noteOff=Module[\"_adl_rt_noteOff\"]=wasmExports[\"C\"])(a0,a1,a2);var _adl_rt_patchChange=Module[\"_adl_rt_patchChange\"]=(a0,a1,a2)=>(_adl_rt_patchChange=Module[\"_adl_rt_patchChange\"]=wasmExports[\"D\"])(a0,a1,a2);var _adl_rt_pitchBend=Module[\"_adl_rt_pitchBend\"]=(a0,a1,a2)=>(_adl_rt_pitchBend=Module[\"_adl_rt_pitchBend\"]=wasmExports[\"E\"])(a0,a1,a2);var _adl_rt_controllerChange=Module[\"_adl_rt_controllerChange\"]=(a0,a1,a2,a3)=>(_adl_rt_controllerChange=Module[\"_adl_rt_controllerChange\"]=wasmExports[\"F\"])(a0,a1,a2,a3);var _adl_rt_channelAfterTouch=Module[\"_adl_rt_channelAfterTouch\"]=(a0,a1,a2)=>(_adl_rt_channelAfterTouch=Module[\"_adl_rt_channelAfterTouch\"]=wasmExports[\"G\"])(a0,a1,a2);var _adl_panic=Module[\"_adl_panic\"]=a0=>(_adl_panic=Module[\"_adl_panic\"]=wasmExports[\"H\"])(a0);var _adl_rt_resetState=Module[\"_adl_rt_resetState\"]=a0=>(_adl_rt_resetState=Module[\"_adl_rt_resetState\"]=wasmExports[\"I\"])(a0);var _tp_note_on=Module[\"_tp_note_on\"]=(a0,a1,a2)=>(_tp_note_on=Module[\"_tp_note_on\"]=wasmExports[\"J\"])(a0,a1,a2);var _tp_note_off=Module[\"_tp_note_off\"]=(a0,a1)=>(_tp_note_off=Module[\"_tp_note_off\"]=wasmExports[\"K\"])(a0,a1);var _tp_program_change=Module[\"_tp_program_change\"]=(a0,a1)=>(_tp_program_change=Module[\"_tp_program_change\"]=wasmExports[\"L\"])(a0,a1);var _tp_pitch_bend=Module[\"_tp_pitch_bend\"]=(a0,a1)=>(_tp_pitch_bend=Module[\"_tp_pitch_bend\"]=wasmExports[\"M\"])(a0,a1);var _tp_control_change=Module[\"_tp_control_change\"]=(a0,a1,a2)=>(_tp_control_change=Module[\"_tp_control_change\"]=wasmExports[\"N\"])(a0,a1,a2);var _tp_channel_pressure=Module[\"_tp_channel_pressure\"]=(a0,a1)=>(_tp_channel_pressure=Module[\"_tp_channel_pressure\"]=wasmExports[\"O\"])(a0,a1);var _tp_render=Module[\"_tp_render\"]=(a0,a1)=>(_tp_render=Module[\"_tp_render\"]=wasmExports[\"P\"])(a0,a1);var _tp_panic=Module[\"_tp_panic\"]=()=>(_tp_panic=Module[\"_tp_panic\"]=wasmExports[\"Q\"])();var _tp_panic_channel=Module[\"_tp_panic_channel\"]=a0=>(_tp_panic_channel=Module[\"_tp_panic_channel\"]=wasmExports[\"R\"])(a0);var _tp_reset=Module[\"_tp_reset\"]=()=>(_tp_reset=Module[\"_tp_reset\"]=wasmExports[\"S\"])();var _tp_init=Module[\"_tp_init\"]=a0=>(_tp_init=Module[\"_tp_init\"]=wasmExports[\"T\"])(a0);var _new_fluid_settings=Module[\"_new_fluid_settings\"]=()=>(_new_fluid_settings=Module[\"_new_fluid_settings\"]=wasmExports[\"U\"])();var _fluid_settings_setstr=Module[\"_fluid_settings_setstr\"]=(a0,a1,a2)=>(_fluid_settings_setstr=Module[\"_fluid_settings_setstr\"]=wasmExports[\"V\"])(a0,a1,a2);var _fluid_settings_setint=Module[\"_fluid_settings_setint\"]=(a0,a1,a2)=>(_fluid_settings_setint=Module[\"_fluid_settings_setint\"]=wasmExports[\"W\"])(a0,a1,a2);var _fluid_settings_setnum=Module[\"_fluid_settings_setnum\"]=(a0,a1,a2)=>(_fluid_settings_setnum=Module[\"_fluid_settings_setnum\"]=wasmExports[\"X\"])(a0,a1,a2);var _new_fluid_synth=Module[\"_new_fluid_synth\"]=a0=>(_new_fluid_synth=Module[\"_new_fluid_synth\"]=wasmExports[\"Y\"])(a0);var _fluid_synth_set_interp_method=Module[\"_fluid_synth_set_interp_method\"]=(a0,a1,a2)=>(_fluid_synth_set_interp_method=Module[\"_fluid_synth_set_interp_method\"]=wasmExports[\"Z\"])(a0,a1,a2);var _adl_init=Module[\"_adl_init\"]=a0=>(_adl_init=Module[\"_adl_init\"]=wasmExports[\"_\"])(a0);var _adl_setSoftPanEnabled=Module[\"_adl_setSoftPanEnabled\"]=(a0,a1)=>(_adl_setSoftPanEnabled=Module[\"_adl_setSoftPanEnabled\"]=wasmExports[\"$\"])(a0,a1);var _adl_setNumChips=Module[\"_adl_setNumChips\"]=(a0,a1)=>(_adl_setNumChips=Module[\"_adl_setNumChips\"]=wasmExports[\"aa\"])(a0,a1);var _tp_unload_soundfont=Module[\"_tp_unload_soundfont\"]=()=>(_tp_unload_soundfont=Module[\"_tp_unload_soundfont\"]=wasmExports[\"ba\"])();var _tp_load_soundfont=Module[\"_tp_load_soundfont\"]=a0=>(_tp_load_soundfont=Module[\"_tp_load_soundfont\"]=wasmExports[\"ca\"])(a0);var _fluid_synth_sfload=Module[\"_fluid_synth_sfload\"]=(a0,a1,a2)=>(_fluid_synth_sfload=Module[\"_fluid_synth_sfload\"]=wasmExports[\"da\"])(a0,a1,a2);var _tp_add_soundfont=Module[\"_tp_add_soundfont\"]=a0=>(_tp_add_soundfont=Module[\"_tp_add_soundfont\"]=wasmExports[\"ea\"])(a0);var _tp_set_reverb=Module[\"_tp_set_reverb\"]=a0=>(_tp_set_reverb=Module[\"_tp_set_reverb\"]=wasmExports[\"fa\"])(a0);var _fluid_synth_set_reverb_on=Module[\"_fluid_synth_set_reverb_on\"]=(a0,a1)=>(_fluid_synth_set_reverb_on=Module[\"_fluid_synth_set_reverb_on\"]=wasmExports[\"ga\"])(a0,a1);var _fluid_synth_set_reverb=Module[\"_fluid_synth_set_reverb\"]=(a0,a1,a2,a3,a4)=>(_fluid_synth_set_reverb=Module[\"_fluid_synth_set_reverb\"]=wasmExports[\"ha\"])(a0,a1,a2,a3,a4);var _tp_get_polyphony=Module[\"_tp_get_polyphony\"]=()=>(_tp_get_polyphony=Module[\"_tp_get_polyphony\"]=wasmExports[\"ia\"])();var _fluid_synth_get_polyphony=Module[\"_fluid_synth_get_polyphony\"]=a0=>(_fluid_synth_get_polyphony=Module[\"_fluid_synth_get_polyphony\"]=wasmExports[\"ja\"])(a0);var _tp_set_polyphony=Module[\"_tp_set_polyphony\"]=a0=>(_tp_set_polyphony=Module[\"_tp_set_polyphony\"]=wasmExports[\"ka\"])(a0);var _fluid_synth_set_polyphony=Module[\"_fluid_synth_set_polyphony\"]=(a0,a1)=>(_fluid_synth_set_polyphony=Module[\"_fluid_synth_set_polyphony\"]=wasmExports[\"la\"])(a0,a1);var _tp_get_channel_in_use=Module[\"_tp_get_channel_in_use\"]=a0=>(_tp_get_channel_in_use=Module[\"_tp_get_channel_in_use\"]=wasmExports[\"ma\"])(a0);var _tp_get_channel_program=Module[\"_tp_get_channel_program\"]=a0=>(_tp_get_channel_program=Module[\"_tp_get_channel_program\"]=wasmExports[\"na\"])(a0);var _tp_set_channel_mute=Module[\"_tp_set_channel_mute\"]=(a0,a1)=>(_tp_set_channel_mute=Module[\"_tp_set_channel_mute\"]=wasmExports[\"oa\"])(a0,a1);var _tp_set_bank=Module[\"_tp_set_bank\"]=a0=>(_tp_set_bank=Module[\"_tp_set_bank\"]=wasmExports[\"pa\"])(a0);var _adl_setBank=Module[\"_adl_setBank\"]=(a0,a1)=>(_adl_setBank=Module[\"_adl_setBank\"]=wasmExports[\"qa\"])(a0,a1);var _tp_set_synth_engine=Module[\"_tp_set_synth_engine\"]=a0=>(_tp_set_synth_engine=Module[\"_tp_set_synth_engine\"]=wasmExports[\"ra\"])(a0);var _tp_set_ch10_melodic=Module[\"_tp_set_ch10_melodic\"]=a0=>(_tp_set_ch10_melodic=Module[\"_tp_set_ch10_melodic\"]=wasmExports[\"sa\"])(a0);var _fluid_synth_bank_select=Module[\"_fluid_synth_bank_select\"]=(a0,a1,a2)=>(_fluid_synth_bank_select=Module[\"_fluid_synth_bank_select\"]=wasmExports[\"ta\"])(a0,a1,a2);var _tp_get_fluid_synth=Module[\"_tp_get_fluid_synth\"]=()=>(_tp_get_fluid_synth=Module[\"_tp_get_fluid_synth\"]=wasmExports[\"ua\"])();var _malloc=Module[\"_malloc\"]=a0=>(_malloc=Module[\"_malloc\"]=wasmExports[\"va\"])(a0);var _gme_open_data=Module[\"_gme_open_data\"]=(a0,a1,a2,a3)=>(_gme_open_data=Module[\"_gme_open_data\"]=wasmExports[\"wa\"])(a0,a1,a2,a3);var _gme_delete=Module[\"_gme_delete\"]=a0=>(_gme_delete=Module[\"_gme_delete\"]=wasmExports[\"xa\"])(a0);var _gme_track_count=Module[\"_gme_track_count\"]=a0=>(_gme_track_count=Module[\"_gme_track_count\"]=wasmExports[\"ya\"])(a0);var _gme_track_info=Module[\"_gme_track_info\"]=(a0,a1,a2)=>(_gme_track_info=Module[\"_gme_track_info\"]=wasmExports[\"za\"])(a0,a1,a2);var _gme_start_track=Module[\"_gme_start_track\"]=(a0,a1)=>(_gme_start_track=Module[\"_gme_start_track\"]=wasmExports[\"Aa\"])(a0,a1);var _gme_play=Module[\"_gme_play\"]=(a0,a1,a2)=>(_gme_play=Module[\"_gme_play\"]=wasmExports[\"Ba\"])(a0,a1,a2);var _gme_set_fade=Module[\"_gme_set_fade\"]=(a0,a1,a2)=>(_gme_set_fade=Module[\"_gme_set_fade\"]=wasmExports[\"Ca\"])(a0,a1,a2);var _gme_track_ended=Module[\"_gme_track_ended\"]=a0=>(_gme_track_ended=Module[\"_gme_track_ended\"]=wasmExports[\"Da\"])(a0);var _gme_tell_scaled=Module[\"_gme_tell_scaled\"]=a0=>(_gme_tell_scaled=Module[\"_gme_tell_scaled\"]=wasmExports[\"Ea\"])(a0);var _gme_seek_scaled=Module[\"_gme_seek_scaled\"]=(a0,a1)=>(_gme_seek_scaled=Module[\"_gme_seek_scaled\"]=wasmExports[\"Fa\"])(a0,a1);var _gme_voice_count=Module[\"_gme_voice_count\"]=a0=>(_gme_voice_count=Module[\"_gme_voice_count\"]=wasmExports[\"Ga\"])(a0);var _gme_ignore_silence=Module[\"_gme_ignore_silence\"]=(a0,a1)=>(_gme_ignore_silence=Module[\"_gme_ignore_silence\"]=wasmExports[\"Ha\"])(a0,a1);var _gme_set_tempo=Module[\"_gme_set_tempo\"]=(a0,a1)=>(_gme_set_tempo=Module[\"_gme_set_tempo\"]=wasmExports[\"Ia\"])(a0,a1);var _gme_mute_voices=Module[\"_gme_mute_voices\"]=(a0,a1)=>(_gme_mute_voices=Module[\"_gme_mute_voices\"]=wasmExports[\"Ja\"])(a0,a1);var _gme_voice_name=Module[\"_gme_voice_name\"]=(a0,a1)=>(_gme_voice_name=Module[\"_gme_voice_name\"]=wasmExports[\"Ka\"])(a0,a1);var _gme_get_chip_state=Module[\"_gme_get_chip_state\"]=a0=>(_gme_get_chip_state=Module[\"_gme_get_chip_state\"]=wasmExports[\"La\"])(a0);var _xmp_start_player=Module[\"_xmp_start_player\"]=(a0,a1,a2)=>(_xmp_start_player=Module[\"_xmp_start_player\"]=wasmExports[\"Ma\"])(a0,a1,a2);var _xmp_end_player=Module[\"_xmp_end_player\"]=a0=>(_xmp_end_player=Module[\"_xmp_end_player\"]=wasmExports[\"Na\"])(a0);var _xmp_play_buffer=Module[\"_xmp_play_buffer\"]=(a0,a1,a2,a3)=>(_xmp_play_buffer=Module[\"_xmp_play_buffer\"]=wasmExports[\"Oa\"])(a0,a1,a2,a3);var _xmp_get_frame_info=Module[\"_xmp_get_frame_info\"]=(a0,a1)=>(_xmp_get_frame_info=Module[\"_xmp_get_frame_info\"]=wasmExports[\"Pa\"])(a0,a1);var _xmp_get_module_info=Module[\"_xmp_get_module_info\"]=(a0,a1)=>(_xmp_get_module_info=Module[\"_xmp_get_module_info\"]=wasmExports[\"Qa\"])(a0,a1);var _xmp_create_context=Module[\"_xmp_create_context\"]=()=>(_xmp_create_context=Module[\"_xmp_create_context\"]=wasmExports[\"Ra\"])();var _xmp_stop_module=Module[\"_xmp_stop_module\"]=a0=>(_xmp_stop_module=Module[\"_xmp_stop_module\"]=wasmExports[\"Sa\"])(a0);var _xmp_restart_module=Module[\"_xmp_restart_module\"]=a0=>(_xmp_restart_module=Module[\"_xmp_restart_module\"]=wasmExports[\"Ta\"])(a0);var _xmp_seek_time=Module[\"_xmp_seek_time\"]=(a0,a1)=>(_xmp_seek_time=Module[\"_xmp_seek_time\"]=wasmExports[\"Ua\"])(a0,a1);var _xmp_channel_mute=Module[\"_xmp_channel_mute\"]=(a0,a1,a2)=>(_xmp_channel_mute=Module[\"_xmp_channel_mute\"]=wasmExports[\"Va\"])(a0,a1,a2);var _xmp_get_player=Module[\"_xmp_get_player\"]=(a0,a1)=>(_xmp_get_player=Module[\"_xmp_get_player\"]=wasmExports[\"Wa\"])(a0,a1);var _xmp_get_format_list=Module[\"_xmp_get_format_list\"]=()=>(_xmp_get_format_list=Module[\"_xmp_get_format_list\"]=wasmExports[\"Xa\"])();var _xmp_inject_event=Module[\"_xmp_inject_event\"]=(a0,a1,a2)=>(_xmp_inject_event=Module[\"_xmp_inject_event\"]=wasmExports[\"Ya\"])(a0,a1,a2);var _xmp_load_module_from_memory=Module[\"_xmp_load_module_from_memory\"]=(a0,a1,a2)=>(_xmp_load_module_from_memory=Module[\"_xmp_load_module_from_memory\"]=wasmExports[\"Za\"])(a0,a1,a2);var _lvgm_init=Module[\"_lvgm_init\"]=a0=>(_lvgm_init=Module[\"_lvgm_init\"]=wasmExports[\"_a\"])(a0);var _lvgm_load_data=Module[\"_lvgm_load_data\"]=(a0,a1,a2)=>(_lvgm_load_data=Module[\"_lvgm_load_data\"]=wasmExports[\"$a\"])(a0,a1,a2);var _lvgm_get_position_ms=Module[\"_lvgm_get_position_ms\"]=a0=>(_lvgm_get_position_ms=Module[\"_lvgm_get_position_ms\"]=wasmExports[\"ab\"])(a0);var _lvgm_get_duration_ms=Module[\"_lvgm_get_duration_ms\"]=a0=>(_lvgm_get_duration_ms=Module[\"_lvgm_get_duration_ms\"]=wasmExports[\"bb\"])(a0);var _lvgm_start=Module[\"_lvgm_start\"]=a0=>(_lvgm_start=Module[\"_lvgm_start\"]=wasmExports[\"cb\"])(a0);var _lvgm_render=Module[\"_lvgm_render\"]=(a0,a1,a2)=>(_lvgm_render=Module[\"_lvgm_render\"]=wasmExports[\"db\"])(a0,a1,a2);var _lvgm_stop=Module[\"_lvgm_stop\"]=a0=>(_lvgm_stop=Module[\"_lvgm_stop\"]=wasmExports[\"eb\"])(a0);var _lvgm_reset=Module[\"_lvgm_reset\"]=a0=>(_lvgm_reset=Module[\"_lvgm_reset\"]=wasmExports[\"fb\"])(a0);var _lvgm_set_playback_speed=Module[\"_lvgm_set_playback_speed\"]=(a0,a1)=>(_lvgm_set_playback_speed=Module[\"_lvgm_set_playback_speed\"]=wasmExports[\"gb\"])(a0,a1);var _lvgm_get_playback_speed=Module[\"_lvgm_get_playback_speed\"]=a0=>(_lvgm_get_playback_speed=Module[\"_lvgm_get_playback_speed\"]=wasmExports[\"hb\"])(a0);var _lvgm_seek_ms=Module[\"_lvgm_seek_ms\"]=(a0,a1)=>(_lvgm_seek_ms=Module[\"_lvgm_seek_ms\"]=wasmExports[\"ib\"])(a0,a1);var _lvgm_get_metadata=Module[\"_lvgm_get_metadata\"]=a0=>(_lvgm_get_metadata=Module[\"_lvgm_get_metadata\"]=wasmExports[\"jb\"])(a0);var _lvgm_get_voice_count=Module[\"_lvgm_get_voice_count\"]=a0=>(_lvgm_get_voice_count=Module[\"_lvgm_get_voice_count\"]=wasmExports[\"kb\"])(a0);var _lvgm_get_voice_name=Module[\"_lvgm_get_voice_name\"]=(a0,a1)=>(_lvgm_get_voice_name=Module[\"_lvgm_get_voice_name\"]=wasmExports[\"lb\"])(a0,a1);var _lvgm_get_chip_state=Module[\"_lvgm_get_chip_state\"]=a0=>(_lvgm_get_chip_state=Module[\"_lvgm_get_chip_state\"]=wasmExports[\"mb\"])(a0);var _lvgm_set_voice_mask=Module[\"_lvgm_set_voice_mask\"]=(a0,a1)=>(_lvgm_set_voice_mask=Module[\"_lvgm_set_voice_mask\"]=wasmExports[\"nb\"])(a0,a1);var _lvgm_get_voice_mask=Module[\"_lvgm_get_voice_mask\"]=a0=>(_lvgm_get_voice_mask=Module[\"_lvgm_get_voice_mask\"]=wasmExports[\"ob\"])(a0);var _fluid_synth_all_sounds_off=Module[\"_fluid_synth_all_sounds_off\"]=(a0,a1)=>(_fluid_synth_all_sounds_off=Module[\"_fluid_synth_all_sounds_off\"]=wasmExports[\"qb\"])(a0,a1);var _fluid_synth_set_chorus=Module[\"_fluid_synth_set_chorus\"]=(a0,a1,a2,a3,a4,a5)=>(_fluid_synth_set_chorus=Module[\"_fluid_synth_set_chorus\"]=wasmExports[\"rb\"])(a0,a1,a2,a3,a4,a5);var _fluid_synth_set_chorus_on=Module[\"_fluid_synth_set_chorus_on\"]=(a0,a1)=>(_fluid_synth_set_chorus_on=Module[\"_fluid_synth_set_chorus_on\"]=wasmExports[\"sb\"])(a0,a1);var _adl_getNumChips=Module[\"_adl_getNumChips\"]=a0=>(_adl_getNumChips=Module[\"_adl_getNumChips\"]=wasmExports[\"tb\"])(a0);var _adl_getBanksCount=Module[\"_adl_getBanksCount\"]=()=>(_adl_getBanksCount=Module[\"_adl_getBanksCount\"]=wasmExports[\"ub\"])();var _adl_getBankNames=Module[\"_adl_getBankNames\"]=()=>(_adl_getBankNames=Module[\"_adl_getBankNames\"]=wasmExports[\"vb\"])();var _adl_generate=Module[\"_adl_generate\"]=(a0,a1,a2)=>(_adl_generate=Module[\"_adl_generate\"]=wasmExports[\"wb\"])(a0,a1,a2);var _v2m_open=Module[\"_v2m_open\"]=(a0,a1,a2)=>(_v2m_open=Module[\"_v2m_open\"]=wasmExports[\"xb\"])(a0,a1,a2);var _v2m_write_audio=Module[\"_v2m_write_audio\"]=(a0,a1)=>(_v2m_write_audio=Module[\"_v2m_write_audio\"]=wasmExports[\"yb\"])(a0,a1);var _v2m_get_position_ms=Module[\"_v2m_get_position_ms\"]=()=>(_v2m_get_position_ms=Module[\"_v2m_get_position_ms\"]=wasmExports[\"zb\"])();var _v2m_get_duration_ms=Module[\"_v2m_get_duration_ms\"]=()=>(_v2m_get_duration_ms=Module[\"_v2m_get_duration_ms\"]=wasmExports[\"Ab\"])();var _v2m_seek_ms=Module[\"_v2m_seek_ms\"]=a0=>(_v2m_seek_ms=Module[\"_v2m_seek_ms\"]=wasmExports[\"Bb\"])(a0);var _v2m_set_speed=Module[\"_v2m_set_speed\"]=a0=>(_v2m_set_speed=Module[\"_v2m_set_speed\"]=wasmExports[\"Cb\"])(a0);var _v2m_close=Module[\"_v2m_close\"]=()=>(_v2m_close=Module[\"_v2m_close\"]=wasmExports[\"Db\"])();var ___errno_location=()=>(___errno_location=wasmExports[\"Eb\"])();var _n64_load_file=Module[\"_n64_load_file\"]=(a0,a1,a2,a3)=>(_n64_load_file=Module[\"_n64_load_file\"]=wasmExports[\"Fb\"])(a0,a1,a2,a3);var _n64_get_duration_ms=Module[\"_n64_get_duration_ms\"]=()=>(_n64_get_duration_ms=Module[\"_n64_get_duration_ms\"]=wasmExports[\"Gb\"])();var _n64_get_position_ms=Module[\"_n64_get_position_ms\"]=()=>(_n64_get_position_ms=Module[\"_n64_get_position_ms\"]=wasmExports[\"Hb\"])();var _n64_render_audio=Module[\"_n64_render_audio\"]=(a0,a1)=>(_n64_render_audio=Module[\"_n64_render_audio\"]=wasmExports[\"Ib\"])(a0,a1);var _n64_seek_ms=Module[\"_n64_seek_ms\"]=a0=>(_n64_seek_ms=Module[\"_n64_seek_ms\"]=wasmExports[\"Jb\"])(a0);var _n64_shutdown=Module[\"_n64_shutdown\"]=()=>(_n64_shutdown=Module[\"_n64_shutdown\"]=wasmExports[\"Kb\"])();var _mdx_open=Module[\"_mdx_open\"]=(a0,a1,a2)=>(_mdx_open=Module[\"_mdx_open\"]=wasmExports[\"Lb\"])(a0,a1,a2);var _mdx_set_dir=Module[\"_mdx_set_dir\"]=(a0,a1)=>(_mdx_set_dir=Module[\"_mdx_set_dir\"]=wasmExports[\"Mb\"])(a0,a1);var _mdx_set_rate=Module[\"_mdx_set_rate\"]=a0=>(_mdx_set_rate=Module[\"_mdx_set_rate\"]=wasmExports[\"Nb\"])(a0);var _mdx_set_max_loop=Module[\"_mdx_set_max_loop\"]=(a0,a1)=>(_mdx_set_max_loop=Module[\"_mdx_set_max_loop\"]=wasmExports[\"Ob\"])(a0,a1);var _mdx_next_frame=Module[\"_mdx_next_frame\"]=a0=>(_mdx_next_frame=Module[\"_mdx_next_frame\"]=wasmExports[\"Pb\"])(a0);var _mdx_frame_length=Module[\"_mdx_frame_length\"]=a0=>(_mdx_frame_length=Module[\"_mdx_frame_length\"]=wasmExports[\"Qb\"])(a0);var _mdx_calc_sample=Module[\"_mdx_calc_sample\"]=(a0,a1,a2)=>(_mdx_calc_sample=Module[\"_mdx_calc_sample\"]=wasmExports[\"Rb\"])(a0,a1,a2);var _mdx_calc_log=Module[\"_mdx_calc_log\"]=(a0,a1,a2)=>(_mdx_calc_log=Module[\"_mdx_calc_log\"]=wasmExports[\"Sb\"])(a0,a1,a2);var _mdx_get_title=Module[\"_mdx_get_title\"]=(a0,a1)=>(_mdx_get_title=Module[\"_mdx_get_title\"]=wasmExports[\"Tb\"])(a0,a1);var _mdx_get_length=Module[\"_mdx_get_length\"]=a0=>(_mdx_get_length=Module[\"_mdx_get_length\"]=wasmExports[\"Ub\"])(a0);var _mdx_get_tracks=Module[\"_mdx_get_tracks\"]=a0=>(_mdx_get_tracks=Module[\"_mdx_get_tracks\"]=wasmExports[\"Vb\"])(a0);var _mdx_get_current_notes=Module[\"_mdx_get_current_notes\"]=(a0,a1,a2)=>(_mdx_get_current_notes=Module[\"_mdx_get_current_notes\"]=wasmExports[\"Wb\"])(a0,a1,a2);var _mdx_close=Module[\"_mdx_close\"]=a0=>(_mdx_close=Module[\"_mdx_close\"]=wasmExports[\"Xb\"])(a0);var _mdx_create_context=Module[\"_mdx_create_context\"]=()=>(_mdx_create_context=Module[\"_mdx_create_context\"]=wasmExports[\"Yb\"])();var _mdx_get_position_ms=Module[\"_mdx_get_position_ms\"]=a0=>(_mdx_get_position_ms=Module[\"_mdx_get_position_ms\"]=wasmExports[\"Zb\"])(a0);var _mdx_set_speed=Module[\"_mdx_set_speed\"]=(a0,a1)=>(_mdx_set_speed=Module[\"_mdx_set_speed\"]=wasmExports[\"_b\"])(a0,a1);var _mdx_set_position_ms=Module[\"_mdx_set_position_ms\"]=(a0,a1)=>(_mdx_set_position_ms=Module[\"_mdx_set_position_ms\"]=wasmExports[\"$b\"])(a0,a1);var _mdx_get_pdx_filename=Module[\"_mdx_get_pdx_filename\"]=(a0,a1)=>(_mdx_get_pdx_filename=Module[\"_mdx_get_pdx_filename\"]=wasmExports[\"ac\"])(a0,a1);var _mdx_get_track_name=Module[\"_mdx_get_track_name\"]=(a0,a1)=>(_mdx_get_track_name=Module[\"_mdx_get_track_name\"]=wasmExports[\"bc\"])(a0,a1);var _mdx_get_track_mask=Module[\"_mdx_get_track_mask\"]=a0=>(_mdx_get_track_mask=Module[\"_mdx_get_track_mask\"]=wasmExports[\"cc\"])(a0);var _mdx_set_track_mask=Module[\"_mdx_set_track_mask\"]=(a0,a1)=>(_mdx_set_track_mask=Module[\"_mdx_set_track_mask\"]=wasmExports[\"dc\"])(a0,a1);var _emscripten_builtin_memalign=(a0,a1)=>(_emscripten_builtin_memalign=wasmExports[\"ec\"])(a0,a1);var stackSave=()=>(stackSave=wasmExports[\"fc\"])();var stackRestore=a0=>(stackRestore=wasmExports[\"gc\"])(a0);var stackAlloc=a0=>(stackAlloc=wasmExports[\"hc\"])(a0);var ___cxa_increment_exception_refcount=a0=>(___cxa_increment_exception_refcount=wasmExports[\"__cxa_increment_exception_refcount\"])(a0);var ___cxa_is_pointer_type=a0=>(___cxa_is_pointer_type=wasmExports[\"ic\"])(a0);var _xmp_version=Module[\"_xmp_version\"]=510632;var _xmp_vercode=Module[\"_xmp_vercode\"]=87556;Module[\"ccall\"]=ccall;Module[\"setValue\"]=setValue;Module[\"getValue\"]=getValue;Module[\"UTF8ToString\"]=UTF8ToString;Module[\"FS\"]=FS;Module[\"ALLOC_NORMAL\"]=ALLOC_NORMAL;var calledRun;dependenciesFulfilled=function runCaller(){if(!calledRun)run();if(!calledRun)dependenciesFulfilled=runCaller};function run(){if(runDependencies>0){return}preRun();if(runDependencies>0){return}function doRun(){if(calledRun)return;calledRun=true;Module[\"calledRun\"]=true;if(ABORT)return;initRuntime();readyPromiseResolve(Module);if(Module[\"onRuntimeInitialized\"])Module[\"onRuntimeInitialized\"]();postRun()}if(Module[\"setStatus\"]){Module[\"setStatus\"](\"Running...\");setTimeout(function(){setTimeout(function(){Module[\"setStatus\"](\"\")},1);doRun()},1)}else{doRun()}}if(Module[\"preInit\"]){if(typeof Module[\"preInit\"]==\"function\")Module[\"preInit\"]=[Module[\"preInit\"]];while(Module[\"preInit\"].length>0){Module[\"preInit\"].pop()()}}run();\n\n\n  return moduleArg.ready\n}\n\n);\n})();\nexport default CHIP_CORE;\n","export default {\n  apiKey: \"AIzaSyCgIxMCZDERKhgnKyr5FIEJVrKlYNbIA4k\",\n  authDomain: \"rawlrocks.firebaseapp.com\",\n  projectId: \"rawlrocks\",\n  storageBucket: \"rawlrocks.appspot.com\",\n  messagingSenderId: \"1068304431235\",\n  appId: \"1:1068304431235:web:7547aa7d9116376ccc03b6\",\n  measurementId: \"G-RMF5LJLXDG\",\n};\n","import { doc, getDoc, getFirestore } from \"firebase/firestore/lite\";\nimport { FirestoreMidiDocument, FirestoreMidiIndex } from \"../components/App\";\nimport keySlugMapping from \"../keySlugMapping\";\n\ntype HandleSongClickDependencies = {\n  setState: (state: any, callback?: () => void) => void;\n  loadMidi: (midiBlob: Blob, callback?: () => void) => void;\n  state: {\n    analyses: any;\n  };\n};\n\nexport const handleSongClick = async (\n  deps: HandleSongClickDependencies,\n  slug: string,\n  isHiddenRoute: boolean = false,\n): Promise<void> => {\n  const firestore = getFirestore();\n  try {\n    console.log(\"Fetching index document\");\n    const indexDoc = await getDoc(doc(firestore, \"indexes\", \"midis\"));\n    const indexData = indexDoc.data() as FirestoreMidiIndex;\n    console.log(\"Index document data:\", indexData);\n\n    if (!indexData) {\n      console.error(\"Index document not found\");\n      return;\n    }\n\n    let analysisKey;\n    let fSlug = slug;\n    if (isHiddenRoute) {\n      fSlug = keySlugMapping[slug] || slug;\n      analysisKey = `f/${fSlug}`;\n    } else {\n      analysisKey = `f/${slug}`;\n    }\n\n    console.log(\"Searching for MIDI info with slug:\", slug);\n    let midiInfo = indexData.midis.find(\n      (midi) => midi.slug === slug || midi.id === slug,\n    );\n    console.log(\"Found MIDI info:\", midiInfo);\n\n    if (!midiInfo) {\n      console.error(`No MIDI found for slug: ${slug}`);\n      return;\n    }\n\n    console.log(\"Fetching MIDI document with ID:\", midiInfo.id);\n    const midiDoc = await getDoc(doc(firestore, \"midis\", midiInfo.id));\n    if (midiDoc.exists()) {\n      const midiData = midiDoc.data() as FirestoreMidiDocument;\n      console.log(\"MIDI document data:\", midiData);\n\n      // Convert Firestore Bytes to Blob\n      const midiBlob = new Blob([midiData.blob.toUint8Array()], {\n        type: \"audio/midi\",\n      });\n      console.log(\"Created MIDI Blob:\", midiBlob);\n\n      const currentMidi = {\n        id: midiInfo.id,\n        title: midiData.title,\n        slug: fSlug,\n        sourceUrl: midiData.url,\n        isHiddenRoute: isHiddenRoute,\n      };\n      const savedAnalysis = deps.state.analyses[analysisKey];\n\n      return new Promise<void>((resolve) => {\n        deps.setState(\n          {\n            currentMidi,\n            rawlProps: {\n              savedAnalysis,\n              isHiddenRoute,\n            },\n          },\n          () => {\n            console.log(\"State updated with currentMidi:\", currentMidi);\n            console.log(\"State updated with rawlProps\");\n            // Create a promise that resolves when playback starts\n            const playbackPromise = new Promise<void>((playbackResolve) => {\n              deps.loadMidi(midiBlob, playbackResolve);\n            });\n            // Wait for playback to start before resolving the main promise\n            playbackPromise.then(() => {\n              resolve();\n            });\n          },\n        );\n      });\n    } else {\n      console.error(\"No such document!\");\n    }\n  } catch (error) {\n    console.error(\"Error loading MIDI:\", error);\n    throw error; // Re-throw to trigger the finally block in the click handler\n  }\n};\n","import MIDIEvents, { EVENT_MIDI, EVENT_MIDI_CONTROLLER } from \"midievents\";\nimport MIDIFile from \"midifile\";\n\nconst CC_102_TRACK_LOOP_START = 102;\nconst CC_103_TRACK_LOOP_END = 103;\nconst CC_123_ALL_NOTES_OFF = 123;\n\nclass EventIterator {\n  constructor(events) {\n    this.events = events;\n    this.curEvent = events[0];\n    this.pos = 0;\n    this.loopStartPos = null;\n    this.elapsedLoops = 0;\n    this.curTick = 0;\n  }\n\n  loop() {\n    // Sanity check\n    if (this.curTick < 1000000 && this.elapsedLoops < 1000) {\n      this.pos = this.loopStartPos;\n      console.debug(\n        \"Channel %d looped at tick %d (loop %d completed)\",\n        this.curEvent.channel,\n        this.curTick,\n        this.elapsedLoops,\n      );\n      this.elapsedLoops++;\n    }\n  }\n\n  next() {\n    const event = this.events[this.pos++];\n    if (!event) return null;\n\n    this.curTick += event.delta;\n\n    if (event.type === EVENT_MIDI && event.subtype === EVENT_MIDI_CONTROLLER) {\n      if (event.param1 === CC_102_TRACK_LOOP_START) {\n        // console.log('loop start ch %d id %d', event.channel, event.param2);\n        this.loopStartPos = this.pos;\n      }\n      if (event.param1 === CC_103_TRACK_LOOP_END) {\n        // console.log('loop end  ch %d id %d', event.channel, event.param2);\n        this.loop();\n      }\n    }\n\n    // Return a copy because track consolidation will mutate the events.\n    return { ...event };\n  }\n}\n\n// Monkey patch MIDIFile class.\nMIDIFile.prototype.getLoopedEvents = function (tracks, loopCount = 1) {\n  let event;\n  let playTime = 0;\n  const combinedEvents = [];\n  const format = this.header.getFormat();\n  let tickResolution = this.header.getTickResolution();\n  let i;\n  let j;\n  let smallestDelta;\n  let loopCountReached = false;\n  const type = null;\n  const subtype = null;\n\n  // Reading events\n  // if the read is sequential\n  if (1 !== format || 1 === this.tracks.length) {\n    for (i = 0, j = this.tracks.length; i < j; i++) {\n      // reset playtime if format is 2\n      playTime = 2 === format && playTime ? playTime : 0;\n      const eventIterator = new EventIterator(tracks[i]);\n      // loooping through events\n      event = eventIterator.next();\n      while (event) {\n        playTime += event.delta ? (event.delta * tickResolution) / 1000 : 0;\n        if (event.type === MIDIEvents.EVENT_META) {\n          // tempo change events\n          if (event.subtype === MIDIEvents.EVENT_META_SET_TEMPO) {\n            tickResolution = this.header.getTickResolution(event.tempo);\n          }\n        }\n        // push the asked events\n        if (\n          (!type || event.type === type) &&\n          (!subtype || (event.subtype && event.subtype === subtype))\n        ) {\n          event.playTime = playTime;\n          combinedEvents.push(event);\n        }\n        event = eventIterator.next();\n      }\n    }\n    // the read is concurrent\n  } else {\n    smallestDelta = -1;\n\n    const trackIterators = [];\n\n    // Creating iterators\n    for (i = 0, j = tracks.length; i < j; i++) {\n      printTrack(i, tracks[i]);\n      trackIterators[i] = new EventIterator(tracks[i]);\n      trackIterators[i].curEvent = trackIterators[i].next();\n    }\n    // Filling events\n    do {\n      smallestDelta = -1;\n      // Find the shortest event\n      for (i = 0, j = trackIterators.length; i < j; i++) {\n        if (trackIterators[i].curEvent) {\n          if (\n            -1 === smallestDelta ||\n            trackIterators[i].curEvent.delta <\n              trackIterators[smallestDelta].curEvent.delta\n          ) {\n            smallestDelta = i;\n          } else if (\n            // Prioritize tracks that haven't caught up with the loop count\n            trackIterators[i].curEvent.delta ===\n              trackIterators[smallestDelta].curEvent.delta &&\n            trackIterators[i].elapsedLoops <\n              trackIterators[smallestDelta].elapsedLoops\n          ) {\n            smallestDelta = i;\n          }\n        }\n      }\n      if (-1 !== smallestDelta) {\n        // Subtract delta of previous events\n        for (i = 0, j = trackIterators.length; i < j; i++) {\n          if (i !== smallestDelta && trackIterators[i].curEvent) {\n            trackIterators[i].curEvent.delta -=\n              trackIterators[smallestDelta].curEvent.delta;\n          }\n        }\n        // filling values\n        event = trackIterators[smallestDelta].curEvent;\n        playTime += event.delta ? (event.delta * tickResolution) / 1000 : 0;\n        if (event.type === MIDIEvents.EVENT_META) {\n          // tempo change events\n          if (event.subtype === MIDIEvents.EVENT_META_SET_TEMPO) {\n            tickResolution = this.header.getTickResolution(event.tempo);\n          }\n        }\n        // push midi events\n        if (\n          (!type || event.type === type) &&\n          (!subtype || (event.subtype && event.subtype === subtype))\n        ) {\n          event.playTime = playTime;\n          event.track = smallestDelta;\n          combinedEvents.push(event);\n        }\n        // get next event\n        trackIterators[smallestDelta].curEvent =\n          trackIterators[smallestDelta].next();\n\n        // check elapsed loops\n        loopCountReached = trackIterators.every(\n          (it) => it.curEvent == null || it.elapsedLoops >= loopCount,\n        );\n      }\n    } while (-1 !== smallestDelta && loopCountReached === false);\n\n    for (let i = 0; i < trackIterators.length; i++) {\n      if (trackIterators[i]?.curEvent) {\n        combinedEvents.push(\n          allNotesOff(i, trackIterators[i].curEvent.channel, playTime),\n        );\n      }\n    }\n  }\n  console.debug(combinedEvents);\n  return combinedEvents;\n};\n\n// Monkey patch MIDIFile class - for Chiptheory.\n// Probably there's no value in doing this filtering here - all these\n// events are available in noteParsers/midi.ts anyways\nMIDIFile.prototype.getTimeEvents = function (tracks) {\n  let event;\n  let playTime = 0;\n  const combinedEvents = [];\n  const format = this.header.getFormat();\n  let tickResolution = this.header.getTickResolution();\n  let i;\n  let j;\n  let smallestDelta;\n  // let loopCountReached = false;\n  const type = null;\n  const subtype = null;\n  const timeEvents = [];\n  let maxPlayTime = 0;\n  let tick = 0;\n\n  // Reading events\n  // if the read is sequential\n  console.log(\"MIDI format\", format);\n  if (1 !== format || 1 === this.tracks.length) {\n    for (i = 0, j = this.tracks.length; i < j; i++) {\n      // reset playtime if format is 2\n      playTime = 2 === format && playTime ? playTime : 0;\n      const eventIterator = new EventIterator(tracks[i]);\n      // loooping through events\n      event = eventIterator.next();\n      while (event) {\n        tick += event.delta ?? 0;\n        playTime += event.delta ? (event.delta * tickResolution) / 1000 : 0;\n        if (event.type === MIDIEvents.EVENT_META) {\n          // tempo change events\n          if (event.subtype === MIDIEvents.EVENT_META_SET_TEMPO) {\n            timeEvents.push({\n              type: \"bpm\",\n              bpm: event.tempoBPM,\n              playTime,\n              tick,\n            });\n            tickResolution = this.header.getTickResolution(event.tempo);\n          }\n          if (event.subtype === MIDIEvents.EVENT_META_TIME_SIGNATURE) {\n            timeEvents.push({\n              type: \"timeSignature\",\n              numerator: event.param1,\n              denominatorPower: event.param2,\n              playTime,\n              tick,\n            });\n          }\n        }\n        // push the asked events\n        if (\n          (!type || event.type === type) &&\n          (!subtype || (event.subtype && event.subtype === subtype))\n        ) {\n          event.playTime = playTime;\n          event.tick = tick;\n          combinedEvents.push(event);\n        }\n        event = eventIterator.next();\n      }\n    }\n    // the read is concurrent\n  } else {\n    smallestDelta = -1;\n\n    const trackIterators = [];\n\n    // Creating iterators\n    for (i = 0, j = tracks.length; i < j; i++) {\n      printTrack(i, tracks[i]);\n      trackIterators[i] = new EventIterator(tracks[i]);\n      trackIterators[i].curEvent = trackIterators[i].next();\n    }\n    // Filling events\n    do {\n      smallestDelta = -1;\n      // Find the shortest event\n      for (i = 0, j = trackIterators.length; i < j; i++) {\n        if (trackIterators[i].curEvent) {\n          if (\n            -1 === smallestDelta ||\n            trackIterators[i].curEvent.delta <\n              trackIterators[smallestDelta].curEvent.delta\n          ) {\n            smallestDelta = i;\n          } else if (\n            // Prioritize tracks that haven't caught up with the loop count\n            trackIterators[i].curEvent.delta ===\n              trackIterators[smallestDelta].curEvent.delta &&\n            trackIterators[i].elapsedLoops <\n              trackIterators[smallestDelta].elapsedLoops\n          ) {\n            smallestDelta = i;\n          }\n        }\n      }\n      if (-1 !== smallestDelta) {\n        // Subtract delta of previous events\n        for (i = 0, j = trackIterators.length; i < j; i++) {\n          if (i !== smallestDelta && trackIterators[i].curEvent) {\n            trackIterators[i].curEvent.delta -=\n              trackIterators[smallestDelta].curEvent.delta;\n          }\n        }\n        // filling values\n        event = trackIterators[smallestDelta].curEvent;\n        tick += event.delta;\n        playTime += event.delta ? (event.delta * tickResolution) / 1000 : 0;\n        if (event.type === MIDIEvents.EVENT_META) {\n          // tempo change events\n          if (event.subtype === MIDIEvents.EVENT_META_SET_TEMPO) {\n            timeEvents.push({\n              type: \"bpm\",\n              bpm: event.tempoBPM,\n              playTime,\n              tick,\n            });\n            tickResolution = this.header.getTickResolution(event.tempo);\n          }\n          if (event.subtype === MIDIEvents.EVENT_META_TIME_SIGNATURE) {\n            timeEvents.push({\n              type: \"timeSignature\",\n              numerator: event.param1,\n              denominatorPower: event.param2,\n              playTime,\n              tick,\n            });\n          }\n        }\n        // push midi events\n        if (\n          (!type || event.type === type) &&\n          (!subtype || (event.subtype && event.subtype === subtype))\n        ) {\n          event.playTime = playTime;\n          event.tick = tick;\n          event.track = smallestDelta;\n          combinedEvents.push(event);\n        }\n        // get next event\n        trackIterators[smallestDelta].curEvent =\n          trackIterators[smallestDelta].next();\n\n        // check elapsed loops\n        // loopCountReached = trackIterators.every(\n        //   (it) => it.curEvent == null || it.elapsedLoops >= loopCount,\n        // );\n      }\n    } while (-1 !== smallestDelta);\n\n    for (let i = 0; i < trackIterators.length; i++) {\n      if (trackIterators[i]?.curEvent) {\n        combinedEvents.push(\n          allNotesOff(i, trackIterators[i].curEvent.channel, playTime),\n        );\n      }\n    }\n  }\n  combinedEvents.forEach(({ playTime }) => {\n    if (playTime) maxPlayTime = Math.max(playTime, maxPlayTime);\n  });\n  timeEvents.push({\n    type: \"bpm\",\n    bpm: 120,\n    playTime: maxPlayTime,\n    tick: Math.max(...combinedEvents.map(({ tick }) => tick ?? 0)),\n  });\n  return timeEvents.sort((a, b) => a.playTime - b.playTime);\n};\n\nfunction isLoopStart(event) {\n  return (\n    event.param1 === CC_102_TRACK_LOOP_START &&\n    event.subtype === EVENT_MIDI_CONTROLLER &&\n    event.type === EVENT_MIDI\n  );\n}\n\nfunction isLoopEnd(event) {\n  return (\n    event.param1 === CC_103_TRACK_LOOP_END &&\n    event.subtype === EVENT_MIDI_CONTROLLER &&\n    event.type === EVENT_MIDI\n  );\n}\n\nfunction isAllNotesOff(event) {\n  return (\n    event.param1 === CC_123_ALL_NOTES_OFF &&\n    event.subtype === EVENT_MIDI_CONTROLLER &&\n    event.type === EVENT_MIDI\n  );\n}\n\nfunction allNotesOff(track, channel, playTime) {\n  return {\n    channel: channel,\n    track: track,\n    playTime: playTime,\n    type: EVENT_MIDI,\n    subtype: EVENT_MIDI_CONTROLLER,\n    param1: CC_123_ALL_NOTES_OFF,\n    delta: 0,\n  };\n}\n\nfunction printTrack(t, events) {\n  const ticksPerChar = 1000;\n  let charArr = [];\n  let tick = 0;\n  for (let i = 0; i < events.length; i++) {\n    const event = events[i];\n    tick += event.delta;\n    const j = Math.floor(tick / ticksPerChar);\n    if (isAllNotesOff(event)) {\n      charArr[j] = \"X\";\n      tick += ticksPerChar; // force next char so this doesn't get overwritten\n    } else if (isLoopStart(event)) {\n      charArr[j] = \">\";\n    } else if (isLoopEnd(event)) {\n      charArr[j] = \"<\";\n    } else if (charArr[j] == null) {\n      charArr[j] = \"·\";\n    } else if (charArr[j] === \"·\") {\n      charArr[j] = \"-\";\n    } else if (charArr[j] === \"-\") {\n      charArr[j] = \"=\";\n    }\n  }\n  t = (\"\" + t).padStart(2, \"0\");\n  const viz = [];\n  for (let k = 0; k < charArr.length; k++) {\n    viz[k] = charArr[k] || \" \";\n  }\n  console.debug(`Track ${t} |${viz.join(\"\")}|`);\n}\n","export default function promisify(xhr) {\n  const oldSend = xhr.send;\n  xhr.send = function () {\n    const xhrArguments = arguments;\n    return new Promise(function (resolve, reject) {\n      xhr.onload = function () {\n        if (xhr.status < 200 || xhr.status >= 300) {\n          reject({\n            status: xhr.status,\n            statusText: xhr.statusText,\n          });\n        } else {\n          resolve(xhr);\n        }\n      };\n      xhr.onerror = function () {\n        reject({\n          status: xhr.status,\n          statusText: xhr.statusText,\n        });\n      };\n      try {\n        oldSend.apply(xhr, xhrArguments);\n      } catch (e) {}\n    });\n  };\n  return xhr;\n}\n","import React from 'react';\n\nfunction Alert(props) {\n  const { handlePlayerError, playerError, showPlayerError } = props;\n\n  return (\n    <div hidden={!showPlayerError} className=\"error-box-outer\">\n      <div className=\"error-box\">\n        <div className=\"message\">\n          Error: {playerError}\n        </div>\n        <button className=\"box-button message-box-button\" onClick={() => handlePlayerError(null)}>Close</button>\n      </div>\n    </div>\n  );\n}\n\nexport default Alert;\n","import autoBindReact from \"auto-bind/react\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport Slider from \"./Slider\";\n\nconst TimeSliderContainer = styled.div`\n  flex-grow: 1;\n  margin-left: var(--charW2);\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  width: 95%;\n`;\n\nconst TimeLabel = styled.div`\n  margin-right: 15px;\n`;\n\nconst DurationLabel = styled.div`\n  margin-left: 20px;\n`;\n\n//  46 ms = 2048/44100 sec or 21.7 fps\n// 400 ms = 2.5 fps\nconst UPDATE_INTERVAL_MS = 100;\nconst pad = (n) => (n < 10 ? \"0\" + n : n);\n\nexport default class TimeSlider extends React.Component {\n  constructor(props) {\n    super(props);\n    autoBindReact(this);\n\n    this.state = {\n      draggedSongPositionMs: -1,\n      currentSongPositionMs: 0,\n    };\n    this.timer = null;\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.paused === true && this.props.paused === false) {\n      this.timer = setInterval(() => {\n        const { getCurrentPositionMs, currentSongDurationMs } = this.props;\n        this.setState({\n          currentSongPositionMs: Math.min(\n            getCurrentPositionMs(),\n            currentSongDurationMs,\n          ),\n        });\n      }, UPDATE_INTERVAL_MS);\n    } else if (prevProps.paused === false && this.props.paused === true) {\n      clearInterval(this.timer);\n    }\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timer);\n  }\n\n  getSongPos() {\n    return this.state.currentSongPositionMs / this.props.currentSongDurationMs;\n  }\n\n  getTimeLabel() {\n    const val =\n      this.state.draggedSongPositionMs >= 0\n        ? this.state.draggedSongPositionMs\n        : this.state.currentSongPositionMs;\n    return this.getTime(val);\n  }\n\n  getTime(ms) {\n    const sign = ms < 0 ? \"-\" : \"\";\n    ms = Math.abs(ms);\n    const min = Math.floor(ms / 60000);\n    const sec = (Math.floor((ms % 60000) / 100) / 10).toFixed(0);\n    return `${sign}${min}:${pad(sec)}`;\n  }\n\n  handlePositionDrag(event) {\n    const pos = event.target ? event.target.value : event;\n    // Update current time position label\n    this.setState({\n      draggedSongPositionMs: pos * this.props.currentSongDurationMs,\n    });\n  }\n\n  handlePositionDrop(event) {\n    this.setState({\n      draggedSongPositionMs: -1,\n      currentSongPositionMs: this.state.draggedSongPositionMs,\n    });\n    this.props.onChange(event);\n  }\n\n  render() {\n    return (\n      <TimeSliderContainer>\n        <TimeLabel>{this.getTimeLabel()}</TimeLabel>\n        <Slider\n          pos={this.getSongPos()}\n          onDrag={this.handlePositionDrag}\n          onChange={this.handlePositionDrop}\n        />\n        <DurationLabel>\n          {this.getTime(this.props.currentSongDurationMs)}\n        </DurationLabel>\n      </TimeSliderContainer>\n    );\n  }\n}\n","import * as React from \"react\";\nimport { useContext } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"./AppContext\";\nimport SignIn from \"./SignIn\";\n\nconst HeaderContainer = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: black;\n  height: 30px;\n  overflow: hidden;\n  z-index: 100000000;\n`;\n\nconst NavLinks = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst HeaderLink = styled(Link)`\n  display: inline-flex;\n  align-items: center;\n  padding: 0px 24px;\n  text-decoration: none;\n  height: 30px;\n\n  &:hover {\n    text-decoration: none;\n  }\n`;\n\nconst ExternalLink = styled.a`\n  display: inline-flex;\n  align-items: center;\n  padding: 0px 24px;\n  text-decoration: none;\n  height: 100%;\n  color: inherit;\n\n  &:hover {\n    text-decoration: none;\n  }\n`;\n\nconst ExternalLinks = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst AppHeader: React.FC = () => {\n  const location = useLocation();\n  const path = location.pathname;\n  const {\n    user,\n    handleLogin,\n    handleLogout,\n    analysisEnabled,\n    handleToggleAnalysis,\n  } = useContext(AppContext);\n\n  const getLinkStyle = (pathPrefix: string): React.CSSProperties => {\n    if (pathPrefix === \"/corpus\") {\n      return path === \"/corpus/\" ? { background: \"white\", color: \"black\" } : {};\n    }\n    return path.startsWith(pathPrefix)\n      ? { background: \"white\", color: \"black\" }\n      : {};\n  };\n\n  return (\n    <HeaderContainer>\n      <NavLinks>\n        <HeaderLink\n          className=\"AppHeader-title\"\n          to={{ pathname: \"/\" }}\n          style={getLinkStyle(\"/100\")}\n        >\n          Rawl\n        </HeaderLink>\n        <HeaderLink to=\"/s/\" style={getLinkStyle(\"/s\")}>\n          Structures\n        </HeaderLink>\n        <HeaderLink to=\"/corpus/\" style={getLinkStyle(\"/corpus\")}>\n          Pieces\n        </HeaderLink>\n        <HeaderLink to=\"/timeline/\" style={getLinkStyle(\"/timeline\")}>\n          Timeline\n        </HeaderLink>\n      </NavLinks>\n\n      <ExternalLinks>\n        <ExternalLink\n          href=\"https://github.com/vpavlenko/rawl\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          <div className=\"octocat\" />\n        </ExternalLink>\n        <ExternalLink\n          href=\"https://vpavlenko.github.io/layouts\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          Layouts\n        </ExternalLink>\n        <ExternalLink\n          href=\"https://github.com/vpavlenko/study-music\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          Books\n        </ExternalLink>\n        <SignIn\n          user={user}\n          handleLogin={handleLogin}\n          handleLogout={handleLogout}\n          handleToggleAnalysis={handleToggleAnalysis}\n          analysisEnabled={analysisEnabled}\n        />\n      </ExternalLinks>\n    </HeaderContainer>\n  );\n};\n\nexport default AppHeader;\n","import React from \"react\";\n\nconst SignIn = ({\n  user,\n  handleLogin,\n  handleLogout,\n  handleToggleAnalysis,\n  analysisEnabled,\n}) => {\n  return (\n    <div>\n      {user && (\n        <label className=\"inline\">\n          <input\n            onChange={handleToggleAnalysis}\n            type=\"checkbox\"\n            checked={analysisEnabled}\n            name=\"analysis-enabled\"\n          />\n          Manual remeasuring\n        </label>\n      )}\n      {user ? (\n        <>\n          {\" • \"}\n          Logged in as {user.email}.{\" \"}\n          <a href=\"#\" onClick={handleLogout}>\n            Logout\n          </a>\n        </>\n      ) : (\n        <>\n          <a href=\"#\" onClick={handleLogin} style={{ color: \"#222\" }}>\n            {\".\"}\n          </a>{\" \"}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default SignIn;\n","import * as React from \"react\";\nimport styled from \"styled-components\";\n\nconst MessageBoxOuter = styled.div`\n  position: absolute;\n  z-index: 100;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  padding: var(--charH) var(--charW2);\n  box-sizing: border-box;\n\n  &[hidden] {\n    visibility: hidden;\n  }\n`;\n\nconst MessageBox = styled.div`\n  background-color: var(--button);\n  padding: var(--charH) var(--charW2);\n  box-shadow: var(--charW1) var(--charW1) var(--shadow);\n  box-sizing: border-box;\n  display: flex;\n  transition: all 250ms steps(5);\n  visibility: visible;\n  overflow: hidden;\n  max-height: 100%;\n  pointer-events: all;\n  flex-direction: column;\n  width: calc(90 * var(--charW1));\n  height: calc(40 * var(--charH));\n\n  &[hidden] {\n    width: 0;\n    height: 0;\n    visibility: hidden;\n\n    .message-box-inner {\n      overflow: hidden;\n    }\n  }\n\n  &.drop-message {\n    height: calc(9 * var(--charH) + 1px);\n    width: calc(60 * var(--charW1));\n    text-align: center;\n  }\n`;\n\nconst MessageBoxInner = styled.div`\n  color: var(--clickable);\n  border: 1px solid var(--clickable);\n  padding: var(--charH) var(--charW2);\n  overflow: auto;\n  scrollbar-gutter: stable;\n\n  &:hover {\n    scrollbar-gutter: stable;\n  }\n\n  .drop-message & {\n    overflow: hidden;\n    display: flex;\n    flex-grow: 1;\n    align-items: center;\n    justify-content: center;\n    white-space: nowrap;\n  }\n`;\n\nconst DropMessage: React.FC<{\n  dropzoneProps: {\n    isDragActive: boolean;\n  };\n}> = ({ dropzoneProps }) => (\n  <MessageBoxOuter hidden={!dropzoneProps.isDragActive}>\n    <MessageBox hidden={!dropzoneProps.isDragActive} className=\"drop-message\">\n      <MessageBoxInner>Drop a MIDI file to play.</MessageBoxInner>\n    </MessageBox>\n  </MessageBoxOuter>\n);\n\nexport default React.memo(DropMessage);\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport {\n  formatComposerName,\n  GenreItem,\n  GenreList,\n  getEmojis,\n  getUniqueStyles,\n  HasMetadata,\n} from \"../utils/corpusUtils\";\nimport { corpora } from \"./rawl/corpora/corpora\";\n\nconst TimelineContainer = styled.div`\n  padding: 2rem;\n  max-width: 1200px;\n  margin: 0 auto;\n`;\n\nconst TimelineWrapper = styled.div`\n  position: relative;\n  padding-left: 100px;\n\n  &::before {\n    content: \"\";\n    position: absolute;\n    left: 80px;\n    top: 0;\n    bottom: 0;\n    width: 2px;\n    background: #666;\n  }\n`;\n\nconst TimelineYear = styled.div`\n  position: relative;\n  margin-bottom: 2rem;\n`;\n\nconst YearMarker = styled.div`\n  position: absolute;\n  left: -100px;\n  width: 80px;\n  text-align: right;\n`;\n\nconst YearLabel = styled.span`\n  padding: 4px 8px;\n  border-radius: 4px;\n  position: relative;\n  top: 0.2rem;\n  color: #999;\n  font-weight: bold;\n`;\n\nconst ComposersGroup = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 1rem;\n`;\n\nconst ComposerCard = styled.div`\n  cursor: default;\n  font-size: 0.9rem;\n`;\n\nconst ComposerLink = styled(Link)`\n  text-decoration: none;\n  color: inherit;\n  display: inline-block;\n`;\n\ntype Composer = HasMetadata & {\n  slug: string;\n  midis: string[];\n};\n\nconst ComposerHeader = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n\n  > a {\n    flex: 0 1 auto;\n  }\n`;\n\nconst ComposerName = styled.h3`\n  margin: 0;\n  color: #fff;\n`;\n\nconst CountryFlag = styled.span`\n  cursor: pointer;\n  &:hover {\n    opacity: 0.8;\n  }\n`;\n\nconst FilterIndicator = styled.div`\n  position: fixed;\n  top: 50px;\n  right: 20px;\n  padding: 8px 16px;\n  border-radius: 4px;\n  background: #333;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst CloseFilter = styled.button`\n  background: none;\n  border: none;\n  color: white;\n  cursor: pointer;\n  padding: 4px;\n  font-size: 1.2rem;\n\n  &:hover {\n    opacity: 0.8;\n  }\n`;\n\nconst Timeline: React.FC = () => {\n  const [selectedCountry, setSelectedCountry] = React.useState<string | null>(\n    null,\n  );\n  const [selectedStyle, setSelectedStyle] = React.useState<string | null>(null);\n\n  const composers = corpora\n    .filter(\n      (composer): composer is Composer & { composerBirthYear: number } =>\n        typeof composer.composerBirthYear === \"number\",\n    )\n    .sort((a, b) => b.composerBirthYear - a.composerBirthYear);\n\n  const composersWithoutYear = corpora.filter(\n    (composer) => typeof composer.composerBirthYear !== \"number\",\n  );\n\n  const handleCountryClick = (country: string) => {\n    setSelectedStyle(null);\n    setSelectedCountry(country);\n  };\n\n  const handleStyleClick = (style: string) => {\n    setSelectedCountry(null);\n    setSelectedStyle(style);\n  };\n\n  const clearFilter = () => {\n    setSelectedCountry(null);\n    setSelectedStyle(null);\n  };\n\n  const filteredComposers = composers.filter((composer) => {\n    if (selectedCountry) {\n      return composer.country\n        ?.split(\",\")\n        .map((c) => c.trim())\n        .includes(selectedCountry);\n    }\n    if (selectedStyle) {\n      const styles = getUniqueStyles(composer.genre, composer.style);\n      return styles.includes(selectedStyle);\n    }\n    return true;\n  });\n\n  const filteredYears = [\n    ...new Set(filteredComposers.map((c) => c.composerBirthYear)),\n  ];\n\n  const ComposerCardContent = ({ composer }: { composer: Composer }) => {\n    const styles = getUniqueStyles(composer.genre, composer.style);\n\n    return (\n      <ComposerCard key={composer.slug}>\n        <ComposerHeader>\n          <ComposerLink to={`/corpus/${composer.slug}`}>\n            <ComposerName>{formatComposerName(composer.slug)}</ComposerName>\n          </ComposerLink>\n          {composer.country && (\n            <div>\n              {composer.country.split(\",\").map((c) => (\n                <CountryFlag\n                  key={c.trim()}\n                  onClick={() => handleCountryClick(c.trim())}\n                >\n                  {getEmojis(c.trim())}\n                </CountryFlag>\n              ))}\n            </div>\n          )}\n        </ComposerHeader>\n        {styles.length > 0 && (\n          <GenreList>\n            {styles.map((style, index) => (\n              <GenreItem\n                key={index}\n                onClick={() => handleStyleClick(style)}\n                style={{ cursor: \"pointer\" }}\n              >\n                {index === styles.length - 1 ? style : `${style},`}\n              </GenreItem>\n            ))}\n          </GenreList>\n        )}\n      </ComposerCard>\n    );\n  };\n\n  return (\n    <TimelineContainer>\n      <div style={{ color: \"#999\", marginBottom: 40 }}>\n        All years are approximate composer birth years.\n      </div>\n      {(selectedCountry || selectedStyle) && (\n        <FilterIndicator>\n          <span>\n            {selectedCountry && (\n              <>\n                {selectedCountry} {getEmojis(selectedCountry)}\n              </>\n            )}\n            {selectedStyle && selectedStyle}\n          </span>\n          <CloseFilter onClick={clearFilter}>×</CloseFilter>\n        </FilterIndicator>\n      )}\n      <TimelineWrapper>\n        {filteredYears.map((year) => (\n          <TimelineYear key={year}>\n            <YearMarker>\n              <YearLabel>{year}</YearLabel>\n            </YearMarker>\n            <ComposersGroup>\n              {filteredComposers\n                .filter((composer) => composer.composerBirthYear === year)\n                .map((composer) => (\n                  <ComposerCardContent\n                    key={composer.slug}\n                    composer={composer}\n                  />\n                ))}\n            </ComposersGroup>\n          </TimelineYear>\n        ))}\n      </TimelineWrapper>\n      {composersWithoutYear.length > 0 && (\n        <>\n          <ComposersGroup>\n            {composersWithoutYear\n              .filter((composer) => {\n                if (selectedCountry) {\n                  return composer.country\n                    ?.split(\",\")\n                    .map((c) => c.trim())\n                    .includes(selectedCountry);\n                }\n                if (selectedStyle) {\n                  const styles = getUniqueStyles(\n                    composer.genre,\n                    composer.style,\n                  );\n                  return styles.includes(selectedStyle);\n                }\n                return true;\n              })\n              .map((composer) => (\n                <ComposerCardContent key={composer.slug} composer={composer} />\n              ))}\n          </ComposersGroup>\n        </>\n      )}\n    </TimelineContainer>\n  );\n};\n\nexport default Timeline;\n","const API_BASE = \"https://corsproxy.io/?https://gifx.co/chip\";\nconst CATALOG_PREFIX = \"https://corsproxy.io/?https://gifx.co/music/\";\nconst SOUNDFONT_URL_PATH = \"https://rawl.rocks\";\nconst MAX_VOICES = 64;\nconst ERROR_FLASH_DURATION_MS = 6000;\nconst FORMATS = [\n  \"ay\",\n  \"gbs\",\n  \"it\",\n  \"mdx\",\n  \"mid\",\n  \"miniusf\",\n  \"mod\",\n  \"nsf\",\n  \"nsfe\",\n  \"sgc\",\n  \"spc\",\n  \"s3m\",\n  \"smf\",\n  \"v2m\",\n  \"vgm\",\n  \"vgz\",\n  \"xm\",\n];\nconst SOUNDFONT_MOUNTPOINT = \"/soundfonts\";\nconst SOUNDFONTS = [\n  {\n    label: \"User SoundFonts (Drop .sf2 to add)\",\n    items: [],\n  },\n  {\n    label: \"Small Soundfonts\",\n    items: [\n      { label: \"GMGSx Plus (6.2 MB)\", value: \"gmgsx-plus.sf2\" },\n      { label: \"Roland SC-55/SCC1 (3.3 MB)\", value: \"Scc1t2.sf2\" },\n      { label: \"Yamaha DB50XG (3.9 MB)\", value: \"Yamaha DB50XG.sf2\" },\n      {\n        label: \"Gravis Ultrasound (5.9 MB)\",\n        value: \"Gravis_Ultrasound_Classic_PachSet_v1.6.sf2\",\n      },\n      { label: \"Tim GM (6 MB)\", value: \"TimGM6mb.sf2\" },\n      { label: \"Alan Chan 5MBGMGS (4.9 MB)\", value: \"5MBGMGS.SF2\" },\n      { label: \"E-mu 2MBGMGS (2.1 MB)\", value: \"2MBGMGS.SF2\" },\n      { label: \"E-mu 8MBGMGS (8.2 MB)\", value: \"8MBGMGS.SF2\" },\n    ],\n  },\n  {\n    label: \"Large Soundfonts\",\n    items: [\n      { label: \"Masquerade 55 v006 (18.4 MB)\", value: \"masquerade55v006.sf2\" },\n      { label: \"GeneralUser GS v1.471 (31.3 MB)\", value: \"generaluser.sf2\" },\n      { label: \"Chorium Revision A (28.9 MB)\", value: \"choriumreva.sf2\" },\n      { label: \"Unison (29.3 MB)\", value: \"Unison.SF2\" },\n      { label: \"Creative 28MBGM (29.7 MB)\", value: \"28MBGM.sf2\" },\n      { label: \"Musica Theoria 2 (30.5 MB)\", value: \"mustheory2.sf2\" },\n      { label: \"Personal Copy Lite (31.4 MB)\", value: \"PCLite.sf2\" },\n      { label: \"AnotherXG (31.4 MB)\", value: \"bennetng_AnotherXG_v2-1.sf2\" },\n      { label: \"NTONYX 32Mb GM Stereo (32.5 MB)\", value: \"32MbGMStereo.sf2\" },\n      { label: \"Weeds GM 3 (54.9 MB)\", value: \"weedsgm3.sf2\" },\n    ],\n  },\n  {\n    label: \"Novelty Soundfonts\",\n    items: [\n      { label: \"PC Beep (31 KB)\", value: \"pcbeep.sf2\" },\n      { label: \"Nokia 6230i (227 KB)\", value: \"Nokia_6230i_RM-72_.sf2\" },\n      {\n        label: \"Kirby's Dream Land (271 KB)\",\n        value: \"Kirby's_Dream_Land_3.sf2\",\n      },\n      {\n        label: \"Vintage Waves v2 (315 KB)\",\n        value: \"Vintage Dreams Waves v2.sf2\",\n      },\n      {\n        label: \"Setzer's SPC Soundfont (1.2 MB)\",\n        value: \"Setzer's_SPC_Soundfont.sf2\",\n      },\n      {\n        label: \"SNES GM (1.9 MB)\",\n        value: \"Super_Nintendo_Unofficial_update.sf2\",\n      },\n      { label: \"Nokia 30 (2.2 MB)\", value: \"Nokia_30.sf2\" },\n      {\n        label: \"LG Wink/Motorola ROKR (3.3 MB)\",\n        value: \"LG_Wink_Style_T310_Soundfont.sf2\",\n      },\n      {\n        label: \"Diddy Kong Racing DS (13.7 MB)\",\n        value: \"Diddy_Kong_Racing_DS_Soundfont.sf2\",\n      },\n      {\n        label: \"Regression FM v1.99g (14.4 MB)\",\n        value: \"R_FM_v1.99g-beta.sf2\",\n      },\n      {\n        label: \"Ultimate Megadrive (63.2 MB)\",\n        value: \"The Ultimate Megadrive Soundfont.sf2\",\n      },\n    ],\n  },\n  {\n    label: \"Piano Soundfonts\",\n    items: [\n      {\n        label: \"Yamaha Grand Lite v1.1 (21.8 MB)\",\n        value: \"Yamaha-Grand-Lite-v1.1.sf2\",\n      },\n      {\n        label: \"Abbey Steinway D v1.9 (40.2 MB)\",\n        value: \"Abbey-Steinway-D-v1.9.sf2\",\n      },\n      {\n        label: \"Chateau Grand Lite v1.0 (49.1 MB)\",\n        value: \"Chateau Grand Lite-v1.0.sf2\",\n      },\n      {\n        label: \"Steinway Grand v1.0 (145 MB)\",\n        value: \"Steinway Grand-SF4U-v1.sf2\",\n      },\n    ],\n  },\n];\n\n// needs to be a CommonJS module - used in node.js server\nmodule.exports = {\n  API_BASE,\n  CATALOG_PREFIX,\n  ERROR_FLASH_DURATION_MS,\n  FORMATS,\n  MAX_VOICES,\n  SOUNDFONT_MOUNTPOINT,\n  SOUNDFONT_URL_PATH,\n  SOUNDFONTS,\n};\n","import * as React from \"react\";\nimport { ReadableTextBlock } from \"./Book\";\n\nconst AboutTop100Corpus = (\n  <ReadableTextBlock>\n    <h2>How did I pick the pieces?</h2>\n    <p>\n      I went through{\" \"}\n      <a\n        href=\"https://musescore.com/sheetmusic/non-official?sort=view_count\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        https://musescore.com/sheetmusic/non-official?sort=view_count\n      </a>\n      . My goal was to find 100 most popular composers and take the most popular\n      score from each of them.\n    </p>\n\n    <p>\n      I've gathered the corpus on Oct 31, 2024. The view count on the most\n      popular work doesn't equal the work's popularity even on MuseScore. Eg.\n      \"River flows in you\" has 7.3M on the most popular arrangement, but their\n      next top 5 arrangements (out of 687 community scores of this title) have\n      1.5M more view counts. I don't add up all view counts across all versions,\n      I purely use the top 1 - which makes a bit of a random selection at the\n      lower end of the top 100.\n    </p>\n\n    <p>\n      Some compositions which almost made it to top 100 by a very narrow margin\n      are BTS's \"I Need You\", as well as themes from \"Godfather\" and \"The Pink\n      Panther\". Next time!\n    </p>\n\n    <p>\n      I don't use the number of view counts (position within the top 100)\n      throughout the book on harmony. I care about the total range of harmonic\n      devices used, not about their relative popularity weighted by each work's\n      popularity.\n    </p>\n\n    <p>\n      Neither do I want it to be weighted by the number of distinct pieces of\n      the same composer which are popular. So, as a result of my method I\n      include \"Für Elise\" and therefore I exclude \"Moonlight\" and \"Tempest\". Out\n      of the entire Bach heritage I include exactly a single WTC-1 C major\n      prelude. As a benefit, I don't get 7 works of Chopin into the top 100 as I\n      would otherwise. Also we cut on Liszt, Joe Hisaishi, Koji Kondo, Ed\n      Sheeran etc.\n    </p>\n\n    <p>\n      In most cases, I take the same arrangement that scored the most views.\n      Sometimes I find an arrangement that suits better to my narrative - maybe\n      by having less mistakes, original key, better MIDI sound or so.\n    </p>\n\n    <p>\n      I only take solo piano arrangements because I want to focus on harmony,\n      not on the arrangement. For \"We Are Number One\" the most popular version\n      is a band arrangement, and I represent this piece by its piano\n      arrangement. \"Solo piano\" doesn't guarantee that the arrangement is\n      actually playable by a mortal two-handed human – some of them incorporate\n      more lines like octave bass + chords + melody. Since we study structures\n      and harmony in general, rather that a piano-specific idiom, this is\n      acceptable.\n    </p>\n\n    <p>\n      In the special case of \"He's a Pirate\", I attribute it to Klaus Badelt to\n      avoid excluding it because of Hans Zimmer's \"Interstellar\". Call it data\n      manipulation, but they are even written in different minors (major V vs\n      natural).\n    </p>\n\n    <p>\n      I attribute \"Runaway\" to Kanye West, since the melody and the bass line\n      was probably created by him first and only later arranged by Ramin\n      Djawadi.\n    </p>\n\n    <p>\n      In the case of \"G Minor Bach\" the original harmony was modernized so much\n      that I include this track under Luo Ni.\n    </p>\n\n    <p>\n      Also, I ignore Turkish tabs from Musa Çetiner's account. This is a great\n      material which I'd look into separately. I'm not sure these view counts\n      are coming from anywhere outside of the Turkish-speaking world.\n    </p>\n\n    <p>\n      For ABBA, I take \"The Winner Takes It All\" instead of \"Chiquitita\",\n      because \"Chiquitita\", although higher in view counts, is represented only\n      by its ending.\n    </p>\n\n    <p>\n      As I understand, the copyright takedowns of community scores didn't affect\n      my corpus - even John Williams got represented.\n    </p>\n  </ReadableTextBlock>\n);\n\nexport default AboutTop100Corpus;\n","import React, {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { components, Theme } from \"react-select\";\nimport CreatableSelect from \"react-select/creatable\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../AppContext\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport {\n  Analysis,\n  CompressedNotes,\n  deltaCoding,\n  FrozenNotesType,\n  getPhraseStarts,\n  PitchClass,\n  rehydrateSnippet,\n  Snippet,\n  TIME_SCALE_FACTOR,\n} from \"./analysis\";\nimport { getModulations, SecondsSpan } from \"./Rawl\";\nimport SnippetItem from \"./SnippetItem\";\nimport SnippetList from \"./SnippetList\";\nimport { SystemLayoutProps } from \"./SystemLayout\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n  background-color: black;\n  color: white;\n`;\n\nconst DebugContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin-top: 20px;\n`;\n\nconst DebugColumn = styled.div`\n  width: 48%;\n`;\n\nconst FrozenNotesDisplay = styled.div`\n  margin-bottom: 20px;\n`;\n\nconst JsonDisplay = styled.pre`\n  white-space: pre-wrap;\n  word-break: break-all;\n  cursor: pointer;\n  &:active {\n    background-color: #333;\n  }\n  font-size: 8px;\n`;\n\nconst RangeInputs = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n`;\n\nconst NumberInput = styled.input`\n  width: 60px;\n  margin-right: 10px;\n`;\n\nconst CopyIndicator = styled.div<{ visible: boolean }>`\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: rgba(0, 0, 0, 0.8);\n  color: white;\n  padding: 10px 20px;\n  border-radius: 5px;\n  opacity: ${(props) => (props.visible ? 1 : 0)};\n  transition: opacity 0.3s;\n  z-index: 9999;\n`;\n\nconst SnippetListContainer = styled.div`\n  margin-top: 20px;\n  border-top: 1px solid #444;\n  padding-top: 20px;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n`;\n\nconst ErrorMessage = styled.div`\n  color: #ff6b6b;\n  margin-top: 10px;\n`;\n\nconst StyledSelect = styled(CreatableSelect).attrs({\n  classNamePrefix: \"react-select\",\n})`\n  width: 600px;\n  margin-left: 10px;\n\n  .react-select__menu {\n    z-index: 9999;\n  }\n\n  .react-select__option--is-focused {\n    background-color: #deebff;\n  }\n`;\n\nconst SaveButton = styled.button<{ unsaved: boolean }>`\n  margin-top: 10px;\n  background-color: ${(props) => (props.unsaved ? \"#4CAF50\" : \"#808080\")};\n  color: white;\n  padding: 10px 20px;\n  border: none;\n  border-radius: 5px;\n  cursor: ${(props) => (props.unsaved ? \"pointer\" : \"default\")};\n  transition: background-color 0.3s;\n\n  &:hover {\n    background-color: ${(props) => (props.unsaved ? \"#45a049\" : \"#808080\")};\n  }\n`;\n\nconst FlashOverlay = styled.div<{ visible: boolean }>`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(255, 255, 255, 0.5);\n  opacity: ${(props) => (props.visible ? 1 : 0)};\n  transition: opacity 0.3s;\n  pointer-events: none;\n  z-index: 9999;\n`;\n\n// Custom components for react-select\nconst customComponents = {\n  Option: (props) => (\n    <components.Option {...props}>\n      {props.isSelected ? \"✓ \" : \"\"}\n      {props.label}\n    </components.Option>\n  ),\n};\n\n// Custom theme for react-select\nconst selectTheme = (theme: Theme) => ({\n  ...theme,\n  colors: {\n    ...theme.colors,\n    primary: \"#4a90e2\",\n    primary75: \"#4a90e2cc\",\n    primary50: \"#4a90e280\",\n    primary25: \"#4a90e240\",\n    danger: \"#de350b\",\n    dangerLight: \"#de350b40\",\n    neutral0: \"white\",\n    neutral5: \"#f2f2f2\",\n    neutral10: \"#e6e6e6\",\n    neutral20: \"#cccccc\",\n    neutral30: \"#b3b3b3\",\n    neutral40: \"#999999\",\n    neutral50: \"#808080\",\n    neutral60: \"#666666\",\n    neutral70: \"#4d4d4d\",\n    neutral80: \"#333333\",\n    neutral90: \"#1a1a1a\",\n  },\n});\n\n// Custom styles for react-select\nconst selectStyles = {\n  control: (provided) => ({\n    ...provided,\n    backgroundColor: \"white\",\n    borderColor: \"#cccccc\",\n  }),\n  menu: (provided) => ({\n    ...provided,\n    backgroundColor: \"white\",\n    zIndex: 9999,\n  }),\n  option: (provided, state) => ({\n    ...provided,\n    backgroundColor: state.isSelected ? \"#4a90e2\" : \"white\",\n    color: state.isSelected ? \"white\" : \"black\",\n    \"&:hover\": {\n      backgroundColor: \"#f0f0f0\",\n      color: \"black\",\n    },\n  }),\n  singleValue: (provided) => ({\n    ...provided,\n    color: \"black\",\n  }),\n  input: (provided) => ({\n    ...provided,\n    color: \"black\",\n  }),\n  placeholder: (provided) => ({\n    ...provided,\n    color: \"#808080\",\n  }),\n  indicatorSeparator: (provided) => ({\n    ...provided,\n    display: \"none\",\n  }),\n  dropdownIndicator: (provided) => ({\n    ...provided,\n    color: \"#666666\",\n    \"&:hover\": {\n      color: \"#333333\",\n    },\n  }),\n  clearIndicator: (provided) => ({\n    ...provided,\n    color: \"#666666\",\n    \"&:hover\": {\n      color: \"#333333\",\n    },\n  }),\n};\n\ninterface FrozenNotesLayoutProps extends SystemLayoutProps {\n  saveAnalysis: (analysis: Analysis) => void;\n}\n\n// Add this new function to count tag occurrences\nconst countTagOccurrences = (\n  analyses: Record<string, Analysis>,\n): Record<string, number> => {\n  const tagCounts: Record<string, number> = {};\n  Object.values(analyses).forEach((analysis) => {\n    if (analysis.snippets) {\n      analysis.snippets.forEach((snippet) => {\n        if (snippet.tag) {\n          tagCounts[snippet.tag] = (tagCounts[snippet.tag] || 0) + 1;\n        }\n      });\n    }\n  });\n  return tagCounts;\n};\n\nconst MeasureTimesContainer = styled.div`\n  margin-top: 20px;\n  padding-top: 20px;\n  border-top: 1px solid #444;\n`;\n\nconst MeasureTimesList = styled.pre`\n  font-size: 12px;\n  color: #888;\n  white-space: pre-wrap;\n  word-break: break-all;\n`;\n\nconst updateSnippetPhraseStarts = (\n  snippet: Snippet,\n  analysis: Analysis,\n  maxMeasures: number,\n): Snippet => {\n  if (!snippet.phraseStarts) {\n    const allPhraseStarts = getPhraseStarts(analysis, maxMeasures);\n    const snippetPhraseStarts = allPhraseStarts.filter(\n      (measure) =>\n        measure >= snippet.measuresSpan[0] &&\n        measure <= snippet.measuresSpan[1],\n    );\n    return {\n      ...snippet,\n      phraseStarts: snippetPhraseStarts,\n    };\n  }\n  return snippet;\n};\n\nconst FrozenNotesLayout: React.FC<FrozenNotesLayoutProps> = ({\n  frozenNotes,\n  measuresAndBeats,\n  analysis,\n  saveAnalysis,\n}) => {\n  const { analyses } = useContext(AppContext);\n  const [dataRange, setDataRange] = useState<[number, number]>([1, 4]);\n  const [inputRange, setInputRange] = useState<[string, string]>([\"1\", \"4\"]);\n  const [tagName, setTagName] = useState<{\n    value: string;\n    label: string;\n  } | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [copyIndicatorVisible, setCopyIndicatorVisible] = useState(false);\n  const [menuIsOpen, setMenuIsOpen] = useState(false);\n  const [tagError, setTagError] = useState<string | null>(null);\n  const [unsavedChanges, setUnsavedChanges] = useState(false);\n  const [flashVisible, setFlashVisible] = useState(false);\n  const [phraseStartsUpdated, setPhraseStartsUpdated] =\n    useState<boolean>(false);\n\n  const maxMeasure = measuresAndBeats?.measures.length || 1;\n\n  const validateAndUpdateRange = useCallback(\n    (newRange: [string, string]) => {\n      const [start, end] = newRange.map((val) => {\n        const num = parseInt(val, 10);\n        return isNaN(num) ? 0 : Math.max(1, Math.min(num, maxMeasure));\n      });\n\n      if (start > 0 && end > 0 && start <= end) {\n        setDataRange([start, end]);\n        setError(null);\n      } else {\n        setError(\"Please enter a valid measure range.\");\n      }\n    },\n    [maxMeasure],\n  );\n\n  const handleRangeChange = useCallback(\n    (index: number) => (e: React.ChangeEvent<HTMLInputElement>) => {\n      const newValue = e.target.value;\n      const newRange = [...inputRange] as [string, string];\n      newRange[index] = newValue;\n\n      // If measureStart > measureEnd, set measureEnd := measureStart\n      if (index === 0 && parseInt(newValue, 10) > parseInt(newRange[1], 10)) {\n        newRange[1] = newValue;\n      }\n\n      setInputRange(newRange);\n\n      if (newValue !== \"\") {\n        validateAndUpdateRange(newRange);\n      }\n      setUnsavedChanges(true);\n    },\n    [inputRange, validateAndUpdateRange],\n  );\n\n  const handleRangeBlur = useCallback(\n    (index: number) => () => {\n      const newRange = [...inputRange] as [string, string];\n      if (newRange[index] === \"\") {\n        newRange[index] = index === 0 ? \"1\" : maxMeasure.toString();\n      }\n      setInputRange(newRange);\n      validateAndUpdateRange(newRange);\n    },\n    [inputRange, maxMeasure, validateAndUpdateRange],\n  );\n\n  const createFrozenNotes = useCallback((): FrozenNotesType | null => {\n    if (!frozenNotes || !measuresAndBeats || !analysis) {\n      console.error(\"Missing required props in createFrozenNotes\");\n      return null;\n    }\n\n    const startMeasure = Math.max(0, dataRange[0] - 1);\n    const endMeasure = Math.min(dataRange[1], maxMeasure) - 1;\n\n    const startTime = measuresAndBeats.measures[startMeasure];\n    const endTime = measuresAndBeats.measures[endMeasure + 1];\n\n    const notesInVoices: FrozenNotesType[\"notesInVoices\"] = frozenNotes\n      // First filter out any voice that only contains drum notes\n      .filter((voiceNotes) => voiceNotes.some((note) => !note.isDrum))\n      .map((voiceNotes) => {\n        const lengthToNotes: CompressedNotes = {};\n        // Then filter out drum notes within each voice\n        voiceNotes\n          .filter((note) => !note.isDrum)\n          .forEach((note) => {\n            if (note.span[1] >= startTime && note.span[0] < endTime) {\n              const start = Math.round(\n                (note.span[0] - startTime) * TIME_SCALE_FACTOR,\n              );\n              const length = Math.round(\n                (note.span[1] - note.span[0]) * TIME_SCALE_FACTOR,\n              );\n              const midiNumber = note.note.midiNumber;\n\n              if (!lengthToNotes[length]) {\n                lengthToNotes[length] = {};\n              }\n              if (!lengthToNotes[length][midiNumber]) {\n                lengthToNotes[length][midiNumber] = [start];\n              } else {\n                (lengthToNotes[length][midiNumber] as number[]).push(start);\n              }\n            }\n          });\n\n        // Apply delta coding to the start times\n        Object.values(lengthToNotes).forEach((midiNumbers) => {\n          Object.keys(midiNumbers).forEach((midiNumber) => {\n            const starts = midiNumbers[midiNumber] as number[];\n            midiNumbers[midiNumber] = deltaCoding(starts.sort((a, b) => a - b));\n          });\n        });\n\n        return lengthToNotes;\n      });\n\n    const modulations = getModulations(analysis);\n    // Find the latest modulation that occurs before or at the start measure\n    const initialModulation = modulations\n      .filter((mod) => mod.measure <= startMeasure)\n      .reduce(\n        (latest, current) =>\n          current.measure > latest.measure ? current : latest,\n        { measure: -1, tonic: 0 as PitchClass }, // Default to C if no previous modulations\n      );\n\n    // Get all modulations within our slice, including the initial one\n    const relevantModulations = [\n      initialModulation,\n      ...modulations.filter(\n        (mod) => mod.measure > startMeasure && mod.measure <= endMeasure,\n      ),\n    ];\n\n    const frozenAnalysis: FrozenNotesType[\"analysis\"] = {\n      modulations: Object.fromEntries(\n        relevantModulations.map((mod) => [\n          mod.measure === initialModulation.measure\n            ? 1\n            : mod.measure - startMeasure + 1,\n          mod.tonic,\n        ]),\n      ),\n      measuresAndBeats: {\n        measures: deltaCoding(\n          measuresAndBeats.measures\n            .slice(startMeasure, endMeasure + 2)\n            .map((time) => Math.round((time - startTime) * TIME_SCALE_FACTOR)),\n        ),\n        beats: deltaCoding(\n          measuresAndBeats.beats\n            .filter((time) => time >= startTime && time < endTime)\n            .map((time) => Math.round((time - startTime) * TIME_SCALE_FACTOR)),\n        ),\n      },\n    };\n\n    return {\n      notesInVoices,\n      analysis: frozenAnalysis,\n    };\n  }, [frozenNotes, dataRange, measuresAndBeats, analysis, maxMeasure]);\n\n  const snippet: Snippet | null = useMemo(() => {\n    const frozenNotesData = createFrozenNotes();\n    if (!frozenNotesData) return null;\n\n    // Get phrase starts from the analysis for the current measure range\n    const allPhraseStarts = getPhraseStarts(\n      analysis,\n      measuresAndBeats.measures.length,\n    );\n    const snippetPhraseStarts = allPhraseStarts.filter(\n      (measure) => measure >= dataRange[0] && measure <= dataRange[1],\n    );\n\n    return {\n      tag: tagName?.value || \"\",\n      frozenNotes: frozenNotesData,\n      measuresSpan: dataRange,\n      phraseStarts: snippetPhraseStarts,\n    };\n  }, [\n    createFrozenNotes,\n    tagName,\n    dataRange,\n    analysis,\n    measuresAndBeats?.measures.length,\n  ]);\n\n  const exportString = useMemo(() => {\n    return snippet ? JSON.stringify(snippet) : \"\";\n  }, [snippet]);\n\n  const resetToDefaults = useCallback(() => {\n    setInputRange([\"1\", \"4\"]);\n    setDataRange([1, 4]);\n    setTagName(null);\n  }, []);\n\n  const saveSnippet = useCallback(() => {\n    if (!snippet) return;\n    if (!tagName || !tagName.value.trim()) {\n      setTagError(\"Please enter a tag name before saving.\");\n      return;\n    }\n    setTagError(null);\n    const updatedAnalysis: Analysis = {\n      ...analysis,\n      snippets: [...(analysis.snippets || []), snippet],\n    };\n    saveAnalysis(updatedAnalysis);\n    setUnsavedChanges(false);\n    setFlashVisible(true);\n    setTimeout(() => setFlashVisible(false), 300);\n\n    // Reset input fields to defaults\n    resetToDefaults();\n  }, [analysis, saveAnalysis, snippet, tagName, resetToDefaults]);\n\n  const deleteSnippet = useCallback(\n    (index: number) => {\n      const snippetToDelete = analysis.snippets?.[index];\n      const updatedAnalysis: Analysis = {\n        ...analysis,\n        snippets: (analysis.snippets || []).filter((_, i) => i !== index),\n      };\n      saveAnalysis(updatedAnalysis);\n\n      // Set the measure range of the deleted snippet into input fields\n      if (snippetToDelete && snippetToDelete.measuresSpan) {\n        const [start, end] = snippetToDelete.measuresSpan;\n        setInputRange([start.toString(), end.toString()]);\n        setDataRange([start, end]);\n      }\n\n      // Clear the tag name\n      setTagName(null);\n\n      // Set unsaved changes to true\n      setUnsavedChanges(true);\n\n      // Set focus to the tag input\n      setTimeout(() => {\n        if (selectRef.current) {\n          selectRef.current.focus();\n        }\n      }, 0);\n    },\n    [analysis, saveAnalysis, setInputRange, setDataRange],\n  );\n\n  const copyToClipboard = useCallback(() => {\n    if (!exportString) return;\n    navigator.clipboard.writeText(exportString).then(() => {\n      setCopyIndicatorVisible(true);\n      setTimeout(() => setCopyIndicatorVisible(false), 2000);\n    });\n  }, [exportString]);\n\n  const noteHeight = 3; // Match the initial value in StackedSystemLayout\n\n  const allTags = useMemo(() => {\n    const tagSet = new Set<string>();\n    const tagCounts = countTagOccurrences(analyses);\n    Object.values(analyses).forEach((analysis) => {\n      if (analysis.snippets) {\n        analysis.snippets.forEach((snippet) => {\n          if (snippet.tag) {\n            tagSet.add(snippet.tag);\n          }\n        });\n      }\n    });\n    return Array.from(tagSet).map((tag) => ({\n      value: tag,\n      label: `${tag} (${tagCounts[tag]})`,\n    }));\n  }, [analyses]);\n\n  const rehydratedSnippet = useMemo(() => {\n    if (!snippet) return null;\n    return rehydrateSnippet(snippet);\n  }, [snippet]);\n\n  const selectRef = useRef(null);\n\n  const saveButtonRef = useRef<HTMLButtonElement>(null);\n\n  const handleSelectChange = (selectedOption, actionMeta) => {\n    if (actionMeta.action === \"create-option\") {\n      setTagName({ value: selectedOption.value, label: selectedOption.value });\n    } else {\n      setTagName(selectedOption as { value: string; label: string } | null);\n    }\n    setMenuIsOpen(false);\n    setUnsavedChanges(true);\n\n    // Move focus to Save Snippet button after creating a new tag or selecting an existing one\n    setTimeout(() => {\n      saveButtonRef.current?.focus();\n    }, 0);\n  };\n\n  const measureStartRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (measureStartRef.current) {\n      measureStartRef.current.focus();\n      measureStartRef.current.select(); // Select the content\n    }\n  }, []);\n\n  // Add useEffect to handle book:index tag on entry\n  useEffect(() => {\n    if (!measuresAndBeats || !analysis?.snippets) return;\n\n    const bookIndexSnippets = analysis.snippets.filter((s) =>\n      s.tag.startsWith(\"book:index\"),\n    );\n\n    const needsUpdate = bookIndexSnippets.some((s) => !s.secondsSpan);\n    if (needsUpdate) {\n      // Update all book:index snippets with secondsSpan\n      const updatedSnippets = analysis.snippets.map((s) => {\n        if (\n          s.tag.startsWith(\"book:index\") &&\n          s.measuresSpan &&\n          !s.secondsSpan\n        ) {\n          const [startMeasure, endMeasure] = s.measuresSpan;\n          const startTime = measuresAndBeats.measures[startMeasure - 1];\n          const endTime = measuresAndBeats.measures[endMeasure];\n\n          return {\n            ...s,\n            secondsSpan: [startTime, endTime] as SecondsSpan,\n          };\n        }\n        return s;\n      });\n\n      // Save the updated analysis\n      saveAnalysis({\n        ...analysis,\n        snippets: updatedSnippets,\n      });\n\n      // Show toast notification\n      setCopyIndicatorVisible(true);\n      setTimeout(() => setCopyIndicatorVisible(false), 2000);\n    }\n  }, [analysis, measuresAndBeats, saveAnalysis]);\n\n  useEffect(() => {\n    if (phraseStartsUpdated || !analysis?.snippets || !measuresAndBeats) return;\n\n    const snippetsNeedingUpdate = analysis.snippets.filter(\n      (s) => !s.phraseStarts,\n    );\n\n    if (snippetsNeedingUpdate.length > 0) {\n      const maxMeasures = measuresAndBeats.measures.length;\n      const updatedSnippets = analysis.snippets.map((s) =>\n        updateSnippetPhraseStarts(s, analysis, maxMeasures),\n      );\n\n      // Only update if there are actual changes\n      if (\n        JSON.stringify(updatedSnippets) !== JSON.stringify(analysis.snippets)\n      ) {\n        saveAnalysis({\n          ...analysis,\n          snippets: updatedSnippets,\n        });\n\n        setCopyIndicatorVisible(true);\n        setTimeout(() => setCopyIndicatorVisible(false), 2000);\n        setPhraseStartsUpdated(true);\n      }\n    }\n  }, [analysis, measuresAndBeats, phraseStartsUpdated, saveAnalysis]);\n\n  // Add this check after all hooks have been called\n  if (!frozenNotes || !measuresAndBeats || !analysis) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <ErrorBoundary>\n      <Container>\n        <FlashOverlay visible={flashVisible} />\n        <FrozenNotesDisplay>\n          <h2>Frozen Notes</h2>\n          <RangeInputs>\n            <label>Measures:&nbsp;</label>\n            <NumberInput\n              ref={measureStartRef}\n              type=\"number\"\n              min=\"1\"\n              max={maxMeasure}\n              value={inputRange[0]}\n              onChange={handleRangeChange(0)}\n              onBlur={handleRangeBlur(0)}\n            />\n            <span>to&nbsp;</span>\n            <NumberInput\n              type=\"number\"\n              min=\"1\"\n              max={maxMeasure}\n              value={inputRange[1]}\n              onChange={handleRangeChange(1)}\n              onBlur={handleRangeBlur(1)}\n            />\n\n            <StyledSelect\n              ref={selectRef}\n              value={tagName}\n              onChange={(selectedOption, actionMeta) => {\n                handleSelectChange(selectedOption, actionMeta);\n                setUnsavedChanges(true);\n              }}\n              options={allTags}\n              isClearable\n              placeholder=\"Select or create a tag\"\n              theme={selectTheme}\n              styles={selectStyles}\n              components={customComponents}\n              menuIsOpen={menuIsOpen}\n              onMenuOpen={() => setMenuIsOpen(true)}\n              onMenuClose={() => setMenuIsOpen(false)}\n              onBlur={() => setMenuIsOpen(false)}\n            />\n          </RangeInputs>\n          {error && <ErrorMessage>{error}</ErrorMessage>}\n          {tagError && <ErrorMessage>{tagError}</ErrorMessage>}\n          {!error && snippet && (\n            <>\n              <h3>Rehydrated Notes</h3>\n              <SnippetItem\n                snippet={snippet}\n                index={-1}\n                noteHeight={noteHeight}\n              />\n              <JsonDisplay onClick={copyToClipboard}>\n                {exportString}\n              </JsonDisplay>\n              <SaveButton\n                ref={saveButtonRef}\n                onClick={saveSnippet}\n                unsaved={unsavedChanges}\n                disabled={!unsavedChanges}\n              >\n                {unsavedChanges ? \"Save Snippet\" : \"Snippet Saved\"}\n              </SaveButton>\n            </>\n          )}\n        </FrozenNotesDisplay>\n\n        <SnippetListContainer>\n          <h3>Saved Snippets</h3>\n          <SnippetList\n            snippets={analysis.snippets || []}\n            noteHeight={noteHeight}\n            onSnippetClick={() => {}}\n            deleteSnippet={deleteSnippet}\n          />\n        </SnippetListContainer>\n\n        <CopyIndicator visible={copyIndicatorVisible}>\n          {phraseStartsUpdated\n            ? `phraseStarts updated for ${analysis.snippets\n                ?.filter((s) => !s.phraseStarts || s.phraseStarts.length === 0)\n                .map((s) => s.tag)\n                .filter(Boolean)\n                .join(\", \")}`\n            : \"Copied to clipboard!\"}\n        </CopyIndicator>\n      </Container>\n    </ErrorBoundary>\n  );\n};\n\nexport default FrozenNotesLayout;\n","import React, { useCallback, useMemo } from \"react\";\nimport styled from \"styled-components\";\nimport { Analysis, MeasuresSpan } from \"./analysis\";\nimport { AnalysisGrid } from \"./AnalysisGrid\";\nimport { getNoteRectangles as getSystemNoteRectangles } from \"./getNoteRectangles\";\nimport { ColoredNote, Note } from \"./parseMidi\";\nimport { getNoteColor } from \"./Rawl\";\nimport { MeasuresAndBeats, MidiRange } from \"./SystemLayout\";\n\ninterface EnhancedFrozenNotesProps {\n  notes: Note[][];\n  toX: (seconds: number) => number;\n  midiNumberToY: (midiNumber: number) => number;\n  maxWidth: number;\n  noteHeight: number;\n  timeRange: [number, number];\n  analysis: Analysis;\n  measuresAndBeats: MeasuresAndBeats;\n  startMeasure: number;\n  phraseStarts?: number[];\n  isPreview?: boolean;\n  hoveredColors?: string[] | null;\n}\n\nconst FrozenNotesContainer = styled.div`\n  position: relative;\n  overflow: hidden;\n`;\n\nconst HeaderStaff = styled.div`\n  position: relative;\n  height: 16px;\n  margin-bottom: 0px;\n`;\n\nconst EnhancedFrozenNotes: React.FC<EnhancedFrozenNotesProps> = ({\n  notes,\n  midiNumberToY,\n  maxWidth,\n  analysis,\n  measuresAndBeats,\n  noteHeight,\n  startMeasure,\n  toX,\n  timeRange,\n  phraseStarts,\n  isPreview = false,\n  hoveredColors,\n}) => {\n  const midiRange = useMemo(() => {\n    let min = Infinity;\n    let max = -Infinity;\n    notes.forEach((voiceNotes) => {\n      voiceNotes.forEach((note) => {\n        const midiNumber = note.note.midiNumber;\n        min = Math.min(min, midiNumber);\n        max = Math.max(max, midiNumber);\n      });\n    });\n    return [min, max] as MidiRange;\n  }, [notes]);\n\n  const height = (midiRange[1] - midiRange[0] + 2) * noteHeight;\n\n  const adjustedNotes = useMemo(() => {\n    return notes.map((voiceNotes) =>\n      voiceNotes.map((note) => ({\n        ...note,\n        color: getNoteColor(note, analysis, measuresAndBeats.measures),\n        isActive: true,\n      })),\n    );\n  }, [notes, analysis, measuresAndBeats.measures]);\n\n  const getNoteRectangles = useCallback(\n    (notes: ColoredNote[]) =>\n      getSystemNoteRectangles(\n        notes,\n        midiNumberToY,\n        noteHeight,\n        null, // handleNoteClick\n        () => {}, // handleMouseEnter\n        () => {}, // handleMouseLeave\n        toX,\n        false, // enableManualRemeasuring\n        hoveredColors,\n      ),\n    [midiNumberToY, noteHeight, toX, hoveredColors],\n  );\n\n  const dummyMeasureSelection = useMemo(\n    () => ({\n      selectedMeasure: null,\n      selectMeasure: () => {},\n      splitAtMeasure: () => {},\n      mergeAtMeasure: () => {},\n      renumberMeasure: () => {},\n    }),\n    [],\n  );\n\n  const sectionSpan: MeasuresSpan = useMemo(() => {\n    const paddingLength = startMeasure - 1;\n    const endMeasure = measuresAndBeats.measures.length - 1;\n    return [paddingLength, endMeasure];\n  }, [startMeasure, measuresAndBeats.measures.length]);\n\n  const memoizedNoteRectangles = useMemo(() => {\n    return adjustedNotes.map((voiceNotes) =>\n      getNoteRectangles(voiceNotes as ColoredNote[]),\n    );\n  }, [adjustedNotes, getNoteRectangles]);\n\n  return (\n    <FrozenNotesContainer>\n      <HeaderStaff>\n        <AnalysisGrid\n          analysis={analysis}\n          measuresAndBeats={measuresAndBeats}\n          midiNumberToY={() => 0}\n          noteHeight={16}\n          phraseStarts={phraseStarts || []}\n          midiRange={[0, 0]}\n          measureSelection={dummyMeasureSelection}\n          showHeader={true}\n          showTonalGrid={false}\n          secondsToX={toX}\n          sectionSpan={sectionSpan}\n        />\n      </HeaderStaff>\n      <div\n        style={{\n          width: `${maxWidth}px`,\n          height: `${height}px`,\n          position: \"relative\",\n          overflow: \"hidden\",\n        }}\n      >\n        <AnalysisGrid\n          analysis={analysis}\n          measuresAndBeats={measuresAndBeats}\n          midiNumberToY={midiNumberToY}\n          noteHeight={noteHeight}\n          phraseStarts={phraseStarts || []}\n          midiRange={midiRange}\n          measureSelection={dummyMeasureSelection}\n          showHeader={false}\n          showTonalGrid={true}\n          secondsToX={toX}\n          sectionSpan={sectionSpan}\n        />\n        <div\n          style={{\n            position: \"relative\",\n            height: `${height}px`,\n            width: `${maxWidth}px`,\n            overflow: \"hidden\",\n          }}\n        >\n          {memoizedNoteRectangles.map((voiceRectangles, index) => (\n            <div key={index}>{voiceRectangles}</div>\n          ))}\n        </div>\n      </div>\n    </FrozenNotesContainer>\n  );\n};\n\nexport default EnhancedFrozenNotes;\n","import * as React from \"react\";\nimport {\n  ReactNode,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { DUMMY_CALLBACK, VoiceMask } from \"../App\";\nimport { Analysis, getPhraseStarts, MeasuresSpan } from \"./analysis\";\nimport { AnalysisGrid, Cursor, MeasureSelection } from \"./AnalysisGrid\";\nimport { getNoteRectangles, MouseHandlers } from \"./getNoteRectangles\";\nimport ControlPanel, { debounce } from \"./layouts/ControlPanel\";\nimport { MeasureNumbers } from \"./layouts/MeasureNumbers\";\nimport MergedVoicesLegend from \"./layouts/MergedVoicesLegend\";\nimport { VoiceName } from \"./layouts/VoiceName\";\nimport { ColoredNote, ColoredNotesInVoices, Note } from \"./parseMidi\";\nimport { SecondsConverter, SecondsSpan, SetVoiceMask } from \"./Rawl\";\n\nexport type MeasuresAndBeats = {\n  measures: number[];\n  beats: number[];\n  ticks?: { measures: number[] };\n};\n\nconst getAverageMidiNumber = (notes: Note[]) =>\n  notes.length > 0\n    ? notes[0].isDrum\n      ? 0\n      : notes.reduce((sum, note) => sum + note.note.midiNumber, 0) /\n        notes.length\n    : Infinity;\n\nexport type MidiRange = [number, number];\n\nconst getMidiRange = (notes: Note[], span?: SecondsSpan): MidiRange => {\n  let min = +Infinity;\n  let max = -Infinity;\n  for (const note of notes) {\n    if (span && (note.span[1] < span[0] || note.span[0] > span[1])) {\n      continue;\n    }\n    const { midiNumber, relativeNumber } = note.note;\n    const number = relativeNumber === undefined ? midiNumber : relativeNumber;\n    min = Math.min(min, number);\n    max = Math.max(max, number);\n  }\n  return [min, max];\n};\n\nexport type ScrollInfo = {\n  left: number;\n  right: number;\n};\n\nexport const Voice: React.FC<{\n  notes: ColoredNote[];\n  measuresAndBeats: MeasuresAndBeats;\n  analysis: Analysis;\n  cursor: ReactNode;\n  phraseStarts: number[];\n  mouseHandlers: MouseHandlers;\n  measureSelection: MeasureSelection;\n  scrollInfo: ScrollInfo;\n  voiceName: string;\n  setVoiceMask: SetVoiceMask;\n  voiceIndex: number;\n  voiceMask: VoiceMask;\n  showTonalGrid?: boolean;\n  noteHeight: number;\n  secondsToX: SecondsConverter;\n  xToSeconds: SecondsConverter;\n  sectionSpan?: MeasuresSpan;\n  enableManualRemeasuring: boolean;\n  hoveredColors: string[] | null;\n}> = ({\n  notes,\n  measuresAndBeats,\n  analysis,\n  mouseHandlers,\n  measureSelection,\n  cursor,\n  phraseStarts,\n  scrollInfo,\n  voiceName,\n  voiceIndex = -1,\n  setVoiceMask = (mask) => {},\n  voiceMask,\n  showTonalGrid = true,\n  noteHeight,\n  secondsToX,\n  xToSeconds,\n  sectionSpan,\n  enableManualRemeasuring,\n  hoveredColors,\n}) => {\n  // To restore it, we need to lock the calculation of frozenRange and frozenHeight\n  // and don't change it after loading the notes.\n\n  const localMidiRange = useMemo(\n    () =>\n      getMidiRange(notes, [\n        xToSeconds(scrollInfo.left),\n        xToSeconds(scrollInfo.right),\n      ]),\n    [notes, scrollInfo, xToSeconds],\n  );\n  const midiRange = useMemo(() => getMidiRange(notes), [notes]);\n\n  const { systemClickHandler, handleNoteClick, handleMouseEnter } =\n    mouseHandlers;\n\n  const height =\n    (midiRange[0] === +Infinity ? 0 : midiRange[1] - midiRange[0] + 1) *\n    noteHeight;\n\n  const midiNumberToY = useCallback(\n    (midiNumber) => height - (midiNumber - midiRange[0] + 1) * noteHeight,\n    [height, midiRange, noteHeight],\n  );\n\n  // The frozenHeight machinery was used when I experimented with smart\n  // collapse/expand of every Voice relative to its current range on a current screen.\n  // I'm not sure it's used anymore.\n  const { noteRectangles, frozenHeight, frozenMidiRange } = useMemo(\n    () => ({\n      noteRectangles: getNoteRectangles(\n        notes,\n        midiNumberToY,\n        noteHeight,\n        handleNoteClick,\n        handleMouseEnter,\n        DUMMY_CALLBACK,\n        secondsToX,\n        enableManualRemeasuring,\n        hoveredColors,\n      ),\n      frozenHeight: height,\n      frozenMidiRange: midiRange,\n    }),\n    [\n      notes,\n      analysis,\n      handleNoteClick,\n      handleMouseEnter,\n      voiceMask,\n      noteHeight,\n      secondsToX,\n      enableManualRemeasuring,\n      hoveredColors,\n    ],\n  );\n\n  const { measures } = measuresAndBeats;\n  // TODO: make smarter once Stacked is implemented\n  const hasVisibleNotes =\n    voiceMask[voiceIndex] &&\n    (!!sectionSpan || localMidiRange[1] >= localMidiRange[0]);\n\n  return (\n    <div\n      key={`voice_${voiceIndex}_${measuresAndBeats.measures.at(-1)}_parent`}\n      style={{\n        width: secondsToX(measures[sectionSpan?.[1] ?? measures.length - 1]),\n        height: hasVisibleNotes ? height : 1,\n        position: \"relative\",\n        marginTop: hasVisibleNotes ? \"15px\" : 0,\n        marginBottom: hasVisibleNotes ? \"0px\" : 0,\n        marginLeft: \"0px\",\n        // borderBottom: hasVisibleNotes ? \"1px solid #888\" : \"\",\n        zIndex: 1,\n        backgroundColor: \"black\",\n      }}\n      onClick={(e) => systemClickHandler(e, xToSeconds)}\n    >\n      <div\n        style={{\n          position: \"relative\",\n          top:\n            height -\n            frozenHeight +\n            (midiRange[0] - frozenMidiRange[0]) * noteHeight,\n        }}\n      >\n        {voiceMask[voiceIndex] ? noteRectangles : null}\n      </div>\n      {hasVisibleNotes ? (\n        <AnalysisGrid\n          analysis={analysis}\n          measuresAndBeats={measuresAndBeats}\n          midiNumberToY={midiNumberToY}\n          noteHeight={noteHeight}\n          measureSelection={measureSelection}\n          phraseStarts={phraseStarts}\n          midiRange={midiRange}\n          showHeader={false}\n          showTonalGrid={showTonalGrid && !notes[0]?.isDrum}\n          secondsToX={secondsToX}\n          sectionSpan={sectionSpan}\n        />\n      ) : null}\n      {cursor}\n      {hasVisibleNotes &&\n      voiceMask.length > 1 &&\n      (sectionSpan?.[0] ?? 0) === 0 &&\n      voiceName ? (\n        <VoiceName\n          voiceName={voiceName}\n          voiceMask={voiceMask}\n          setVoiceMask={setVoiceMask}\n          voiceIndex={voiceIndex}\n          scrollInfo={scrollInfo}\n          secondsToX={secondsToX}\n          midiNumberToY={midiNumberToY}\n        />\n      ) : null}\n    </div>\n  );\n};\n\ntype Section = {\n  sectionSpan: MeasuresSpan;\n  secondsToX: SecondsConverter;\n  xToSeconds: SecondsConverter;\n  voices: { voiceIndex: number; notes: ColoredNote[] }[];\n};\n\nexport type SystemLayoutProps = {\n  notes: ColoredNotesInVoices;\n  voiceNames: string[];\n  voiceMask: VoiceMask;\n  measuresAndBeats: MeasuresAndBeats;\n  positionSeconds: number;\n  analysis: Analysis;\n  mouseHandlers: MouseHandlers;\n  measureSelection: MeasureSelection;\n  setVoiceMask: SetVoiceMask;\n  frozenNotes: ColoredNote[][];\n  enableManualRemeasuring?: boolean;\n  measureStart?: number;\n  isHiddenRoute?: boolean;\n  slug?: string;\n  currentTonic: number;\n  togglePause?: () => void;\n  seek?: (ms: number) => void;\n  hoveredColors: string[] | null;\n  setHoveredColors: (colors: string[] | null) => void;\n};\n\nexport const StackedSystemLayout: React.FC<\n  SystemLayoutProps & { measureStart?: number; isEmbedded?: boolean }\n> = ({\n  notes,\n  voiceNames,\n  voiceMask,\n  measuresAndBeats,\n  positionSeconds,\n  analysis,\n  mouseHandlers,\n  measureSelection,\n  setVoiceMask,\n  enableManualRemeasuring = false,\n  measureStart,\n  isEmbedded = false,\n  isHiddenRoute = false,\n  slug,\n  currentTonic,\n  togglePause,\n  seek,\n  hoveredColors,\n  setHoveredColors,\n}) => {\n  const [noteHeight, setNoteHeight] = useState<number>(3);\n  const [secondWidth, setSecondWidth] = useState<number>(40);\n  const setSecondWidthCalled = useRef(false);\n\n  useEffect(() => {\n    setSecondWidthCalled.current = false;\n  }, [secondWidth]);\n\n  const prevPositionSeconds = useRef<number>(0);\n  useEffect(() => {\n    prevPositionSeconds.current = positionSeconds;\n  }, [positionSeconds]);\n\n  const voicesSortedByAverageMidiNumber = useMemo(\n    () =>\n      notes\n        .map((voice, voiceIndex) => ({\n          average: getAverageMidiNumber(voice),\n          voiceIndex,\n        }))\n        .sort((a, b) => b.average - a.average)\n        .map(({ voiceIndex }) => ({\n          voiceIndex,\n          notes: notes[voiceIndex],\n        })),\n    [notes],\n  );\n\n  const phraseStarts = useMemo(\n    () => getPhraseStarts(analysis, measuresAndBeats.measures.length),\n    [analysis, measuresAndBeats],\n  );\n\n  const sectionSpans = useMemo(() => {\n    return (analysis.sections ?? [0]).map((sectionStartInPhrases, index) => {\n      const { measures } = measuresAndBeats;\n      const start = phraseStarts[sectionStartInPhrases] - 1;\n      const end =\n        (index + 1 < (analysis.sections ?? [0]).length\n          ? phraseStarts[(analysis.sections ?? [0])[index + 1]]\n          : measures.length) - 1;\n      return [start, end] as MeasuresSpan;\n    });\n  }, [analysis.sections, measuresAndBeats, phraseStarts]);\n\n  const optimalSecondWidth = useMemo(() => {\n    const viewportWidth = window.innerWidth;\n    const targetWidthPercentage = 0.92;\n    const targetWidth = viewportWidth * targetWidthPercentage;\n\n    const annotatedSections = sectionSpans.filter(\n      (span) => span[1] - span[0] < 25,\n    );\n\n    const longestSection = annotatedSections.reduce((longest, current) => {\n      const currentLength =\n        measuresAndBeats.measures[current[1]] -\n        measuresAndBeats.measures[current[0]];\n      const longestLength =\n        measuresAndBeats.measures[longest[1]] -\n        measuresAndBeats.measures[longest[0]];\n      return currentLength > longestLength ? current : longest;\n    }, sectionSpans[0]);\n\n    if (longestSection && annotatedSections.length >= 1) {\n      const longestSectionLength =\n        measuresAndBeats.measures[longestSection[1]] -\n        measuresAndBeats.measures[longestSection[0]];\n      return targetWidth / longestSectionLength;\n    }\n    return secondWidth;\n  }, [notes]); // Only recalculate when notes change\n\n  useEffect(() => {\n    setSecondWidth(optimalSecondWidth);\n  }, [optimalSecondWidth]);\n\n  const sections: Section[] = useMemo(() => {\n    return sectionSpans.map((sectionSpan) => {\n      const secondsToX = (seconds) =>\n        (seconds - measuresAndBeats.measures[sectionSpan[0]]) * secondWidth;\n      const xToSeconds = (x) =>\n        x / secondWidth + measuresAndBeats.measures[sectionSpan[0]];\n      return {\n        sectionSpan,\n        secondsToX,\n        xToSeconds,\n        voices: voicesSortedByAverageMidiNumber.map(\n          ({ voiceIndex, notes }) => ({\n            voiceIndex,\n            notes: notes.filter(\n              (note) =>\n                note.span[1] >= measuresAndBeats.measures[sectionSpan[0]] &&\n                note.span[0] + (note.isDrum ? -0.01 : 1e-2) <\n                  measuresAndBeats.measures[sectionSpan[1]],\n            ),\n          }),\n        ),\n      };\n    });\n  }, [\n    sectionSpans,\n    measuresAndBeats,\n    secondWidth,\n    voicesSortedByAverageMidiNumber,\n  ]);\n\n  const parentRef = useRef(null);\n  const sectionRefs = useRef<(HTMLDivElement | null)[]>([]);\n\n  const [scrollInfo, setScrollInfo] = useState<ScrollInfo>({\n    left: -1,\n    right: 100000,\n  });\n\n  const debouncedScroll = useCallback(\n    debounce(\n      (left, right) =>\n        setScrollInfo({\n          left,\n          right,\n        }),\n      50,\n    ),\n    [],\n  );\n\n  const handleScroll = () => {\n    const { scrollLeft, offsetWidth } = parentRef.current;\n    const scrollRight = scrollLeft + offsetWidth;\n\n    debouncedScroll(scrollLeft, scrollRight);\n  };\n\n  useEffect(() => {\n    const parentDiv = parentRef.current;\n    if (parentDiv) {\n      parentDiv.addEventListener(\"scroll\", handleScroll);\n      handleScroll();\n    }\n\n    return () => {\n      if (parentDiv) {\n        parentDiv.removeEventListener(\"scroll\", handleScroll);\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (\n      measureStart !== undefined &&\n      parentRef.current &&\n      sectionRefs.current.length > 0\n    ) {\n      const sectionIndex = sections.findIndex(\n        ({ sectionSpan }) =>\n          measureStart >= sectionSpan[0] && measureStart <= sectionSpan[1],\n      );\n\n      if (sectionIndex !== -1) {\n        const sectionElement = sectionRefs.current[sectionIndex];\n        if (sectionElement) {\n          sectionElement.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n        }\n      }\n    }\n  }, [measureStart, sections]);\n\n  return (\n    <>\n      <div\n        key=\"innerLeftPanel\"\n        style={{\n          margin: 0,\n          padding: 0,\n          position: \"relative\",\n          overflowX: \"scroll\",\n          overflowY: \"scroll\",\n          width: \"100%\",\n          backgroundColor: \"black\",\n        }}\n        ref={parentRef}\n        className=\"SplitLayout\"\n      >\n        {sections.map(\n          ({ sectionSpan, secondsToX, xToSeconds, voices }, order) => (\n            <div\n              style={{ paddingTop: 10 + noteHeight * 5 }}\n              key={order}\n              ref={(el) => (sectionRefs.current[order] = el)}\n            >\n              <MeasureNumbers\n                measuresAndBeats={measuresAndBeats}\n                analysis={analysis}\n                phraseStarts={phraseStarts}\n                measureSelection={measureSelection}\n                noteHeight={noteHeight}\n                secondsToX={secondsToX}\n                xToSeconds={xToSeconds}\n                sectionSpan={sectionSpan}\n                isHiddenRoute={isHiddenRoute}\n                mouseHandlers={mouseHandlers}\n                togglePause={togglePause}\n                seek={seek}\n              />\n              {voices.map(({ notes, voiceIndex }) => (\n                <div\n                  key={voiceIndex}\n                  style={{ display: \"flex\", flexDirection: \"row\" }}\n                >\n                  <Voice\n                    voiceName={voiceNames[voiceIndex]}\n                    notes={notes}\n                    measuresAndBeats={measuresAndBeats}\n                    analysis={analysis}\n                    mouseHandlers={mouseHandlers}\n                    measureSelection={measureSelection}\n                    cursor={\n                      positionSeconds <\n                        measuresAndBeats.measures[sectionSpan[1]] && (\n                        <Cursor\n                          key={\"cursor\"}\n                          style={{\n                            transition:\n                              !setSecondWidthCalled.current &&\n                              Math.abs(\n                                prevPositionSeconds.current - positionSeconds,\n                              ) < 2\n                                ? \"left 0.74s linear\"\n                                : \"\",\n                            left: secondsToX(positionSeconds),\n                          }}\n                        />\n                      )\n                    }\n                    phraseStarts={phraseStarts}\n                    scrollInfo={scrollInfo}\n                    voiceMask={voiceMask}\n                    setVoiceMask={setVoiceMask}\n                    voiceIndex={voiceIndex}\n                    noteHeight={noteHeight}\n                    secondsToX={secondsToX}\n                    xToSeconds={xToSeconds}\n                    sectionSpan={sectionSpan}\n                    enableManualRemeasuring={enableManualRemeasuring}\n                    hoveredColors={hoveredColors}\n                  />\n                </div>\n              ))}\n            </div>\n          ),\n        )}\n\n        <div style={{ height: 100 }} />\n\n        {!isEmbedded && (\n          <ControlPanel\n            noteHeight={noteHeight}\n            setNoteHeight={setNoteHeight}\n            secondWidth={secondWidth}\n            setSecondWidth={setSecondWidth}\n            slug={slug}\n            currentTonic={currentTonic}\n            setHoveredColors={setHoveredColors}\n          />\n        )}\n      </div>\n    </>\n  );\n};\n\nconst MERGED_VOICE_NAMES = [\"merged\"];\nconst MERGED_VOICE_MASK = [true];\n\nexport const MergedSystemLayout: React.FC<\n  SystemLayoutProps & { isEmbedded?: boolean }\n> = (props) => {\n  const {\n    notes,\n    voiceNames,\n    voiceMask,\n    setVoiceMask,\n    enableManualRemeasuring = false,\n    isEmbedded = false,\n    slug,\n    currentTonic,\n    hoveredColors,\n    setHoveredColors,\n  } = props;\n\n  const flattenedNotes = useMemo(\n    () => [\n      notes\n        .filter((notes) => (notes && notes[0].isActive) || !notes[0].isDrum)\n        .flat(),\n    ],\n    [notes],\n  );\n\n  return (\n    <div style={{ position: \"relative\" }}>\n      <StackedSystemLayout\n        {...props}\n        notes={flattenedNotes}\n        voiceNames={MERGED_VOICE_NAMES}\n        voiceMask={MERGED_VOICE_MASK}\n        enableManualRemeasuring={enableManualRemeasuring}\n        isEmbedded={isEmbedded}\n        slug={slug}\n        hoveredColors={hoveredColors}\n        setHoveredColors={setHoveredColors}\n      />\n      {!isEmbedded && (\n        <MergedVoicesLegend\n          voiceNames={voiceNames}\n          voiceMask={voiceMask}\n          setVoiceMask={setVoiceMask}\n          slug={slug}\n          currentTonic={currentTonic}\n        />\n      )}\n    </div>\n  );\n};\n","import clamp from \"lodash/clamp\";\nimport React, { useCallback, useContext, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../../AppContext\";\nimport { StyledRangeInput } from \"../../Slider\";\nimport { FoldablePianoLegend } from \"../legends/PianoLegend\";\n\nconst TinyLetter = styled.span`\n  font-size: 10px;\n  color: #fff;\n`;\n\nexport const debounce = (func, delay) => {\n  let timer;\n  let frameId;\n\n  return (...args) => {\n    clearTimeout(timer);\n    cancelAnimationFrame(frameId);\n\n    timer = setTimeout(() => {\n      frameId = requestAnimationFrame(() => {\n        func.apply(this, args);\n      });\n    }, delay);\n  };\n};\n\ntype ControlPanelProps = {\n  noteHeight: number;\n  setNoteHeight: (height: number) => void;\n  secondWidth: number;\n  setSecondWidth: (width: number) => void;\n  slug?: string;\n  currentTonic?: number;\n  setHoveredColors: (colors: string[] | null) => void;\n};\n\nconst ControlPanel: React.FC<ControlPanelProps> = ({\n  noteHeight,\n  setNoteHeight,\n  secondWidth,\n  setSecondWidth,\n  slug,\n  currentTonic,\n  setHoveredColors,\n}) => {\n  const { registerKeyboardHandler, unregisterKeyboardHandler } =\n    useContext(AppContext);\n\n  const debounceSetNoteHeight = useCallback(debounce(setNoteHeight, 50), []);\n  const debounceSetSecondWidth = useCallback(debounce(setSecondWidth, 50), []);\n\n  const handleSecondWidthChange = useCallback(\n    (newWidth: number) => {\n      setSecondWidth(clamp(newWidth, 2, 150));\n    },\n    [setSecondWidth],\n  );\n\n  useEffect(() => {\n    const handleKeyPress = (e: KeyboardEvent) => {\n      switch (e.key) {\n        case \"a\":\n          handleSecondWidthChange(secondWidth - 2);\n          break;\n        case \"d\":\n          handleSecondWidthChange(secondWidth + 2);\n          break;\n        case \"s\":\n          debounceSetNoteHeight(Math.min(noteHeight + 0.25, 10));\n          break;\n        case \"w\":\n          debounceSetNoteHeight(Math.max(noteHeight - 0.25, 1));\n          break;\n      }\n    };\n\n    registerKeyboardHandler(\"controlPanel\", handleKeyPress);\n\n    return () => {\n      unregisterKeyboardHandler(\"controlPanel\");\n    };\n  }, [\n    registerKeyboardHandler,\n    unregisterKeyboardHandler,\n    secondWidth,\n    handleSecondWidthChange,\n    noteHeight,\n    debounceSetNoteHeight,\n  ]);\n\n  return (\n    <>\n      <FoldablePianoLegend\n        slug={slug}\n        currentTonic={currentTonic}\n        setHoveredColors={setHoveredColors}\n      />\n      <div\n        style={{\n          position: \"fixed\",\n          bottom: 221,\n          right: -131,\n          zIndex: 100000,\n        }}\n      >\n        <span style={{ position: \"relative\", top: -3, left: 12 }}>\n          <TinyLetter>w</TinyLetter>\n        </span>\n        <span\n          style={{\n            position: \"relative\",\n            top: 169,\n            left: 6,\n          }}\n        >\n          <TinyLetter>s</TinyLetter>\n        </span>\n        <StyledRangeInput\n          min=\"1\"\n          max=\"10\"\n          value={noteHeight}\n          onChange={(e) => debounceSetNoteHeight(parseInt(e.target.value, 10))}\n          style={{\n            transform: \"rotate(90deg)\",\n            transformOrigin: \"bottom left\",\n            width: 160,\n          }}\n        />\n      </div>\n      <div\n        style={{\n          position: \"fixed\",\n          bottom: 35,\n          right: 33,\n          zIndex: 100000,\n        }}\n      >\n        <span style={{ position: \"relative\", top: 0, left: 0 }}>\n          <TinyLetter>a</TinyLetter>\n        </span>\n        <StyledRangeInput\n          min=\"2\"\n          max=\"150\"\n          value={secondWidth}\n          onChange={(e) => debounceSetSecondWidth(parseInt(e.target.value, 10))}\n          style={{\n            width: 240,\n          }}\n        />\n        <span style={{ position: \"relative\", top: 0, left: 0 }}>\n          <TinyLetter>d</TinyLetter>\n        </span>\n      </div>\n    </>\n  );\n};\n\nexport default ControlPanel;\n","import { PitchClass } from \"../analysis\";\n\nconst CHORD_TYPES: { [key: string]: string } = {\n  \"4 3\": \"\",\n  \"3 4\": \"m\",\n  \"3 4 3\": \"m7\",\n  \"4 3 3\": \"7\",\n  \"4 3 4\": \"maj7\",\n  \"3 3 4\": \"ø7\",\n};\n\nconst PITCH_CLASS_TO_GUITAR_LETTER = {\n  0: \"C\",\n  1: \"C#\",\n  2: \"D\",\n  3: \"D#\",\n  4: \"E\",\n  5: \"F\",\n  6: \"F#\",\n  7: \"G\",\n  8: \"G#\",\n  9: \"A\",\n  10: \"A#\",\n  11: \"B\",\n};\n\nexport const convertChordToGuitarChord = (\n  absoluteRoot: PitchClass,\n  chordType: string,\n): string | null => {\n  if (chordType in CHORD_TYPES) {\n    return `${PITCH_CLASS_TO_GUITAR_LETTER[absoluteRoot]}${CHORD_TYPES[chordType]}`;\n  }\n  return null;\n};\n","import * as React from \"react\";\nimport { useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { AppContext } from \"../../AppContext\";\nimport {\n  Analysis,\n  MeasuresSpan,\n  Snippet,\n  filterSnippetsByAccess,\n} from \"../analysis\";\nimport { AnalysisGrid, MeasureSelection } from \"../AnalysisGrid\";\nimport EXPLANATIONS from \"../corpora/explanations\";\nimport { MouseHandlers } from \"../getNoteRectangles\";\nimport { SecondsConverter } from \"../Rawl\";\nimport { MeasuresAndBeats } from \"../SystemLayout\";\n\nconst InlineSnippets: React.FC<{\n  measuresAndBeats: MeasuresAndBeats;\n  snippets: Snippet[];\n  secondsToX: SecondsConverter;\n  sectionSpan?: MeasuresSpan;\n  analysis: Analysis;\n  togglePause?: () => void;\n  seek?: (ms: number) => void;\n}> = ({\n  measuresAndBeats,\n  snippets,\n  secondsToX,\n  sectionSpan,\n  analysis,\n  togglePause,\n  seek,\n}) => {\n  const appContext = useContext(AppContext);\n  const { setHoveredMeasuresSpan } = appContext;\n  const [hoveredSnippetIndex, setHoveredSnippetIndex] = React.useState<\n    string | null\n  >(null);\n\n  const filteredSnippets = React.useMemo(() => {\n    return filterSnippetsByAccess(snippets);\n  }, [snippets]);\n\n  const [groupedItems, setGroupedItems] = React.useState<\n    Record<\n      number,\n      Array<{\n        type: \"snippet\" | \"formSection\" | \"explanation\";\n        content: any;\n        sourceSnippet?: Snippet;\n      }>\n    >\n  >({});\n  const itemRefs = React.useRef<(HTMLDivElement | null)[]>([]);\n\n  React.useEffect(() => {\n    // Group snippets, formSections, and explanations by measure\n    const grouped = {} as Record<\n      number,\n      Array<{\n        type: \"snippet\" | \"formSection\" | \"explanation\";\n        content: any;\n        sourceSnippet?: Snippet;\n      }>\n    >;\n\n    // Add formSections first\n    if (analysis.form) {\n      Object.entries(analysis.form).forEach(([measure, section]) => {\n        const measureNum = parseInt(measure);\n        if (!grouped[measureNum]) {\n          grouped[measureNum] = [];\n        }\n        grouped[measureNum].push({ type: \"formSection\", content: section });\n      });\n    }\n\n    // Add snippets and their explanations\n    filteredSnippets.forEach((snippet) => {\n      const measureStart = snippet.measuresSpan[0];\n      if (!grouped[measureStart]) {\n        grouped[measureStart] = [];\n      }\n      grouped[measureStart].push({ type: \"snippet\", content: snippet });\n\n      // If this snippet is hovered and has an explanation, add it\n      if (\n        hoveredSnippetIndex === `${measureStart}-${snippet.tag}` &&\n        EXPLANATIONS[snippet.tag]\n      ) {\n        grouped[measureStart].push({\n          type: \"explanation\",\n          content: EXPLANATIONS[snippet.tag],\n          sourceSnippet: snippet,\n        });\n      }\n    });\n\n    setGroupedItems(grouped);\n  }, [filteredSnippets, analysis.form, hoveredSnippetIndex]);\n\n  React.useEffect(() => {\n    const checkOverlaps = () => {\n      let prevRight = -Infinity;\n      let prevIndex = -1;\n\n      itemRefs.current.forEach((ref, index) => {\n        if (ref) {\n          const rect = ref.getBoundingClientRect();\n          if (rect.left < prevRight) {\n            // Overlap detected\n            const prevMeasure = parseInt(Object.keys(groupedItems)[prevIndex]);\n            const currentMeasure = parseInt(Object.keys(groupedItems)[index]);\n\n            setGroupedItems((prev) => {\n              const updated = { ...prev };\n              updated[prevMeasure] = [\n                ...updated[prevMeasure],\n                ...updated[currentMeasure],\n              ];\n              delete updated[currentMeasure];\n              return updated;\n            });\n          } else {\n            prevRight = rect.right;\n            prevIndex = index;\n          }\n        }\n      });\n    };\n\n    const timeoutId = setTimeout(checkOverlaps, 100);\n    return () => clearTimeout(timeoutId);\n  }, [groupedItems]);\n\n  return (\n    <>\n      {Object.entries(groupedItems).map(([measureStart, items], groupIndex) => {\n        const start = parseInt(measureStart);\n        if (\n          sectionSpan &&\n          (start <= sectionSpan[0] || start > sectionSpan[1])\n        ) {\n          return null;\n        }\n        const left = secondsToX(measuresAndBeats.measures[start - 1]);\n\n        return (\n          <div\n            key={start}\n            ref={(el) => (itemRefs.current[groupIndex] = el)}\n            style={{\n              position: \"absolute\",\n              top: \"-20px\",\n              left: `${left}px`,\n              textAlign: \"left\",\n              color: \"#777\",\n              fontSize: \"11px\",\n              display: \"flex\",\n              flexDirection: \"row\",\n              flexWrap: \"nowrap\",\n            }}\n          >\n            {items.map((item, index) => {\n              if (item.type === \"formSection\") {\n                return (\n                  <div\n                    key={`form_${index}`}\n                    style={{\n                      color: \"#bbb\",\n                      userSelect: \"none\",\n                      marginRight: \"10px\",\n                      fontSize: \"1.2em\",\n                      position: \"relative\",\n                      top: \"5px\",\n                      cursor: \"pointer\",\n                      transition: \"color 0.2s ease\",\n                    }}\n                    onClick={(e) => {\n                      if (seek && togglePause) {\n                        const seekTime =\n                          measuresAndBeats.measures[start - 1] * 1000 - 1000;\n                        seek(seekTime);\n                        // togglePause();\n                        e.stopPropagation();\n                      }\n                    }}\n                    onMouseEnter={(e) => {\n                      e.currentTarget.style.color = \"#fff\";\n                    }}\n                    onMouseLeave={(e) => {\n                      e.currentTarget.style.color = \"#bbb\";\n                    }}\n                  >\n                    {item.content}\n                  </div>\n                );\n              } else if (item.type === \"explanation\") {\n                return (\n                  <div\n                    key={`explanation_${index}`}\n                    style={{\n                      color: \"#fff\",\n                      marginRight: \"10px\",\n                      whiteSpace: \"nowrap\",\n                      display: \"flex\",\n                      alignItems: \"center\",\n                    }}\n                  >\n                    — {item.content}\n                  </div>\n                );\n              } else {\n                const snippet = item.content;\n                const [chapter, topic] = snippet.tag.split(\":\");\n                const snippetKey = `${measureStart}-${snippet.tag}`;\n\n                return (\n                  <Link\n                    key={`snippet_${index}`}\n                    to={`/s/${encodeURIComponent(\n                      chapter.trim(),\n                    )}/${encodeURIComponent(topic.trim())}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    onClick={(e) => e.stopPropagation()}\n                    onMouseEnter={() => {\n                      setHoveredMeasuresSpan(snippet.measuresSpan);\n                      setHoveredSnippetIndex(snippetKey);\n                    }}\n                    onMouseLeave={() => {\n                      setHoveredMeasuresSpan(null);\n                      setHoveredSnippetIndex(null);\n                    }}\n                    style={{\n                      textDecoration: \"none\",\n                      color: \"inherit\",\n                      display: \"flex\",\n                      flexDirection: \"column\",\n                      alignItems: \"flex-start\",\n                      marginRight: \"10px\",\n                      lineHeight: \"0.9\",\n                      position: \"relative\",\n                    }}\n                  >\n                    <div\n                      style={{\n                        display: \"flex\",\n                        flexDirection: \"row\",\n                        alignItems: \"center\",\n                      }}\n                    >\n                      <div>\n                        <span style={{ color: \"#777\" }}>\n                          {chapter.replace(/_/g, \" \")}\n                        </span>\n                        <span style={{ color: \"#ccc\", display: \"block\" }}>\n                          {topic.replace(/_/g, \" \")}\n                        </span>\n                      </div>\n                    </div>\n                  </Link>\n                );\n              }\n            })}\n          </div>\n        );\n      })}\n    </>\n  );\n};\n\nexport const MeasureNumbers: React.FC<{\n  measuresAndBeats: MeasuresAndBeats;\n  analysis: Analysis;\n  phraseStarts: number[];\n  measureSelection: MeasureSelection;\n  noteHeight: number;\n  secondsToX: SecondsConverter;\n  xToSeconds: SecondsConverter;\n  sectionSpan?: MeasuresSpan;\n  isHiddenRoute?: boolean;\n  mouseHandlers: MouseHandlers;\n  togglePause?: () => void;\n  seek?: (ms: number) => void;\n}> = ({\n  measuresAndBeats,\n  analysis,\n  phraseStarts,\n  measureSelection,\n  noteHeight,\n  secondsToX,\n  xToSeconds,\n  sectionSpan,\n  isHiddenRoute = false,\n  mouseHandlers,\n  togglePause,\n  seek,\n}) => {\n  const { systemClickHandler } = mouseHandlers;\n\n  return (\n    <div\n      key=\"measure_header\"\n      style={{\n        width:\n          secondsToX(\n            Math.max(\n              measuresAndBeats.measures.at(-1),\n              measuresAndBeats.beats.at(-1),\n            ),\n          ) + 300,\n        height: 16,\n        marginBottom: \"-15px\",\n        marginLeft: \"0px\",\n        zIndex: 90000,\n        position: sectionSpan ? \"relative\" : \"sticky\",\n        top: 0,\n      }}\n      onClick={(e) => systemClickHandler(e, xToSeconds)}\n    >\n      {!isHiddenRoute && (\n        <InlineSnippets\n          measuresAndBeats={measuresAndBeats}\n          snippets={analysis.snippets || []}\n          secondsToX={secondsToX}\n          sectionSpan={sectionSpan}\n          analysis={analysis}\n          togglePause={togglePause}\n          seek={seek}\n        />\n      )}\n      <AnalysisGrid\n        analysis={analysis}\n        measuresAndBeats={measuresAndBeats}\n        midiNumberToY={() => 0}\n        noteHeight={noteHeight}\n        measureSelection={measureSelection}\n        phraseStarts={phraseStarts}\n        midiRange={[0, 0]}\n        showHeader={true}\n        showTonalGrid={false}\n        secondsToX={secondsToX}\n        sectionSpan={sectionSpan}\n      />\n    </div>\n  );\n};\n","import React from \"react\";\nimport { useLocalStorage } from \"usehooks-ts\";\nimport { SongNarrative } from \"../SongNarrative\";\n\nexport const FORCED_PANNING_LABEL = \"🔊⬅️👐➡️🔊\";\n\ntype MergedVoicesLegendProps = {\n  voiceNames: string[];\n  voiceMask: boolean[];\n  setVoiceMask: (mask: boolean[]) => void;\n  onForcedPanningChange?: (enabled: boolean) => void;\n  slug: string;\n  currentTonic?: number;\n};\n\nconst MergedVoicesLegend: React.FC<MergedVoicesLegendProps> = ({\n  voiceNames,\n  voiceMask,\n  setVoiceMask,\n  onForcedPanningChange,\n  slug,\n  currentTonic,\n}) => {\n  const [forcedPanning, setForcedPanning] = useLocalStorage(\n    \"forcedPanning\",\n    false,\n  );\n  const isSingleActive = voiceMask.filter((voice) => voice).length === 1;\n\n  const handlePanningToggle = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = e.target.checked;\n    setForcedPanning(newValue);\n    onForcedPanningChange?.(newValue);\n    window.location.reload();\n  };\n\n  return (\n    voiceNames.length > 1 && (\n      <div\n        style={{\n          position: \"fixed\",\n          top: 20,\n          right: 0,\n          zIndex: 90000,\n          backgroundColor: \"transparent\",\n          padding: 10,\n        }}\n      >\n        <div\n          style={{\n            marginBottom: 10,\n            borderBottom: \"0.5px solid #333\",\n            paddingBottom: 5,\n          }}\n        >\n          <input\n            type=\"checkbox\"\n            id=\"forcedPanning\"\n            checked={forcedPanning}\n            onChange={handlePanningToggle}\n          />\n          <label\n            htmlFor=\"forcedPanning\"\n            style={{\n              margin: \"0px 0px 0px 0px\",\n              height: 11,\n              display: \"inline\",\n            }}\n          >\n            {FORCED_PANNING_LABEL}\n          </label>\n        </div>\n        {voiceNames.map((voiceName, voiceIndex) => (\n          <div key={voiceIndex}>\n            <input\n              title=\"active\"\n              type=\"checkbox\"\n              onChange={(e) => {\n                e.stopPropagation();\n                let newVoiceMask = voiceMask.map((value, i) =>\n                  i === voiceIndex ? !value : value,\n                );\n                if (newVoiceMask.filter((voice) => voice).length === 0) {\n                  newVoiceMask = voiceMask.map(() => true);\n                }\n                setVoiceMask(newVoiceMask);\n              }}\n              checked={voiceMask[voiceIndex]}\n              style={{\n                margin: \"0px 0px 0px 17px\",\n                height: 11,\n                display: \"inline\",\n              }}\n            />{\" \"}\n            <span\n              style={{\n                cursor: \"pointer\",\n                userSelect: \"none\",\n              }}\n              onClick={(e) => {\n                e.stopPropagation();\n                isSingleActive && voiceMask[voiceIndex]\n                  ? setVoiceMask(voiceMask.map(() => true))\n                  : setVoiceMask(voiceMask.map((_, i) => i === voiceIndex));\n              }}\n            >\n              <span\n                className={`voiceShape-${voiceIndex}`}\n                style={{\n                  display: \"inline-block\",\n                  backgroundColor: \"white\",\n                  height: 8,\n                  width: 20,\n                  marginRight: 5,\n                  verticalAlign: \"middle\",\n                }}\n              />\n              <span style={{ borderBottom: \"0.5px dashed #ccc\" }}>\n                {voiceName}\n              </span>\n            </span>\n          </div>\n        ))}\n        <div style={{ position: \"relative\" }}>\n          <SongNarrative slug={slug} currentTonic={currentTonic} />\n        </div>\n      </div>\n    )\n  );\n};\n\nexport default MergedVoicesLegend;\n","import { faQuoteRight } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport Cite from \"citation-js\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\nimport { CITES } from \"./cites\";\n\nconst CitationContainer = styled.div`\n  position: relative;\n  display: inline-block;\n  width: 12px;\n`;\n\nconst CitationIcon = styled.span<{ hasUrl?: boolean }>`\n  position: relative;\n  left: -12px;\n  top: -8px;\n  cursor: pointer;\n  color: #666;\n  margin-left: 8px;\n\n  &:hover {\n    color: #999;\n  }\n`;\n\nconst CitationPopup = styled.div<{ position: \"right\" | \"below-left\" }>`\n  position: absolute;\n  ${(props) =>\n    props.position === \"right\"\n      ? `\n    left: calc(100% + 12px);\n    top: 50%;\n    transform: translateY(-50%);\n  `\n      : `\n    right: -12px;\n    top: calc(100% + 12px);\n    transform: none;\n  `}\n  background: rgba(0, 0, 0, 0.95);\n  padding: 20px;\n  border-radius: 8px;\n  border: 1px solid #444;\n  width: 300px;\n  color: #ddd;\n  font-size: 14px;\n  z-index: 1000;\n\n  &:before {\n    content: \"\";\n    position: absolute;\n    ${(props) =>\n      props.position === \"right\"\n        ? `\n      left: -6px;\n      top: 50%;\n      transform: translateY(-50%);\n      border-right: 6px solid #444;\n      border-top: 6px solid transparent;\n      border-bottom: 6px solid transparent;\n      border-left: none;\n    `\n        : `\n      top: -6px;\n      right: 12px;\n      transform: none;\n      border-bottom: 6px solid #444;\n      border-left: 6px solid transparent;\n      border-right: 6px solid transparent;\n      border-top: none;\n    `}\n    width: 0;\n    height: 0;\n  }\n`;\n\ninterface CitationProps {\n  citeKey: keyof typeof CITES;\n}\n\nexport const Citation: React.FC<CitationProps> = ({ citeKey }) => {\n  const [showCitation, setShowCitation] = React.useState(false);\n  const [formattedCitation, setFormattedCitation] = React.useState<string>(\"\");\n  const [citationUrl, setCitationUrl] = React.useState<string | undefined>();\n  const [position, setPosition] = React.useState<\"right\" | \"below-left\">(\n    \"right\",\n  );\n  const iconRef = React.useRef<HTMLSpanElement>(null);\n\n  React.useEffect(() => {\n    const cite = new Cite(CITES[citeKey].bibtex);\n    const data = cite.format(\"data\", { format: \"object\" })[0];\n\n    // Store URL if it exists\n    setCitationUrl(data.URL || undefined);\n\n    // Format authors/editors\n    let authors = \"\";\n    if (data.author) {\n      authors = data.author\n        .map((author) => `${author.given} ${author.family}`)\n        .join(\" and \");\n    } else if (data.editor) {\n      authors = data.editor\n        .map((editor) => `${editor.given} ${editor.family}`)\n        .join(\" and \");\n    }\n\n    const year = data.issued?.[\"date-parts\"]?.[0]?.[0] || \"\";\n    const title = data.title || \"\";\n\n    // Format where field with optional chaining\n    const whereText = CITES[citeKey]?.where\n      ? ` <span class=\"grey-text\">${CITES[citeKey].where}</span>`\n      : \"\";\n\n    // Combine with italics for authors and year\n    const formattedText = `<i>${authors}</i> (<i>${year}</i>). ${title}.${whereText}`;\n    setFormattedCitation(formattedText);\n  }, [citeKey]);\n\n  const handleMouseEnter = () => {\n    if (iconRef.current) {\n      const rect = iconRef.current.getBoundingClientRect();\n      const rightSpace = window.innerWidth - rect.right;\n      // If there's not enough space on the right (300px for tooltip + 32px padding), show below-left\n      setPosition(rightSpace < 332 ? \"below-left\" : \"right\");\n    }\n    setShowCitation(true);\n  };\n\n  const handleIconClick = (e: React.MouseEvent) => {\n    if (citationUrl) {\n      e.stopPropagation();\n      window.open(citationUrl, \"_blank\", \"noopener,noreferrer\");\n    }\n  };\n\n  return (\n    <CitationContainer>\n      <CitationIcon\n        ref={iconRef}\n        hasUrl={!!citationUrl}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={() => setShowCitation(false)}\n        onClick={handleIconClick}\n      >\n        <FontAwesomeIcon icon={faQuoteRight} size=\"sm\" />\n      </CitationIcon>\n\n      {showCitation && (\n        <CitationPopup position={position}>\n          <style>{`.grey-text { color: #888; }`}</style>\n          <span dangerouslySetInnerHTML={{ __html: formattedCitation }} />\n        </CitationPopup>\n      )}\n    </CitationContainer>\n  );\n};\n","interface Citation {\n  bibtex: string;\n  where?: string;\n}\n\nexport const CITES: Record<string, Citation> = {\n  rings_tuning: {\n    bibtex: `@book{book:2550186,\n   title =     {The Oxford handbook of critical concepts in music theory},\n   editor =    {Steven Rings and Alexander Rehding},\n   publisher = {},\n   isbn =      {9780190454746,0190454741},\n   year =      {2019},\n   series =    {},\n   edition =   {},\n   volume =    {},\n   url = {https://annas-archive.org/md5/e157064be938ddab29b4aab7633dd0a5}\n}`,\n    where: \"pp. 16-20\",\n  },\n  alf_aeolian: {\n    bibtex: `@misc{bjornberg1984aeolian,\n  author = {Alf Björnberg},\n  title = {On Aeolian Harmony in Contemporary Popular Music},\n  year = {1984},\n  url = {https://www.tagg.org/xpdfs/bjbgeol.pdf}\n}\n`,\n  },\n  tagg_loops: {\n    bibtex: `@book{tagg2017everyday,\n  title ={Everyday Tonality II: Towards a Tonal Theory of what Most People Hear},\n  author={Tagg, Philip},\n  year={2017},\n  publisher={Mass Media Music Scholars' Press},\n  url={https://hugoribeiro.com.br/area-restrita/Tagg-Everyday_tonality.pdf}\n}\n`,\n    where: \"ch. 13\",\n  },\n  nobile: {\n    bibtex: `@book{book:2586637,\n   title =     {Form as Harmony in Rock Music (Oxford Studies in Music Theory)},\n   author =    {Drew Nobile},\n   publisher = {},\n   isbn =      {2020932174,9780190948368,9780190948351},\n   year =      {2020},\n   series =    {},\n   edition =   {},\n   volume =    {},\n   url =       {https://annas-archive.org/md5/8e6e4c92afc8e11ac3ff486582c5d0c4}\n}\n`,\n  },\n  richards: {\n    bibtex: `@article{richards2017tonal,\n  title={Tonal Ambiguity in Popular Music’s Axis Progressions},\n  author={Richards, Mark},\n  journal={Music Theory Online},\n  volume={23},\n  number={3},\n  year={2017},\n  publisher={Society for Music Theory},\n  url={https://mtosmt.org/issues/mto.17.23.3/mto.17.23.3.richards.html}\n}\n`,\n  },\n  vice_despacito: {\n    bibtex: `@online{vice_despacito,\n  author    = {Emily Bootle},\n  title     = {The Actual Science Behind Why “Despacito” Bangs So Damn Hard},\n  year      = {2017},\n  url       = {https://www.vice.com/en/article/why-despacito-is-so-catchy-music-theory},\n  urldate   = {2024-12-25},\n  note      = {Accessed: 2024-12-25}\n}\n`,\n  },\n} as const;\n","import { faMusic } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as React from \"react\";\nimport styled from \"styled-components\";\n\nconst DropBox = styled.div`\n  border: 4px dashed #0f0; /* Neon green dashed border */\n  padding: 20px;\n  border-radius: 10px;\n  text-align: center;\n  transition: all 0.2s ease-in-out;\n  background: #000; /* Black background */\n  box-shadow: 0 0 10px #0f0; /* Neon glow effect */\n`;\n\nconst Icon = styled(FontAwesomeIcon)`\n  font-size: 48px;\n  color: #0f0; /* Neon green color */\n`;\n\nconst Text = styled.p`\n  margin-top: 15px;\n  font-size: 16px;\n  color: #0f0; /* Neon green text */\n`;\n\nexport const FileDropBox: React.FC = () => (\n  <DropBox>\n    <Icon icon={faMusic} />\n    <Text>Drag & Drop your MIDI files here (or anywhere really)</Text>\n  </DropBox>\n);\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst GradientText = styled.span`\n  font-weight: 900;\n  display: inline-block;\n  background-clip: text !important;\n  -webkit-background-clip: text !important;\n  -webkit-text-fill-color: transparent !important;\n  color: transparent !important;\n`;\n\nconst GradientGreen = styled(GradientText)`\n  background: linear-gradient(\n    to right,\n    white,\n    #007000,\n    #00fb47,\n    rgb(120, 120, 120)\n  );\n`;\n\nconst GradientCool = styled(GradientText)`\n  background: linear-gradient(\n    to right,\n    #9500b3,\n    #ea7eff,\n    #0000ff,\n    #03b9d5,\n    #007000,\n    #00fb47\n  );\n`;\n\nconst GradientWarm = styled(GradientText)`\n  background: linear-gradient(to right, #ff0, #ff7328, red, #9500b3);\n`;\n\nconst GradientBright = styled(GradientText)`\n  background: linear-gradient(to right, #00fb47, #03b9d5, #ff0);\n`;\n\nconst GradientDark = styled(GradientText)`\n  background: linear-gradient(to right, #007000, #0000ff, #ff7328);\n`;\n\nconst Container = styled.div`\n  text-align: left;\n  display: flex;\n  flex-direction: column;\n  gap: 7px;\n`;\n\nconst TextLine = styled.span`\n  font-weight: 900;\n`;\n\nconst Metaphors = () => {\n  return (\n    <Container>\n      <span>\n        <TextLine>the tonic note is always white</TextLine>\n      </span>\n      <span>\n        <GradientGreen>tonic chords have a green pitch</GradientGreen>\n      </span>\n      <span>\n        <GradientCool>predominants are in cool colors</GradientCool>\n      </span>\n      <span>\n        <GradientWarm>dominants are in warm colors</GradientWarm>\n      </span>\n      <span>\n        <GradientBright>major mode is brighter</GradientBright>\n      </span>\n      <span>\n        <GradientDark>minor mode is darker</GradientDark>\n      </span>\n    </Container>\n  );\n};\n\nexport default Metaphors;\n","import * as React from \"react\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { VoiceMask } from \"../../App\";\nimport { SecondsConverter, SetVoiceMask } from \"../Rawl\";\nimport { ScrollInfo } from \"../SystemLayout\";\n\nexport const VoiceName: React.FC<{\n  voiceName: string;\n  voiceMask: VoiceMask;\n  setVoiceMask: SetVoiceMask;\n  voiceIndex: number;\n  scrollInfo: ScrollInfo;\n  secondsToX: SecondsConverter;\n  midiNumberToY: (number) => number;\n}> = ({\n  voiceName,\n  voiceMask,\n  setVoiceMask,\n  voiceIndex,\n  scrollInfo,\n  secondsToX,\n  midiNumberToY,\n}) => {\n  const isSingleActive =\n    voiceMask[voiceIndex] && voiceMask.filter((voice) => voice).length === 1;\n\n  const ref = useRef(null);\n  const [top, setTop] = useState(0);\n\n  const updatePosition = () => {\n    if (ref.current) {\n      const outerComponentRect =\n        ref.current.parentElement.getBoundingClientRect();\n      setTop(outerComponentRect.top + window.scrollY - 5);\n    }\n  };\n\n  useEffect(updatePosition, [scrollInfo, secondsToX, midiNumberToY]);\n\n  useEffect(() => {\n    ref.current\n      .closest(\".SplitLayout\")\n      ?.addEventListener(\"scroll\", updatePosition);\n\n    ref.current.closest(\".Rawl\")?.addEventListener(\"scroll\", updatePosition);\n\n    return () => {\n      ref.current\n        .closest(\".SplitLayout\")\n        ?.removeEventListener(\"scroll\", updatePosition);\n      ref.current\n        .closest(\".Rawl\")\n        ?.removeEventListener(\"scroll\", updatePosition);\n    };\n  }, []);\n\n  return (\n    <span\n      style={{\n        position: \"fixed\",\n        top,\n        left: 2,\n        marginLeft: 2,\n        marginTop: 7,\n        fontFamily: \"sans-serif\",\n        fontSize: 12,\n        textShadow: \"0 0 1px black, 0 0 3px black, 0 0 6px black\",\n        userSelect: \"none\",\n        zIndex: 100,\n      }}\n      ref={ref}\n      onClick={(e) => {\n        e.stopPropagation();\n      }}\n    >\n      <span>\n        <button\n          style={{\n            cursor: \"pointer\",\n            userSelect: \"none\",\n            fontFamily: \"sans-serif\",\n            fontSize: 12,\n          }}\n          onClick={(e) => {\n            e.stopPropagation();\n            isSingleActive\n              ? setVoiceMask(voiceMask.map(() => true))\n              : setVoiceMask(voiceMask.map((_, i) => i === voiceIndex));\n          }}\n        >\n          {isSingleActive ? \"Unsolo All\" : \"Solo\"}\n        </button>\n\n        <input\n          title=\"active\"\n          type=\"checkbox\"\n          onChange={(e) => {\n            e.stopPropagation();\n            setVoiceMask(\n              voiceMask.map((value, i) => (i === voiceIndex ? !value : value)),\n            );\n          }}\n          checked={voiceMask[voiceIndex]}\n          style={{\n            margin: \"0px 0px 0px 17px\",\n            height: 11,\n            display: isSingleActive ? \"none\" : \"inline\",\n          }}\n        />\n      </span>\n      <span\n        style={{\n          color: voiceMask[voiceIndex] ? \"white\" : \"#444\",\n          marginLeft: \"10px\",\n          zIndex: 100,\n        }}\n      >\n        {voiceName}\n      </span>\n    </span>\n  );\n};\n","// The simplest possible algorithm:\n// Count all pitched midi events, find a fifth where min count of two notes\n// will be the highest\n\nimport { MeasuresAndBeats } from \"./SystemLayout\";\nimport { PitchClass } from \"./analysis\";\nimport { Note } from \"./parseMidi\";\n\nexport const findTonic = (notes: Note[]): PitchClass | -1 => {\n  const countPitchClasses = [];\n  for (let i = 0; i < 12; ++i) {\n    countPitchClasses.push(0);\n  }\n  notes.forEach(\n    (note) =>\n      (countPitchClasses[note.note.midiNumber % 12] +=\n        note.span[1] - note.span[0]),\n  );\n  let bestTonic = -1;\n  let bestValue = -Infinity;\n  const scores = [];\n  for (let i = 0; i < 12; ++i) {\n    const currentValue =\n      1.5 * countPitchClasses[i] +\n      0.7 * countPitchClasses[(i + 4) % 12] +\n      countPitchClasses[(i + 7) % 12] -\n      5 *\n        Math.min(\n          countPitchClasses[(i + 3) % 12],\n          countPitchClasses[(i + 4) % 12],\n        ) -\n      20 * countPitchClasses[(i + 1) % 12] -\n      7 * countPitchClasses[(i + 6) % 12];\n\n    scores.push(currentValue);\n    if (currentValue > bestValue) {\n      bestTonic = i;\n      bestValue = currentValue;\n    }\n  }\n  console.log(\"count\", countPitchClasses);\n  console.log(\"scores\", scores);\n  console.log(\"bestValue\", bestValue);\n  console.log(\"bestTonic\", bestTonic);\n  return bestTonic as PitchClass | -1;\n};\n\nexport const findFirstPhraseStart = (\n  notes: Note[],\n  measuresAndBeats: MeasuresAndBeats,\n): number => {\n  let result = -1;\n  const { measures, beats } = measuresAndBeats;\n  // Find left-most note with pitch. If it's on beat 1, that's the measure. Otherwise it's anacrusis.\n  let earliestOnset = Math.min(\n    ...notes.filter((note) => !note.isDrum).map((note) => note.span[0]),\n  );\n\n  while (result + 1 < measures.length) {\n    if (earliestOnset < measures[result + 1]) {\n      break;\n    }\n    result++;\n  }\n  if (\n    earliestOnset > measures[result] * 0.75 + measures[result + 1] * 0.25 ||\n    beats.filter(\n      (beat) => beat > measures[result] && beat < measures[result + 1],\n    ).length <\n      beats.filter(\n        (beat) => beat > measures[result + 1] && beat < measures[result + 2],\n      ).length\n  ) {\n    result++;\n  }\n  return result;\n};\n","import React, { useContext, useEffect } from \"react\";\nimport { AppContext } from \"../../AppContext\";\n\nexport type SystemLayout = \"merged\" | \"frozen\";\n\ninterface LayoutSelectorProps {\n  setSystemLayout: React.Dispatch<React.SetStateAction<SystemLayout>>;\n}\n\nconst LayoutSelector: React.FC<LayoutSelectorProps> = ({ setSystemLayout }) => {\n  const { registerKeyboardHandler, unregisterKeyboardHandler } =\n    useContext(AppContext);\n\n  useEffect(() => {\n    const handleKeyPress = (e: KeyboardEvent) => {\n      if (e.key === \"f\") {\n        setSystemLayout((prevLayout) => {\n          if (prevLayout === \"frozen\") return \"merged\";\n          return \"frozen\";\n        });\n      }\n    };\n\n    registerKeyboardHandler(\"frozenLayoutSwitch\", handleKeyPress);\n    return () => {\n      unregisterKeyboardHandler(\"frozenLayoutSwitch\");\n    };\n  }, [registerKeyboardHandler, unregisterKeyboardHandler, setSystemLayout]);\n\n  return <></>;\n};\n\nexport default LayoutSelector;\n","import minBy from \"lodash/minBy\";\nimport { MeasuresAndBeats } from \"./SystemLayout\";\nimport { ManualMeasures } from \"./analysis\";\nimport { Note } from \"./parseMidi\";\n\nconst snap = (time: number, notes: Note[]) =>\n  minBy(notes, ({ span: [start] }) => Math.abs(time - start)).span[0];\n\nexport const buildManualMeasuresAndBeats = (\n  manualMeasures: ManualMeasures,\n  notes: Note[],\n): MeasuresAndBeats => {\n  const { measureStarts, beatsPerMeasure } = manualMeasures;\n  const measures = [measureStarts[1] ?? 0];\n  const beats = [];\n  let currentBeatsPerMeasure = beatsPerMeasure[1] ?? 4;\n  let previousBeatsPerMeasure = currentBeatsPerMeasure;\n  let measureIndex = 1;\n  let currentMeasureLength = 1.0;\n  while (true) {\n    measureIndex++;\n    let newMeasure =\n      measureStarts[measureIndex] ??\n      snap(\n        measures.at(-1) +\n          (currentMeasureLength * currentBeatsPerMeasure) /\n            previousBeatsPerMeasure,\n        notes,\n      );\n    if (newMeasure - measures.at(-1) < 0.01) {\n      newMeasure = measures.at(-1) + 2;\n    }\n    for (let i = 1; i < currentBeatsPerMeasure; ++i) {\n      beats.push(\n        (measures.at(-1) * (currentBeatsPerMeasure - i)) /\n          currentBeatsPerMeasure +\n          (newMeasure * i) / currentBeatsPerMeasure,\n      );\n    }\n    previousBeatsPerMeasure = currentBeatsPerMeasure;\n    currentBeatsPerMeasure =\n      beatsPerMeasure[measureIndex] ?? currentBeatsPerMeasure;\n    currentMeasureLength = newMeasure - measures.at(-1);\n    measures.push(newMeasure);\n    if (notes.every((note) => note.span[1] < newMeasure)) {\n      break;\n    }\n  }\n  return { measures, beats };\n};\n","import * as React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { formatComposerName, getEmojis } from \"../../utils/corpusUtils\";\nimport { corpora } from \"./corpora/corpora\";\n\nconst highlightMatch = (text: string, term: string) => {\n  if (!term) return text;\n  const regex = new RegExp(\n    `(${term.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\")})`,\n    \"gi\",\n  );\n  const parts = text.split(regex);\n  return parts.map((part, index) =>\n    regex.test(part) ? <mark key={index}>{part}</mark> : part,\n  );\n};\n\nconst SearchContainer = styled.div`\n  max-width: 100%;\n`;\n\nconst SearchInputContainer = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 20px;\n`;\n\nconst SearchInput = styled.input`\n  flex-grow: 1;\n  padding: 10px;\n  box-sizing: border-box;\n`;\n\nconst TotalCount = styled.span`\n  margin-left: 10px;\n  color: #888;\n  font-size: 0.9em;\n`;\n\nconst ResultsContainer = styled.div`\n  width: 100%;\n  overflow-y: auto;\n  text-align: left;\n`;\n\nconst ColumnContainer = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  gap: 20px;\n  width: 100%;\n`;\n\nconst CorpusSearch: React.FC = () => {\n  const [searchTerm, setSearchTerm] = React.useState(\"\");\n  const searchInputRef = React.useRef<HTMLInputElement>(null);\n  const [totalMidis, setTotalMidis] = React.useState(0);\n\n  React.useEffect(() => {\n    if (searchInputRef.current) {\n      searchInputRef.current.focus();\n    }\n\n    const uniqueMidis = new Set(corpora.flatMap((corpus) => corpus.midis));\n    setTotalMidis(uniqueMidis.size);\n  }, []);\n\n  const filteredCorpora = corpora.filter((corpus) => {\n    if (searchTerm === \"\") return corpus.midis.length >= 1;\n\n    const searchTerms = searchTerm.toLowerCase().split(/\\s+/);\n    const corpusWords = corpus.slug.toLowerCase().split(/[-_\\s]+/);\n    const midiWords = corpus.midis.flatMap((midi) =>\n      midi.toLowerCase().split(/[-_\\s]+/),\n    );\n\n    return searchTerms.every(\n      (term) =>\n        corpusWords.some((word) => word.includes(term)) ||\n        midiWords.some((word) => word.includes(term)),\n    );\n  });\n\n  const renderEmptySearchResults = () => {\n    const sortedCorpora = filteredCorpora.sort(\n      (a, b) => b.midis.length - a.midis.length,\n    );\n\n    // Group corpora by country\n    const groupedCorpora = sortedCorpora.reduce(\n      (acc, corpus) => {\n        const group = corpus.country || \"Styles\";\n        if (!acc[group]) {\n          acc[group] = [];\n        }\n        acc[group].push(corpus);\n        return acc;\n      },\n      {} as Record<string, typeof corpora>,\n    );\n\n    // Sort countries by number of corpora (not pieces)\n    const sortedGroups = Object.entries(groupedCorpora).sort((a, b) => {\n      if (a[0] === \"Styles\") return -1;\n      if (b[0] === \"Styles\") return 1;\n      return b[1].length - a[1].length;\n    });\n\n    // Separate single-corpus countries\n    const multiCorpusGroups = sortedGroups.filter(\n      ([country, corpora]) => corpora.length > 1 || country === \"Styles\",\n    );\n    const singleCorpusEntries = sortedGroups\n      .filter(\n        ([country, corpora]) => corpora.length === 1 && country !== \"Styles\",\n      )\n      .flatMap(([country, corpora]) =>\n        corpora.map((corpus) => ({ country, corpus })),\n      )\n      .sort((a, b) => b.corpus.midis.length - a.corpus.midis.length);\n\n    return (\n      <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"50px\" }}>\n        {/* Multi-corpus countries */}\n        {multiCorpusGroups.map(([country, corpora]) => (\n          <div key={country} style={{ textAlign: \"left\" }}>\n            <h3 style={{ marginBottom: \"10px\" }}>\n              {country} {country !== \"Styles\" && getEmojis(country)}\n              <span\n                style={{\n                  fontSize: \"0.6em\",\n                  color: \"gray\",\n                  marginLeft: \"8px\",\n                }}\n              >\n                {corpora.reduce((sum, corpus) => sum + corpus.midis.length, 0)}\n              </span>\n            </h3>\n            <div style={{ display: \"flex\", flexWrap: \"wrap\", gap: \"10px\" }}>\n              {corpora.map(({ slug, midis }) => (\n                <div key={slug} style={{ marginRight: \"20px\" }}>\n                  <Link to={`/corpus/${slug}`}>\n                    {formatComposerName(slug)}{\" \"}\n                    <span style={{ fontSize: \"0.6em\", color: \"gray\" }}>\n                      {midis.length}\n                    </span>\n                  </Link>\n                </div>\n              ))}\n            </div>\n          </div>\n        ))}\n\n        {/* Single-corpus countries */}\n        {singleCorpusEntries.length > 0 && (\n          <div style={{ textAlign: \"left\" }}>\n            <h3 style={{ marginBottom: \"10px\" }}>Single Composers</h3>\n            <div\n              style={{\n                display: \"flex\",\n                flexWrap: \"wrap\",\n                gap: \"16px\",\n                alignItems: \"center\",\n              }}\n            >\n              {singleCorpusEntries.map(({ country, corpus }) => (\n                <div\n                  key={corpus.slug}\n                  style={{\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    gap: \"8px\",\n                    minWidth: \"200px\",\n                  }}\n                >\n                  {getEmojis(country)}\n                  <Link to={`/corpus/${corpus.slug}`}>\n                    {formatComposerName(corpus.slug)}\n                    <span\n                      style={{\n                        fontSize: \"0.6em\",\n                        color: \"gray\",\n                      }}\n                    >\n                      {corpus.midis.length}\n                    </span>\n                  </Link>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  return (\n    <SearchContainer>\n      <SearchInputContainer>\n        <SearchInput\n          ref={searchInputRef}\n          type=\"text\"\n          placeholder=\"Search composers or songs, eg. 'nocturne', 'entertainer', 'jaws', 'autumn leaves', 'succession', 'bts', 'chopin', 'mario'\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n        />\n        <TotalCount>{totalMidis} MIDIs</TotalCount>\n      </SearchInputContainer>\n      <ResultsContainer>\n        {searchTerm === \"\"\n          ? renderEmptySearchResults()\n          : filteredCorpora.map(({ slug, midis }) => {\n              const searchTerms = searchTerm.toLowerCase().split(/\\s+/);\n              const composerMatched = searchTerms.every((term) =>\n                slug\n                  .toLowerCase()\n                  .split(/[-_\\s]+/)\n                  .some((word) => word.includes(term)),\n              );\n              const matchingMidis = midis.filter((midi) =>\n                searchTerms.every((term) =>\n                  midi\n                    .toLowerCase()\n                    .split(/[-_\\s]+/)\n                    .some((word) => word.includes(term)),\n                ),\n              );\n\n              return (\n                <div\n                  key={slug}\n                  style={{\n                    borderLeft: composerMatched ? \"3px solid yellow\" : \"none\",\n                    paddingLeft: composerMatched ? \"10px\" : \"0\",\n                    marginBottom: \"15px\",\n                    textAlign: \"left\",\n                  }}\n                >\n                  <Link to={`/corpus/${slug}`}>\n                    {highlightMatch(slug.replace(/_/g, \" \"), searchTerm)}{\" \"}\n                    <span style={{ color: \"white\", fontSize: \"0.6em\" }}>\n                      {midis.length}\n                    </span>\n                  </Link>\n                  {(composerMatched || searchTerm) &&\n                    matchingMidis.map((midi) => (\n                      <div key={midi} style={{ paddingLeft: \"20px\" }}>\n                        <a\n                          href={`/f/${midi}`}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                        >\n                          {highlightMatch(\n                            midi.replace(/---/g, \" – \").replace(/-/g, \" \"),\n                            searchTerm,\n                          )}\n                        </a>\n                      </div>\n                    ))}\n                </div>\n              );\n            })}\n      </ResultsContainer>\n    </SearchContainer>\n  );\n};\n\nexport default CorpusSearch;\n","import * as React from \"react\";\nimport { ReactNode } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { InlinePianoLegend } from \"./legends/PianoLegend\";\n\nconst NeonLink = styled.a`\n  display: inline-block;\n  padding: 2px 6px; // Adjust padding as needed\n  color: #fff; // White text color for the neon effect\n  font-size: 17px;\n  font-family: \"Helvetica Neue\", Arial, sans-serif; // Sexy sans-serif font\n  text-decoration: none;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  margin-right: 40px;\n\n  &:hover,\n  &:visited:hover {\n    color: #fff; // Lighter pink color on hover for added interaction\n    text-shadow:\n      0 0 5px #660,\n      0 0 15px #660;\n  }\n`;\n\nconst Example: React.FC<{ name: string; pathname: string; bad?: boolean }> = ({\n  name,\n  pathname,\n  bad = false,\n}) => (\n  <NeonLink key={pathname} href={pathname} target=\"_blank\">\n    <span style={bad ? { textDecoration: \"line-through\" } : {}}>{name}</span>\n  </NeonLink>\n);\n\nconst Container = styled.div`\n  display: flex;\n  width: 100vw; // Set container width to 100% of the viewport width\n  justify-content: center; // Center the children horizontally\n`;\n\nconst Side = styled.div<{ sideImage: string }>`\n  flex-grow: 1;\n  background-size: cover;\n  background-position: center;\n  // Basic structure for the background-image, actual gradient will be defined in LeftSide and RightSide\n  background-image: url(${(props) => props.sideImage});\n`;\n\nconst LeftSide = styled(Side)`\n  margin-right: 20px;\n  background-image: linear-gradient(\n      to right,\n      rgba(0, 0, 0, 0) 0%,\n      rgba(0, 0, 0, 1) 100%\n    ),\n    url(${(props) => props.sideImage});\n`;\n\nconst RightSide = styled(Side)`\n  margin-left: 20px;\n  background-image: linear-gradient(\n      to left,\n      rgba(0, 0, 0, 0) 0%,\n      rgba(0, 0, 0, 1) 100%\n    ),\n    url(${(props) => props.sideImage});\n`;\n\nconst Content = styled.div`\n  width: 900px; // Set a fixed width for the content\n  margin: auto; // Center the content block horizontally within its container\n\n  display: flex; // Enable flexbox for this container\n  flex-direction: column; // Stack children vertically\n  justify-content: center; // Center children vertically in the container\n  align-items: center; // Center children horizontally in the container\n\n  text-align: center; // Center text inside the content (if needed)\n\n  @media (max-width: 900px) {\n    width: 100%; // Make width 100% on smaller screens\n    padding: 0 20px; // Add padding to avoid touching the screen edges\n  }\n`;\n\nexport const ChordStairsContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 100px;\n  margin-top: 30px;\n  margin-bottom: 30px;\n\n  @media (max-width: 900px) {\n    flex-direction: column;\n  }\n`;\n\nconst LegendAndMetaphorsContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 100px;\n  margin-top: 30px;\n  margin-bottom: 30px;\n\n  @media (max-width: 900px) {\n    gap: 20px;\n  }\n`;\n\nconst Section: React.FC<{\n  title: string;\n  children: ReactNode;\n  scale?: number[];\n}> = ({ title, children, scale }) => {\n  return (\n    <div\n      style={{\n        marginTop: 50,\n        textAlign: \"left\",\n        width: \"100%\",\n        display: \"flex\",\n        flexDirection: \"row\",\n        gap: 5,\n      }}\n    >\n      <div\n        style={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          gap: 5,\n        }}\n      >\n        <span style={{ color: \"gray\", width: 120 }}>{title} </span>\n        {scale && <InlinePianoLegend enabledPitches={scale} />}\n      </div>\n      <div>{children}</div>\n    </div>\n  );\n};\n\nconst OldLandingPage = () => (\n  <Container>\n    <Content>\n      <div style={{ margin: \"100px 0 100px 0\" }}>\n        <iframe\n          width=\"560\"\n          height=\"315\"\n          src=\"https://www.youtube.com/embed/uW7r-nehi7o?si=zjR312K-CGekpBwU\"\n          title=\"YouTube video player\"\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\"\n          allowFullScreen\n          style={{ border: \"0px\" }}\n        />\n      </div>\n\n      <Section title=\"EdMAC 2024\">\n        <div style={{ color: \"gray\" }}>Gavottes</div>\n        <Example\n          name={\"Mozart, Piano Sonata in D, K. 284\"}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%206,%20K284.mid\"\n          }\n        />\n        <Example\n          name={\"Händel HWV 491\"}\n          pathname={\"f/gavotte_in_g_major_hwv_491_handel_george_frideric\"}\n        />\n        <Example name={\"F. J. Gossec\"} pathname={\"f/gavotte_f_j_gossec\"} />\n        {/* <Example\n          name={\"Mahler, Symphony #4, mov. 3\"}\n          pathname={\"f/mahler_4_3\"}\n          bad={true}\n        /> */}\n        <div style={{ color: \"gray\" }}>Bruckner</div>\n        <Example name={\"8/1\"} pathname={\"f/bruckner_8\"} />\n        <Example name={\"8/1 (another file)\"} pathname={\"f/symphony_8_1\"} />\n        <Example name={\"7/1\"} pathname={\"f/bruckner_7_1\"} />\n        <Example name={\"7/2\"} pathname={\"f/bruckner_7_2\"} />\n        <div style={{ color: \"gray\" }}>\n          Structural Versus Rhetorical Musical Borrowing\n        </div>\n        <Example\n          name={\"Ravel, Pavane pour une infante défunte\"}\n          pathname={\"f/pavane_pour_une_infante_defunte_ravel_recorder\"}\n        />\n        <Example name={\"The Lamp is Low\"} pathname={\"f/the_lamp_is_low\"} />\n        <Example name={\"Debussy, Rêverie\"} pathname={\"f/reverie_galimberti\"} />\n        <div style={{ color: \"gray\" }}>Energetic Overflow</div>\n        <Example\n          name={\"Chopin, Ballade in F minor, op. 52\"}\n          pathname={\"f/chopin_ballade_no_4_piano_solo\"}\n        />\n        <Example\n          name={\"Brahms, Intermezzo op. 118 no. 1 in A minor\"}\n          pathname={\"f/brahms_op118_1\"}\n        />\n        <div style={{ color: \"gray\" }}>Eleanor Rigby</div>\n        <Example\n          name={\"The Beatles\"}\n          pathname={\"c/MIDI/The%20Beatles/Eleanor%20Rigby.4.mid\"}\n        />\n        <Example\n          name={\"Cody Fry\"}\n          pathname={\"/f/eleanor_rigby_cody_fry_no_perc1\"}\n        />\n\n        <div style={{ color: \"gray\" }}>Piazzolla, Histoire du Tango:</div>\n        <Example\n          name={\"Bordel 1900\"}\n          pathname={\"f/piazzolla_histoire_du_tango_bordel_1900\"}\n        />\n        <Example\n          name={\"Cafe 1930\"}\n          pathname={\"f/piazzolla_histoire_du_tango_cafe_1930\"}\n        />\n        <Example\n          name={\"Nightclub 1960\"}\n          pathname={\"f/piazzolla_histoire_du_tango_nightclub_1960\"}\n        />\n        <Example\n          name={\"Concert d'aujourd'hui\"}\n          pathname={\"f/piazzolla_histoire_du_tango_concert_aujourdhui\"}\n        />\n        {/* <div style={{ color: \"gray\" }}>Tigran Hamasyan:</div>\n        <Example name={\"Kars 1\"} pathname={\"f/kars_1_tigran_hamasyan\"} /> */}\n        <div style={{ color: \"gray\" }}>Max Steiner</div>\n        <Example\n          name={\"Now Voyager Suite (choose ☰ in top-right, mute chords)\"}\n          pathname={\"f/now_voyager_suite_max_steiner\"}\n        />\n        <div style={{ color: \"gray\" }}>Rachmaninoff, piano concert #4:</div>\n        <Example name={\"1\"} pathname={\"f/rachmaninoff_piano_concerto_4_1\"} />\n        <Example\n          name={\"2\"}\n          pathname={\"f/piano_concerto_no_4_op_40_sergei_rachmaninoff_ii_largo\"}\n          bad={true}\n        />\n        <Example\n          name={\"3\"}\n          pathname={\n            \"f/piano_concerto_no_4_op_40_sergei_rachmaninoff_iii_allegro_vivace\"\n          }\n          bad={true}\n        />\n      </Section>\n      <Section title=\"Yoel Greenberg, How Sonata Forms (2022)\">\n        <Example\n          name={\"2.1. Scarlatti, K. 159\"}\n          pathname={\"f/sonata_k159_scarlatti\"}\n        />\n        <Example\n          name={\"4.1. Corelli, op. 1 no. 8, II\"}\n          pathname={\"f/corelli_op1_no8_ii\"}\n        />\n      </Section>\n      <Section title=\"Third school\">\n        <Example name={\"ABBA, “SOS”\"} pathname={\"c/MIDI/ABBA/S.O.S.mid\"} />\n        <Example\n          name={\"Ed Sheeran, “Shivers”\"}\n          pathname={\"f/shivers_ed_sheeran_shivers_ed_sheeran_mixed_ensemble\"}\n        />\n        <Example\n          name={\"Earth, Wind & Fire, “September”\"}\n          pathname={\"f/earth_wind_fire_september\"}\n        />\n        <Example\n          name={\"Michael Jackson “Rock With You”\"}\n          pathname={\"c/MIDI/Michael%20Jackson/Rock%20With%20You.mid\"}\n        />\n        <Example\n          name={\"The Korgis, “Everybody’s Got to Learn Sometime”\"}\n          pathname={\n            \"c/MIDI/Korgis/Everybody%27s%20Got%20to%20Learn%20Sometime.mid\"\n          }\n        />\n        <Example\n          name={\"Simply Red, “If You Don’t Know Me By Now”\"}\n          pathname={\n            \"c/MIDI/Simply%20Red/If%20You%20Don%27t%20Know%20Me%20By%20Now.mid\"\n          }\n        />\n        <Example\n          name={\"Gotye (feat. Kimbra), “Somebody That I Used to Know”\"}\n          pathname={\"f/gotye_feat_kimbra_somebody_that_i_used_to_know\"}\n        />\n        <Example\n          name={\"Peter Gabriel, “Solsbury Hill”\"}\n          pathname={\"c/MIDI/Peter%20Gabriel/Solsbury%20Hill.mid\"}\n        />\n        <Example\n          name={\"Björk, “Hyperballad”\"}\n          pathname={\"c/MIDI/Bjork/Hyper-Ballad.mid\"}\n        />\n        <Example\n          name={\"Coldplay, “Viva la Vida”\"}\n          pathname={\"f/Viva_La_Vida_Coldplay\"}\n        />\n      </Section>\n      <Section title=\"major\" scale={[0, 2, 4, 5, 7, 9, 11]}>\n        <Example name={\"Feliz Navidad\"} pathname={\"f/Feliz_Navidad\"} />\n        <Example\n          name={\"John Lennon – Imagine\"}\n          pathname={\"f/John_Lennon_Imagine\"}\n        />\n        <Example\n          name={\"Ed Sheeran – Perfect\"}\n          pathname={\"f/Ed_Sheeran_Perfect\"}\n        />\n        <Example name={\"Jingle Bell Rock\"} pathname={\"f/Jingle_Bell_Rock\"} />\n        <Example\n          name={\"Joe Hisaishi – Summer\"}\n          pathname={\"f/Summer_Joe_Hisaishi\"}\n        />\n        <Example\n          name={\"Super Mario Bros\"}\n          pathname={\"f/Super_Mario_Bros_Main_Theme\"}\n        />\n        <Example name={\"Disney – Up\"} pathname={\"f/Disney_Pixar_Up_Theme\"} />\n        <Example\n          name={\"Yiruma – Kiss the Rain\"}\n          pathname={\n            \"f/Kiss_The_Rain_-_Yiruma_-_10th_Anniversary_Version_Piano_Updated_2019\"\n          }\n        />\n        <Example\n          name={\"Julius Fučík – Entrance of the Gladiators\"}\n          pathname={\"f/Entry_of_the_Gladiators_-_Julius_Fuk_-_1897\"}\n        />\n      </Section>\n      <Section title=\"natural minor\" scale={[0, 2, 3, 5, 7, 8, 10]}>\n        <Example\n          name={\"Game of Thrones\"}\n          pathname={\"f/Game_of_Thrones_Easy_piano\"}\n        />\n        <Example name={\"Hallelujah\"} pathname={\"f/Hallelujah\"} />\n        <Example name={\"Jolene\"} pathname={\"f/Jolene\"} />\n        <Example\n          name={\"John Legend – All of Me\"}\n          pathname={\"f/All_Of_Me_-_John_Legend_Piano_Cover_-_ReiK\"}\n        />\n        <Example name={\"Minecraft – Sweden\"} pathname={\"f/Sweden_Minecraft\"} />\n        <Example\n          name={\"Yann Tiersen – Amélie\"}\n          pathname={\"f/Yann_Tiersen_Amelie\"}\n        />\n        <Example name={\"Despacito\"} pathname={\"f/Despacito\"} />\n      </Section>\n      <Section title=\"harmonic minor\" scale={[0, 2, 3, 5, 7, 8, 11]}>\n        <Example\n          name={\"Imagine Dragons – Believer\"}\n          pathname={\"f/Believer_-_Imagine_Dragons\"}\n        />\n        <Example name={\"Bella Ciao\"} pathname={\"f/Bella_Ciao\"} />\n        <Example\n          name={\"Requiem for a Dream\"}\n          pathname={\"f/Requiem_for_a_Dream\"}\n        />\n      </Section>\n      <Section title=\"mixed minor\" scale={[0, 2, 3, 5, 7, 8, 10, 11]}>\n        <Example name={\"Tetris\"} pathname={\"f/Tetris_Theme\"} />\n        <Example\n          name={\"Tetris (arr. Kyle Landry)\"}\n          pathname={\n            \"f/Kyle_Landrys_Tetris_Theme_Variations_for_Piano_SoloKorobeiniki\"\n          }\n        />\n        <Example\n          name={\"Pirates of the Caribbean\"}\n          pathname={\"f/Pirates_of_the_Caribbean_-_Hes_a_Pirate\"}\n        />\n        <Example\n          name={\"Carol of the Bells\"}\n          pathname={\"f/Carol_of_the_Bells\"}\n        />\n        <Example name={\"Godfather\"} pathname={\"f/Godfather\"} />\n        <Example name={\"Pokémon\"} pathname={\"f/Pokemon_Theme_Song\"} />\n        <Example name={\"Gravity Falls\"} pathname={\"f/Gravity_Falls_Opening\"} />\n      </Section>\n      <Section title=\"blues scale\" scale={[0, 3, 5, 6, 7, 10]}>\n        <Example name={\"Pink Panther\"} pathname={\"f/Pink_Panther\"} />\n        <Example\n          name={\"Megalovania\"}\n          pathname={\"f/Undertale_-_Megalovania_Piano_ver._3\"}\n        />\n        <Example name={\"Hit the Road Jack\"} pathname={\"f/Hit_the_Road_Jack\"} />\n      </Section>\n      <Section title=\"hijaz\" scale={[0, 1, 4, 5, 7, 8, 10]}>\n        <Example name={\"Underground Cocek\"} pathname={\"f/underground-cocek\"} />\n        <Example name={\"Tetris\"} pathname={\"f/korobeiniki-tetris\"} />\n        <Example\n          name={\"Dunavsko horo\"}\n          pathname={\"f/dunavsko-horo---diko-iliev-diko-iliev\"}\n        />\n      </Section>\n      <Section title=\"relative keys\">\n        <Example\n          name={\"Fly Me to the Moon\"}\n          pathname={\"f/Fly_Me_to_the_Moon\"}\n        />\n        <Example name={\"Titanic\"} pathname={\"f/Titanic\"} />\n      </Section>\n      <Section title=\"parallel keys\">\n        <Example\n          name={\"George Bizet – Habanera (from Carmen)\"}\n          pathname={\"f/Habanera_-_Piano_Solo_-_Georges_Bizet\"}\n        />\n        <Example name={\"Gymnopedie\"} pathname={\"f/Gymnopdie_No._1__Satie\"} />\n        <Example\n          name={\"Mozart – Piano Sonata No. 11, mov. 1 (variations)\"}\n          pathname={\"f/mozart_sonata_11_1st\"}\n        />\n      </Section>\n      <Section title=\"modulations\">\n        <Example\n          name={\"Michel Legrand – Umbrellas\"}\n          pathname={\n            \"c/Classical%20MIDI/Legrand/Michel%20Legrand%20-%20Umbrellas%201.mid\"\n          }\n        />\n        <Example\n          name={\"Attack on Titan\"}\n          pathname={\"f/Attack_on_Titan_Shinzou_wo_Sasageyo\"}\n        />\n        <Example\n          name={\"Disney – Frozen\"}\n          pathname={\"f/Let_It_Go_Disney_Frozen\"}\n        />\n        <Example\n          name={\"Chopin – Military Polonaise\"}\n          pathname={\"f/chopin_military_polonaise\"}\n        />\n\n        <Example\n          name={\"Beethoven – Sonata No. 5, mov. 1\"}\n          pathname={\"f/beethoven_sonate_5_1st\"}\n        />\n        <Example\n          name={\"George Bizet – Prelude to Act 1 of Carmen\"}\n          pathname={\"f/Prlude_to_Act_1_of_Carmen_-_Piano_Solo_-_Bizet\"}\n        />\n      </Section>\n      <Section title=\"chromatic\">\n        <Example\n          name={\"Tchaikovsky. Sugar Plum Fairy\"}\n          pathname={\n            \"c/Classical%20MIDI/Tchaikovsky/The%20Nutcracker%20(Suite%20from%20the%20Ballet),%20Op.%2071a%20–%203.%20Dance%20of%20the%20Sugar-Plum%20Fairy%20(D.%20Ganetz).mid\"\n          }\n        />\n      </Section>\n      <Section title=\"Balkan brass\">\n        <Example name={\"Underground Cocek\"} pathname={\"f/underground-cocek\"} />\n        <Example name={\"Bubamara\"} pathname={\"f/bubamara\"} />\n        <Example name={\"Ederlezi\"} pathname={\"f/ederlezi\"} />\n        <Example name={\"Hava Nagila\"} pathname={\"f/hava-nagila\"} />\n        <Example name={\"Kalashnjikov\"} pathname={\"f/kalasnjikov\"} />\n        <Example name={\"Tetris\"} pathname={\"f/korobeiniki-tetris\"} />\n        <Example name={\"Mesecina\"} pathname={\"f/mesecina\"} />\n      </Section>\n      <Section title=\"preludes by Chopin\">\n        <Example\n          name={\"4 (E minor)\"}\n          pathname={\n            \"c/Classical%20MIDI/Chopin/24%20Preludes,%20Op.%2028%20–%20No.%204%20in%20E%20minor%20('Suffocation')%20(J.%20Sirulnikoff).mid\"\n          }\n        />\n      </Section>\n      <Section title=\"symphonies\">\n        <Example\n          name={\"Rachmaninoff 1/i\"}\n          pathname={\n            \"c/Classical%20MIDI/Rachmaninoff/Symphony%20No.%201%20in%20D%20minor,%20Op.%2013%20for%20piano%20duet%20-%20I.%20Grave,%20Allegro%20ma%20non%20troppo.mid\"\n          }\n        />\n        <Example\n          name={\"Shostakovich 5/ii (solo piano)\"}\n          pathname={\"f/shostakovich_symphony_no5_2nd_movement_for_piano_solo\"}\n        />\n      </Section>\n      <Section title=\"John Williams\">\n        <Example\n          name={\"Double Trouble\"}\n          pathname={\n            \"c/Classical%20MIDI/Williams/Harry%20Potter/Prisoner%20of%20Azkaban%20-%20Double%20Trouble.mid\"\n          }\n        />\n      </Section>\n      <Section title=\"ragtimes by Scott Joplin\">\n        <Example\n          name={\"The Entertainer\"}\n          pathname={\"f/the_entertainer_scott_joplin\"}\n        />\n        <Example\n          name={\"Maple Leaf Rag\"}\n          pathname={\"f/Maple_Leaf_Rag_Scott_Joplin\"}\n        />\n        <Example\n          name={\"Pine Apple Rag\"}\n          pathname={\"f/Pine_Apple_Rag_-_Scott_Joplin_-_1908.mscz\"}\n        />\n        <Example\n          name={\"The Ragtime Dance\"}\n          pathname={\"f/the_ragtime_dance_scott_joplin_1906_arrangement\"}\n        />\n        <Example\n          name={\"Country Club\"}\n          pathname={\"f/country_club_ragtime_two_step_scott_joplin_1909\"}\n        />\n      </Section>\n      <Section title=\"jazz\">\n        <Example name={\"Misty\"} pathname={\"f/Misty_piano_solo\"} />\n        <Example name={\"White Christmas\"} pathname={\"f/white_christmas\"} />\n        <Example name={\"Tamás Deák – Vízisí\"} pathname={\"f/vizisi\"} />\n        <Example\n          name={\"George Gershwin – Rhapsody in Blue\"}\n          pathname={\"f/Gershwin_Rhapsody_in_Blue_Piano_solo\"}\n        />\n      </Section>\n      <Section title=\"sheet music\">\n        <Example\n          name={\"Scott Joplin – The Entertainer\"}\n          pathname=\"https://musescore.com/user/39031562/scores/15664612\"\n        />\n        <Example\n          name={\"Jingle Bell Rock (arr. John Herbert)\"}\n          pathname=\"https://musescore.com/user/39031562/scores/15670804\"\n        />\n        <Example\n          name={\"Jingle Bell Rock (arr. SkyRecon, in D)\"}\n          pathname=\"https://musescore.com/user/39031562/scores/15671017\"\n        />\n      </Section>\n      <Section title=\"James Hepokoski. A&nbsp;Sonata Theory Handbook (2020)\">\n        <Example\n          name={\"Mozart, Piano Sonata in B-flat, K. 333/i (Allegro)\"}\n          pathname={\"f/sonata_no_13_1st_movement_k_333\"}\n        />\n        <Example\n          name={\n            \"Mozart, Symphony No. 34 in C, K. 338/ii (Andante di molto più tosto Allegretto)\"\n          }\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Symphonies/Symphony%20No.%2034,%20K338%20–%20II.%20Andante%20di%20molto.mid\"\n          }\n        />\n        <Example\n          name={`Haydn, Symphony No. 100 in G, \"Military,\" first movement (Adagio-Allegro)`}\n          pathname={\"f/haydn_100_1\"}\n        />\n        <Example\n          name={`Haydn, String Quartet in G, op. 76 no. 1/i (Allegro con spirito)`}\n          pathname={\n            \"f/string_quartet_in_g_major_hob_iii_75_op_76_no_1_joseph_haydn\"\n          }\n        />\n        <Example\n          name={`Beethoven, Symphony No. 2 in D, op. 36/i (Adagio molto - Allegro con brio)`}\n          pathname={\n            \"c/Classical%20MIDI/Beethoven/Symphony%20No.%202%20(Lucarelli)%20-%201.mid\"\n          }\n        />\n        <Example\n          name={`Beethoven, String Quartet in E Minor, op. 59 no. 2/i (Allegro)`}\n          pathname={\"f/string_quartet_no_8_in_e_minor_opus_59_rasumovsky_no_2\"}\n        />\n        <Example\n          name={`Schubert, String Quartet No. 14 in D Minor, D. 810/i (Allegro)`}\n          pathname={\"f/schubert_death_and_maiden_string_quartet\"}\n        />\n        <div style={{ color: \"gray\" }}>also mentioned:</div>\n        <Example\n          name={`Mozart, Symphony No. 28 in C, K. 200/i (Allegro)`}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Symphonies/Symphony%20No.%2028,%20K200%20–%20I.%20Allegro.mid\"\n          }\n        />\n        <Example\n          name={`Mozart, Symphony No. 30 in D, K. 202/i (Allegro)`}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Symphonies/Symphony%20No.%2030,%20K202%20–%20I.%20Allegro.mid\"\n          }\n        />\n        <Example\n          name={`Mozart, Piano Sonata in F, K. 332/i (Allegro)`}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2013,%20K332%20–%20I.%20Allegro.mid\"\n          }\n        />\n        <Example\n          name={`Mozart, Symphony No. 39 in E-flat, K. 543/iv (Finale, Allegro Molto)`}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Symphonies/Symphony%20No.%2039,%20K543%20–%20IV.%20Finale%20(Allegro%20molto).mid\"\n          }\n        />\n      </Section>\n      <Section title=\"William E.&nbsp;Caplin. Analyzing Classical Form (2013)\">\n        <div>\n          <a\n            href=\"https://www.music.mcgill.ca/acf/\"\n            target=\"_blank\"\n            rel=\"noreferrer\"\n          >\n            the original companion website\n          </a>\n        </div>\n        <Example\n          name={\"2.1. Beethoven, Piano Sonata in F minor, Op. 2, No. 1\"}\n          pathname={\"f/beethoven_sonata_in_f_minor_op_2_no_1_movement_i\"}\n        />\n        <Example\n          name={\"2.2. Mozart, Rondo in D, K. 485\"}\n          pathname={\n            \"f/mozart_rondo_in_d_major_k_485_professional_production_score\"\n          }\n        />\n        <Example\n          name={\"2.3. Beethoven, Piano Sonata in G, Op. 14, No. 2/i\"}\n          pathname={\"f/beethoven_sonata_in_g_op_14_no_2_movement_i\"}\n        />\n        <Example\n          name={\"2.6. Mozart, Piano Sonata in C, K. 330/i\"}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2011,%20K330%20–%20I.%20Allegro%20moderato.mid\"\n          }\n        />\n        <Example\n          name={\"2.7. Beethoven, Bagatelle in G minor, Op. 119, No. 1\"}\n          pathname={\n            \"f/bagatelle_in_g_minor_op_119_no_1_ludwig_van_beethoven_16_07_1770_26_03_1827_piano_solo\"\n          }\n        />\n        <Example\n          name={\"2.9. Mozart, Piano Sonata in G, K. 283/i\"}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%205,%20K283.mid\"\n          }\n        />\n        <Example\n          name={`2.10. Mozart, String Quartet in C (\"Dissonance\"), K. 465/i`}\n          pathname={\"f/mozart_string_quartet_no_19_in_c_major_k465_dissonance\"}\n        />\n        <Example\n          name={`2.11. Mozart, Piano Sonata in C, K. 309/iii`}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2010,%20K309%20–%20III.%20Presto.mid\"\n          }\n        />\n        <Example\n          name={\"2.13. Beethoven, Piano Sonata in G, Op. 14, No. 2/i\"}\n          pathname={\"f/beethoven_sonata_in_g_op_14_no_2_movement_i\"}\n        />\n        <Example\n          name={\"2.14. Mozart, Piano Sonata in C, K. 330/i\"}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2011,%20K330%20–%20I.%20Allegro%20moderato.mid\"\n          }\n        />\n        <Example\n          name={`2.15. Mozart, Piano Sonata in C, K. 309/iii`}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2010,%20K309%20–%20III.%20Presto.mid\"\n          }\n        />\n        <Example\n          name={`2.16. Mozart, Piano Sonata in D, K. 311/iii`}\n          pathname={\"f/sonata_no_9_3rd_movement_k_311\"}\n        />\n        <Example\n          name={`2.17. Mozart, String Quartet in C (\"Dissonance\"), K. 465/i`}\n          pathname={\"f/mozart_string_quartet_no_19_in_c_major_k465_dissonance\"}\n        />\n        <Example\n          name={\"2.18. Beethoven, Bagatelle in G minor, Op. 119, No. 1\"}\n          pathname={\n            \"f/bagatelle_in_g_minor_op_119_no_1_ludwig_van_beethoven_16_07_1770_26_03_1827_piano_solo\"\n          }\n        />\n        <Example\n          name={\"2.23. Beethoven, Piano Sonata in C, Op. 2, No. 3/i\"}\n          pathname={\n            \"f/piano_sonata_no_3_in_c_major_op_2_no_3_ludwig_van_beethoven_piano_sonata_no_3_in_c_major_op_2_no_3_complete\"\n          }\n        />\n        <Example\n          name={\"2.25. Mozart, String Quartet in A, K. 464/ii (from m. 546)\"}\n          pathname={\"f/mozart_string_quartet_no_18_in_a_major_k464\"}\n        />\n        <Example\n          name={\"2.26. Mozart, Piano Sonata in F, K. 332/ii\"}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2013,%20K332%20–%20II.%20Menuetto.mid\"\n          }\n        />\n        <Example\n          name={\"2.27. Beethoven, Symphony No. 5 in C minor, Op. 67/i\"}\n          pathname={\n            \"c/Classical%20MIDI/Beethoven/Symphony%20No.%205%20(Galimberti)%20-%201.mid\"\n          }\n        />\n        <Example\n          name={\"2.29. Beethoven (?), Piano Sonatina in G, Anh. 5/i\"}\n          pathname={\"f/sonatina_in_g_beethoven_anh_5_no_1_beethoven\"}\n        />\n        <Example\n          name={\"2.30. Mozart, Fantasy for Piano in D minor, K. 397\"}\n          pathname={\"f/fantasia_in_d_minor_k_397_385g_wolfgang_amadeus_mozart\"}\n        />\n        <Example\n          name={\"2.33. Mozart, Piano Sonata in F, K. 332/iii\"}\n          pathname={\n            \"c/Classical%20MIDI/Mozart/Piano%20Sonatas/Piano%20Sonata%20No.%2013,%20K332%20–%20III.%20Allegro.mid\"\n          }\n        />\n        <Example\n          name={\"2.34. Beethoven, Piano Trio in B-flat, Op. 11/ii\"}\n          pathname={\n            \"f/beethoven_trio_for_clarinet_cello_and_piano_no_4_op_11_2nd_movement\"\n          }\n        />\n        <Example\n          name={\"2.35. Haydn, Piano Sonata in E minor, H. 34/ii\"}\n          pathname={\n            \"f/sonata_in_e_minor_hob_xvi_34_joseph_haydn_piano_sonata_hob_xvi_34_2_adagio\"\n          }\n        />\n      </Section>\n\n      <Section title=\"Barbershop\">\n        <Example\n          name={\"Kristofer Maddigan, Cuphead – A Quick Break\"}\n          pathname={\"f/cuphead_a_quick_break\"}\n        />\n        <Example\n          name={\n            \"Kristofer Maddigan, Cuphead – Don't Deal With The Devil (incomplete arrangement)\"\n          }\n          pathname={\"f/don_t_deal_with_the_devil_barbershop_quartet_cuphead\"}\n        />\n        <Example\n          name={\"God Only Knows, arr. Clay Hine (OST 'Bioshock Infinite')\"}\n          pathname={\"f/god_only_knows_bioshock_infinite_2013\"}\n        />\n        <Example\n          name={\"Chauncey Olcott, My Wild Irish Rose (polecat)\"}\n          pathname={\"f/my_wild_irish_rose\"}\n        />\n        <Example\n          name={\n            \"Never Gonna Give You Up (Rick Roll) - not a barbershop harmony\"\n          }\n          pathname={\"f/never_gunna_give_you_up_barbershop\"}\n        />\n      </Section>\n\n      {/* <Section title=\"Drew Nobile. Form as Harmony in Rock Music\">\n        <Example\n          name={\"2.1. Beethoven, Piano Sonata in F minor, Op. 2, No. 1\"}\n          pathname={\"f/beethoven_sonata_in_f_minor_op_2_no_1_movement_i\"}\n        />\n      </Section> */}\n\n      {/* <Example\n          name={\"Für Elise\"}\n          pathname={\"f/Fr_Elise\"}\n        /> */}\n\n      {/* <Example\n          name={\"Interstellar\"}\n          pathname={\"f/Interstellar\"}\n        />\n        <Example\n          name={\"Moonlight Sonata\"}\n          pathname={\n            \"f/Sonate_No._14_Moonlight_1st_Movement\"\n          }\n        /> */}\n\n      {/* <Example\n          name={\"Minecraft – Wet Hands\"}\n          pathname={\n            \"f/Wet_Hands_Minecraft\"\n          }\n        /> */}\n\n      {/* <Example\n          name={\"Ed Sheeran – Shape of You\"}\n          pathname={\n            \"f/Ed_Sheeran_Shape_of_you\"\n          }\n        /> */}\n      {/* <Example\n          name={\"Ed Sheeran – Photograph\"}\n          pathname={\n            \"f/Photograph_Ed_Sheeran\"\n          }\n        /> */}\n\n      {/* <Example\n          name={\"Billie Eilish – Bad Guy\"}\n          pathname={\n            \"f/Billie_Eilish_Bad_Guy\"\n          }\n        /> */}\n\n      <div style={{ marginTop: 100 }}>\n        <Link to={{ pathname: \"/course\" }} style={{ fontSize: 26 }}>\n          A course on rock harmony and arrangement\n        </Link>\n      </div>\n      <div style={{ marginTop: 100 }}>\n        I'm{\" \"}\n        <a href=\"mailto:cxielamiko@gmail.com\" target=\"_blank\" rel=\"noreferrer\">\n          Vitaly Pavlenko\n        </a>\n        . I explain my approach in{\" \"}\n        <a\n          href=\"https://twitter.com/vitalypavlenko/status/1771820942680830417\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          39 tweets\n        </a>\n        . The code is{\" \"}\n        <a\n          href=\"https://github.com/vpavlenko/rawl\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          on Github\n        </a>\n        . I also collect{\" \"}\n        <a\n          href=\"https://github.com/vpavlenko/study-music\"\n          target=\"_blank\"\n          rel=\"noreferrer\"\n        >\n          resources on music theory\n        </a>\n      </div>\n    </Content>\n  </Container>\n);\n\nexport default OldLandingPage;\n","import React from \"react\";\n\nconst shortcuts = {\n  Global: {\n    h: \"Toggle this help modal\",\n    Space: \"Play/Pause\",\n    \"-\": \"Decrease speed by 0.1\",\n    _: \"Decrease speed by 0.01\",\n    \"=\": \"Increase speed by 0.1\",\n    \"+\": \"Increase speed by 0.01\",\n    ArrowLeft: \"Seek backward 5 seconds\",\n    ArrowRight: \"Seek forward 5 seconds\",\n    f: \"Switch to frozen layout\",\n  },\n};\n\nconst styles = {\n  container: {\n    fontFamily: \"Arial, sans-serif\",\n    color: \"#ffffff\",\n    padding: \"20px\",\n    maxWidth: \"600px\",\n    margin: \"0 auto\",\n  },\n  h2: {\n    borderBottom: \"1px solid #444\",\n    paddingBottom: \"10px\",\n    marginBottom: \"20px\",\n  },\n  category: {\n    marginBottom: \"20px\",\n  },\n  h3: {\n    color: \"#bb86fc\",\n    marginBottom: \"10px\",\n  },\n  table: {\n    width: \"100%\",\n    borderCollapse: \"collapse\" as const,\n  },\n  tr: {\n    borderBottom: \"1px solid #333\",\n  },\n  td: {\n    padding: \"8px 0\",\n  },\n  kbd: {\n    backgroundColor: \"#333\",\n    color: \"#fff\",\n    padding: \"2px 5px\",\n    borderRadius: \"3px\",\n    fontFamily: \"monospace\",\n    fontSize: \"0.9em\",\n  },\n};\n\nexport const ShortcutHelp: React.FC = () => (\n  <div style={styles.container}>\n    <h2 style={styles.h2}>Keyboard Shortcuts</h2>\n    {Object.entries(shortcuts).map(([category, categoryShortcuts]) => (\n      <div key={category} style={styles.category}>\n        <h3 style={styles.h3}>{category}</h3>\n        <table style={styles.table}>\n          <tbody>\n            {Object.entries(categoryShortcuts).map(([key, description]) => (\n              <tr key={key} style={styles.tr}>\n                <td style={styles.td}>\n                  <kbd style={styles.kbd}>{key}</kbd>\n                </td>\n                <td style={styles.td}>{description}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    ))}\n  </div>\n);\n","import * as React from \"react\";\nimport { AppContext } from \"../../AppContext\";\nimport { filterSnippetsByAccess, getSnippetTags } from \"../analysis\";\nimport { ComposerTitle } from \"../book/Book\";\nimport { TOP_100_COMPOSERS, type Top100Composer } from \"../top100Composers\";\nimport { corpora } from \"./corpora\";\nimport { beautifySlug } from \"./utils\";\n\ninterface ComposerInfo {\n  slug: string;\n  composer: string;\n  order?: number;\n}\n\nconst Corpus: React.FC<{\n  slug: string;\n  composers?: ComposerInfo[];\n}> = ({ slug, composers }) => {\n  const { analyses } = React.useContext(AppContext);\n  const searchInputRef = React.useRef<HTMLInputElement>(null);\n\n  React.useEffect(() => {\n    if (searchInputRef.current) {\n      searchInputRef.current.focus();\n    }\n  }, []);\n\n  const getTagsForMidi = (midiSlug: string) => {\n    const analysis = analyses[`f/${midiSlug}`];\n    if (analysis) {\n      const filteredAnalysis = {\n        ...analysis,\n        snippets: filterSnippetsByAccess(analysis.snippets || []),\n      };\n      const tags = getSnippetTags(filteredAnalysis);\n      return tags.length > 0 ? tags : null;\n    }\n    return null;\n  };\n\n  const getComposerOrder = (midiSlug: string) => {\n    if (!composers) return undefined;\n    const composer = composers.find((c) => c.slug === midiSlug);\n    return composer?.order;\n  };\n\n  const getComposerInfo = (midiSlug: string): Top100Composer | undefined => {\n    return TOP_100_COMPOSERS.find((c) => c.slug === midiSlug);\n  };\n\n  const corpus = corpora.filter((corpus) => corpus.slug === slug)?.[0];\n  if (!corpus) {\n    return <div>Corpus {slug} not found</div>;\n  }\n\n  return (\n    <div style={{ marginBottom: \"100px\" }}>\n      <h1>{beautifySlug(slug)}</h1>\n      {corpus.posttext}\n      {corpus.midis.map((midiSlug, index) => {\n        const order = getComposerOrder(midiSlug);\n        const hasOrder = order !== undefined;\n        const composerInfo = getComposerInfo(midiSlug);\n\n        return (\n          <div\n            key={midiSlug}\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              marginBottom: \"10px\",\n            }}\n          >\n            <span style={{ marginRight: \"0.3em\", color: \"gray\" }}>{`${\n              index + 1\n            }. `}</span>\n            <a\n              href={`/f/${midiSlug}`}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              style={{\n                textDecoration: hasOrder ? \"line-through\" : \"none\",\n                color: hasOrder ? \"gray\" : \"#ffaa00\",\n              }}\n            >\n              {composerInfo ? (\n                <ComposerTitle\n                  composer={composerInfo.composer}\n                  displayTitle={composerInfo.displayTitle}\n                  style={{\n                    color: hasOrder ? \"gray\" : \"inherit\",\n                  }}\n                />\n              ) : (\n                beautifySlug(midiSlug)\n              )}\n              {hasOrder && <span style={{ marginLeft: \"5px\" }}>({order})</span>}\n            </a>\n            {getTagsForMidi(midiSlug) && (\n              <div\n                style={{\n                  marginLeft: \"50px\",\n                  display: \"flex\",\n                  flexWrap: \"wrap\",\n                }}\n              >\n                {getTagsForMidi(midiSlug).map((tag, index) => {\n                  const [chapter, topic] = tag.split(\":\");\n                  return (\n                    <div\n                      key={index}\n                      style={{\n                        color: hasOrder ? \"gray\" : \"inherit\",\n                        fontSize: \"0.7em\",\n                        marginRight: \"10px\",\n                        display: \"flex\",\n                        flexDirection: \"column\",\n                        alignItems: \"left\",\n                        lineHeight: \"1.2\",\n                      }}\n                    >\n                      <span style={{ color: \"gray\" }}>\n                        {chapter?.replace(/_/g, \" \")}\n                      </span>\n                      <span style={{ color: \"white\" }}>\n                        {topic?.replace(/_/g, \" \")}\n                      </span>\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default Corpus;\n","import React, { useCallback, useContext, useEffect, useState } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../../AppContext\";\nimport { Analysis, filterSnippetsByAccess, Snippet } from \"../analysis\";\nimport InlineRawlPlayer from \"../InlineRawlPlayer\";\nimport SnippetList from \"../SnippetList\";\nimport EXPLANATIONS from \"./explanations\";\n\nconst PathContainer = styled.div`\n  height: 100%;\n  width: 100%;\n  margin: 10px 0 0 0;\n  padding: 0;\n`;\n\nconst MenuContainer = styled.div<{ isRawlVisible?: boolean }>`\n  width: 100%;\n  height: ${(props) =>\n    props.isRawlVisible ? \"calc(50vh - 30px)\" : \"calc(100vh - 30px)\"};\n  overflow-y: auto;\n  background-color: black;\n  transition: height 0.3s ease-in-out;\n`;\n\nconst ChapterRow = styled.div`\n  display: flex;\n  flex-direction: column;\n  background-color: black;\n  width: 100%;\n`;\n\nconst ScrollableContent = styled.div`\n  flex-grow: 1;\n  overflow-y: auto;\n  overflow-x: hidden; // Remove horizontal scrolling\n  padding-top: 0; // Adjust padding to account for fixed menus\n`;\n\nconst ChapterButton = styled.button<{ active: boolean }>`\n  padding: 0px 5px;\n  text-align: left;\n  background-color: ${(props) => (props.active ? \"white\" : \"black\")};\n  color: ${(props) => (props.active ? \"black\" : \"white\")};\n  border: none;\n  cursor: pointer;\n  white-space: nowrap;\n  font-size: 14px;\n  border-radius: 4px;\n  width: fit-content;\n  user-select: none;\n\n  &:hover {\n    background-color: ${(props) => (props.active ? \"white\" : \"#333\")};\n  }\n`;\n\nconst CategorySection = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin-bottom: 16px;\n  width: fit-content;\n`;\n\nconst CategoryHeader = styled.div`\n  padding-left: 5px;\n  color: #999;\n  font-size: 14px;\n  letter-spacing: 0.5px;\n  text-align: left;\n  user-select: none;\n`;\n\nconst ChaptersContainer = styled.div<{ twoColumns?: boolean }>`\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  width: fit-content;\n\n  ${(props) =>\n    props.twoColumns &&\n    `\n    flex-direction: row;\n    gap: 0px;\n    \n    > div {\n      display: flex;\n      flex-direction: column;\n      gap: 4px;\n    }\n  `}\n`;\n\nconst TopicContainer = styled.div`\n  padding: 0; // Remove padding since we don't need spacing between topics anymore\n`;\n\nconst TopicCard = styled.div`\n  background-color: #000000;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n  width: 100%;\n  box-sizing: border-box;\n`;\n\nconst ErrorMessage = styled.div`\n  color: red;\n  margin-bottom: 10px;\n`;\n\nconst HomeChapter = styled.div`\n  font-size: 24px;\n  color: white;\n  text-align: center;\n  padding: 20px;\n`;\n\nconst TopicMenu = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  padding: 0px 16px 16px 16px;\n  background-color: black;\n  position: sticky;\n  top: 0;\n  z-index: 100000;\n`;\n\nconst TopicBubble = styled.span<{ active: boolean }>`\n  cursor: pointer;\n  background-color: ${(props) => (props.active ? \"white\" : \"black\")};\n  color: ${(props) => (props.active ? \"black\" : \"white\")};\n  padding: 6px 12px;\n  border-radius: 16px;\n  font-size: 14px;\n  text-decoration: none;\n  user-select: none;\n\n  &:hover {\n    background-color: ${(props) => (props.active ? \"white\" : \"#333\")};\n  }\n`;\n\nconst EjectButton = styled.button`\n  position: absolute;\n  top: -29px; // Position it above the player\n  right: 0;\n  background: #333;\n  color: white;\n  border: none;\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n  padding: 4px 8px;\n  cursor: pointer;\n  z-index: 100001; // Higher than TopicMenu\n  transition: background-color 0.2s;\n\n  &:hover {\n    background: #444;\n  }\n`;\n\nconst ChapterCategories = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 24px;\n  padding: 8px;\n`;\n\ntype ChapterCategories = {\n  [category: string]: string[];\n};\n\nconst CHAPTER_CATEGORIES: ChapterCategories = {\n  order_of_chords: [\n    \"major_cadence\",\n    \"progression\",\n    \"cycle_root_motion\",\n    \"shuttle\",\n    \"stasis\",\n    \"chunks\",\n    \"minor_cadence\",\n    \"last_chords\",\n  ],\n  texture: [\n    \"bass\",\n    \"voicing\",\n    \"LH\",\n    \"RH\",\n    \"doubling\",\n    \"arpeggio\",\n    \"texture\",\n    \"voice-leading\",\n    \"interval\",\n    \"inversion\",\n  ],\n  melody: [\"melody\", \"nonchord_tone\", \"ornament\", \"reharmonization\"],\n  chromaticism: [\n    \"applied\",\n    \"6_b6\",\n    \"chromatic_chords\",\n    \"cto7\",\n    \"rare_functional\",\n    \"chord_scale\",\n    \"b2\",\n    \"constant_structures\",\n    \"symmetric_chords\",\n    \"vgm_chromatic\",\n  ],\n  modulation: [\"modulation\", \"relative\", \"parallel\"],\n  scale: [\n    \"scale\",\n    \"dorian\",\n    \"mixolydian\",\n    \"modal_interchange\",\n    \"steady_scale\",\n    \"minor\",\n    \"predominants\",\n    \"pure_major\",\n    \"root_motion\",\n  ],\n  chord_types: [\n    \"chords\",\n    \"seventh_chords\",\n    \"V\",\n    \"extensions\",\n    \"ninth_chords\",\n    \"jazz\",\n  ],\n  rhythm_and_meter: [\"meter\", \"rhythm\", \"hypermeter\", \"harmonic_rhythm\"],\n  misc: [],\n};\n\nexport interface StructuresProps {\n  analyses: { [key: string]: Analysis };\n  initialChapter?: string;\n  initialTopic?: string;\n}\n\ninterface SnippetWithSlug {\n  snippet: Snippet;\n  slug: string;\n}\n\ninterface ChapterData {\n  chapter: string;\n  topics: {\n    topic: string;\n    snippets: SnippetWithSlug[];\n  }[];\n}\n\nconst formatCategoryLabel = (category: string) => {\n  return category\n    .split(\"_\")\n    .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\n    .join(\" \");\n};\n\nconst getMiscChapters = (\n  chapterData: ChapterData[],\n  categories: ChapterCategories,\n) => {\n  const allCategorizedChapters = new Set<string>();\n\n  Object.values(categories).forEach((contents) => {\n    contents.forEach((chapter) => allCategorizedChapters.add(chapter));\n  });\n\n  return chapterData.filter(\n    (chapter) => !allCategorizedChapters.has(chapter.chapter),\n  );\n};\n\n// Add this new component to render topic content\nconst TopicContent: React.FC<{\n  activeTopic: string;\n  activeChapter: number;\n  chapterData: ChapterData[];\n  snippets: { topic: string; snippets: SnippetWithSlug[] }[];\n  handleSnippetClick: (\n    slug: string,\n    measureStart: number,\n    topic: string,\n  ) => void;\n  loadingSnippets: Set<string>;\n}> = ({\n  activeTopic,\n  activeChapter,\n  chapterData,\n  snippets,\n  handleSnippetClick,\n  loadingSnippets,\n}) => {\n  console.log(\"TopicContent render, loadingSnippets:\", loadingSnippets);\n\n  return (\n    <ScrollableContent>\n      {activeTopic &&\n        snippets\n          .filter(({ topic }) => topic === activeTopic)\n          .map(({ topic, snippets }) => {\n            console.log(\"Rendering snippets for topic:\", topic);\n            console.log(\"Current loadingSnippets:\", loadingSnippets);\n\n            const fullTag = `${chapterData[activeChapter].chapter}:${topic}`;\n            const explanation = EXPLANATIONS[fullTag];\n\n            return (\n              <TopicContainer key={topic}>\n                {explanation && (\n                  <div\n                    style={{\n                      color: \"white\",\n                      fontSize: \"16px\",\n                      padding: \"16px 16px\",\n                    }}\n                  >\n                    {explanation}\n                  </div>\n                )}\n                <TopicCard>\n                  <SnippetList\n                    snippets={snippets.map(({ snippet }) => snippet)}\n                    slugs={snippets.map(({ slug }) => {\n                      console.log(\n                        \"Snippet slug:\",\n                        slug,\n                        \"isLoading:\",\n                        loadingSnippets.has(slug),\n                      );\n                      return slug;\n                    })}\n                    onSnippetClick={(snippet) => {\n                      const matchingSnippet = snippets.find(\n                        (s) => s.snippet === snippet,\n                      );\n                      if (matchingSnippet) {\n                        console.log(\"Snippet clicked:\", matchingSnippet.slug);\n                        handleSnippetClick(\n                          matchingSnippet.slug,\n                          snippet.measuresSpan[0],\n                          topic,\n                        );\n                      }\n                    }}\n                    isPreview={true}\n                    noteHeight={3}\n                    loadingSnippets={loadingSnippets}\n                  />\n                </TopicCard>\n              </TopicContainer>\n            );\n          })}\n    </ScrollableContent>\n  );\n};\n\nconst Structures: React.FC<StructuresProps> = ({\n  analyses,\n  initialChapter,\n  initialTopic,\n}) => {\n  const { handleSongClick, currentMidi, rawlProps, eject, togglePause } =\n    useContext(AppContext);\n  const location = useLocation();\n  const history = useHistory();\n  const [loading, setLoading] = useState(true);\n  const [errorMessages, setErrorMessages] = useState<string[]>([]);\n  const [chapterData, setChapterData] = useState<ChapterData[]>([]);\n  const [activeChapter, setActiveChapter] = useState(0);\n  const [selectedMeasureStart, setSelectedMeasureStart] = useState<\n    number | undefined\n  >(undefined);\n  const [isRawlVisible, setIsRawlVisible] = useState(false);\n  const [activeTopic, setActiveTopic] = useState<string | undefined>(() => {\n    return initialTopic;\n  });\n  const [loadingSnippets, setLoadingSnippets] = useState<Set<string>>(\n    new Set(),\n  );\n\n  // Add this function to select first topic\n  const selectFirstTopicFromChapter = useCallback(\n    (chapterIndex: number) => {\n      if (chapterData[chapterIndex]?.topics.length > 0) {\n        const firstTopic = chapterData[chapterIndex].topics[0].topic;\n        setActiveTopic(firstTopic);\n        history.push(`/s/${chapterData[chapterIndex].chapter}/${firstTopic}`);\n      }\n    },\n    [chapterData, history],\n  );\n\n  // Modify the chapter selection handler\n  const handleChapterSelect = useCallback(\n    (index: number) => {\n      eject(); // Eject current playback when changing chapter\n      setIsRawlVisible(false); // Hide the InlineRawl\n      setActiveChapter(index);\n      selectFirstTopicFromChapter(index);\n    },\n    [selectFirstTopicFromChapter, eject],\n  );\n\n  const processAnalyses = useCallback(() => {\n    const data: { [chapter: string]: ChapterData } = {};\n    const errors: string[] = [];\n\n    Object.entries(analyses).forEach(([path, analysis]) => {\n      const slug = path.startsWith(\"f/\") ? path.slice(2) : path;\n\n      if (analysis.snippets && analysis.snippets.length > 0) {\n        filterSnippetsByAccess(analysis.snippets).forEach((snippet) => {\n          const snippetWithSlug = {\n            ...snippet,\n            composerSlug: slug,\n          };\n\n          const [chapter, topic] = snippet.tag.split(\":\");\n          if (!chapter || !topic) {\n            errors.push(`Invalid tag format: ${snippet.tag}`);\n            return;\n          }\n\n          if (!data[chapter]) {\n            data[chapter] = {\n              chapter,\n              topics: [],\n            };\n          }\n\n          let topicData = data[chapter].topics.find((t) => t.topic === topic);\n          if (!topicData) {\n            topicData = {\n              topic,\n              snippets: [],\n            };\n            data[chapter].topics.push(topicData);\n          }\n\n          topicData.snippets.push({\n            snippet: snippetWithSlug,\n            slug,\n          });\n        });\n      }\n    });\n\n    setErrorMessages(errors);\n    setChapterData(Object.values(data));\n    setLoading(false);\n  }, [analyses]);\n\n  useEffect(() => {\n    processAnalyses();\n  }, [processAnalyses]);\n\n  useEffect(() => {\n    if (initialChapter) {\n      const chapterIndex = chapterData.findIndex(\n        (c) => c.chapter === initialChapter,\n      );\n\n      if (chapterIndex !== -1) {\n        setActiveChapter(chapterIndex);\n        if (initialTopic) {\n          setActiveTopic(initialTopic);\n        } else {\n          selectFirstTopicFromChapter(chapterIndex);\n        }\n      }\n    } else if (chapterData.length > 0) {\n      // If no initialChapter is provided and we have chapters, select the first one\n      setActiveChapter(0);\n      selectFirstTopicFromChapter(0);\n    }\n  }, [initialChapter, initialTopic, chapterData, selectFirstTopicFromChapter]);\n\n  useEffect(() => {\n    setIsRawlVisible(!!currentMidi);\n  }, [currentMidi]);\n\n  // Modify handleTopicClick to eject current playback\n  const handleTopicClick = (topic: string) => {\n    eject(); // Eject current playback when changing topic\n    setIsRawlVisible(false); // Hide the InlineRawl\n    setActiveTopic(topic);\n  };\n\n  const handleSnippetClick = useCallback(\n    async (slug: string, measureStart: number, topic: string) => {\n      console.log(\"[Structures] handleSnippetClick - Starting with:\", {\n        slug,\n        measureStart,\n        topic,\n      });\n\n      // Eject current playback before loading new snippet\n      if (currentMidi && currentMidi.slug !== slug) {\n        eject();\n      }\n\n      setLoadingSnippets((prev) => {\n        const next = new Set([...prev, slug]);\n        console.log(\"[Structures] Setting loadingSnippets to:\", next);\n        return next;\n      });\n\n      try {\n        console.log(\"[Structures] Calling handleSongClick...\");\n        await handleSongClick(slug);\n        console.log(\"[Structures] handleSongClick completed\");\n\n        setSelectedMeasureStart(measureStart);\n        console.log(\"[Structures] Set measure start to:\", measureStart);\n\n        // Don't call handleTopicClick here since it ejects the playback\n        if (topic && topic !== activeTopic) {\n          setActiveTopic(topic);\n        }\n\n        // Force playback to start\n        if (currentMidi?.slug === slug) {\n          console.log(\"[Structures] Starting playback for:\", slug);\n          togglePause();\n        }\n      } finally {\n        setLoadingSnippets((prev) => {\n          const next = new Set(prev);\n          next.delete(slug);\n          console.log(\"[Structures] Removing from loadingSnippets:\", next);\n          return next;\n        });\n      }\n    },\n    [handleSongClick, activeTopic, currentMidi, togglePause, eject],\n  );\n\n  // Add useEffect to handle initial navigation into Structures\n  useEffect(() => {\n    const path = location.pathname;\n    if (!path.startsWith(\"/s/\")) {\n      eject();\n      setIsRawlVisible(false); // Hide the InlineRawl\n    }\n  }, [location, eject]);\n\n  return (\n    <PathContainer>\n      <MenuContainer isRawlVisible={isRawlVisible}>\n        <ChapterRow>\n          <ChapterCategories>\n            {Object.entries(CHAPTER_CATEGORIES).map(([category, contents]) => {\n              let categoryChapters = chapterData.filter((chapter) => {\n                if (category === \"misc\") {\n                  return getMiscChapters(chapterData, CHAPTER_CATEGORIES).some(\n                    (c) => c.chapter === chapter.chapter,\n                  );\n                }\n                return contents.includes(chapter.chapter);\n              });\n\n              // Sort chapters alphabetically\n              categoryChapters.sort((a, b) =>\n                a.chapter.localeCompare(b.chapter),\n              );\n\n              if (categoryChapters.length === 0) return null;\n\n              const shouldUseTwoColumns = categoryChapters.length > 5;\n              const midPoint = Math.ceil(categoryChapters.length / 2);\n\n              return (\n                <CategorySection key={category}>\n                  <CategoryHeader>\n                    {formatCategoryLabel(category)}\n                  </CategoryHeader>\n                  <ChaptersContainer twoColumns={shouldUseTwoColumns}>\n                    {shouldUseTwoColumns ? (\n                      <>\n                        <div>\n                          {categoryChapters\n                            .slice(0, midPoint)\n                            .map((chapter) => {\n                              const index = chapterData.findIndex(\n                                (c) => c.chapter === chapter.chapter,\n                              );\n                              return (\n                                <ChapterButton\n                                  key={chapter.chapter}\n                                  active={activeChapter === index}\n                                  onClick={() => handleChapterSelect(index)}\n                                >\n                                  {chapter.chapter.replace(/_/g, \" \")}\n                                </ChapterButton>\n                              );\n                            })}\n                        </div>\n                        <div>\n                          {categoryChapters.slice(midPoint).map((chapter) => {\n                            const index = chapterData.findIndex(\n                              (c) => c.chapter === chapter.chapter,\n                            );\n                            return (\n                              <ChapterButton\n                                key={chapter.chapter}\n                                active={activeChapter === index}\n                                onClick={() => handleChapterSelect(index)}\n                              >\n                                {chapter.chapter.replace(/_/g, \" \")}\n                              </ChapterButton>\n                            );\n                          })}\n                        </div>\n                      </>\n                    ) : (\n                      categoryChapters.map((chapter) => {\n                        const index = chapterData.findIndex(\n                          (c) => c.chapter === chapter.chapter,\n                        );\n                        return (\n                          <ChapterButton\n                            key={chapter.chapter}\n                            active={activeChapter === index}\n                            onClick={() => handleChapterSelect(index)}\n                          >\n                            {chapter.chapter.replace(/_/g, \" \")}\n                          </ChapterButton>\n                        );\n                      })\n                    )}\n                  </ChaptersContainer>\n                </CategorySection>\n              );\n            })}\n          </ChapterCategories>\n        </ChapterRow>\n        {!loading && chapterData[activeChapter] && (\n          <TopicMenu>\n            {chapterData[activeChapter].topics\n              .slice()\n              .sort((a, b) => a.topic.localeCompare(b.topic))\n              .map(({ topic }) => (\n                <TopicBubble\n                  key={topic}\n                  active={activeTopic === topic}\n                  onClick={() => {\n                    handleTopicClick(topic);\n                    history.push(\n                      `/s/${chapterData[activeChapter].chapter}/${topic}`,\n                    );\n                  }}\n                >\n                  {topic.replace(/_/g, \" \")}\n                </TopicBubble>\n              ))}\n          </TopicMenu>\n        )}\n        <ScrollableContent>\n          {loading ? (\n            <HomeChapter>Loading...</HomeChapter>\n          ) : errorMessages.length > 0 ? (\n            errorMessages.map((error, index) => (\n              <ErrorMessage key={index}>{error}</ErrorMessage>\n            ))\n          ) : (\n            <CategorySection>\n              <TopicContent\n                activeTopic={activeTopic}\n                activeChapter={activeChapter}\n                chapterData={chapterData}\n                snippets={chapterData[activeChapter]?.topics || []}\n                handleSnippetClick={handleSnippetClick}\n                loadingSnippets={loadingSnippets}\n              />\n            </CategorySection>\n          )}\n        </ScrollableContent>\n      </MenuContainer>\n      {isRawlVisible && currentMidi && (\n        <div style={{ position: \"relative\" }}>\n          <EjectButton\n            onClick={() => {\n              eject();\n              setIsRawlVisible(false);\n            }}\n          >\n            ×\n          </EjectButton>\n          <InlineRawlPlayer {...rawlProps} measureStart={selectedMeasureStart}>\n            <TopicContent\n              activeTopic={activeTopic}\n              activeChapter={activeChapter}\n              chapterData={chapterData}\n              snippets={chapterData[activeChapter]?.topics || []}\n              handleSnippetClick={handleSnippetClick}\n              loadingSnippets={loadingSnippets}\n            />\n          </InlineRawlPlayer>\n        </div>\n      )}\n    </PathContainer>\n  );\n};\n\nexport default Structures;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../AppContext\";\nimport Rawl from \"./Rawl\";\n\nconst ContentArea = styled.div<{ isRawlVisible: boolean }>`\n  flex-grow: 1;\n  height: ${(props) =>\n    props.isRawlVisible ? \"calc(50vh - 30px)\" : \"calc(100vh - 30px)\"};\n  overflow-y: auto;\n  transition: height 0.3s ease-in-out;\n`;\n\nconst RawlContainer = styled.div`\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 50vh;\n  background-color: #000;\n  z-index: 200000;\n  overflow: auto;\n`;\n\ninterface InlineRawlPlayerProps {\n  children: React.ReactNode;\n  measureStart?: number;\n}\n\nconst InlineRawlPlayer: React.FC<InlineRawlPlayerProps> = ({\n  children,\n  measureStart,\n}) => {\n  const { currentMidi, rawlProps, saveAnalysis } = useContext(AppContext);\n  const [isRawlVisible, setIsRawlVisible] = useState(false);\n\n  useEffect(() => {\n    setIsRawlVisible(!!currentMidi);\n  }, [currentMidi]);\n\n  return (\n    <>\n      <ContentArea isRawlVisible={isRawlVisible}>{children}</ContentArea>\n      {currentMidi && rawlProps && rawlProps?.parsingResult && (\n        <RawlContainer>\n          <Rawl\n            parsingResult={rawlProps.parsingResult}\n            getCurrentPositionMs={rawlProps.getCurrentPositionMs}\n            savedAnalysis={rawlProps.savedAnalysis}\n            saveAnalysis={saveAnalysis}\n            voiceNames={rawlProps.voiceNames}\n            voiceMask={rawlProps.voiceMask}\n            setVoiceMask={rawlProps.setVoiceMask}\n            showAnalysisBox={rawlProps.showAnalysisBox}\n            seek={rawlProps.seek}\n            latencyCorrectionMs={rawlProps.latencyCorrectionMs}\n            sourceUrl={currentMidi.sourceUrl}\n            measureStart={measureStart}\n            isEmbedded={true}\n          />\n        </RawlContainer>\n      )}\n    </>\n  );\n};\n\nexport default InlineRawlPlayer;\n","import {\n  Bytes,\n  addDoc,\n  arrayUnion,\n  collection,\n  doc,\n  getDocs,\n  getFirestore,\n  query,\n  updateDoc,\n  where,\n} from \"firebase/firestore/lite\";\nimport * as React from \"react\";\nimport { useState } from \"react\";\nimport { slugify } from \"transliteration\";\nimport { FOOTER_HEIGHT } from \"../AppFooter\";\n\nconst saveMidi = async (\n  title: string,\n  sourceUrl: string,\n  midi: ArrayBuffer,\n) => {\n  let slug = slugify(title);\n  const firestore = getFirestore();\n\n  // Check if the slug already exists\n  const checkSlugExists = async (slugToCheck: string) => {\n    const q = query(\n      collection(firestore, \"midis\"),\n      where(\"slug\", \"==\", slugToCheck),\n    );\n    const querySnapshot = await getDocs(q);\n    return !querySnapshot.empty;\n  };\n\n  // If slug exists, append random characters\n  if (await checkSlugExists(slug)) {\n    const randomChars = Math.random().toString(16).substring(2, 8);\n    slug = `${slug}-${randomChars}`;\n  }\n\n  const firestoreBlob = Bytes.fromUint8Array(new Uint8Array(midi));\n\n  const docRef = await addDoc(collection(firestore, \"midis\"), {\n    blob: firestoreBlob,\n    url: sourceUrl, // This is correct, we're storing it as 'url' in Firestore\n    title,\n    slug,\n  });\n  console.log(\"Document written with ID:\", docRef.id);\n\n  const indexRef = doc(firestore, \"indexes\", \"midis\");\n  await updateDoc(indexRef, {\n    midis: arrayUnion({ title, slug, id: docRef.id }),\n  });\n  window.location.href = `/f/${slug}`;\n};\n\nexport const saveMidiFromLink = async (link: string) => {\n  try {\n    const params = new URLSearchParams(window.location.search);\n\n    const link = atob(params.get(\"link\") || \"\");\n    const url = atob(params.get(\"pageUrl\") || \"\");\n    const title = decodeURIComponent(\n      atob(decodeURIComponent(params.get(\"title\") || \"\"))\n        .split(\"\")\n        .map((char) => \"%\" + (\"00\" + char.charCodeAt(0).toString(16)).slice(-2))\n        .join(\"\"),\n    );\n\n    const response = await fetch(`${link}`, {\n      method: \"GET\",\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP error. Status: ${response.status}`);\n    }\n\n    const midi = await (await response.blob()).arrayBuffer();\n    saveMidi(title, url, midi);\n  } catch (error) {\n    alert(`Fetching binary file failed: ${JSON.stringify(error)}`);\n  }\n};\n\nexport const DropSaveForm: React.FC<{\n  midi: ArrayBuffer;\n  filename: string;\n}> = ({ midi, filename }) => {\n  const [title, setTitle] = useState<string>(filename);\n  const [sourceUrl, setSourceUrl] = useState<string>(\"\");\n  const titleInputRef = React.useRef<HTMLInputElement>(null);\n\n  // Add useEffect hook to focus and select the title input\n  React.useEffect(() => {\n    if (titleInputRef.current) {\n      titleInputRef.current.focus();\n      titleInputRef.current.select();\n    }\n  }, []);\n\n  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setTitle(event.target.value);\n  };\n\n  const handleUrlChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setSourceUrl(event.target.value);\n  };\n\n  const handleSave = () => {\n    if (title.trim() !== \"\") {\n      saveMidi(title, sourceUrl || \"drop\", midi);\n    } else {\n      if (titleInputRef.current) {\n        titleInputRef.current.style.backgroundColor = \"red\";\n        setTimeout(() => {\n          if (titleInputRef.current) {\n            titleInputRef.current.style.backgroundColor = \"\";\n          }\n        }, 1000);\n      }\n    }\n  };\n\n  const handleKeyPress = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key === \"Enter\") {\n      handleSave();\n    }\n  };\n\n  return (\n    <div style={{ position: \"fixed\", bottom: FOOTER_HEIGHT }}>\n      <input\n        ref={titleInputRef}\n        type=\"text\"\n        placeholder=\"Enter a title\"\n        value={title}\n        onChange={handleInputChange}\n        onKeyDown={handleKeyPress}\n        style={{ width: \"30em\" }}\n      />\n      <input\n        type=\"text\"\n        placeholder=\"Enter a source URL (optional)\"\n        value={sourceUrl}\n        onChange={handleUrlChange}\n        onKeyDown={handleKeyPress}\n        style={{ width: \"30em\", marginTop: \"10px\" }}\n      />\n      <button onClick={handleSave} style={{ marginTop: \"10px\" }}>\n        Save\n      </button>\n    </div>\n  );\n};\n","import * as React from \"react\";\nimport reaperImage from \"../../../assets/images/reaper_colormap.png\";\n\nconst DAW = () => {\n  return (\n    <div style={{ marginLeft: 250, width: 600 }}>\n      <h2>DAWs with 12 colors</h2>\n      <h3>REAPER</h3>\n      <h4>How to use</h4>\n      <ul>\n        <li>\n          <a href={reaperImage} download=\"reaper_colormap.png\">\n            <img src={reaperImage} alt=\"Reaper\" style={{ maxWidth: \"100%\" }} />\n          </a>\n        </li>\n        <li>\n          Preferences - Editing behavior - MIDI Editor - Default note color map\n        </li>\n        <li>\n          Issue: will only work for C major / C minor, needs to be shifted for\n          other keys.\n        </li>\n      </ul>\n      <h4>How to update</h4>\n      <ul>\n        <li>\n          <a\n            href=\"https://reaper-midi-colormap-tool.netlify.app/\"\n            target=\"_blank\"\n          >\n            https://reaper-midi-colormap-tool.netlify.app/\n          </a>\n        </li>\n        <li>\n          <a\n            href=\"https://chat.openai.com/share/eb2b635a-0c55-414a-bfb0-830dbde0aba4\"\n            target=\"_blank\"\n          >\n            https://chat.openai.com/share/eb2b635a-0c55-414a-bfb0-830dbde0aba4\n          </a>\n        </li>\n      </ul>\n      <h3>Signal</h3>\n      <ul>\n        <li>\n          <a href=\"https://signal-jy5a-two.vercel.app/edit\" target=\"_blank\">\n            https://signal-jy5a-two.vercel.app/edit\n          </a>\n        </li>\n        <li>\n          <a\n            href=\"https://github.com/vpavlenko/signal/commits/12colors/\"\n            target=\"_blank\"\n          >\n            https://github.com/vpavlenko/signal/commits/12colors/\n          </a>{\" \"}\n          - anyone wants to debug WebGL-React?\n        </li>\n      </ul>\n      <h3>Cubase</h3>\n      Cubase has{\" \"}\n      <a\n        href=\"https://steinberg.help/cubase_pro/v12/en/cubase_nuendo/topics/midi_editors/midi_editors_pitch_colors_r.html\"\n        target=\"_blank\"\n      >\n        Pitch Colors Setup\n      </a>\n      , it may be{\" \"}\n      <a\n        href=\"https://chat.openai.com/share/14e28957-610e-4a3e-a5b5-d4cf47c149be\"\n        target=\"_blank\"\n      >\n        shareable\n      </a>\n      .<h3>MuseScore</h3>\n      <a\n        href=\"https://youtu.be/Eq3bUFgEcb4?si=IhXpNtcvvqtQhCv1&t=4470\"\n        target=\"_blank\"\n      >\n        Promised\n      </a>\n      <h3>Studio One</h3>\n      <a\n        href=\"https://answers.presonus.com/45430/want-change-the-color-for-each-pitch-of-midi-note-shown-below\"\n        target=\"_blank\"\n      >\n        https://answers.presonus.com/45430/want-change-the-color-for-each-pitch-of-midi-note-shown-below\n      </a>\n      <h3>Logic Pro</h3>\n      <a\n        href=\"https://logicpro.skydocu.com/en/preferences-project-settings-and-key-commands/project-settings/score-settings/colors-settings/\"\n        target=\"_blank\"\n      >\n        https://logicpro.skydocu.com/en/preferences-project-settings-and-key-commands/project-settings/score-settings/colors-settings/\n      </a>\n    </div>\n  );\n};\n\nexport default DAW;\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ0AAACCCAYAAABcpsqYAAAAAXNSR0IArs4c6QAABb5JREFUeF7tnT9uE1EQxsfUCDpKCg7ACTgCB+CPuAUNEohEVEipuANBgpqWihNQcAEkSqTQxt4F21lILMys33gyk50fworst/tsZ773ze99u4JZL9K/EpEXrz+JPH0ms2t3RL4ey8GHQzk6ei4/H9ySa9d/yJvvM7nxvpMnncj8ijwWncjpuc86PG/5OXznrpfSf/rDmchDEXkkcnJf5FjWj89ye/3icvDLXZF3IvJW5N639eGPReSmfFwdPfMUnUfRowWP6JKLzlsgEaJGdMGiiyi6t5C1+RFdsOi0AkWPWxbF8NmXTLicB6Zbo+ykmW5b0aOFjNMVdzoPJ9NEjeiCRRdRdE0U3uOILlh03gW2zm9ZFAPLwXQXY8lJM922oluFaD0fpyvudB5OpokS0QWLLqLomii8xxFdsOi8C2yd37IoyOn+fYl50kxHTpfzvoL0orM6lXa+h5Np70l7DW6vEUXXROE9juiCReddYOv8lkVBTleQ6cjpYLqUdw57OJnmrrTX4PYaUXRNFN7jiC5YdN4Fts5vWRTkdAWZjpwOppsc07WKmvYa3F492pe1pXqfj+iCReddYOv8lkVBTleQ6cjpYLrJMV2rqGmvwe3Vo31ZW6r3+YguWHTeBbbOb1kU5HQFma410rAKVTsfpyvudB5Ohuj+v4EJv4kzouiaKLzHcbriTqcJzLIoyOkKMl1rpKEJ0TqO0xV3Og8n00SJ6IJFF1F0TRTe44guWHTeBbbOb1kU5HQFmY6cjmuvk7v22ipq2mtwe/VoX9aW6n0+ogsWnXeBrfNbFgU5XUGmI6eD6SbHdK2ipr0Gt1eP9mVtqd7nI7pg0XkX2Dq/ZVGQ0xVkutZIwypU7XycrrjTeTgZouN+unT/zSdOV9zpNFeyOCE5XUGma400NCFax3G64k7n4WSaKBFdsOgiiq6Jwnsc0QWLzrvA1vkti4KcriDTkdNx7XVy115bRU17DW6vHu3L2lK9z0d0waLzLrB1fsuiIKcryHTkdDDd5JiuVdS01+D26tG+rC3V+3xEFyw67wJb57csCnK6gkzXGmlYhaqdj9MVdzoPJ0N03E/H/XTJNrF7+UcRRaRP9r34OBP/Dcz6pehe/v6WB6u/crj6whdfOHu2OqhbHMh8ITKfn3tseb6Yi5wujzsbH54vFuvXd3k+5v3+HDPy87Uc33UTV4Ty9fqTPTHdzqIbBOdY3JUglPkH8Q7iaRHzIP4x77f8PIguSnQbzjUlJ9PEh+iiRJfE6TydcBDfphMiuijRjWyrFqYbWuaq6CPfr4XRNGfbHEd0UaJL4nQWptvmZNqGBdFFiW4PTJfVyTTnQ3RRokvidJ5MN7R1mO5ihhIXmYxkLAvTbeZ4Wtu7rHGcrrjTWZhum5Np4kV0UaLbA9NldTKYTrngX/2KhCfTkdNtuZ8uTHSXwHRZd7e016j2mmT3amE6crq2GxfCd6+W3WlWJ4PpYLpRt1Btu/xlcUJyuoJMl3V3C9PBdOubRM8e3E/Xxmm7nHWlmS6rk8F0MF0Y05HTFWS6rLtbmA6ma2Y6crpdSO7vsVea6bI6GUwH04UxHTldQabLuruF6WC6ZqbjfrqCTJfVyWA6mC6M6cjpCjJd1t0tTAfTNTMdOV1BpsvqZDAdTBfGdOR0BZku6+4WpoPpmpmOnK4g02V1MpgOpgtjOnK6gkyXdXcL08F0zUxHTleQ6bI6GUwH04UxHTldQabLuruF6WC6ZqYjpyvIdFmdDKaD6cKYjpyuINNl3d3CdDBdM9OR0xVkuqxOBtPBdGFMR05XkOmy7m5hOpiumenI6QoyXVYng+lgujCmI6cryHRZd7cwHUzXzHTkdAWZLquTwXQwXRjTkdMVZLqsu1uYDqZrZjpyuoJMl9XJYDqYLozpyOkKMl3W3S1MB9M1Mx05XUGmy+pkMB1MF8Z05HSeTNf3fZvRcha/gbbfwC+DKfXjFr0NcAAAAABJRU5ErkJggg==\"","import {\n  MidiData,\n  MidiEvent,\n  MidiNoteOffEvent,\n  MidiNoteOnEvent,\n  MidiPitchBendEvent,\n  parseMidi,\n  writeMidi,\n} from \"midi-file\";\n\ntype EnhancedMidiEvent = MidiEvent & {\n  absoluteTime: number;\n  originalTrack: number;\n};\n\nfunction isNoteOrPitchBendEvent(\n  event: MidiEvent,\n): event is MidiNoteOnEvent | MidiNoteOffEvent | MidiPitchBendEvent {\n  return (\n    event.type === \"noteOn\" ||\n    event.type === \"noteOff\" ||\n    event.type === \"pitchBend\"\n  );\n}\n\nfunction isGlobalMetaEvent(event: MidiEvent): boolean {\n  return (\n    \"subtype\" in event &&\n    typeof event.subtype === \"string\" &&\n    [\"setTempo\", \"timeSignature\", \"keySignature\"].includes(event.subtype)\n  );\n}\n\nfunction getTrackName(track: MidiEvent[]): string | undefined {\n  const nameEvent = track.find(\n    (event) => event.type === \"trackName\" && \"text\" in event,\n  );\n  if (nameEvent && \"text\" in nameEvent) {\n    return nameEvent.text;\n  }\n  return undefined;\n}\n\nfunction createTrackNameEvent(name: string, deltaTime: number = 0): MidiEvent {\n  return {\n    deltaTime,\n    type: \"trackName\",\n    text: name,\n  };\n}\n\nfunction createEndOfTrackEvent(deltaTime: number = 0): MidiEvent {\n  return {\n    deltaTime,\n    type: \"endOfTrack\",\n  };\n}\n\nfunction ensureTrackEnding(track: MidiEvent[]): MidiEvent[] {\n  // Remove any existing end of track events\n  const eventsWithoutEnd = track.filter((event) => event.type !== \"endOfTrack\");\n\n  // Add a new end of track event\n  return [...eventsWithoutEnd, createEndOfTrackEvent()];\n}\n\nfunction findUnusedChannel(midi: MidiData, usedChannels: Set<number>): number {\n  // Find the first unused channel number between 0-15\n  for (let channel = 0; channel < 16; channel++) {\n    if (!usedChannels.has(channel)) {\n      return channel;\n    }\n  }\n  throw new Error(\"No unused MIDI channels available\");\n}\n\nfunction getUsedChannels(midi: MidiData): Set<number> {\n  const usedChannels = new Set<number>();\n  midi.tracks.forEach((track) => {\n    track.forEach((event) => {\n      if (\"channel\" in event) {\n        usedChannels.add(event.channel);\n      }\n    });\n  });\n  return usedChannels;\n}\n\nfunction transformMidi(\n  inputData: Uint8Array,\n  _forcedPanning?: boolean,\n): Uint8Array {\n  // Read forcedPanning directly from localStorage, fallback to false if not set\n  const forcedPanning = localStorage.getItem(\"forcedPanning\") === \"true\";\n\n  const midi: MidiData = parseMidi(inputData);\n  const usedChannels = getUsedChannels(midi);\n\n  // Group tracks by channel\n  const channelTracks: Map<number, number[]> = new Map();\n  midi.tracks.forEach((track, trackIndex) => {\n    track.forEach((event) => {\n      if (isNoteOrPitchBendEvent(event)) {\n        const tracks = channelTracks.get(event.channel) || [];\n        if (!tracks.includes(trackIndex)) {\n          tracks.push(trackIndex);\n        }\n        channelTracks.set(event.channel, tracks);\n      }\n    });\n  });\n\n  // If no multi-track channels found, return original\n  const hasMultiTrackChannels = Array.from(channelTracks.values()).some(\n    (tracks) => tracks.length > 1,\n  );\n  if (!hasMultiTrackChannels) {\n    console.log(\"[transformMidi] skipping - no multi-track channels\");\n    return inputData;\n  }\n\n  // Step 1: Convert all tracks to absolute time and separate global meta events\n  const mergedEvents: EnhancedMidiEvent[] = [];\n  const globalMetaEvents: EnhancedMidiEvent[] = [];\n\n  midi.tracks.forEach((track, trackIndex) => {\n    let absoluteTime = 0;\n    track.forEach((event) => {\n      if (event.type === \"endOfTrack\") return;\n      absoluteTime += event.deltaTime;\n\n      const enhancedEvent = {\n        ...event,\n        absoluteTime,\n        originalTrack: trackIndex,\n      } as EnhancedMidiEvent;\n\n      if (isGlobalMetaEvent(event)) {\n        globalMetaEvents.push(enhancedEvent);\n      } else {\n        mergedEvents.push(enhancedEvent);\n      }\n    });\n  });\n\n  mergedEvents.sort((a, b) => a.absoluteTime - b.absoluteTime);\n  globalMetaEvents.sort((a, b) => a.absoluteTime - b.absoluteTime);\n\n  // Step 2: Split into new tracks\n  const newTracks: MidiEvent[][] = [];\n  const processedChannels = new Set<number>();\n\n  // Process multi-track channels\n  for (const [channel, trackIndices] of channelTracks.entries()) {\n    if (trackIndices.length <= 1) continue;\n    processedChannels.add(channel);\n\n    // Find an unused channel for the left hand\n    const leftHandChannel = findUnusedChannel(midi, usedChannels);\n    usedChannels.add(leftHandChannel); // Reserve this channel\n\n    const baseTrackName =\n      trackIndices\n        .map((idx) => getTrackName(midi.tracks[idx]))\n        .find((name) => name !== undefined) || \"\";\n\n    // Create left/right hand tracks\n    const leftHandEvents: EnhancedMidiEvent[] = [];\n    const rightHandEvents: EnhancedMidiEvent[] = [];\n\n    // Add track names\n    const leftName = baseTrackName\n      ? `${baseTrackName}: left hand`\n      : \"left hand\";\n    const rightName = baseTrackName\n      ? `${baseTrackName}: right hand`\n      : \"right hand\";\n    rightHandEvents.push({\n      ...createTrackNameEvent(rightName),\n      absoluteTime: 0,\n      originalTrack: trackIndices[0],\n    } as EnhancedMidiEvent);\n    leftHandEvents.push({\n      ...createTrackNameEvent(leftName),\n      absoluteTime: 0,\n      originalTrack: trackIndices[1],\n    } as EnhancedMidiEvent);\n\n    // Add global meta events to both tracks\n    let lastMetaTime = 0;\n    globalMetaEvents.forEach((event) => {\n      const deltaTime = event.absoluteTime - lastMetaTime;\n      rightHandEvents.push({ ...event, deltaTime } as EnhancedMidiEvent);\n      leftHandEvents.push({ ...event, deltaTime } as EnhancedMidiEvent);\n      lastMetaTime = event.absoluteTime;\n    });\n\n    if (forcedPanning) {\n      // Add pan right (CC #10 = 127) for right hand\n      rightHandEvents.push({\n        type: \"controller\",\n        controllerType: 10,\n        value: 127,\n        deltaTime: 0,\n        channel: channel,\n        originalTrack: trackIndices[0],\n        absoluteTime: 0,\n      } as EnhancedMidiEvent);\n\n      // Add pan left (CC #10 = 0) for left hand\n      leftHandEvents.push({\n        type: \"controller\",\n        controllerType: 10,\n        value: 0,\n        deltaTime: 0,\n        channel: leftHandChannel,\n        originalTrack: trackIndices[1],\n        absoluteTime: 0,\n      } as EnhancedMidiEvent);\n    }\n\n    let rightHandLastEventTime = 0;\n    let leftHandLastEventTime = 0;\n\n    // Split events between hands\n    mergedEvents.forEach((event) => {\n      if (!(\"channel\" in event)) {\n        // Handle non-channel events (except global meta events which were handled earlier)\n        if (!isGlobalMetaEvent(event)) {\n          const deltaTimeRight = event.absoluteTime - rightHandLastEventTime;\n          const deltaTimeLeft = event.absoluteTime - leftHandLastEventTime;\n          rightHandEvents.push({\n            ...event,\n            deltaTime: deltaTimeRight,\n          } as EnhancedMidiEvent);\n          leftHandEvents.push({\n            ...event,\n            deltaTime: deltaTimeLeft,\n          } as EnhancedMidiEvent);\n          rightHandLastEventTime = event.absoluteTime;\n          leftHandLastEventTime = event.absoluteTime;\n        }\n        return;\n      }\n\n      if (event.channel !== channel) return;\n\n      const isFirstTrack = event.originalTrack === trackIndices[0];\n      if (isNoteOrPitchBendEvent(event)) {\n        if (isFirstTrack || event.type === \"noteOff\") {\n          // Right hand (first track)\n          const deltaTime = event.absoluteTime - rightHandLastEventTime;\n          rightHandEvents.push({\n            ...event,\n            deltaTime,\n            channel,\n          } as EnhancedMidiEvent);\n          rightHandLastEventTime = event.absoluteTime;\n        }\n        if (!isFirstTrack || event.type === \"noteOff\") {\n          // Left hand (other tracks)\n          const deltaTime = event.absoluteTime - leftHandLastEventTime;\n          leftHandEvents.push({\n            ...event,\n            deltaTime,\n            channel: leftHandChannel,\n          } as EnhancedMidiEvent);\n          leftHandLastEventTime = event.absoluteTime;\n        }\n      } else if (event.type === \"programChange\") {\n        // Program changes stay with their respective hand\n        if (isFirstTrack) {\n          const deltaTime = event.absoluteTime - rightHandLastEventTime;\n          rightHandEvents.push({\n            ...event,\n            deltaTime,\n            channel,\n          } as EnhancedMidiEvent);\n          rightHandLastEventTime = event.absoluteTime;\n        } else {\n          const deltaTime = event.absoluteTime - leftHandLastEventTime;\n          leftHandEvents.push({\n            ...event,\n            deltaTime,\n            channel: leftHandChannel,\n          } as EnhancedMidiEvent);\n          leftHandLastEventTime = event.absoluteTime;\n        }\n      } else {\n        // Skip existing pan control messages when forced panning is enabled\n        if (\n          forcedPanning &&\n          event.type === \"controller\" &&\n          event.controllerType === 10\n        ) {\n          return;\n        }\n\n        // Copy other channel events to both tracks\n        const deltaTimeRight = event.absoluteTime - rightHandLastEventTime;\n        const deltaTimeLeft = event.absoluteTime - leftHandLastEventTime;\n        rightHandEvents.push({\n          ...event,\n          deltaTime: deltaTimeRight,\n          channel,\n        } as EnhancedMidiEvent);\n        leftHandEvents.push({\n          ...event,\n          deltaTime: deltaTimeLeft,\n          channel: leftHandChannel,\n        } as EnhancedMidiEvent);\n        rightHandLastEventTime = event.absoluteTime;\n        leftHandLastEventTime = event.absoluteTime;\n      }\n    });\n\n    // Clean up events and ensure track endings\n    const cleanedRightHandEvents = rightHandEvents.map(\n      ({ absoluteTime, originalTrack, ...event }) => event,\n    );\n    const cleanedLeftHandEvents = leftHandEvents.map(\n      ({ absoluteTime, originalTrack, ...event }) => event,\n    );\n\n    newTracks.push(\n      ensureTrackEnding(cleanedRightHandEvents),\n      ensureTrackEnding(cleanedLeftHandEvents),\n    );\n  }\n\n  // Add remaining tracks unchanged, ensuring they have end markers\n  midi.tracks.forEach((track, trackIndex) => {\n    const hasProcessedChannel = track.some(\n      (event) => \"channel\" in event && processedChannels.has(event.channel),\n    );\n    if (!hasProcessedChannel) {\n      newTracks.push(ensureTrackEnding(track));\n    }\n  });\n\n  // Create new MIDI file\n  const newMidiData: MidiData = {\n    header: midi.header,\n    tracks: newTracks,\n  };\n\n  // Write the modified MIDI data\n  const outputData = writeMidi(newMidiData);\n  return new Uint8Array(outputData);\n}\n\nexport default transformMidi;\n","export const GM_INSTRUMENTS = [\n  'Piano         ',\n  'Bright Piano  ',\n  'Electric Piano',\n  'Honky-tonk    ',\n  'Rhodes Piano  ',\n  'FM Piano      ',\n  'Harpsichord   ',\n  'Clavinet      ',\n  'Celesta       ',\n  'Glockenspiel  ',\n  'Music Box     ',\n  'Vibraphone    ',\n  'Marimba       ',\n  'Xylophone     ',\n  'Tubular Bells ',\n  'Dulcimer      ',\n  'Drawbar Organ ',\n  'Perc Organ    ',\n  'Rock Organ    ',\n  'Church Organ  ',\n  'Reed Organ    ',\n  'Accordion     ',\n  'Harmonica     ',\n  'Accordion     ',\n  'Steel Guitar  ',\n  'Nylon Guitar  ',\n  'Jazz Guitar   ',\n  'Clean Guitar  ',\n  'Muted Guitar  ',\n  'Overdrive Guit',\n  'Distort Guitar',\n  'Guit Harmonics',\n  'Acoustic Bass ',\n  'Finger Bass   ',\n  'Picked Bass   ',\n  'Fretless Bass ',\n  'Slap Bass 1   ',\n  'Slap Bass 2   ',\n  'Synth Bass 1  ',\n  'Synth Bass 2  ',\n  'Violin        ',\n  'Viola         ',\n  'Cello         ',\n  'Contrabass    ',\n  'Trem Strings  ',\n  'Pizz Strings  ',\n  'Harp          ',\n  'Timpani       ',\n  'String Ens 1  ',\n  'String Ens 2  ',\n  'Syn Strings 1 ',\n  'Syn Strings 2 ',\n  'Choir Aahs    ',\n  'Voice Oohs    ',\n  'Synth Voice   ',\n  'Orch Hit      ',\n  'Trumpet       ',\n  'Trombone      ',\n  'Tuba          ',\n  'Muted Trumpet ',\n  'French Horn   ',\n  'Brass Section ',\n  'SynthBrass 1  ',\n  'SynthBrass 2  ',\n  'Soprano Sax   ',\n  'Alto Sax      ',\n  'Tenor Sax     ',\n  'Baritone Sax  ',\n  'Oboe          ',\n  'English Horn  ',\n  'Bassoon       ',\n  'Clarinet      ',\n  'Piccolo       ',\n  'Flute         ',\n  'Recorder      ',\n  'Pan Flute     ',\n  'Blown Bottle  ',\n  'Shakuhachi    ',\n  'Whistle       ',\n  'Ocarina       ',\n  'Lead: Square  ',\n  'Lead: Sawtooth',\n  'Lead: Calliope',\n  'Lead: Chiff   ',\n  'Lead: Charang ',\n  'Lead: Voice   ',\n  'Lead: Fifths  ',\n  'Lead: Bass    ',\n  'Pad: New Age  ',\n  'Pad: Warm     ',\n  'Pad: Polysynth',\n  'Pad: Choir    ',\n  'Pad: Bowed    ',\n  'Pad: Metallic ',\n  'Pad: Halo     ',\n  'Pad: Sweep    ',\n  'FX: Rain      ',\n  'FX: Soundtrack',\n  'FX: Crystal   ',\n  'FX: Atmosphere',\n  'FX: Brightness',\n  'FX: Goblins   ',\n  'FX: Echoes    ',\n  'FX: Sci-fi    ',\n  'Sitar         ',\n  'Banjo         ',\n  'Shamisen      ',\n  'Koto          ',\n  'Kalimba       ',\n  'Bag pipe      ',\n  'Fiddle        ',\n  'Shanai        ',\n  'Tinkle Bell   ',\n  'Agogo         ',\n  'Steel Drums   ',\n  'Woodblock     ',\n  'Taiko Drum    ',\n  'Melodic Tom   ',\n  'Synth Drum    ',\n  'Reverse Cymbal',\n  'Fret Noise    ',\n  'Breath Noise  ',\n  'Seashore      ',\n  'Bird Tweet    ',\n  'Telephone Ring',\n  'Helicopter    ',\n  'Applause      ',\n  'Gunshot       ',\n];\n\nexport const GM_DRUM_KITS = {\n  0:  'Std Drum Kit  ',\n  8:  'Room Drum Kit ',\n  16: 'Power Drum Kit',\n  24: 'Elec Drum Kit ',\n  25: 'TR808 Drum Kit',\n  32: 'Jazz Drum Kit ',\n  40: 'Brush Drum Kit',\n};\n","import autoBind from \"auto-bind\";\nimport chardet from \"chardet\";\nimport iconv from \"iconv-lite\";\nimport { parseNotes } from \"../components/rawl/parseMidi\";\n\nconst MIDIEvents = require(\"midievents\");\nrequire(\"./midi/midi-helpers\");\n\n/**\n * The MIDIFilePlayer is the engine that parses MIDI file data, and fires\n * appropriate methods on a MIDI softsynth (noteOn, noteOff, etc.) or forwards\n * MIDI messages to Web MIDI devices.\n *\n * A lot of complexity was introduced in the MIDIFilePlayer in an effort to\n * play nicely with hardware MIDI devices. Behaviors that are deterministic\n * in a softsynth can be nondeterministic on a hardware device, such as\n * skipping silence at the beginning of a MIDI file, or seeking through the\n * file. Non-note events must be replayed in these cases, and throttled for\n * hardware devices, especially in the case of sysex commands that might make\n * the hardware busy for 0.5 seconds, such as a GM reset command sent to a\n * Roland SC-55. The time allowed for these events is a best-guess - so your\n * mileage may vary.\n */\n\n// Constants\nconst BUFFER_AHEAD = 33;\nconst DELAY_MS_PER_CC_EVENT = 2;\n// const DELAY_MS_PER_SYSEX_EVENT = 15;\nconst DELAY_MS_PER_SYSEX_BYTE = 0.5;\nconst DELAY_MS_PER_XG_SYSTEM_EVENT = 500;\n\nconst CC_SUSTAIN_PEDAL = 64;\nconst CC_ALL_SOUND_OFF = 120;\nconst CC_RESET_ALL_CONTROLLERS = 121;\nconst SYSEX_GM_RESET = [0x7e, 0x7f, 0x09, 0x01, 0xf7];\nconst SEQUENCED_CONTROLLERS = [6, 38, 96, 97, 98, 99, 100, 101];\nconst META_LABELS = {\n  [MIDIEvents.EVENT_META_TEXT]: \"Text\",\n  [MIDIEvents.EVENT_META_COPYRIGHT_NOTICE]: \"Copyright\",\n  [MIDIEvents.EVENT_META_TRACK_NAME]: \"Track\",\n  [MIDIEvents.EVENT_META_INSTRUMENT_NAME]: \"Instrument\",\n  [MIDIEvents.EVENT_META_LYRICS]: \"Lyrics\",\n  [MIDIEvents.EVENT_META_MARKER]: \"Marker\",\n  [MIDIEvents.EVENT_META_CUE_POINT]: \"Cue point\",\n};\n\nfunction printSysex(data) {\n  return (\n    \"[F0 \" +\n    data.map((n) => (\"0\" + n.toString(16)).slice(-2)).join(\" \") +\n    \"]\"\n  ).toUpperCase();\n}\n\n// MIDIPlayer constructor\nfunction MIDIPlayer(options) {\n  autoBind(this);\n  options = options || {};\n  this.output = options.output || null; // Web MIDI output device (has a .send() method)\n  this.synth = options.synth || null; // MIDI synth (has .noteOn(), .noteOff(), render()...)\n  this.programChangeCb = options.programChangeCb;\n  this.speed = 1;\n  this.skipSilence = options.skipSilence || false; // skip silence at beginning of file\n  this.lastProcessPlayTimestamp = 0;\n  this.lastSendTimestamp = 0;\n  this.events = [];\n  this.paused = true;\n  this.useWebMIDI = false;\n  this.sampleRate = options.sampleRate || 44100;\n\n  this.channelsInUse = [];\n  this.channelMask = [];\n  this.channelProgramNums = [];\n  this.textInfo = [];\n  this.setChipStateDump = options.setChipStateDump;\n  this.trackNames = {};\n  this.channelToTrack = {};\n\n  window.addEventListener(\"unload\", this.stop);\n}\n\n// Parsing all tracks and add their events in a single event queue\nMIDIPlayer.prototype.load = function (midiFile, useTrackLoops = false) {\n  this.stop();\n  this.position = 0;\n  this.elapsedTime = 0;\n\n  const tracks = midiFile.tracks.map((_, i) => midiFile.getTrackEvents(i));\n  if (useTrackLoops) {\n    console.debug(\"Processing MIDI track loops...\");\n    this.events = midiFile.getLoopedEvents(tracks, 2);\n  } else {\n    this.events = midiFile.getEvents();\n  }\n  const timeEvents = midiFile.getTimeEvents(tracks);\n  this.summarizeMidiEvents();\n\n  const activeChannels = [];\n  for (let i = 0; i < 16; i++) {\n    if (this.channelsInUse[i]) {\n      activeChannels.push(i);\n    }\n  }\n\n  const result = parseNotes({\n    events: this.events,\n    activeChannels,\n    timebase: midiFile.header.datas.getUint16(12),\n    timeEvents,\n  });\n\n  this.setChipStateDump?.(result);\n\n  return result;\n};\n\nMIDIPlayer.prototype.doSkipSilence = function () {\n  let firstNoteDelay = 0;\n  let messageDelay = 0;\n  let numSysexEvents = 0;\n  const firstNote = this.events.find(\n    (e) => e.subtype === MIDIEvents.EVENT_MIDI_NOTE_ON,\n  );\n  if (firstNote && firstNote.playTime > 0) {\n    // Accelerated playback of all events prior to first note\n    if (this.useWebMIDI) {\n      let message;\n      const eventList = [];\n      while (this.events[this.position] !== firstNote) {\n        const event = this.events[this.position];\n        this.position++;\n\n        // Throttle sysex events\n        // (In some cases this may actually increase the time to first note)\n        if (\n          event.type === MIDIEvents.EVENT_SYSEX ||\n          event.type === MIDIEvents.EVENT_DIVSYSEX\n        ) {\n          console.debug(\n            \"Sysex event at %s ms:\",\n            Math.floor(event.playTime),\n            printSysex(event.data),\n          );\n          if (event.data && event.data[3] === 0 && event.data[4] === 0) {\n            firstNoteDelay += DELAY_MS_PER_XG_SYSTEM_EVENT;\n            messageDelay += DELAY_MS_PER_XG_SYSTEM_EVENT;\n          } else {\n            const delay = DELAY_MS_PER_SYSEX_BYTE * event.length;\n            firstNoteDelay += delay;\n            messageDelay += delay;\n          }\n          numSysexEvents++;\n          message = [event.type, ...event.data];\n        } else if (\n          MIDIEvents.MIDI_1PARAM_EVENTS.indexOf(event.subtype) !== -1\n        ) {\n          firstNoteDelay += DELAY_MS_PER_CC_EVENT;\n          messageDelay += DELAY_MS_PER_CC_EVENT;\n          message = [(event.subtype << 4) + event.channel, event.param1];\n        } else if (\n          MIDIEvents.MIDI_2PARAMS_EVENTS.indexOf(event.subtype) !== -1\n        ) {\n          firstNoteDelay += DELAY_MS_PER_CC_EVENT;\n          messageDelay += DELAY_MS_PER_CC_EVENT;\n          message = [\n            (event.subtype << 4) + event.channel,\n            event.param1,\n            event.param2 || 0x00,\n          ];\n        } else {\n          continue;\n        }\n        eventList.push({\n          message: message,\n          timestamp: this.lastProcessPlayTimestamp + messageDelay,\n        });\n      }\n\n      eventList.forEach(({ message, timestamp }) => {\n        this.send(message, timestamp);\n      });\n      // Set lastProcessPlayTimestamp to a point in the past so that the first note event plays immediately.\n      console.log(\n        \"Time to first note %s ms was updated to %s ms; %s sysex events\",\n        Math.round(firstNote.playTime),\n        firstNoteDelay,\n        numSysexEvents,\n      );\n      this.lastProcessPlayTimestamp += firstNoteDelay - firstNote.playTime;\n    } else {\n      this.setPosition(firstNote.playTime - 1500);\n    }\n  }\n};\n\nMIDIPlayer.prototype.play = function (endCallback, playbackStartedCallback) {\n  if (0 === this.position) {\n    this.endCallback = endCallback;\n    this.reset();\n\n    this.lastProcessPlayTimestamp = performance.now();\n    if (this.skipSilence) {\n      this.doSkipSilence();\n    }\n\n    this.resume();\n    if (playbackStartedCallback) {\n      // Call the callback on the next tick to ensure playback has started\n      setTimeout(playbackStartedCallback, 0);\n    }\n    return 1;\n  }\n  return 0;\n};\n\nMIDIPlayer.prototype.processPlaySynth = function (buffer, bufferSize) {\n  this.lastProcessPlayTimestamp = performance.now();\n  const bufferStart = buffer;\n  let bytesWritten = 0;\n  let batchSize = 64;\n  let event = null;\n  const synth = this.synth;\n  const msPerBatch = (this.speed * 1000 * (batchSize / this.sampleRate)) / 2;\n\n  for (\n    let samplesRemaining = bufferSize * 2;\n    samplesRemaining > 0;\n    samplesRemaining -= batchSize\n  ) {\n    if (batchSize > samplesRemaining) batchSize = samplesRemaining;\n\n    if (!this.paused) {\n      let pos = this.position;\n      for (\n        this.elapsedTime += msPerBatch;\n        this.events[pos] && this.elapsedTime >= this.events[pos].playTime;\n        pos++\n      ) {\n        event = this.events[pos];\n        switch (event.subtype) {\n          case MIDIEvents.EVENT_MIDI_NOTE_ON:\n            if (!this.channelMask[event.channel]) break;\n            if (event.param2 === 0)\n              // velocity\n              synth.noteOff(event.channel, event.param1);\n            else synth.noteOn(event.channel, event.param1, event.param2);\n            break;\n          case MIDIEvents.EVENT_MIDI_NOTE_OFF:\n            synth.noteOff(event.channel, event.param1);\n            break;\n          case MIDIEvents.EVENT_MIDI_PROGRAM_CHANGE:\n            this.handleProgramChange(event.channel, event.param1);\n            synth.programChange(event.channel, event.param1);\n            break;\n          case MIDIEvents.EVENT_MIDI_PITCH_BEND:\n            synth.pitchBend(event.channel, (event.param2 << 7) + event.param1);\n            break;\n          case MIDIEvents.EVENT_MIDI_CONTROLLER:\n            synth.controlChange(event.channel, event.param1, event.param2);\n            break;\n          // case MIDIEvents.EVENT_MIDI_CHANNEL_AFTERTOUCH:\n          //   synth.channelAftertouch(event.channel, event.param1);\n          //   break;\n          // case MIDIEvents.EVENT_MIDI_NOTE_AFTERTOUCH:\n          //   synth.noteAftertouch(event.channel, event.param1, event.param2);\n          //   break;\n          default:\n            break;\n        }\n      }\n      this.position = pos;\n    }\n\n    // Render the block of audio samples in float format\n    synth.render(buffer, batchSize);\n    buffer += batchSize * 4; // sizeof(float)\n    bytesWritten += batchSize;\n  }\n\n  if (this.position >= this.events.length) {\n    // Last MIDI event has been processed.\n    // Continue synthesis until silence is detected.\n    // This allows voices with a long release tail to complete.\n    // Fast method: when entire buffer is below threshold, consider it silence.\n    let synthStillActive = 0;\n    const threshold = 0.001;\n    for (let i = 0; i < bufferSize; i += 8) {\n      if (synth.getValue(bufferStart + i, \"float\") > threshold) {\n        // Check left channel only\n        synthStillActive = 1; // Exit early\n        break;\n      }\n    }\n    if (synthStillActive === 0) {\n      this.position = 0;\n      this.paused = true;\n      return 0;\n    }\n  }\n\n  return bytesWritten;\n};\n\nMIDIPlayer.prototype.processPlay = function () {\n  const now = performance.now();\n  const deltaTime = (now - this.lastProcessPlayTimestamp) * this.speed;\n  this.lastProcessPlayTimestamp = now;\n\n  if (this.paused) return;\n\n  let throttleDelayMs = 0;\n  let delay = 0;\n  let message = null;\n\n  this.elapsedTime += deltaTime;\n  let event = this.events[this.position];\n  while (\n    this.events[this.position] &&\n    event.playTime < this.elapsedTime + BUFFER_AHEAD\n  ) {\n    message = null;\n    delay = 0;\n    if (\n      event.type === MIDIEvents.EVENT_SYSEX ||\n      event.type === MIDIEvents.EVENT_DIVSYSEX\n    ) {\n      // Spread out scheduling of sysex messages. Example: Predator (XG).mid\n      message = [event.type, ...event.data];\n      if (event.data && event.data[3] === 0 && event.data[4] === 0) delay = 50;\n      else delay = event.data.length / 2;\n      if (throttleDelayMs > 0)\n        console.debug(\n          \"Sysex event at %s ms delayed %s ms:\",\n          Math.floor(event.playTime),\n          throttleDelayMs,\n          printSysex(event.data),\n        );\n      else\n        console.debug(\n          \"Sysex event at %s ms:\",\n          Math.floor(event.playTime),\n          printSysex(event.data),\n        );\n    } else {\n      switch (event.subtype) {\n        case MIDIEvents.EVENT_MIDI_PROGRAM_CHANGE:\n          this.handleProgramChange(event.channel, event.param1);\n          message = [(event.subtype << 4) + event.channel, event.param1];\n          break;\n        case MIDIEvents.EVENT_MIDI_CHANNEL_AFTERTOUCH:\n          message = [(event.subtype << 4) + event.channel, event.param1];\n          break;\n        case MIDIEvents.EVENT_MIDI_NOTE_OFF:\n        case MIDIEvents.EVENT_MIDI_NOTE_ON:\n        case MIDIEvents.EVENT_MIDI_NOTE_AFTERTOUCH:\n        case MIDIEvents.EVENT_MIDI_CONTROLLER:\n        case MIDIEvents.EVENT_MIDI_PITCH_BEND:\n          if (!this.channelMask[event.channel]) break;\n          message = [\n            (event.subtype << 4) + event.channel,\n            event.param1,\n            event.param2 || 0x00,\n          ];\n          break;\n        default:\n      }\n    }\n    if (message) {\n      const scaledPlayTime =\n        (event.playTime - this.elapsedTime) / this.speed +\n        this.lastProcessPlayTimestamp;\n      this.send(message, scaledPlayTime + throttleDelayMs);\n      throttleDelayMs += delay;\n      this.lastSendTimestamp = scaledPlayTime;\n    }\n    this.position++;\n    event = this.events[this.position];\n  }\n\n  if (this.position >= this.events.length) {\n    setTimeout(this.endCallback, BUFFER_AHEAD + 100);\n    this.position = 0;\n    this.paused = true;\n  }\n};\n\nMIDIPlayer.prototype.handleProgramChange = function (channel, program) {\n  this.channelProgramNums[channel] = program;\n  this.programChangeCb?.();\n};\n\nMIDIPlayer.prototype.togglePause = function () {\n  this.paused = !this.paused;\n  if (this.paused === true) {\n    this.panic(this.lastSendTimestamp + 10);\n  }\n  return this.paused;\n};\n\nMIDIPlayer.prototype.resume = function () {\n  this.paused = false;\n};\n\nMIDIPlayer.prototype.stop = function () {\n  this.paused = true;\n  this.panic();\n};\n\nMIDIPlayer.prototype.send = function (message, timestamp) {\n  try {\n    this.output.send(message, timestamp);\n  } catch (e) {\n    console.warn(e);\n    console.warn(message);\n  }\n};\n\n// TODO: fix confusion between reset and panic\nMIDIPlayer.prototype.panic = function (timestamp) {\n  if (this.useWebMIDI) {\n    for (let ch = 0; ch < 16; ch++) {\n      this.send(\n        [(MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch, CC_SUSTAIN_PEDAL, 0],\n        timestamp,\n      );\n      this.send(\n        [(MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch, CC_ALL_SOUND_OFF, 0],\n        timestamp,\n      );\n      this.send(\n        [\n          (MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch,\n          CC_RESET_ALL_CONTROLLERS,\n          0,\n        ],\n        timestamp,\n      );\n    }\n  } else {\n    // Release sustain pedal on all channels\n    for (let ch = 0; ch < 16; ch++) {\n      this.synth?.controlChange(ch, CC_SUSTAIN_PEDAL, 0);\n    }\n    this.synth?.panic();\n  }\n};\n\nMIDIPlayer.prototype.reset = function (timestamp) {\n  if (this.useWebMIDI) {\n    this.send([MIDIEvents.EVENT_SYSEX, ...SYSEX_GM_RESET]);\n    for (let ch = 0; ch < 16; ch++) {\n      this.send(\n        [(MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch, CC_SUSTAIN_PEDAL, 0],\n        timestamp,\n      );\n      this.send(\n        [(MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch, CC_ALL_SOUND_OFF, 0],\n        timestamp,\n      );\n      this.send(\n        [\n          (MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch,\n          CC_RESET_ALL_CONTROLLERS,\n          0,\n        ],\n        timestamp,\n      );\n    }\n  } else {\n    this.synth.reset();\n  }\n  this.position = 0;\n  this.paused = true;\n};\n\n// --- Chip Player JS support ---\n\nMIDIPlayer.prototype.getDuration = function () {\n  if (this.events && this.events.length > 0) {\n    return this.events[this.events.length - 1].playTime;\n  }\n  return 0;\n};\n\nMIDIPlayer.prototype.getPosition = function () {\n  return this.elapsedTime;\n};\n\nMIDIPlayer.prototype.setOutput = function (output) {\n  this.panic(this.lastSendTimestamp + 10);\n  this.output = output;\n  // Trigger replay of all program change events\n  this.setPosition(this.getPosition() - 10);\n};\n\nMIDIPlayer.prototype.getSpeed = function () {\n  return this.speed;\n};\n\nMIDIPlayer.prototype.setSpeed = function (speed) {\n  this.speed = Math.max(0.1, Math.min(4, speed));\n};\n\nMIDIPlayer.prototype.setPositionSynth = function (eventList) {\n  const synth = this.synth;\n  eventList.forEach((event) => {\n    switch (event.subtype) {\n      case MIDIEvents.EVENT_MIDI_PROGRAM_CHANGE:\n        // handleProgramChange() is called in setPosition()\n        synth.programChange(event.channel, event.param1);\n        break;\n      case MIDIEvents.EVENT_MIDI_CONTROLLER:\n      default:\n        synth.controlChange(event.channel, event.param1, event.param2);\n        break;\n    }\n  });\n};\n\nMIDIPlayer.prototype.setPositionWebMidi = function (ms, eventList) {\n  const wasPaused = this.paused;\n  this.paused = true;\n\n  let message;\n  eventList.forEach((event, i) => {\n    if (event.subtype === MIDIEvents.EVENT_MIDI_PROGRAM_CHANGE) {\n      // handleProgramChange() is called in setPosition()\n      message = [(event.subtype << 4) + event.channel, event.param1];\n    } else if (event.subtype === MIDIEvents.EVENT_MIDI_CONTROLLER) {\n      message = [\n        (event.subtype << 4) + event.channel,\n        event.param1,\n        event.param2,\n      ];\n    }\n    this.send(message, this.lastSendTimestamp + 20 + i * DELAY_MS_PER_CC_EVENT);\n  });\n\n  const numEvents = eventList.length;\n  const messageDelay = numEvents * DELAY_MS_PER_CC_EVENT;\n  console.log(\n    \"Scheduled %s events. Resuming playback in %s ms...\",\n    numEvents,\n    messageDelay,\n  );\n  if (!wasPaused) {\n    setTimeout(this.resume, messageDelay);\n  }\n};\n\nMIDIPlayer.prototype.setPosition = function (ms) {\n  if (ms < 0 || ms > this.getDuration()) return;\n\n  this.lastProcessPlayTimestamp = performance.now();\n  this.panic(this.lastSendTimestamp + 10);\n  let eventMap = {};\n  let eventList = [];\n  let pos = this.position;\n\n  if (ms < this.elapsedTime) {\n    pos = 0;\n  }\n\n  for (const channel in this.channelsInUse) {\n    this.synth.pitchBend(channel, 8192);\n  }\n\n  // TODO: if we seek inside some notes, it's best to retrigger their noteOn, eg. for string pads.\n\n  while (this.events[pos] && this.events[pos].playTime < ms) {\n    const event = this.events[pos];\n    if (event.subtype === MIDIEvents.EVENT_MIDI_PROGRAM_CHANGE) {\n      this.handleProgramChange(event.channel, event.param1);\n      eventMap[`${event.subtype}-${event.channel}`] = event;\n    } else if (event.subtype === MIDIEvents.EVENT_MIDI_CONTROLLER) {\n      // These controllers (RPN, NRPN, Data Entry) must be sequenced in order\n      if (SEQUENCED_CONTROLLERS.includes(event.param1)) {\n        // console.log('Sequenced event: ch %d -- %d - %d -- %d ms', event.channel, event.param1, event.param2, event.playTime);\n        eventList.push(event);\n      } else {\n        // All others, we only care about the last event\n        eventMap[`${event.subtype}-${event.channel}-${event.param1}`] = event;\n      }\n    }\n    pos++;\n  }\n\n  eventList = Object.values(eventMap).concat(eventList);\n\n  if (this.useWebMIDI) {\n    this.setPositionWebMidi(ms, eventList);\n  } else {\n    this.setPositionSynth(eventList);\n  }\n\n  this.elapsedTime = ms;\n  this.position = pos;\n};\n\nMIDIPlayer.prototype.getChannelInUse = function (ch) {\n  return !!this.channelsInUse[ch];\n};\n\nMIDIPlayer.prototype.getChannelProgramNum = function (ch) {\n  return this.channelProgramNums[ch];\n};\n\nMIDIPlayer.prototype.summarizeMidiEvents = function () {\n  this.textInfo = [];\n  const channelsInUse = this.channelsInUse;\n  const channelProgramNums = this.channelProgramNums;\n  const channelMask = this.channelMask;\n  for (let i = 0; i < 16; i++) {\n    channelsInUse[i] = 0;\n    channelProgramNums[i] = 0;\n    channelMask[i] = true;\n  }\n\n  for (let j = 0; j < this.events.length; j++) {\n    const event = this.events[j];\n    const { channel, track } = event;\n    if (typeof channel !== \"undefined\" && typeof track !== \"undefined\") {\n      this.channelToTrack[channel] = track;\n    }\n    switch (event.subtype) {\n      case MIDIEvents.EVENT_MIDI_NOTE_ON:\n        channelsInUse[channel] = 1;\n        break;\n      case MIDIEvents.EVENT_MIDI_PROGRAM_CHANGE:\n        if (!channelProgramNums[channel])\n          this.handleProgramChange(channel, event.param1);\n        break;\n      case MIDIEvents.EVENT_META_TEXT:\n      case MIDIEvents.EVENT_META_COPYRIGHT_NOTICE:\n      case MIDIEvents.EVENT_META_TRACK_NAME:\n      // case MIDIEvents.EVENT_META_INSTRUMENT_NAME:\n      case MIDIEvents.EVENT_META_LYRICS:\n      case MIDIEvents.EVENT_META_MARKER:\n      case MIDIEvents.EVENT_META_CUE_POINT:\n        const text = event.data\n          .map((c) => String.fromCharCode(c))\n          .join(\"\")\n          .trim();\n        if (text && !text.match(/nstd/i))\n          this.textInfo.push(`${META_LABELS[event.subtype]}: ${text}`);\n        if (event.subtype === MIDIEvents.EVENT_META_TRACK_NAME) {\n          this.trackNames[track] = iconv.decode(\n            event.data,\n            chardet.detect(event.data),\n          );\n        }\n        break;\n      default:\n        break;\n    }\n  }\n};\n\nMIDIPlayer.prototype.setChannelMute = function (ch, isMuted) {\n  this.channelMask[ch] = !isMuted;\n  if (isMuted) {\n    // TODO separate synth from webMidi\n    const timestamp = this.lastSendTimestamp + 10;\n    this.send(\n      [(MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch, CC_SUSTAIN_PEDAL, 0],\n      timestamp,\n    );\n    this.send(\n      [(MIDIEvents.EVENT_MIDI_CONTROLLER << 4) + ch, CC_ALL_SOUND_OFF, 0],\n      timestamp,\n    );\n    this.synth.panicChannel(ch);\n  }\n};\n\nMIDIPlayer.prototype.setUseWebMIDI = function (useWebMIDI) {\n  this.useWebMIDI = useWebMIDI;\n  // Trigger replay of all program change events\n  this.setPosition(this.getPosition() - 10);\n};\n\nexport default MIDIPlayer;\n","import debounce from \"lodash/debounce\";\nimport MIDIFile from \"midifile\";\n\nimport autoBind from \"auto-bind\";\nimport range from \"lodash/range\";\nimport { DUMMY_CALLBACK } from \"../components/App\";\nimport {\n  SOUNDFONTS,\n  SOUNDFONT_MOUNTPOINT,\n  SOUNDFONT_URL_PATH,\n} from \"../config\";\nimport { GM_DRUM_KITS, GM_INSTRUMENTS } from \"../gm-patch-map\";\nimport { ensureEmscFileWithUrl, remap01 } from \"../util\";\nimport MIDIFilePlayer from \"./MIDIFilePlayer\";\nimport Player from \"./Player\";\n\nlet core = null;\n\nconst dummyMidiOutput = {\n  send: DUMMY_CALLBACK,\n};\n\nconst midiDevices = [dummyMidiOutput];\n\nconst fileExtensions = [\"mid\", \"midi\", \"smf\"];\n\nconst MIDI_ENGINE_LIBFLUIDLITE = 0;\nconst MIDI_ENGINE_LIBADLMIDI = 1;\nconst MIDI_ENGINE_WEBMIDI = 2;\n\nexport default class MIDIPlayer extends Player {\n  paramDefs = [\n    {\n      id: \"synthengine\",\n      label: \"Synth Engine\",\n      type: \"enum\",\n      options: [\n        {\n          label: \"MIDI Synthesis Engine\",\n          items: [\n            {\n              label: \"SoundFont (libFluidLite)\",\n              value: MIDI_ENGINE_LIBFLUIDLITE,\n            },\n            {\n              label: \"Adlib/OPL3 FM (libADLMIDI)\",\n              value: MIDI_ENGINE_LIBADLMIDI,\n            },\n            { label: \"MIDI Device (Web MIDI)\", value: MIDI_ENGINE_WEBMIDI },\n          ],\n        },\n      ],\n      defaultValue: 0,\n    },\n    {\n      id: \"soundfont\",\n      label: \"Soundfont\",\n      type: \"enum\",\n      options: SOUNDFONTS,\n      defaultValue: SOUNDFONTS[2].items[0].value,\n      // defaultValue: SOUNDFONTS[1].items[0].value,\n      dependsOn: {\n        param: \"synthengine\",\n        value: MIDI_ENGINE_LIBFLUIDLITE,\n      },\n    },\n    {\n      id: \"reverb\",\n      label: \"Reverb\",\n      type: \"number\",\n      min: 0.0,\n      max: 1.0,\n      step: 0.01,\n      defaultValue: 0.0,\n      dependsOn: {\n        param: \"synthengine\",\n        value: MIDI_ENGINE_LIBFLUIDLITE,\n      },\n    },\n    {\n      id: \"chorus\",\n      label: \"Chorus\",\n      type: \"number\",\n      min: 0.0,\n      max: 1.0,\n      step: 0.01,\n      defaultValue: 0.0,\n      dependsOn: {\n        param: \"synthengine\",\n        value: MIDI_ENGINE_LIBFLUIDLITE,\n      },\n    },\n    {\n      id: \"fluidpoly\",\n      label: \"Polyphony\",\n      type: \"number\",\n      min: 4,\n      max: 256,\n      step: 4,\n      defaultValue: 128,\n      dependsOn: {\n        param: \"synthengine\",\n        value: MIDI_ENGINE_LIBFLUIDLITE,\n      },\n    },\n    {\n      id: \"opl3bank\",\n      label: \"OPL3 Bank\",\n      type: \"enum\",\n      options: [],\n      defaultValue: 58, // Windows 95 bank\n      dependsOn: {\n        param: \"synthengine\",\n        value: MIDI_ENGINE_LIBADLMIDI,\n      },\n    },\n    {\n      id: \"mididevice\",\n      label: \"MIDI Device\",\n      type: \"enum\",\n      options: [\n        {\n          label: \"MIDI Output Devices\",\n          items: [{ label: \"Dummy device\", value: 0 }],\n        },\n      ],\n      defaultValue: 0,\n      dependsOn: {\n        param: \"synthengine\",\n        value: MIDI_ENGINE_WEBMIDI,\n      },\n    },\n    {\n      id: \"autoengine\",\n      label: \"Auto Synth Engine Switching\",\n      hint: 'Switch synth engine based on filenames. Files containing \"FM\" will play through Adlib/OPL3 synth.',\n      type: \"toggle\",\n      defaultValue: true,\n    },\n    {\n      id: \"gmreset\",\n      label: \"GM Reset\",\n      hint: \"Send a GM Reset sysex and reset all controllers on all channels.\",\n      type: \"button\",\n    },\n  ];\n\n  constructor(...args) {\n    super(...args);\n    autoBind(this);\n\n    core = this.core;\n    core._tp_init(this.sampleRate);\n\n    // Initialize Soundfont filesystem\n    core.FS.mkdir(SOUNDFONT_MOUNTPOINT);\n    core.FS.mount(core.FS.filesystems.IDBFS, {}, SOUNDFONT_MOUNTPOINT);\n\n    this.name = \"MIDI Player\";\n    this.fileExtensions = fileExtensions;\n    this.activeChannels = [];\n    this.buffer = core._malloc(this.bufferSize * 4 * 2); // f32 * 2 channels\n    this.filepathMeta = {};\n    this.midiFilePlayer = new MIDIFilePlayer({\n      // playerStateUpdate is debounced to prevent flooding program change events\n      programChangeCb: debounce(\n        () =>\n          this.emit(\"playerStateUpdate\", {\n            voiceNames: range(this.getNumVoices()).map(this.getVoiceName),\n          }),\n        200,\n      ),\n      output: dummyMidiOutput,\n      skipSilence: true,\n      sampleRate: this.sampleRate,\n      synth: {\n        // TODO: Consider removing the tiny player (tp), since a lot of MIDI is now implemented in JS.\n        //       All it's really doing is hiding the FluidSynth and libADLMIDI insances behind a singleton.\n        //       C object (\"context\") pointers could also be hidden at the JS layer, if those are annoying.\n        //       The original benefit was to tie in tml.h (MIDI file reader) which is not used any more.\n        //       Besides, MIDIPlayer.js already calls directly into libADLMIDI functions.\n        //       see also ../../scripts/build-chip-core.js:29\n        noteOn: core._tp_note_on,\n        noteOff: core._tp_note_off,\n        pitchBend: core._tp_pitch_bend,\n        controlChange: core._tp_control_change,\n        programChange: core._tp_program_change,\n        panic: core._tp_panic,\n        panicChannel: core._tp_panic_channel,\n        render: core._tp_render,\n        reset: core._tp_reset,\n        getValue: core.getValue,\n      },\n      setChipStateDump: this.setChipStateDump,\n    });\n\n    // Populate OPL3 banks\n    const numBanks = core._adl_getBanksCount();\n    const ptr = core._adl_getBankNames();\n    const oplBanks = [];\n    for (let i = 0; i < numBanks; i++) {\n      oplBanks.push({\n        label: core.UTF8ToString(core.getValue(ptr + i * 4, \"*\")),\n        value: i,\n      });\n    }\n    this.paramDefs.find((def) => def.id === \"opl3bank\").options = [\n      { label: \"OPL3 Bank\", items: oplBanks },\n    ];\n\n    this.webMidiIsInitialized = false;\n    // this.midiFilePlayer = new MIDIFilePlayer({ output: dummyMidiOutput });\n\n    // Initialize parameters\n    this.params = {};\n    // Transient parameters hold a parameter that is valid only for the current song.\n    // They are reset when another song is loaded.\n    this.transientParams = {};\n    this.paramDefs\n      .filter((p) => p.id !== \"soundfont\")\n      .forEach((p) => this.setParameter(p.id, p.defaultValue));\n  }\n\n  handleFileSystemReady() {\n    const soundfontParam = this.paramDefs.find(\n      (paramDef) => paramDef.id === \"soundfont\",\n    );\n    this.setParameter(soundfontParam.id, soundfontParam.defaultValue);\n    this.updateSoundfontParamDefs();\n  }\n\n  processAudioInner(channels) {\n    const useWebMIDI = this.params[\"synthengine\"] === MIDI_ENGINE_WEBMIDI;\n\n    // No early return or zero-fill during pause.\n    // Notes are allowed to ring out, and the MIDI synth behaves more like external hardware.\n\n    if (useWebMIDI) {\n      this.midiFilePlayer.processPlay();\n    } else {\n      if (this.midiFilePlayer.processPlaySynth(this.buffer, this.bufferSize)) {\n        for (let ch = 0; ch < channels.length; ch++) {\n          for (let i = 0; i < this.bufferSize; i++) {\n            channels[ch][i] = core.getValue(\n              this.buffer + // Interleaved channel format\n                i * 4 * 2 + // frame offset   * bytes per sample * num channels +\n                ch * 4, // channel offset * bytes per sample\n              \"float\",\n            );\n          }\n        }\n      } else {\n        this.stop();\n      }\n    }\n  }\n\n  metadataFromFilepath(filepath) {\n    filepath = decodeURIComponent(filepath); // unescape, %25 -> %\n    const parts = filepath.split(\"/\");\n    const len = parts.length;\n    const meta = {};\n    // HACK: MIDI metadata is guessed from filepath\n    // based on the directory structure of Chip Player catalog.\n    // Ideally, this data should be embedded in the MIDI files.\n    if (parts.length >= 3) {\n      meta.formatted = {\n        title: `${parts[1]} - ${parts[len - 1]}`,\n        subtitle: parts[0],\n      };\n    } else if (parts.length === 2) {\n      meta.formatted = {\n        title: parts[1],\n        subtitle: parts[0],\n      };\n    } else {\n      meta.formatted = {\n        title: parts[0],\n        subtitle: \"MIDI\",\n      };\n    }\n    return meta;\n  }\n\n  ensureWebMidiInitialized() {\n    if (this.webMidiIsInitialized === true) return;\n    this.webMidiIsInitialized = true;\n\n    // Initialize MIDI output devices\n    console.debug(\"Requesting MIDI output devices.\");\n    // if (typeof navigator.requestMIDIAccess === \"function\") {\n    //   navigator.requestMIDIAccess({ sysex: true }).then((access) => {\n    //     if (access.outputs.length === 0) {\n    //       console.warn(\"No MIDI output devices found.\");\n    //     } else {\n    //       [...access.outputs.values()].forEach((midiOutput) => {\n    //         console.debug(\"MIDI Output:\", midiOutput);\n    //         midiDevices.push(midiOutput);\n    //         this.paramDefs\n    //           .find((def) => def.id === \"mididevice\")\n    //           .options[0].items.push({\n    //             label: midiOutput.name,\n    //             value: midiDevices.length - 1,\n    //           });\n    //       });\n\n    //       // TODO: remove if removing Dummy Device\n    //       this.setParameter(\"mididevice\", 1);\n    //     }\n    //   });\n    // } else {\n    //   console.warn(\n    //     \"Web MIDI API not supported. Try Chrome if you want to use external MIDI output devices.\",\n    //   );\n    // }\n  }\n\n  async loadData(data, filepath) {\n    this.ensureWebMidiInitialized();\n    this.filepathMeta = this.metadataFromFilepath(filepath);\n\n    const newTransientParams = {};\n\n    // Transient params: synthengine, opl3bank, soundfont.\n    if (this.getParameter(\"autoengine\")) {\n      newTransientParams[\"synthengine\"] =\n        this.getSynthengineBasedOnFilename(filepath);\n      newTransientParams[\"opl3bank\"] =\n        this.getOpl3bankBasedOnFilename(filepath);\n    }\n\n    // Load custom Soundfont if present in the metadata response.\n    if (\n      this.getParameter(\"synthengine\") === MIDI_ENGINE_LIBFLUIDLITE &&\n      !filepath.startsWith(\"f:\")\n    ) {\n      core._tp_set_ch10_melodic(false);\n    }\n\n    // Apply transient params. Avoid thrashing of params that haven't changed.\n    Object.keys(this.params).forEach((key) => {\n      if (newTransientParams[key] !== this.transientParams[key]) {\n        this.setTransientParameter(key, newTransientParams[key]);\n      }\n    });\n\n    const midiFile = new MIDIFile(data);\n    // Checking filepath doesn't work for dragged files. Force to true during development.\n    const useTrackLoops = filepath.includes(\"SoundFont MIDI\");\n    const result = this.midiFilePlayer.load(midiFile, useTrackLoops);\n    this.midiFilePlayer.play(\n      () => this.emit(\"playerStateUpdate\", { isStopped: true }),\n      () => {\n        this.emit(\"playerStateUpdate\", { isPlaying: true });\n        if (this.playbackStartedCallback) {\n          this.playbackStartedCallback();\n          this.playbackStartedCallback = null;\n        }\n      },\n    );\n\n    this.activeChannels = [];\n    for (let i = 0; i < 16; i++) {\n      if (this.midiFilePlayer.getChannelInUse(i)) this.activeChannels.push(i);\n    }\n\n    this.resume();\n    this.emit(\"playerStateUpdate\", {\n      ...this.getBasePlayerState(),\n      isStopped: false,\n    });\n    return result;\n  }\n\n  getSynthengineBasedOnFilename(filepath) {\n    // Switch to OPL3 engine if filepath contains 'FM'\n    const fp = filepath.toLowerCase().replace(\"_\", \" \");\n    if (fp.match(/(\\bfm|fm\\b)/i)) {\n      return MIDI_ENGINE_LIBADLMIDI;\n    }\n    return null;\n  }\n\n  getOpl3bankBasedOnFilename(filepath) {\n    // Crude bank matching for a few specific games. :D\n    const fp = filepath.toLowerCase().replace(\"_\", \" \");\n    const opl3def = this.paramDefs.find((def) => def.id === \"opl3bank\");\n    if (opl3def) {\n      const opl3banks = opl3def.options[0].items;\n      const findBank = (str) =>\n        opl3banks.findIndex((bank) => bank.label.indexOf(str) > -1);\n      let bankId = opl3def.defaultValue;\n      if (fp.indexOf(\"[rick]\") > -1) {\n        bankId = findBank(\"Descent:: Rick\");\n      } else if (fp.indexOf(\"[ham]\") > -1) {\n        bankId = findBank(\"Descent:: Ham\");\n      } else if (fp.indexOf(\"[int]\") > -1) {\n        bankId = findBank(\"Descent:: Int\");\n      } else if (fp.indexOf(\"descent 2\") > -1) {\n        bankId = findBank(\"Descent 2\");\n      } else if (fp.indexOf(\"magic carpet\") > -1) {\n        bankId = findBank(\"Magic Carpet\");\n      } else if (fp.indexOf(\"duke nukem\") > -1) {\n        bankId = findBank(\"Duke Nukem\");\n      } else if (fp.indexOf(\"wacky wheels\") > -1) {\n        bankId = findBank(\"Apogee IMF\");\n      } else if (fp.indexOf(\"warcraft 2\") > -1) {\n        bankId = findBank(\"Warcraft 2\");\n      } else if (fp.indexOf(\"warcraft\") > -1) {\n        bankId = findBank(\"Warcraft\");\n      } else if (fp.indexOf(\"system shock\") > -1) {\n        bankId = findBank(\"System Shock\");\n      } else if (fp.indexOf(\"/hexen\") > -1 || fp.indexOf(\"/heretic\") > -1) {\n        bankId = findBank(\"Hexen\");\n      } else if (fp.indexOf(\"/raptor\") > -1) {\n        bankId = findBank(\"Raptor\");\n      } else if (fp.indexOf(\"/doom 2\") > -1) {\n        bankId = findBank(\"Doom 2\");\n      } else if (fp.indexOf(\"/doom\") > -1) {\n        bankId = findBank(\"DOOM\");\n      }\n      if (bankId > -1) {\n        return bankId;\n      }\n    }\n    return null;\n  }\n\n  isPlaying() {\n    return !this.midiFilePlayer.paused;\n  }\n\n  suspend() {\n    super.suspend();\n    this.midiFilePlayer.stop();\n  }\n\n  stop() {\n    this.suspend();\n    console.debug(\"MIDIPlayer.stop()\");\n    this.emit(\"playerStateUpdate\", { isStopped: true });\n  }\n\n  togglePause() {\n    return this.midiFilePlayer.togglePause();\n  }\n\n  getDurationMs() {\n    return this.midiFilePlayer.getDuration();\n  }\n\n  getPositionMs() {\n    return this.midiFilePlayer.getPosition();\n  }\n\n  seekMs(ms) {\n    return this.midiFilePlayer.setPosition(ms);\n  }\n\n  getTempo() {\n    return this.midiFilePlayer.getSpeed();\n  }\n\n  setTempo(tempo) {\n    this.midiFilePlayer.setSpeed(tempo);\n  }\n\n  getNumVoices() {\n    return this.activeChannels.length;\n  }\n\n  getVoiceName(index) {\n    const ch = this.activeChannels[index];\n    const pgm = this.midiFilePlayer.channelProgramNums[ch];\n    const instrumentName =\n      ch === 9 ? GM_DRUM_KITS[pgm] || GM_DRUM_KITS[0] : GM_INSTRUMENTS[pgm];\n    const areFirstTrackNamesDistinct =\n      new Set(\n        Object.values(this.midiFilePlayer.channelToTrack)\n          .map((track) => this.midiFilePlayer.trackNames[track])\n          .slice(0, 2),\n      ).size === 2;\n    const trackName = areFirstTrackNamesDistinct\n      ? this.midiFilePlayer.trackNames[this.midiFilePlayer.channelToTrack[ch]]\n      : null;\n    return trackName ?? instrumentName;\n  }\n\n  getVoiceMask() {\n    return this.activeChannels.map((ch) => this.midiFilePlayer.channelMask[ch]);\n  }\n\n  setVoiceMask(voiceMask) {\n    voiceMask.forEach((isEnabled, i) => {\n      const ch = this.activeChannels[i];\n      this.midiFilePlayer.setChannelMute(ch, !isEnabled);\n    });\n  }\n\n  getMetadata() {\n    return {\n      ...this.filepathMeta,\n    };\n  }\n\n  getParameter(id) {\n    if (id === \"fluidpoly\") return core._tp_get_polyphony();\n    if (this.transientParams[id] != null) return this.transientParams[id];\n    return this.params[id];\n  }\n\n  updateSoundfontParamDefs() {\n    this.paramDefs = this.paramDefs.map((paramDef) => {\n      if (paramDef.id === \"soundfont\") {\n        const userSoundfonts = paramDef.options[0];\n        const userSoundfontPath = `${SOUNDFONT_MOUNTPOINT}/user/`;\n        if (core.FS.analyzePath(userSoundfontPath).exists) {\n          userSoundfonts.items = core.FS.readdir(userSoundfontPath)\n            .filter((f) => f.match(/\\.sf2$/i))\n            .map((f) => ({\n              label: f,\n              value: `user/${f}`,\n            }));\n        }\n      }\n      return paramDef;\n    });\n  }\n\n  setTransientParameter(id, value) {\n    if (value == null) {\n      // Unset the transient parameter.\n      this.setParameter(id, this.params[id]);\n    } else {\n      this.setParameter(id, value, true);\n    }\n  }\n\n  setFluidChorus(value) {\n    const fluidSynth = core._tp_get_fluid_synth();\n    if (value === 0) {\n      core._fluid_synth_set_chorus_on(fluidSynth, false);\n    } else {\n      core._fluid_synth_set_chorus_on(fluidSynth, true);\n      // FLUID_CHORUS_DEFAULT_N 3 (0 to 99)\n      const nr = 3;\n      // FLUID_CHORUS_DEFAULT_LEVEL 2.0f (0 to 10)\n      const level = Math.round(remap01(value, 0, 4));\n      // FLUID_CHORUS_DEFAULT_SPEED 0.3f (0.29 to 5)\n      const speed = 0.3;\n      // FLUID_CHORUS_DEFAULT_DEPTH 8.0f (0 to ~100)\n      const depthMs = Math.round(remap01(value, 2, 14));\n      // FLUID_CHORUS_DEFAULT_TYPE FLUID_CHORUS_MOD_SINE\n      //   FLUID_CHORUS_MOD_SINE = 0,\n      //   FLUID_CHORUS_MOD_TRIANGLE = 1\n      const type = 0;\n      // (fluid_synth_t* synth, int nr, double level, double speed, double depth_ms, int type)\n      core._fluid_synth_set_chorus(fluidSynth, nr, level, speed, depthMs, type);\n    }\n  }\n\n  setParameter(id, value, isTransient = false) {\n    switch (id) {\n      case \"synthengine\":\n        value = parseInt(value, 10);\n        this.midiFilePlayer.panic();\n        if (value === MIDI_ENGINE_WEBMIDI) {\n          this.midiFilePlayer.setUseWebMIDI(true);\n        } else {\n          this.midiFilePlayer.setUseWebMIDI(false);\n          core._tp_set_synth_engine(value);\n        }\n        break;\n      case \"soundfont\":\n        const url = `${SOUNDFONT_URL_PATH}/${value}`;\n        ensureEmscFileWithUrl(\n          core,\n          `${SOUNDFONT_MOUNTPOINT}/${value}`,\n          url,\n        ).then((filename) => this._loadSoundfont(filename));\n        break;\n      case \"reverb\":\n        // TODO: call fluidsynth directly from JS, similar to chorus\n        value = parseFloat(value);\n        core._tp_set_reverb(value);\n        break;\n      case \"chorus\":\n        value = parseFloat(value);\n        this.setFluidChorus(value);\n        break;\n      case \"fluidpoly\":\n        // TODO: call fluidsynth directly from JS, similar to chorus\n        value = parseInt(value, 10);\n        core._tp_set_polyphony(value);\n        break;\n      case \"opl3bank\":\n        value = parseInt(value, 10);\n        core._tp_set_bank(value);\n        break;\n      case \"autoengine\":\n        value = !!value;\n        break;\n      case \"mididevice\":\n        this.midiFilePlayer.setOutput(midiDevices[value]);\n        break;\n      case \"gmreset\":\n        this.midiFilePlayer.reset();\n        break;\n      default:\n        console.warn('MIDIPlayer has no parameter with id \"%s\".', id);\n    }\n    // This should be the only place we modify transientParams.\n    if (isTransient) {\n      this.transientParams[id] = value;\n    } else {\n      delete this.transientParams[id];\n      this.params[id] = value;\n    }\n  }\n\n  _loadSoundfont(filename) {\n    console.log(\"Loading soundfont %s...\", filename);\n    this.muteAudioDuringCall(this.audioNode, () => {\n      const err = core.ccall(\n        \"tp_load_soundfont\",\n        \"number\",\n        [\"string\"],\n        [filename],\n      );\n      if (err !== -1) console.log(\"Loaded soundfont.\");\n    });\n  }\n\n  eject() {\n    this.stop();\n    this.midiFilePlayer.reset();\n    this.emit(\"playerStateUpdate\", { isStopped: true });\n  }\n\n  setPlaybackStartedCallback(callback) {\n    this.playbackStartedCallback = callback;\n  }\n}\n","import EventEmitter from \"events\";\n//\n// Player can be viewed as a state machine with\n// 3 states (playing, paused, stopped) and 5 transitions\n// (open, pause, unpause, seek, stop).\n// If the player has reached end of the song,\n// it is in the terminal \"stopped\" state and is\n// no longer playable:\n//                         ╭– (seek) –╮\n//                         ^          v\n//  ┌─ ─ ─ ─ ─┐         ┌─────────────────┐            ┌─────────┐\n//  │ stopped │–(open)–>│     playing     │––(stop)–––>│ stopped │\n//  └ ─ ─ ─ ─ ┘         └─────────────────┘            └─────────┘\n//                        | ┌────────┐ ^\n//                (pause) ╰>│ paused │–╯ (unpause)\n//                          └────────┘\n//\n// In the \"open\" transition, the audioNode is connected.\n// In the \"stop\" transition, it is disconnected.\n// \"stopped\" is synonymous with closed/empty.\n//\nexport default class Player extends EventEmitter {\n  /**\n   * @param {object} core - Emscripten module\n   * @param {number} sampleRate - Audio sample rate\n   * @param {number} [bufferSize=2048] - Audio buffer size\n   * @param {boolean} [debug=false] - Enable debug logging\n   */\n  constructor(\n    core,\n    sampleRate,\n    bufferSize = 2048,\n    debug = false,\n    setChipStateDump,\n    appTogglePause,\n  ) {\n    super();\n\n    this.core = core;\n    this.paused = true;\n    this.stopped = true;\n    this.fileExtensions = [];\n    this.metadata = null;\n    this.sampleRate = sampleRate;\n    this.bufferSize = bufferSize;\n    this.debug = debug;\n    this.timeCount = 0;\n    this.renderTime = 0;\n    this.perfLoggingInterval = 100;\n    this.paramDefs = [];\n    this.params = {};\n    this.setChipStateDump = setChipStateDump;\n    this.appTogglePause = appTogglePause;\n  }\n\n  togglePause() {\n    this.paused = !this.paused;\n    return this.paused;\n  }\n\n  isPaused() {\n    return this.paused;\n  }\n\n  resume() {\n    this.stopped = false;\n    this.paused = false;\n  }\n\n  canPlay(fileExtension) {\n    return this.fileExtensions.indexOf(fileExtension.toLowerCase()) !== -1;\n  }\n\n  /**\n   * @param {ArrayBuffer} data - File contents\n   * @param {string} filename - Filename for metadata fallback\n   */\n  loadData(data, filename) {\n    throw Error(\"Player.loadData() must be implemented.\");\n  }\n\n  stop() {\n    throw Error(\"Player.stop() must be implemented.\");\n  }\n\n  isPlaying() {\n    throw Error(\"Player.isPlaying() must be implemented.\");\n  }\n\n  getTempo() {\n    // TODO: rename all tempo to speed\n    console.warn(\"Player.getTempo() not implemented for this player.\");\n    return 1;\n  }\n\n  setTempo() {\n    console.warn(\"Player.setTempo() not implemented for this player.\");\n  }\n\n  setFadeout(startMs) {\n    console.warn(\"Player.setFadeout() not implemented for this player.\");\n  }\n\n  getDurationMs() {\n    console.warn(\"Player.getDurationMs() not implemented for this player.\");\n    return 5000;\n  }\n\n  getPositionMs() {\n    console.warn(\"Player.getPositionMs() not implemented for this player.\");\n    return 0;\n  }\n\n  seekMs(ms) {\n    console.warn(\"Player.seekMs() not implemented for this player.\");\n  }\n\n  getVoiceName(index) {\n    console.warn(\"Player.getVoiceName() not implemented for this player.\");\n  }\n\n  getVoiceMask() {\n    console.warn(\"Player.getVoiceMask() not implemented for this player.\");\n    return [];\n  }\n\n  setVoiceMask() {\n    console.warn(\"Player.setVoiceMask() not implemented for this player.\");\n  }\n\n  getNumVoices() {\n    return 0;\n  }\n\n  getMetadata() {\n    return {\n      title: null,\n      author: null,\n    };\n  }\n\n  getParamDefs() {\n    return this.paramDefs;\n  }\n\n  getBasePlayerState() {\n    return {\n      metadata: this.getMetadata(),\n      durationMs: this.getDurationMs(),\n      positionMs: this.getPositionMs(),\n      numVoices: this.getNumVoices(),\n      paramDefs: this.getParamDefs(),\n      tempo: this.getTempo(),\n      voiceMask: this.getVoiceMask(),\n      voiceNames: [...Array(this.getNumVoices())].map((_, i) =>\n        this.getVoiceName(i),\n      ),\n      isStopped: this.stopped,\n      isPaused: this.paused,\n    };\n  }\n\n  suspend() {\n    // // this.stopped = true;\n    this.paused = true;\n    this.appTogglePause();\n    this.seekMs(0);\n  }\n\n  processAudio(output) {\n    const start = performance.now();\n    this.processAudioInner(output);\n    const end = performance.now();\n\n    if (this.debug) {\n      this.renderTime += end - start;\n      this.timeCount++;\n      if (this.timeCount >= this.perfLoggingInterval) {\n        const cost = this.renderTime / this.timeCount;\n        const budget = (1000 * this.bufferSize) / this.sampleRate;\n        console.log(\n          \"[%s] %s ms to render %d frames (%s ms) (%s% utilization)\",\n          this.constructor.name,\n          cost.toFixed(2),\n          this.bufferSize,\n          budget.toFixed(1),\n          ((100 * cost) / budget).toFixed(1),\n        );\n        this.renderTime = 0.0;\n        this.timeCount = 0;\n      }\n    }\n  }\n\n  processAudioInner() {\n    throw Error(\"Player.processAudioInner() must be implemented.\");\n  }\n\n  muteAudioDuringCall(audioNode, fn) {\n    if (\n      audioNode &&\n      audioNode.context.state === \"running\" &&\n      this.paused === false\n    ) {\n      const audioprocess = audioNode.onaudioprocess;\n      // Workaround to eliminate stuttering:\n      // Temporarily swap the audio process callback, and do the\n      // expensive operation only after buffer is filled with silence\n      audioNode.onaudioprocess = function (e) {\n        for (let i = 0; i < e.outputBuffer.numberOfChannels; i++) {\n          e.outputBuffer.getChannelData(i).fill(0);\n        }\n        fn();\n        audioNode.onaudioprocess = audioprocess;\n      };\n    } else {\n      fn();\n    }\n  }\n\n  handleFileSystemReady() {}\n\n  static metadataFromFilepath(filepath) {\n    // Guess metadata from path/filename for MIDI files.\n    // Assumes structure:  /Game MIDI/{game}/**/{title}\n    //             ...or:  /MIDI/{artist}/**/{title}\n    const parts = filepath.split(\"/\");\n    const meta = {};\n    meta.title = parts.pop();\n    meta.system = parts.shift();\n    if (meta.system === \"Game MIDI\") {\n      meta.game = parts.shift();\n    } else {\n      meta.artist = parts.shift();\n    }\n    return meta;\n  }\n}\n","import cloneDeep from \"lodash/cloneDeep\";\nimport { Note } from \"./parseMidi\";\nimport { SecondsSpan } from \"./Rawl\";\nimport { MeasuresAndBeats } from \"./SystemLayout\";\n\nexport const TIME_SCALE_FACTOR = 100;\n\nexport type PitchClass = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11;\n\nexport type MeasuresSpan = [number, number]; // one-based numbering, last measure inclusive. [1, 8] is the first eight measures\n\nexport type Modulations = { [oneIndexedMeasureStart: number]: PitchClass };\n\nexport type MeasureRenumbering = {\n  [oneIndexedMeasureStart: number]: PitchClass;\n};\n\nexport type ManualMeasures = {\n  measureStarts: { [oneIndexedMeasureStart: number]: number };\n  beatsPerMeasure: { [oneIndexedMeasureStart: number]: number };\n};\n\n// Add this new type for delta-coded arrays\nexport type DeltaCoded<T extends number> = [T, ...number[]];\n\nexport interface CompressedNotes {\n  [length: number]: {\n    [midiNumber: number]: DeltaCoded<number>;\n  };\n}\n\nexport interface FrozenNotesType {\n  notesInVoices: CompressedNotes[];\n  analysis: FrozenAnalysis;\n}\n\nexport interface Snippet {\n  tag: string;\n  frozenNotes: FrozenNotesType;\n  measuresSpan: [number, number];\n  secondsSpan?: SecondsSpan;\n  phraseStarts?: number[];\n}\n\nexport type MidiNumberToNoteSpans = {\n  [midiNumber: number]: SecondsSpan[];\n};\n\nexport type FrozenAnalysis = {\n  modulations: Modulations;\n  measuresAndBeats: {\n    measures: DeltaCoded<number>;\n    beats: DeltaCoded<number>;\n  };\n};\n\nexport type FrozenNotes = {\n  notesInVoices: MidiNumberToNoteSpans[]; // first dimension is voice\n  analysis: FrozenAnalysis;\n};\n\nexport type Analysis = {\n  modulations: Modulations;\n  phrasePatch?: { measure: number; diff: number }[];\n  sections?: number[];\n  measureRenumbering?: MeasureRenumbering;\n  measures?: ManualMeasures;\n  snippets?: Snippet[];\n\n  // outdated, was used in winter 2023..24 for rock prototype\n  comment: string;\n  tags: string[];\n  form: { [oneIndexedMeasureStart: number]: string };\n};\n\nexport type Analyses = {\n  [path: string]: Analysis;\n};\n\nexport const ANALYSIS_STUB: Analysis = {\n  modulations: { 1: null },\n  comment: \"\",\n  tags: [],\n  form: {},\n  phrasePatch: [],\n  sections: [0], // in phrases\n};\n\nconst removeIdleModulations = (modulations: Modulations): Modulations => {\n  const sortedMeasures = Object.keys(modulations)\n    .map(Number)\n    .sort((a, b) => a - b);\n\n  let lastValue = modulations[sortedMeasures[0]];\n  const result: Modulations = { 1: lastValue };\n\n  for (const measure of sortedMeasures.slice(1)) {\n    const currentValue = modulations[measure];\n    if (currentValue !== lastValue) {\n      result[measure] = currentValue;\n      lastValue = currentValue;\n    }\n  }\n\n  return result;\n};\n\nexport const getNewAnalysis = (\n  note: Note | null,\n  selectedMeasure: number | null,\n  enableManualRemeasuring: boolean,\n  analysis: Analysis,\n): Analysis => {\n  let update: Partial<Analysis> = {};\n\n  if (note) {\n    if (enableManualRemeasuring) {\n      if (selectedMeasure) {\n        update.measures = cloneDeep(analysis.measures) ?? {\n          measureStarts: {},\n          beatsPerMeasure: {},\n        };\n        update.measures.measureStarts[selectedMeasure] = note.span[0];\n      }\n    } else {\n      // TODO: if !selectedMeasure, then only apply modulation if we're inside\n      // the very first modulatory region (if there's already two)\n      // This probably has a circular dependency since we probably need to\n      // build measures to know where exactly our note falls.\n      if (!selectedMeasure) {\n        return analysis;\n      }\n      let newModulations = {\n        ...(analysis.modulations || []),\n        [selectedMeasure]: (note.note.midiNumber % 12) as PitchClass,\n      };\n      update.modulations = removeIdleModulations(newModulations);\n    }\n  }\n\n  return { ...analysis, ...update };\n};\n\nexport const advanceAnalysis = (\n  note: Note | null,\n  selectedMeasure: number | null,\n  enableManualRemeasuring: boolean,\n  selectMeasure: (_: null) => void,\n  analysis: Analysis,\n  commitAnalysisUpdate: (analysisUpdate: Partial<Analysis>) => void,\n) => {\n  const newAnalysis = getNewAnalysis(\n    note,\n    selectedMeasure,\n    enableManualRemeasuring,\n    analysis,\n  );\n\n  selectMeasure(null);\n  commitAnalysisUpdate(newAnalysis);\n};\n\n// Add these utility functions for delta coding and decoding\nexport function deltaCoding(arr: number[]): DeltaCoded<number> {\n  if (arr.length === 0) return [0];\n  const result: DeltaCoded<number> = [arr[0]];\n  for (let i = 1; i < arr.length; i++) {\n    result.push(arr[i] - arr[i - 1]);\n  }\n  return result;\n}\n\nexport function deltaDecoding(encoded: DeltaCoded<number>): number[] {\n  const result: number[] = [encoded[0]];\n  for (let i = 1; i < encoded.length; i++) {\n    result.push(result[i - 1] + encoded[i]);\n  }\n  return result;\n}\n\nexport function undeltaCoding(encoded: DeltaCoded<number>): number[] {\n  return deltaDecoding(encoded);\n}\n\nexport function adjustModulations(\n  modulations: Modulations,\n  measureStart: number,\n): Modulations {\n  return Object.fromEntries(\n    Object.entries(modulations).map(([measure, tonic]) => [\n      parseInt(measure) + measureStart - 1,\n      tonic,\n    ]),\n  );\n}\n\nexport const rehydrateNotes = (snippet: Snippet): Note[][] => {\n  const { frozenNotes } = snippet;\n\n  return frozenNotes.notesInVoices.map((voice, voiceIndex) => {\n    const notes: Note[] = [];\n    Object.entries(voice).forEach(([length, midiNumbers]) => {\n      Object.entries(midiNumbers).forEach(([midiNumber, starts]) => {\n        const decodedStarts = deltaDecoding(starts as DeltaCoded<number>);\n        decodedStarts.forEach((start) => {\n          const startTime = start / TIME_SCALE_FACTOR;\n          const lengthTime = parseInt(length) / TIME_SCALE_FACTOR;\n          const absoluteSpan: [number, number] = [\n            startTime,\n            startTime + lengthTime,\n          ];\n          notes.push({\n            note: { midiNumber: parseInt(midiNumber) },\n            id: notes.length + 1, // Unique ID for each note\n            isDrum: false,\n            span: absoluteSpan,\n            voiceIndex,\n          });\n        });\n      });\n    });\n    return notes;\n  });\n};\n\nexport function rehydrateAnalysis(\n  frozenAnalysis: FrozenNotesType[\"analysis\"],\n  measureStart: number = 1,\n): {\n  analysis: Analysis;\n  measuresAndBeats: MeasuresAndBeats;\n} {\n  return {\n    analysis: {\n      modulations: adjustModulations(frozenAnalysis.modulations, measureStart),\n      comment: \"\",\n      tags: [],\n      form: {},\n    },\n    measuresAndBeats: {\n      measures: undeltaCoding(frozenAnalysis.measuresAndBeats.measures).map(\n        (time) => time / TIME_SCALE_FACTOR,\n      ),\n      beats: undeltaCoding(frozenAnalysis.measuresAndBeats.beats).map(\n        (time) => time / TIME_SCALE_FACTOR,\n      ),\n    },\n  };\n}\n\nexport function rehydrateSnippet(snippet: Snippet): {\n  rehydratedNotes: Note[][];\n  rehydratedAnalysis: Analysis;\n  rehydratedMeasuresAndBeats: MeasuresAndBeats;\n} {\n  const rehydratedNotes = rehydrateNotes(snippet);\n  const {\n    analysis: rehydratedAnalysis,\n    measuresAndBeats: rehydratedMeasuresAndBeats,\n  } = rehydrateAnalysis(snippet.frozenNotes.analysis, snippet.measuresSpan[0]);\n\n  // Ensure modulations are properly adjusted\n  rehydratedAnalysis.modulations = adjustModulations(\n    snippet.frozenNotes.analysis.modulations,\n    snippet.measuresSpan[0],\n  );\n\n  return {\n    rehydratedNotes,\n    rehydratedAnalysis,\n    rehydratedMeasuresAndBeats,\n  };\n}\n\nexport function getSnippetTags(analysis: Analysis): string[] {\n  return analysis.snippets?.flatMap((snippet) => snippet.tag.split(\" \")) || [];\n}\n\nexport const getPhraseStarts = (\n  analysis: Analysis,\n  numMeasures: number,\n): number[] => {\n  const result = [];\n  let i;\n  for (i = 1; i < numMeasures; i += 4) {\n    result.push(i);\n  }\n  result.push(i);\n  for (const { measure, diff } of analysis.phrasePatch || []) {\n    if (result.indexOf(measure) === -1) {\n      console.log(`bad phrasePatch, measure ${measure} not found`);\n      break;\n    }\n    for (let j = result.indexOf(measure); j < result.length; ++j) {\n      result[j] += diff;\n    }\n    while (result.at(-1) + 4 < numMeasures) {\n      result.push(result.at(-1) + 4);\n    }\n    if (result[0] !== 1) {\n      result.unshift(1);\n    }\n  }\n\n  return result;\n};\n\nexport function getSnippetsStartingAtMeasure(\n  snippets: Snippet[],\n  measure: number,\n): string[] {\n  return snippets\n    .filter((snippet) => snippet.measuresSpan[0] === measure)\n    .map((snippet) => snippet.tag);\n}\n\nexport function filterSnippetsByAccess(snippets: Snippet[]): Snippet[] {\n  return snippets.filter((snippet) => {\n    const [chapter] = snippet.tag.split(\":\");\n    return chapter.trim() !== \"book\";\n  });\n}\n","// Metadata filled in using 4o on Dec 6, 2024.\n\nimport AboutTop100Corpus from \"../book/AboutTop100Corpus\";\n\nexport type CorpusEntry = {\n  slug: string;\n  midis: string[];\n  composerBirthYear?: number;\n  genre?: string;\n  style?: string;\n  country?: string;\n  posttext?: React.ReactNode;\n};\n\nexport const MUSESCORE_TOP_100_SLUG = \"top_100_musescore_composers\";\n\nexport const corpora: CorpusEntry[] = [\n  {\n    slug: \"yiruma_misc\",\n    midis: [\n      \"yiruma_27_may\",\n      \"yiruma_chaconne\",\n      \"yiruma_do_you\",\n      \"yiruma_fairy_tale\",\n      \"yiruma_if_i_could_see_you_again\",\n      \"yiruma_its_your_day\",\n      \"yiruma_kiss_the_rain_easy\",\n      \"yiruma_love_me\",\n      \"yiruma_love_me_easy\",\n      \"yiruma_maybe\",\n      \"yiruma_prelude_in_g_minor\",\n      \"yiruma_reason\",\n      \"yiruma_reminiscent\",\n      \"yiruma_river_flows_in_you_easy\",\n      \"River_Flows_In_You\",\n      \"yiruma_room_with_a_view\",\n      \"yiruma_spring_time\",\n      \"yiruma_wait_there\",\n      \"yiruma_when_the_love_falls\",\n      \"Kiss_The_Rain_-_Yiruma_-_10th_Anniversary_Version_Piano_Updated_2019\",\n    ],\n    composerBirthYear: 1978, // Yiruma\n    genre: \"Classical Crossover\", // His music blends classical with modern elements.\n    style: \"New Age, Classical, Contemporary\", // Known for emotionally evocative, piano-driven pieces.\n    country: \"South Korea\", // Yiruma is South Korean.\n  },\n  {\n    slug: \"first_love\",\n    midis: [\n      \"river-flows-in-you\",\n      \"may-be---yiruma\",\n      \"it-s-your-day---yiruma\",\n      \"yiruma---love-me\",\n      \"farewell---yiruma\",\n      \"time-forgets---yiruma\",\n      \"if-i-could-see-you-again---yiruma\",\n      \"i---yiruma\",\n      \"on-the-way---yiruma\",\n      \"till-i-find-you---yiruma\",\n      \"passing-by---yiruma\",\n      \"left-my-hearts---yiruma\",\n      \"dream-a-little-dream-of-me---yiruma\", // cover\n      \"when-the-love-falls---yiruma\", // cover\n    ],\n    composerBirthYear: 1978, // Same as above.\n    genre: \"Classical Crossover\",\n    style: \"New Age, Classical, Contemporary\",\n    country: \"South Korea\",\n  },\n  {\n    slug: \"stephen_heller\",\n    midis: [\n      \"prelude-in-c-minor---stephen-heller-prelude-in-c-sharp-minor---stephen-heller\",\n      \"25-etudes-melodiques-op.-45-no.-2-avalanche-by-stephen-heller\",\n    ],\n    composerBirthYear: 1813,\n    style: \"Romantic\",\n    country: \"Hungary\",\n  },\n  {\n    slug: \"darius_milhaud\",\n    midis: [\n      \"darius-milhaud---scaramouche-op.-165b-iii.-brazileira\",\n      \"mazurka---darius-milhaud-1914\",\n    ],\n    composerBirthYear: 1892,\n    genre: \"Classical, Jazz\",\n    style: \"Jazz, Classical\",\n    country: \"France\",\n  },\n  {\n    slug: \"jim_brickman\",\n    midis: [\n      \"valentine---jim-brickman-with-martina-mcbride\",\n      \"beautiful\",\n      \"jim-brickman---night-prayer-uoc-gi\",\n    ],\n    composerBirthYear: 1961, // Jim Brickman\n    genre: \"Adult Contemporary, Pop\", // Focuses on contemporary ballads and easy-listening music.\n    style: \"Pop Piano, Contemporary Classical\",\n    country: \"USA\", // Jim Brickman is American.\n  },\n  {\n    slug: \"ryan_elder\",\n    midis: [\"rick-and-morty-main-theme---ryan-elder\"],\n    composerBirthYear: 1978, // Ryan Elder\n    genre: \"Television Music, Comedy\",\n    style: \"Electronic, Orchestral, Comedy Music\",\n    country: \"USA\", // Ryan Elder is American.\n  },\n  {\n    slug: \"eubie_blake\",\n    midis: [\n      \"charleston-rag-sounds-of-africa---james-hubert-eubie-blake-1899----copr.-1917\",\n    ],\n    composerBirthYear: 1887,\n    genre: \"Jazz, Ragtime\",\n  },\n  {\n    slug: \"matyas_seiber\",\n    midis: [\n      \"beast-of-england-animal-farm-1954---matyas-seiber-piano-transcription\",\n      \"dance-suite\",\n      \"jazz-etudiette\",\n      \"tango-ii-habanera---tango-ii-habanera\",\n    ],\n    composerBirthYear: 1905,\n    country: \"Hungary, UK\",\n  },\n  {\n    slug: \"garry_schyman\",\n    midis: [\n      \"bioshock-cohen-s-masterpiece-cohen-s-scherzo-no.-7---andante-con-passionato\",\n      \"bioshock-infinite---lighter-than-air\",\n      \"bioshock-2-how-she-sees-the-world\",\n    ],\n    composerBirthYear: 1955,\n    genre: \"Video Game Music, Film Score\",\n    country: \"USA\",\n  },\n  {\n    slug: \"giovanni_allevi\",\n    midis: [\n      \"amor-sacro---giovanni-allevi\",\n      \"la-stanza-dei-giochi---giovanni-allevi\",\n      \"come-sei-veramente-~-giovani-allevi\",\n      \"flowers---giovanni-allevi\",\n      \"aria-~-giovanni-allevi\",\n    ],\n    composerBirthYear: 1969, // Giovanni Allevi\n    genre: \"Classical, Contemporary Classical\",\n    style: \"Minimalism, Piano-driven Classical\",\n    country: \"Italy\", // Giovanni Allevi is Italian.\n  },\n\n  {\n    slug: \"daisuke_kikuta\",\n    midis: [\n      \"michishirube---violet-evergarden-ed\",\n      \"theishter-arr.-sincerely---violet-evergarden-op\",\n    ],\n    composerBirthYear: 1982,\n    genre: \"J-Pop, Anime Song\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"hiroki_kikuta\",\n    midis: [\n      \"phantom-and-...-a-rose---hiroki-kikuta-phantom-and-a-rose---hiroki-kikuta\",\n      \"angel-s-fear-secret-of-mana-soundtrack\",\n    ],\n    composerBirthYear: 1962,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"george_winston\",\n    midis: [\n      \"thanksgiving\",\n      \"colors-dance---george-winston\",\n      \"february-sea---george-winston-771567dfea6219c668f882216e7f8c356a9b6bc5\",\n      \"longing-love---george-winston\",\n    ],\n    composerBirthYear: 1949, // George Winston\n    genre: \"New Age, Instrumental\",\n    style: \"Solo Piano, Minimalism\",\n    country: \"USA\", // George Winston is American.\n  },\n  {\n    slug: \"jun_ishikawa\",\n    midis: [\n      \"marx-theme-from-kirby-super-star---jun-ishikawa\",\n      \"gourmet-race---kirby-super-star-ultra-solo-piano-arrangement\",\n      \"pitch-black-horror---jun-ishikawa---kirby-and-the-forgotten-land\",\n      \"masked-dedede-kirby-triple-deluxe\",\n      \"sand-canyon-1---kirby-s-dreamland-3\",\n      \"green-greens---jun-ishikawa\",\n      \"elfilin-from-kirby-and-the-forgotten-land---hirokazu-ando-jun-ishikawa\",\n    ],\n    composerBirthYear: 1964,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"george_l_cobb\",\n    midis: [\n      \"russian-rag-by-george-cobb-1918\",\n      \"twilight-in-benares-1923\",\n      \"the-fakirs-1923\",\n    ],\n    composerBirthYear: 1886,\n    genre: \"Ragtime\",\n  },\n  {\n    slug: \"tomohito_nishiura\",\n    midis: [\"professor-layton-s-theme---piano\"],\n    composerBirthYear: 1982, // Tomohito Nishiura\n    genre: \"Video Game Music\",\n    style: \"Orchestral, Cinematic\",\n    country: \"Japan\", // Tomohito Nishiura is Japanese.\n  },\n  {\n    slug: \"juergen_moser\",\n    midis: [\n      \"the-groover---jurgen-moser\",\n      \"new-orleans-blues-extended-version---jurgen-moser\",\n      \"latin-special---jurgen-moser\",\n      \"the-snow-is-falling---jurgen-moser\",\n    ],\n    composerBirthYear: 1949,\n    genre: \"Teacher Music\",\n    style: \"Classical, Contemporary\",\n    country: \"Germany\",\n  },\n  {\n    slug: \"david_lanz\",\n    midis: [\n      \"cristofari-s-dream\",\n      \"moonlight-lake-by-david-lanz\",\n      \"angels-falling-by-david-lanz\",\n    ],\n    composerBirthYear: 1950, // David Lanz\n    genre: \"New Age, Instrumental\",\n    style: \"Piano Solo, Contemporary Classical\",\n    country: \"USA\", // David Lanz is American.\n  },\n  {\n    slug: \"philip_glass\",\n    midis: [\n      \"glassworks-opening-1---philip-glass-opening-1---philip-glass\",\n      \"tales-from-the-loop\",\n      \"walk-to-school-tales-from-the-loop\",\n      \"it-was-always-you-helen-from-the-classic-horror-movie-candyman\",\n      \"philip-glass---prophecies\",\n      \"philip-glass---facades\",\n      \"night-train---philip-glass-arr.-for-solo-piano\",\n      \"philip-glass---spaceship\",\n      \"philip-glass---pruit-igoe\",\n      \"philip-glass---islands\",\n      \"akhnaten-prelude---philip-glass\",\n      \"dead-things\",\n      \"candyman\",\n      \"philip-glass---floe\",\n      \"philip-glass---satyagraha-act-3-ending\",\n    ],\n    composerBirthYear: 1937, // Philip Glass\n    genre: \"Minimalism, Classical\",\n    style: \"Minimalism, Avant-garde\",\n    country: \"USA\", // Philip Glass is American.\n  },\n  {\n    slug: \"machaut\",\n    midis: [\"machaut---messe-de-nostre-dame---kyrie\"],\n    composerBirthYear: 1300, // Guillaume de Machaut (estimated)\n    genre: \"Medieval, Sacred\",\n    style: \"Polyphonic Choral Music\",\n    country: \"France\", // Machaut was French.\n  },\n  {\n    slug: \"bela_bartok\",\n    midis: [\n      \"six-dances-in-bulgarian-rhythm-no.6-from-mikrokosmos-sz.107-bb-105---bela-bartok\",\n      \"an-evening-at-the-village---bartok-bela\",\n    ],\n    composerBirthYear: 1881,\n    genre: \"Folk, Traditional\",\n    country: \"Hungary\",\n  },\n  {\n    slug: \"habanera\",\n    midis: [\n      \"la-cubana-danza-habanera-1850-de-florencio-lahoz\",\n      \"habanera---pascual-roch-1864---1921\",\n      \"la-paloma-habanera\",\n      \"habanera---bartolome-calatayud\",\n      \"soledad-.-habanera-par-ignazio-cervantes\",\n      \"emilia-habanera-pour-guitare-a.alba\",\n\n      \"piece-en-forme-de-habanera\",\n    ],\n    genre: \"Latin, Traditional\",\n    style: \"Habanera, Dance\",\n    country: \"Spain\", // The Habanera is a Spanish genre.\n  },\n  {\n    slug: \"ernesto_nazareth\",\n    midis: [\n      \"brejeiro---ernesto-nazareth\",\n      \"tango-habanera-vers-1925-by-ernesto-nazareth\",\n      \"apanhei-te-cavanquinho---ernesto-nazareth\",\n    ],\n    composerBirthYear: 1863, // Ernesto Nazareth\n    genre: \"Brazilian, Choro\",\n    style: \"Choro, Tango\",\n    country: \"Brazil\", // Ernesto Nazareth is Brazilian.\n  },\n  {\n    slug: \"georgian\",\n    midis: [\n      \"moxevis-k-alo-t-inao\",\n      \"c-angala-da-gogona\",\n      \"t-u-ase-turp-a-iqavi\",\n      \"nu-giqors-k-alav\",\n      \"mival-guriashi\",\n      \"kintouri\",\n    ],\n    composerBirthYear: undefined, // Traditional Georgian folk music\n    genre: \"Folk, Traditional\",\n    style: \"Georgian Polyphonic Singing\",\n    country: \"Georgia\", // The music is from Georgia (Caucasus region).\n  },\n  {\n    // also https://musescore.com/sheetmusic?text=%D1%82%D0%B0%D0%BD%D0%B3%D0%BE&type=non-official\n    // also https://musescore.com/sheetmusic?text=%E3%82%BF%E3%83%B3%E3%82%B4&type=non-official\n    // also https://musescore.com/sheetmusic?text=%E6%8E%A2%E6%88%88&type=non-official\n    slug: \"tango\",\n    midis: [\n      \"la-cumparsita\",\n      \"sankarin-tango-finnish-tango---petri-alanko-and-martti-suosalo\",\n      \"tango---traditionnel-paraguayen\",\n      \"catherine-s-tango---dustin-o-halloran\",\n      \"mi-noche-triste-tango---castriota-arr.-domingo-prat\",\n\n      \"spanish-tango\",\n      \"tango-to-evora\",\n      \"a-la-gran-muneca---tango\",\n      \"tango-ndeg3-op.50---jose-ferrer-y-esteve-1835---1916\", // ideal V/bIII\n      \"happy-birthday-tango\",\n      \"to-ostatnia-niedziela-last-sunday---polish-tango\",\n      \"ojos-negros-tango-by-vicente-greco\", // V-I compared to parallel V-i\n      \"shovel-knight-plague-of-shadows---tango-of-the-troupple-king\",\n      \"tango-habanera-vers-1925-by-ernesto-nazareth\",\n      \"ole-guapa-by-a.malando\",\n\n      \"saladillo-tango-pour-piano-de-vicente-greco-1888-1924\",\n      \"escorregando---tango-brasileiro\",\n      \"tango---isaac-albeniz\",\n      \"tango-flamenco---luis-de-soria-1851---1935\", // pure major\n\n      \"lagrima---tango---joao-teixeira-guimaraes-1883---1947\",\n      \"moon-tango---r.-clayderman\",\n      \"assassin-s_tango\",\n      \"tango-for-piano\",\n      \"tango-of-the-roses\",\n\n      \"carioca-1913\",\n      \"tango-el-choclo---angel-gregorio-villoldo\",\n      \"tango-por-una-cabeza\",\n      \"the-masochism-tango---tom-lehrer-the-masochism-tango---tom-lehrer-the-masochism-tango\",\n\n      \"tango-jealousy---jacob-gade\",\n      \"beleet-moy-parus-a.-mironov---gennadiy-gladkov\",\n      \"chicago---cell-block-tango---misc-soundtrack\",\n      \"underground-tango---goran-bregovic-string-quartet\",\n\n      \"tango-de-la-muerte\",\n      \"tango-pour-claude---richard-galliano\",\n      \"tango-from-schnittke-s-concerto-grosso-1\",\n\n      // el tango de roxanne\n      \"tango-lyubvi\",\n\n      \"piazzolla_histoire_du_tango_bordel_1900\",\n      \"piazzolla_histoire_du_tango_cafe_1930\",\n      \"piazzolla_histoire_du_tango_nightclub_1960\",\n      \"piazzolla_histoire_du_tango_concert_aujourdhui\",\n      \"astor-piazzolla---prologue-tango-apasionado\",\n      \"astor-piazzolla-adios-nonino-tango\",\n      \"street-tango-for-clarinet-and-piano\",\n      \"triunfal-tango-by-astor-piazzolla-in-edition-for-classical-guitar-from-victor-villadangos\",\n      \"calambre-tango-piazzolla\",\n      \"malena---tango\", // exercise\n      \"tango-la-cumparsita---piano-solo-tutorial-parte-a\",\n      \"tango-till-you-drop-abrsm-grade-5-saxophone-b-3\", // melody for harmonization\n      \"Habanera_-_Piano_Solo_-_Georges_Bizet\",\n      \"tango-lyubvi\",\n      \"tango-do-k-f-12-stulev---o.-zacepin\",\n      \"underground_tango_goran_bregovic_string_quartet\",\n    ],\n  },\n  {\n    slug: \"musette\",\n    midis: [\"sous-le-ciel-de-paris\", \"la-vie-en-rose-solo-accordion\"],\n  },\n  {\n    slug: \"klezmer\",\n    midis: [\n      \"odessa-bulgar-no.3\",\n      \"der-heyser-bulgar---misc-tunes-der-heyser-bulgar\",\n      \"freylekhe-mekhutonim\",\n      \"shloymke-s_freylekhs\",\n      \"freylekhs-2\",\n      \"freylekh-de-reconciliation\",\n      \"odessa-bulgarish-new-york-psycho-freylekhs\",\n      \"mr-zvonsky-s-freylekhs\",\n      \"freylekh-zain---frohlich-sein\",\n      \"lebedikh-un-freylekh---trad.-klezmer-for-flute-clarinet\",\n    ],\n  },\n  {\n    slug: \"fado\",\n    midis: [\n      \"fado-da-mouraria---anonimo\",\n      \"lisboa-antiga---fado-marcha---raul-portela\",\n      \"fado---alfredo-mantua\",\n      \"fado-dos-passarinhos---antonio-menano\",\n      \"fado---maria-se-fores-ao-baile\",\n      \"fado-bohemio---reinaldo-varella\",\n      \"fado-menina-e-moca\",\n      \"fado---villa-franca-4-piano\",\n      \"fado-saudade---adelino-d-almeida-couto\",\n      \"fado-nacional---anonimo\",\n      \"amor-eterno---l.-serra-e-moura\",\n      \"fado-de-monchique---alberto-de-vasconcelos-moraes\",\n      \"fado-portugues\",\n      \"fado-freo\",\n      \"fado-monte-estoril---reynaldo-varella\",\n      \"meu-fado-meu---mariza-meu-fado-meu\",\n      \"fado-lisboa---raul-ferrao\",\n      \"fado-de-coimbra---anonimo\",\n      \"fado---helena-rolim-g.-barba\",\n      \"fado---rosinha-dos-limoes-4-piano\",\n      \"fado---cancao-do-mar-solidao---recorder\",\n    ],\n  },\n  {\n    slug: \"bach_chorales\",\n    midis: [\n      \"ach-bleib-bei-uns-herr-jesu-christ\",\n      \"ach-bleib-bei-uns-herr-jesu-christ---j.-s.-bach---german-phrasing\",\n      \"ach-gott-erhor-mein-seufzen-bwv-254-and-original-setting\",\n    ],\n    composerBirthYear: 1685, // Johann Sebastian Bach\n    genre: \"Baroque, Sacred\",\n    style: \"Choral, Sacred Music\",\n    country: \"Germany\", // Bach was German.\n  },\n  {\n    slug: \"heitor_villa-lobos\",\n    midis: [\"heitor-villa-lobos-prelude-no-1\", \"choros-ndeg1-h.-villa-lobos\"],\n    composerBirthYear: 1887, // Heitor Villa-Lobos\n    genre: \"Classical, Brazilian Music\",\n    style: \"Choro, Modern Classical\",\n    country: \"Brazil\", // Villa-Lobos was Brazilian.\n  },\n  {\n    slug: \"peter_mcconnell\",\n    midis: [\n      \"plants-vs-zombies-2-modern-day-piano-transcription\",\n      \"heartstone-pull-up-a-chair-piano\",\n      \"pvz2-ancient-egypt\",\n      \"pvz2-modern-day---ultimate-battle---peter-mcconnell\",\n      \"wild-west-main-theme\",\n      \"wip-plants-vs-zombies-garden-warfare-2---infinity-time-ost-only-piano---peter-mcconnell\",\n      \"neon-mixtape-tour---choose-your-seeds\",\n      \"swanky-maximo---grim-fandango\",\n      \"plants-vs-zombies-2-ballad-jam\",\n    ],\n    composerBirthYear: 1969, // Peter McConnell\n    genre: \"Video Game Music, Film Score\",\n    style: \"Orchestral, Cinematic, Jazz\",\n    country: \"USA\", // Peter McConnell is American.\n  },\n  {\n    slug: \"ari_pulkkinen\",\n    midis: [\n      \"angry-birds-theme---ari-pulkkinen-angry-birds-theme\",\n      \"throne-of-the-lost-king-trine-ost\",\n      \"waltz-of-the-temple-forest-elves-trine-2-soundtrack\",\n      \"trine-4-moonlit-forest\",\n      \"brambelstoke-village---trine---ari-pulkkinen\",\n      \"academy-hallways\",\n    ],\n    composerBirthYear: 1976, // Ari Pulkkinen\n    genre: \"Video Game Music\",\n    style: \"Cinematic, Orchestral, Electronic\",\n    country: \"Finland\", // Ari Pulkkinen is Finnish.\n  },\n  {\n    slug: \"masayoshi_soken\",\n    midis: [\n      \"each-drop-flow-piano-arrangement-ffxiv-endwalker---masayoshi-soken\",\n      \"finality-ffxiv-endwalker-dungeon-final-boss-theme---masayoshi-soken-ffxiv-endwalker---dungeon-final-boss-theme---masayoshi-soken\",\n    ],\n    composerBirthYear: 1976, // Masayoshi Soken\n    genre: \"Video Game Music\",\n    style: \"Orchestral, Rock, Cinematic\",\n    country: \"Japan\", // Masayoshi Soken is Japanese.\n  },\n  {\n    slug: \"masashi_hamauzu\",\n    midis: [\n      \"besaid-island-final-fantasy-x-piano-collection---masashi-hamauzu\",\n      \"wish---masashi-hamauzu-final-fantasy-xiii-2-piano\",\n    ],\n    composerBirthYear: 1971, // Masashi Hamauzu\n    genre: \"Video Game Music\",\n    style: \"Orchestral, Piano, Cinematic\",\n    country: \"Japan\", // Masashi Hamauzu is Japanese.\n  },\n  {\n    slug: \"nobuo_uematsu\",\n    midis: [\n      \"final-fantasy-i-matoya-s-cave---nobuo-uematsu\",\n      \"final-fantasy-prelude---nobuo-uematsu\",\n      \"ffiv-theme-of-love-piano-collections-by-nobuo-uematsu\",\n      \"dragonsong---nobuo-uematsu-advanced-solo-piano\",\n      \"super-smash-bros.-brawl-main-theme-piano-transcription\",\n      \"dou-uzhe-da-fighting-those-who-fight---final-fantasy-vii-ps1---nobuo-uematsu\",\n    ],\n    composerBirthYear: 1959, // Nobuo Uematsu\n    genre: \"Video Game Music\",\n    style: \"Orchestral, Rock, Cinematic\",\n    country: \"Japan\", // Nobuo Uematsu is Japanese.\n  },\n  {\n    slug: \"elgar\",\n    midis: [\n      \"elgar_cello_concerto_1_adagio_moderato\",\n      \"salut-d-amour-op.12---edward-elgar\",\n      \"elgar---enigma-variations---xi.-nimrod\",\n      \"elgar-pomp-and-circumstance-march-no.-1-piano-solo-with-choral-finale\",\n    ],\n    composerBirthYear: 1857, // Edward Elgar\n    genre: \"Classical\",\n    style: \"Romantic, Orchestral\",\n    country: \"United Kingdom\", // Edward Elgar was British.\n  },\n  {\n    slug: \"toshio_kai\",\n    midis: [\"pacman\"],\n    composerBirthYear: 1943,\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n  },\n  {\n    slug: \"masato_nakamura\",\n    midis: [\n      \"marble-zone-from-sonic-the-hedgehog\",\n      \"arrangement-special-stage-sonic-the-hedgehog---masato-nakamura\",\n      \"starlight-zone---sonic-the-hedgehog-1---masato-nakamura-sth-6-starlight-zone\",\n      \"sonic-the-hedgehog-2---chemical-plant-zone\",\n    ],\n    composerBirthYear: 1958,\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n  },\n  {\n    slug: \"kotaro_nakagawa\",\n    midis: [\"the-master---code-geass\"],\n    composerBirthYear: 1969, // Kotaro Nakagawa\n    genre: \"Anime Music, Video Game Music\",\n    style: \"Orchestral, Electronic, Cinematic\",\n    country: \"Japan\", // Kotaro Nakagawa is Japanese.\n  },\n  {\n    slug: \"mike_morasky\",\n    midis: [\n      \"your-precious-moon---mike-morasky-wheatley-boss-fight-ending\",\n      \"thirty-seven-after-six\",\n      \"team-fortress---upgrade-station-piano---mike-morasky\",\n      \"rocket-jump-waltz-piano-solo\",\n      \"cara-mia-addio---full-piano-cover\",\n      \"soldier-of-dance\",\n      \"team-fortress---rise-of-the-living-bread---mike-morasky\",\n      \"team-fortress-2-main-theme---mike-morasky-team-fortress-2-piano-solo\", // blues scale\n      \"saxton-s-dilemma-sax-quartet---mike-morasky\",\n      \"machiavellian-bach\",\n      \"the-parish---mike-morasky\",\n      \"tf2---mannrobics---piano\",\n      \"counter-strike-2---main-menu-theme---mike-morasky-counter-strike-2---main-menu-theme-for-solo-piano\",\n      \"music-of-the-spheres\", // augmented vibes\n      \"half-life-alyx---ending-triumph\",\n      \"you-are-not-part-of-the-control-group\",\n      \"the-calm---valve-for-brass-quintet\",\n      \"medic\",\n      \"misfortune-teller---valve-studio-orchestra-.\",\n    ],\n    composerBirthYear: 1974, // Mike Morasky\n    genre: \"Video Game Music\",\n    style: \"Electronic, Cinematic, Experimental\",\n    country: \"USA\", // Mike Morasky is American.\n  },\n  {\n    slug: \"bach_misc\",\n    midis: [\n      \"bach-goldberg-variation-00-aria\",\n      \"bwv0565-toccata-and-fugue-in-dm-c\",\n    ],\n    composerBirthYear: 1685, // Johann Sebastian Bach\n    genre: \"Baroque\",\n    style: \"Keyboard, Organ Music\",\n    country: \"Germany\", // Bach was German.\n  },\n  {\n    slug: \"olafur_arnalds\",\n    midis: [\"saman---olafur-arnalds\"],\n    composerBirthYear: 1986, // Ólafur Arnalds\n    genre: \"Classical, Electronic\",\n    style: \"Modern Classical, Ambient, Minimalism\",\n    country: \"Iceland\", // Ólafur Arnalds is Icelandic.\n  },\n  {\n    slug: \"bach_wtc\",\n    midis: [\n      \"prelude-i-in-c-major-bwv-846---well-tempered-clavier-first-book\",\n      \"prelude-no.-2-bwv-847-in-c-minor\",\n      \"prelude-no.-3-bwv-848-in-c-major\", // very regular\n      \"prelude-no.-4-bwv-849-in-c-minor\",\n      \"prelude-no.-5-bwv-850-in-d-major\",\n      \"prelude-no.-6-bwv-851-in-d-minor\",\n      \"prelude-no.-7-bwv-852-in-e-major\",\n      \"prelude-no.-8-bwv-853-in-e-minor\",\n      \"prelude-no.-9-bwv-854-in-e-major\",\n      \"prelude-no.-10-bwv-855-in-e-minor\",\n      \"prelude-no.-11-bwv-856-in-f-major\", // decent\n      \"prelude-no.-12-bwv-857-in-f-minor\",\n      \"prelude-no.-13-bwv-858-in-f-major\",\n      \"prelude-no.-14-bwv-859-in-f-minor\",\n      \"prelude-no.-15-bwv-860-in-g-major\",\n      \"prelude-no.-16-bwv-861-in-g-minor\",\n      \"prelude-no.-17-bwv-862-in-a-major\",\n      \"prelude-no.-18-bwv-863-in-g-minor\",\n      \"prelude-no.-19-bwv-864-in-a-major\",\n      \"prelude-no.-20-bwv-865-in-a-minor\",\n      \"prelude-no.-21-bwv-866-in-b-major\",\n      \"prelude-no.-22-bwv-867-in-b-minor\",\n      \"prelude-no.-23-bwv-868-in-b-major\",\n      \"prelude-no.-24-bwv-869-in-b-minor\",\n      \"prelude-no.-1-bwv-870-in-c-major\",\n      \"prelude-no.-2-bwv-871-in-c-minor\",\n      \"prelude-no.-3-bwv-872-in-c-major\",\n      \"prelude-no.-4-bwv-873-in-c-minor\",\n      \"fugue-no.-3-bwv-848-in-c-major\",\n    ],\n    composerBirthYear: 1685, // Johann Sebastian Bach\n    genre: \"Baroque\",\n    style: \"Fugue, Prelude, Keyboard Music\",\n    country: \"Germany\", // Bach was German.\n  },\n  {\n    slug: \"bach_french_suite_no2\",\n    midis: [\n      \"j.-s.-bach---sarabande-from-french-suite-no2-bwv-813\",\n      \"bach-allemande-bwv-813-french-suite-ii\",\n    ],\n    composerBirthYear: 1685, // Johann Sebastian Bach\n    genre: \"Baroque\",\n    style: \"Keyboard Suite\",\n    country: \"Germany\", // Bach was German.\n  },\n  {\n    slug: \"lucrecia_roces_kasilag\",\n    midis: [\n      \"fantasia---lucrecia-roces-kasilag\",\n      \"prelude-etnika---piano-transcription\",\n      \"luwalhati---lucrecia-r.-kasilag\",\n    ],\n    composerBirthYear: 1918, // Lucrecia R. Kasilag\n    genre: \"Filipino Music, Classical\",\n    style: \"Folk, Ethno-Classical\",\n    country: \"Philippines\", // Lucrecia Kasilag was Filipino.\n  },\n  {\n    slug: \"ernesto_lecuona\",\n    midis: [\n      \"danza-lucumi---e.-lecuona-original\",\n      \"la-comparsa---ernesto-lecuona\",\n      \"siboney---ernesto-lecuona\",\n      \"andalucia---ernesto-lecuona\",\n      \"malaguena---ernesto-lecuona\",\n      \"gitanerias\",\n    ],\n    composerBirthYear: 1895, // Ernesto Lecuona\n    genre: \"Cuban, Classical\",\n    style: \"Cuban Dances, Classical, Latin\",\n    country: \"Cuba\", // Ernesto Lecuona was Cuban.\n  },\n  {\n    slug: \"shamshi_kaldayakov\",\n    midis: [\n      \"my-kazakhstan\",\n      \"arys-zhagasynda---shamshi-kaldayakov-arys-zhag-asynda---sh-mshi-k-aldayak-ov-red.-ask-ar-lmak-tum\",\n    ],\n    composerBirthYear: 1924, // Shamshi Kaldayakov\n    genre: \"Kazakh, Classical\",\n    style: \"Folk, National Music\",\n    country: \"Kazakhstan\", // Shamshi Kaldayakov was Kazakh.\n  },\n  {\n    slug: \"malaguena\",\n    midis: [\n      \"malaguena---ernesto-lecuona\",\n      \"rumores-de-la-caleta-malaguena-albeniz\",\n      \"ndeg-3---malaguena\",\n      \"nuevo-metodo-pag.-20-malaguena---francisco-cimadevilla\",\n      \"malaguena-nocturna---l-elegiaque-malaguena-nocturna\",\n      \"malaguena-by-azpiazu\",\n      \"malaguena-sarasate\",\n      \"malaguena-salerosa\",\n      \"malaguena-facil\",\n      \"rumores-de-la-caleta-malaguena\",\n    ],\n    composerBirthYear: 1895, // Ernesto Lecuona (primarily) for \"Malagueña\"\n    genre: \"Classical, Latin\",\n    style: \"Cuban, Spanish\",\n    country: \"Cuba\", // Lecuona's version is most well-known.\n  },\n  {\n    slug: \"vaqif_mustafazadeh\",\n    midis: [\"vaqif_mustafazade_-_dushunce_piano_tutorial\"],\n    composerBirthYear: 1940, // Vaqif Mustafazadeh\n    genre: \"Jazz, Azerbaijani Music\",\n    style: \"Jazz, Mugham Fusion\",\n    country: \"Azerbaijan\", // Vaqif Mustafazadeh was Azerbaijani.\n  },\n  {\n    slug: \"ferdinand_hiller\",\n    midis: [\n      \"reverie---ferdinand-hiller\",\n      \"tagebuch-no.-2---ferdinand-hiller\",\n      \"etude-op.-15-no.-4---ferdinand-hiller\",\n    ],\n    composerBirthYear: 1811, // Ferdinand Hiller\n    genre: \"Classical, Romantic\",\n    style: \"Piano, Orchestral\",\n    country: \"Germany\", // Ferdinand Hiller was German.\n  },\n  {\n    slug: \"ennio_morricone\",\n    midis: [\n      \"ennio-morricone-chi-mai-from-le-professionnel-easy-piano-arr.-by-free-musickey\",\n      \"playing-love---ennio-morricone\",\n      \"deborah-s-theme-~-ennio-morricone\",\n      \"la-califfa-ennio-morricone\",\n      \"gabriel-s-oboe---ennio-morricone\",\n      \"cinema-paradiso-morricone\",\n    ],\n    composerBirthYear: 1928, // Ennio Morricone\n    genre: \"Film Music\",\n    style: \"Cinematic, Orchestral, Soundtrack\",\n    country: \"Italy\", // Ennio Morricone was Italian.\n  }, // 1883\n  {\n    slug: \"charlie_astin\",\n    midis: [\"in-the-gloaming-1883\", \"clide-polka-1883\"],\n  },\n  // 1897, first three annotated, then just preserved\n  {\n    slug: \"theo_a_metz\",\n    midis: [\n      \"a-hot-time-in-the-old-town-1897\",\n      \"fiddling-silas-1899\",\n      \"the-klondike-1897\",\n      \"the-song-they-sang-at-santiago-1898\",\n      \"indian-smoke-dance-1919\",\n      \"walk-baby-walk-1897\",\n      \"omene-1893\",\n      \"give-cinda-the-cake-1898\",\n    ],\n    composerBirthYear: 1856, // Theo A. Metz\n    genre: \"American, Ragtime\",\n    style: \"Ragtime, March\",\n    country: \"USA\", // Theo A. Metz was American.\n  },\n  {\n    slug: \"king_kollins\",\n    midis: [\"the-whizzer-1907\", \"the-twirler-1907\"],\n    composerBirthYear: 1880, // King Kollins\n    genre: \"American, Ragtime\",\n    style: \"Ragtime, Novelty\",\n    country: \"USA\", // King Kollins was American.\n  },\n  {\n    slug: \"frank_h_grey\",\n    midis: [\"love-in-venice-1924\", \"valse-des-fleurs-1925\"],\n    composerBirthYear: 1877, // Frank H. Grey\n    genre: \"American, Classical\",\n    style: \"Ragtime, Orchestral\",\n    country: \"USA\", // Frank H. Grey was American.\n  },\n  {\n    slug: \"yamato_kasai\",\n    midis: [\n      \"ender-lilies-quietus-of-the-knights---holy-land-save-ver.\",\n      \"ender-lilies-quietus-of-the-knights---grudge-save-ver.\",\n      \"ender-lilies-quietus-of-the-knights---the-white-witch\",\n      \"the-witch-s-breath---ender-lilies\",\n      \"a-nocturne-for-all---ender-lilies-ost\",\n      \"ephemeral---yamato-kasai---klavier---mili-mag-mell-deemo\",\n    ],\n    composerBirthYear: 1989, // Yamato Kasai\n    genre: \"Video Game Music\",\n    style: \"Symphonic, Piano\",\n    country: \"Japan\", // Yamato Kasai is Japanese.\n  },\n  {\n    slug: \"aj_weidt\",\n    midis: [\n      \"aj_weidt_the_colored_guards\", // two banjos\n      \"aj_weidt_kaloola\",\n      \"memelicanmanrag\",\n    ],\n    composerBirthYear: 1865, // A.J. Weidt\n    genre: \"American, Ragtime\",\n    style: \"Ragtime, Novelty\",\n    country: \"USA\", // A.J. Weidt was American.\n  },\n  {\n    slug: \"scriabin\",\n    midis: [\n      \"24-preludes-op.11-no.1---a.-scriabin\",\n      \"scriabin-vers-la-flamme-op.-72\",\n      \"scriabin-s-nocturne-for-the-left-hand\",\n    ],\n    composerBirthYear: 1872, // Alexander Scriabin\n    genre: \"Russian, Classical\",\n    style: \"Romantic, Modern\",\n    country: \"Russia\", // Alexander Scriabin was Russian.\n  },\n  {\n    slug: \"tadeusz_joteyko\",\n    midis: [\n      \"elegie-op.16-no.1---tadeusz-joteyko\",\n      \"xi.-prelude-des-dur-op.-6-no-5---tadeusz-joteyko\",\n      \"prelude-op.5-no6---tadeusz-joteyko\",\n      \"prelude-op.7-no3---tadeusz-joteyko\",\n    ],\n    composerBirthYear: 1889, // Tadeusz Joteyko\n    genre: \"Polish, Classical\",\n    style: \"Romantic, Piano\",\n    country: \"Poland\", // Tadeusz Joteyko was Polish.\n  },\n  {\n    slug: \"leo_delibes\",\n    midis: [\n      \"valse---coppelia---piano-solo---arr.-leo-delibes\",\n      \"flower-duet-from-lakme-by-leo-delibes-transcription-for-violin-and-piano\",\n      \"messe-breve---leo-delibes-delibes-messe-breve-ssa-kyrie\",\n    ],\n    composerBirthYear: 1836, // Leo Delibes\n    genre: \"French, Classical\",\n    style: \"Opera, Ballet\",\n    country: \"France\", // Leo Delibes was French.\n  },\n  {\n    slug: \"gustave_tritant\",\n    midis: [\n      \"elevation---gustave-tritant\",\n      \"communion-funebre---gustave-tritant\",\n      \"elevation-funebre---gustave-tritant\",\n      \"l-office-pratique-de-l-organiste---gustave-tritant\",\n    ],\n    composerBirthYear: 1860, // Gustave Tritant\n    genre: \"French, Classical\",\n    style: \"Organ Music\",\n    country: \"France\", // Gustave Tritant was French.\n  },\n  {\n    slug: \"mike_schoenmehl\",\n    midis: [\n      \"melancholy-reflections---mike-schoenmehl\",\n      \"criminal-music---mike-schoenmehl\",\n      \"marion-s-walk---mike-schoenmehl\",\n    ],\n    composerBirthYear: 1957,\n    country: \"Germany\",\n    genre: \"Teacher Music\",\n  },\n  {\n    slug: \"cesare_pugni\",\n    midis: [\n      \"la-esmeralda-ballet-variacao---cesare-pugni\",\n      \"coda---cesare-pugni\",\n      \"peasant-pas-de-deux-interpolated-variation---cesare-pugni\",\n      \"la-schottische\",\n      \"le-carnaval-de-venise-pas-de-deux-di-satanella---cesare-pugni---variazione-maschile\",\n    ],\n    composerBirthYear: 1802, // Cesare Pugni\n    genre: \"Italian, Classical\",\n    style: \"Ballet Music\",\n    country: \"Italy\", // Cesare Pugni was Italian.\n  },\n  {\n    slug: \"ahmed_adnan_saygun\",\n    midis: [\n      \"inci---ahmed-adnan-saygun\",\n      \"ayse-m\",\n      \"oyun---ahmed-adnan-saygun\",\n      \"ruya---ahmed-adnan-saygun\",\n      \"masal---ahmed-adnan-saygun\",\n      \"ataturk-marsi---ahmed-adnan-saygun\",\n      \"ninni---ahmed-adnan-saygun\",\n      \"kocaman-bebek---ahmed-adnan-saygun\",\n      \"horon-for-bb-clarinet-and-piano---ahmed-adnan-saygun\",\n      \"afacan-kedi---ahmed-adnan-saygun\",\n    ],\n    composerBirthYear: 1929, // Ahmed Adnan Saygun\n    genre: \"Turkish, Classical\",\n    style: \"Folk Music, Orchestral\",\n    country: \"Turkey\", // Ahmed Adnan Saygun was Turkish.\n  },\n  {\n    slug: \"paul_mauriat\",\n    midis: [\n      \"toccata---paul-mauriat\",\n      \"minuetto\",\n      \"nocturne---paul-mauriat\",\n      \"alouette---paul-mauriat\",\n      \"love-is-blue---paul-mauriat\",\n      \"ballade---paul-mauriat\",\n      \"petite-melodie\",\n    ],\n    composerBirthYear: 1925, // Paul Mauriat\n    genre: \"French, Pop, Classical\",\n    style: \"Easy Listening, Orchestral\",\n    country: \"France\", // Paul Mauriat was French.\n  },\n  {\n    slug: \"happy_birthday\",\n    midis: [\n      \"happy-birthday\",\n      \"happy-birthday-to-you-c-major\",\n      \"happy-birthday-song-in-jazz-arr.-by-jonny-may\",\n      \"happy-birthday-tango\",\n      \"happy-birthday-tango-variation\",\n      \"happy-birthday-to-you---tango-version\",\n      \"birthday-tango\",\n      \"birthday-tango-2\",\n      \"happy-birthday-waltz\",\n      \"happy-birthday-but-it-s-a-bach-chorale\",\n      \"chopin-ish-happy-birthday-to-you\",\n      \"happy-birthday-3-part-vocals\",\n      \"happy-birthday-variations-in-g-minor\",\n      \"happy_birthday_bass_and_chords\",\n      \"Happy_Birthday_to_You\",\n    ],\n    genre: \"Traditional, Folk\",\n    style: \"Birthday Song\",\n    country: \"International\",\n  },\n  {\n    slug: \"scott_joplin\",\n    midis: [\n      \"Maple_Leaf_Rag_Scott_Joplin\",\n      \"gladiolus-rag---scott-joplin---1907\",\n      \"the-cascades---scott-joplin---1904\",\n      \"sugar-cane---scott-joplin---1908\",\n      \"leola-two-step---scott-joplin---1905\",\n      \"the-sycamore---scott-joplin---1904\",\n      \"silver-swan-rag---scott-joplin---1914---transcribed-by-richard-zimmerman\",\n      \"elite-syncopations---scott-joplin---1902\",\n      \"weeping-willow---scott-joplin---1903\",\n      \"country_club_ragtime_two_step_scott_joplin_1909\",\n      \"the_ragtime_dance_scott_joplin_1906_arrangement\",\n      \"Pine_Apple_Rag_-_Scott_Joplin_-_1908.mscz\",\n      \"the_entertainer_scott_joplin\",\n      \"sunflower-slow-drag---joplin-and-hayden---1901\",\n      \"reflection-rag---scott-joplin---1917\",\n      \"rose-leaf-rag---scott-joplin---1907\",\n      \"palm-leaf-rag---scott-joplin---1903\",\n      \"search-light-rag---scott-joplin---c1907\",\n      \"the-strenuous-life---scott-joplin---1902\",\n      \"wall-street-rag---scott-joplin---1909\",\n      \"peacherine-rag---scott-joplin---1901\",\n      \"fig-leaf-rag---scott-joplin---1908\",\n      \"magnetic-rag---scott-joplin---1914\",\n      \"original-rags---scott-joplin---1899\",\n      \"paragon-rag---scott-joplin---1909\",\n      \"the-nonpareil---scott-joplin---1907\",\n      \"the-chrysanthemum---scott-joplin---1904\",\n      \"euphonic-sounds---scott-joplin---1909\",\n      \"scott-joplin-s-new-rag---original-edition---1912\",\n      \"scott-joplin-s-new-rag---revised-edition---c1914\",\n      \"kismet-rag---joplin-and-hayden---1913\",\n      \"felicity-rag---joplin-and-hayden---1911\",\n      \"swipesy-cakewalk-1900\",\n      \"the-easy-winners---scott-joplin---1901\",\n      \"cleopha---scott-joplin---1902\",\n      \"a-breeze-from-alabama---scott-joplin---1902\",\n      \"something-doing---joplin-and-hayden---1903\",\n      \"the-favorite---scott-joplin---1904\",\n      \"pleasant-moments---scott-joplin---1909\",\n      \"heliotrope-bouquet---joplin-and-chauvin---1907\",\n      \"lily-queen---joplin-marshall---1907\",\n      \"eugenia---scott-joplin---1905-6\",\n      \"stoptime-rag---scott-joplin---1910\",\n      \"the-rose-bud-march---scott-joplin---1905\",\n      \"antoinette---scott-joplin---1906\",\n      \"a-real-slow-drag---scott-joplin---1913\",\n      \"march-majestic---scott-joplin---1902\",\n      \"school-of-ragtime---scott-joplin---1908\",\n    ],\n    composerBirthYear: 1868, // Scott Joplin\n    genre: \"American, Ragtime\",\n    style: \"Ragtime\",\n    country: \"USA\", // Scott Joplin was American.\n  },\n  {\n    slug: \"leo_weiner\",\n    midis: [\n      \"fox-dance---leo-weiner\",\n      \"weiner-leo---esik-az-eso\",\n      \"magyar-nepdal---ungarischer-volkslieder---repulj-madar---weiner-leo\",\n    ],\n    composerBirthYear: 1885, // Leo Weiner\n    genre: \"Hungarian, Classical\",\n    style: \"Folk Music, Orchestral\",\n    country: \"Hungary\", // Leo Weiner was Hungarian.\n  },\n  {\n    slug: \"gershwin_songbook\",\n    midis: [\n      \"gershwin_swanee\",\n      \"swanee_gershwin\",\n      \"oh-lady-be-good---george-gershwin-1924-public-domain-piano-voice-sheet-music-arrangement\",\n      \"oh-_lady_be_good_gershwin\",\n      \"piano-i-ll-build-a-stairway-to-paradise\",\n      \"stairway-to-paradise-lead-sheet-with-verse-and-lyrics\",\n      \"i-ll_build_a_stairway_to_paradise_roll\",\n      \"i-ll_build_a_stairway_to_paradise_gershwin\",\n      \"fascinating-rhythm---george-gershwin-ira-gershwin-1924-piano-vocal-arrangement\",\n      \"fascinating_rhythm_gershwin\",\n      \"do-it-again---george-gershwin-buddy-desylva\",\n      \"do_it_again_gershwin\",\n      \"the-man-i-love---george-gershwin-ira-gershwin-1924-piano-vocal-arrangement\",\n      \"the_man_i_love_gershwin\",\n      \"s_wonderful_gershwin\",\n      \"clap_yo-_hands\",\n      \"do-do-do_gershwin\",\n      \"i_got_rhythm_gershwin\",\n      \"liza_gershwin\",\n      \"my_one_and_only_roll\",\n      \"nobody_but_you_sustain\",\n      \"somebody_loves_me_gershwin\",\n      \"strike_up_the_band_gershwin\",\n      \"sweet_and_low_down_gershwin\",\n      \"that-certain-feeling---george-gershwin\",\n      \"that_certain_feeling_gershwin\",\n      \"who_cares_as_long_as_you_care_for_me_gershwin\",\n    ],\n    composerBirthYear: 1898, // George Gershwin\n    genre: \"American, Jazz, Classical\",\n    style: \"Jazz, Musical Theatre\",\n    country: \"USA\", // George Gershwin was American.\n  },\n  {\n    slug: \"hector_ayala\",\n    midis: [\n      \"el-coyuyo---hector-ayala\",\n      \"luna-y-sol---hector-ayala-luna-y-sol\",\n      \"celeste-y-blanco---hector-ayala\",\n    ],\n    composerBirthYear: 1913,\n    genre: \"Guitar\",\n    country: \"Argentina\",\n  },\n  {\n    slug: \"leo_brouwer\",\n    midis: [\n      \"un-dia-de-noviembre---leo-brouwer\",\n      \"berceuse---leo-brouwer\",\n      \"brouwer-etude-simple-vi\",\n      \"brouwer-leo-etudes-simples-no-02-coral\",\n    ],\n    composerBirthYear: 1939,\n    genre: \"Guitar, Classical, Folk, Aleatoric, Atonal\",\n    country: \"Cuba, USA\",\n  },\n  {\n    slug: \"jack_wall\",\n    midis: [\n      \"ends-justify-the-means---jack-wall-transcribed-by-christian-smith\",\n      \"mass-effect-2-suicide-mission-end-run\",\n      \"savimbi-s-pride\",\n      \"adrenaline-call-of-duty-black-ops-ii-organ-cover\",\n    ],\n    composerBirthYear: 1963,\n    genre: \"Video Game Music\",\n    style: \"Orchestral\",\n    country: \"USA\",\n  },\n  {\n    slug: \"fats_waller\",\n    midis: [\n      \"asbestos---fats-waller---c1930\",\n      \"alligator-crawl---fats-waller---1934\",\n      \"handful-of-keys---fats-waller---1933\",\n    ],\n    composerBirthYear: 1904, // Fats Waller\n    genre: \"American, Jazz\",\n    style: \"Stride Piano\",\n    country: \"USA\", // Fats Waller was American.\n  },\n  {\n    slug: \"gershwin_preludes\",\n    midis: [\"gershwin_prelude_1\", \"gershwin_prelude_2\", \"gershwin_prelude_3\"],\n    genre: \"American, Classical\",\n    style: \"Jazz, Classical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"toru_minegishi\",\n    midis: [\n      \"kakariko-is-saved---the-legend-of-zelda-twilight-princess---toru-minegishi\",\n      \"results-low-ranking---wii-fit---toru-minegishi-manaka-tominaga-shiho-fujii\",\n      \"k.k.-bossa---animal-crossing-ost\",\n      \"k.k.-dirge---toru-minegishi\",\n      \"k.k.-salsa---toru-minegishi\",\n      \"k.k.-condor---toru-minegishi\",\n    ],\n    composerBirthYear: 1975,\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n  },\n  {\n    slug: \"minecraft_c418\",\n    midis: [\n      \"minecraft---dead-voxel\",\n      \"beginning-minecraft\",\n      \"aria-math---c418-from-minecraft\",\n      \"minecraft-calm\",\n      \"c418---cat-from-minecraft---volume-alpha\",\n      \"clark-minecraft\",\n      \"moog-city-minecraft\",\n      \"danny-minecraft\",\n      \"living-mice-minecraft\",\n      \"alpha-full---minecraft-credits-end-poem\",\n      \"dry-hands-minecraft\",\n      \"haggstrom-minecraft\",\n      \"minecraft-title\",\n      \"mice-on-venus-minecraft\",\n      \"subwoofer-lullaby-minecraft\",\n      \"Sweden_Minecraft\",\n      \"Wet_Hands_Minecraft\",\n    ],\n    composerBirthYear: 1981, // Daniel Rosenfeld (C418)\n    genre: \"Video game music\",\n    style: \"Ambient, Electronic\",\n    country: \"Germany\",\n  },\n  {\n    slug: \"tom_lehrer\",\n    midis: [\n      \"the-elements---tom-lehrer\",\n      \"the-masochism-tango---tom-lehrer-the-masochism-tango---tom-lehrer-the-masochism-tango\",\n      \"tom_lehrer_i_got_it_from_agnes\",\n      \"poisoning-pigeons-in-the-park---tom-lehrer\",\n      \"wernher-von-braun---tom-lehrer---tom-lehrer\",\n      \"the-wild-west-is-where-i-want-to-be---tom-lehrer\",\n      \"be-prepared---tom-lehrer\",\n      \"tom-lehrer---new-math-music\",\n      \"fight-fiercely-harvard---tom-lehrer\",\n      \"the-old-dope-peddler---tom-lehrer\",\n      \"i-hold-your-hand-in-mine---tom-lehrer-i-hold-your-hand-in-mine\",\n      \"vatican-rag\",\n      \"i-wanna-go-back-to-dixie---tom-lehrer\",\n      \"a-christmas-carol---tom-lehrer-a-christmas-carol\",\n      \"national-brotherhood-week\",\n      \"my-home-town---tom-lehrer\",\n      \"te-amo---tom-lehrer\",\n      \"whos-next---tom-lehrer\",\n      \"there-s-a-delta-for-every-epsilon---tom-lehrer\",\n      \"hanukah-in-santa-monica---tom-lehrer\",\n      \"so-long-mom----tom-lehrer\",\n      \"we-will-all-go-together-when-we-go---tom-lehrer\", //corrupt?\n      \"the-subway-song---tom-lehrer\", // 1915, Theodore Morse!\n    ],\n    composerBirthYear: 1928, // Tom Lehrer\n    genre: \"Comedy, Musical\",\n    style: \"Satirical, Parody\",\n    country: \"USA\",\n  },\n  {\n    // todo: link \"ragtime treasures\" together\n    slug: \"joseph_lamb\",\n    midis: [\n      \"the-alaskan-rag---joseph-f-lamb\",\n      \"paramount-rag\",\n      \"thoroughbred-rag-c-1960\",\n      \"toad-stool-rag-c-1959\",\n      \"chimes-of-dixie-c-1960\",\n      \"cinders\",\n    ],\n    composerBirthYear: 1887, // Joseph Lamb\n    genre: \"Ragtime\",\n    style: \"Classical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"ted_snyder\",\n    midis: [\"the-sheik-of-araby-arr.-zez-confrey\"],\n    composerBirthYear: 1881, // Ted Snyder\n    genre: \"Jazz, Popular music\",\n    style: \"Ragtime, Early Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"nicholas_britell\",\n    midis: [\n      \"succession-main-theme\",\n      \"i-m-cruella---nicholas-britell\",\n      \"succession-scherzo-in-f-minor---nicholas-britell\",\n      \"don-t-look-up---main-title-theme---nicholas-britell\",\n      \"the-baroque-ball---nicholas-britell\",\n    ],\n    composerBirthYear: 1980, // Nicholas Britell\n    genre: \"Film score\",\n    style: \"Orchestral, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"alex_thorn\",\n    midis: [\n      \"piano-serenade-in-a-flat\",\n      \"as-bold-as-brass-a-very-british-march-for-piano\",\n      \"baroque-harpsichord\",\n      \"cryin-in-the-rain-piano-solo\",\n    ],\n    composerBirthYear: 1984, // Alex Thorn\n    genre: \"Classical, Film score\",\n    style: \"Classical, Baroque\",\n    country: \"USA\",\n  },\n  {\n    slug: \"bts\",\n    midis: [\n      \"bts-bangtansonyeondan---i-need-u-suga-piano-full-solo\",\n      \"bts-jungkook-bangtansonyeondan-jeonggug---still-with-you\",\n      \"bts-bangtansonyeondan---fake-love\",\n      \"spring-day---bts\",\n      \"the-truth-untold---bts\",\n      \"bts-bangtansonyeondan---dynamite-piano-version\",\n    ],\n    composerBirthYear: 1993, // BTS Members (group)\n    genre: \"Pop, K-pop\",\n    style: \"Pop, Dance, R&B\",\n    country: \"South Korea\",\n  },\n  {\n    slug: \"homm\",\n    midis: [\n      \"heroes-of-might-and-magic-2--sorceress-town---paul-anthony-romero\",\n      \"heroes-of-might-and-magic-iii---main-menu-theme\",\n      \"heroes-of-might-and-magic-iii----waiting-theme\",\n      \"heroes-of-might-and-magic-3---necropolis-town-theme\",\n      \"heroes-of-might-magic-iii---tower-town-theme\",\n      \"inferno-theme-by-paul-romero-from-heroes-of-might-and-magic-3\",\n      \"heroes-of-might-magic-iii---fortress-town-theme\",\n      \"heroes-of-might-and-magic-iii---castle-town-theme\",\n      \"dirt-theme-hope---heroes-of-might-and-magic-iv---celtic-harp\",\n      \"academy-order-theme---heroes-and-might-and-magic-iv\",\n      \"haven-theme-piano-form-heroes-of-might-and-magic-v\",\n      \"heroes-of-might-and-magic-vi-unknown-title\",\n    ],\n    composerBirthYear: 1965, // Paul Anthony Romero\n    genre: \"Video game music\",\n    style: \"Symphonic, Orchestral\",\n    country: \"USA\",\n  },\n  {\n    slug: \"kenji_ito\",\n    midis: [\n      \"si-dou-noguo-teni-struggle-to-the-death---saga-2-mi-bao-chuan-shuo-final-fantasy-legend-ii-gb---kenji-ito\",\n      \"opuningutaitoru-title-screen-romansingu-saga2-romancing-saga2-snes---kenji-ito\",\n    ],\n    composerBirthYear: 1968,\n    country: \"Japan\",\n    genre: \"Video game music\",\n  },\n  {\n    slug: \"kenji_kawai\",\n    midis: [\n      \"yun-ming-noye--piano-ver.----kenji-kawai\",\n      \"go-go-reigen-gogoling-huan---kenji-kawai-mp100\",\n      \"life-before-war---kenji-kawai---sad-song---apocalypse-the-second-world-war-soundtrack\",\n    ],\n    composerBirthYear: 1957,\n    genre: \"Anime, TV, Film score, Video game music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"beauty_and_the_beast\",\n    midis: [\n      \"beauty-and-the-beast-prologue\",\n      \"evermore---alan-menken-evermore-from-beauty-and-the-beast---alan-menken-piano-voice\",\n      \"something-there\",\n      \"if-i-can-t-love-her\",\n      \"belle\",\n      \"gaston\",\n      \"tale-as-old-as-time---beauty-and-the-beast---alan-menken---piano-solo\",\n    ],\n    composerBirthYear: 1949, // Alan Menken\n    genre: \"Film score, Musical\",\n    style: \"Orchestral, Broadway\",\n    country: \"USA\",\n  },\n  {\n    slug: \"ravel\",\n    midis: [\n      \"pavane_pour_une_infante_defunte_ravel_recorder\",\n      \"ravel---miroirs-iii.-une-barque-sur-l-ocean\",\n    ],\n    composerBirthYear: 1875, // Maurice Ravel\n    genre: \"Classical\",\n    style: \"Impressionist\",\n    country: \"France\",\n  },\n  {\n    slug: \"masakazu_sugimori\",\n    midis: [\n      \"reminiscence-~-dl-6-incident---masakazu-sugimori-phoenix-wright-ace-attorney\",\n      \"ace-attorney-turnabout-sisters-ballad---masakazu-sugimori\",\n    ],\n    composerBirthYear: 1968, // Masakazu Sugimori\n    genre: \"Video game music\",\n    style: \"Orchestral, Piano\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"tokyo_ghoul\",\n    midis: [\n      \"unravel-acoustic-ver-tokyo-ghoul-theishter-sheet-music-full-sheets\",\n      \"tokyo-ghoul---glassy-sky-theishter-edit\",\n      \"tokyo-ghoul-a-kisetsu-wa-tsugitsugi-shindeiku\",\n      \"tokyo-ghoul---licht-und-schatten-akmigone-transcription\",\n      \"tokyo-ghoul-a-ost---wanderers\",\n      \"schmetterling---tokyo-ghoul-re-ep-7-bgm\",\n      \"tokyo-ghoul-re-op--katharsis\",\n    ],\n    composerBirthYear: 1989, // Yutaka Yamada\n    genre: \"Anime, Video game music\",\n    style: \"Orchestral, Contemporary\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"alan_silvestri\",\n    midis: [\n      \"the-avengers-theme---piano\",\n      \"forest-gump---main-title-feather-theme\",\n      \"back-to-the-future-theme-song\",\n    ],\n    composerBirthYear: 1950, // Alan Silvestri\n    genre: \"Film score, TV music\",\n    style: \"Orchestral, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"karol_kurpinski\",\n    midis: [\n      \"polonaise-in-f-minor---karol-kurpinski\",\n      \"kurpinski-polonaise-in-a-major-polonez-a-dur\",\n    ],\n    composerBirthYear: 1785,\n  },\n  {\n    slug: \"wojciech_kilar\",\n    midis: [\n      \"wojciech-kilar-walc-z-filmu-tredowata-waltz-from-the-film-the-leper\",\n      \"polonaise-from-movie-master-thaddeus---wojciech-kilar\",\n    ],\n    composerBirthYear: 1932,\n    genre: \"Film score\",\n    country: \"Poland\",\n  },\n  {\n    slug: \"deltarune\",\n    midis: [\n      \"deltarune-chapter-2-ost-toby-fox---my-castle-town-piano-solo\",\n      \"attack-of-the-killer-queen---deltarune-chapter-2\",\n    ],\n    composerBirthYear: 1991, // Toby Fox\n    genre: \"Video game music\",\n    style: \"Chiptune, Orchestral\",\n    country: \"USA\",\n  },\n  {\n    slug: \"mieczyslaw_weinberg\",\n    midis: [\"vstuplenie-iz-m-f-vinni-puh-m.-vaynberg\"],\n    composerBirthYear: 1919, // Mieczysław Weinberg\n    genre: \"Classical\",\n    style: \"Romantic, Soviet\",\n    country: \"Poland\",\n  },\n  {\n    slug: \"rachel_portman\",\n    midis: [\"we-had-today\", \"the-letterbox\", \"chocolat---main-titles\"],\n    composerBirthYear: 1960, // Rachel Portman\n    genre: \"Film score\",\n    style: \"Orchestral, Light Classical\",\n    country: \"UK\",\n  },\n  {\n    slug: \"john_barry\",\n    midis: [\n      \"places-out-of-africa---john-barry\",\n      \"somewhere-in-time---john-barry\",\n    ],\n    composerBirthYear: 1933, // John Barry\n    genre: \"Film score\",\n    style: \"Orchestral, Cinematic\",\n    country: \"UK\",\n  },\n  {\n    slug: \"françois_couperin\",\n    midis: [\n      \"francois-couperin---les-barricades-mysterieuses\",\n      \"le-rossignol-en-amour---francois-couperin\",\n    ],\n    composerBirthYear: 1668, // François Couperin\n    genre: \"Baroque\",\n    style: \"Baroque, French Classical\",\n    country: \"France\",\n  },\n  {\n    slug: \"austin_wintory\",\n    midis: [\n      \"apotheosis-journey-ost---austin-wintory-thepandatooth-s-arrangement\",\n      \"nascence-journey-main-theme\",\n      \"monaco---what-s-yours-is-mine\",\n      \"pdf-volibear-the-relentless-storm\",\n      \"jokes-jokes-jokes\",\n      \"journey-i-was-born-for-this---austin-wintory\",\n      \"the-old-south-distillery\",\n    ],\n    composerBirthYear: 1984, // Austin Wintory\n    genre: \"Video game music\",\n    style: \"Orchestral, Contemporary\",\n    country: \"USA\",\n  },\n  {\n    slug: \"cyril_scott\",\n    midis: [\"lotus-land\", \"cyril-scott-summerland-playtime-op.-54-no.1\"],\n    composerBirthYear: 1879, // Cyril Scott\n    genre: \"Classical\",\n    style: \"Impressionistic, British Classical\",\n    country: \"UK\",\n  },\n  // World pianists\n  {\n    slug: \"darren_korb_hades\",\n    midis: [\"on-the-coast---darren-korb-austin-wintory\"],\n    composerBirthYear: 1985, // Darren Korb\n    genre: \"Video game music\",\n    style: \"Ambient, Indie\",\n    country: \"USA\",\n  },\n  {\n    slug: \"percy_grainger\",\n    midis: [\n      \"molly-on-the-shore\",\n      \"spoon-river---percy-grainger\",\n      \"country-gardens-for-brass-quintet\",\n    ],\n    composerBirthYear: 1882, // Percy Grainger\n    genre: \"Classical, Folk\",\n    style: \"Folk music, Modern Classical\",\n    country: \"Australia\",\n  },\n  {\n    slug: \"benvenuto_terzi\",\n    midis: [\n      \"carillon---benvenuto-terzi-carillon-benvenuto-terzi---guitar-etude\",\n    ],\n    composerBirthYear: 1892,\n    country: \"Italy\",\n  },\n  {\n    slug: \"abdullah_ibrahim\",\n    midis: [\n      \"blue-bolero\",\n      \"homecoming-song---abdullah-ibrahim\",\n      \"mandela---abdullah-ibrahim--y8-african-music\",\n      \"water-from-an-ancient-well---abdullah-ibrahim\",\n      \"the-wedding---abdullah-ibrahim\",\n      \"thaba-bosigo\",\n      \"maraba-blue---abdullah-ibrahim\",\n    ],\n    composerBirthYear: 1934, // Abdullah Ibrahim\n    genre: \"Jazz, World music\",\n    style: \"Jazz, South African music\",\n    country: \"South Africa\",\n  },\n  {\n    slug: \"elza_ibrahimova\",\n    midis: [\n      \"elza-ibrahimova---daha-m-nd-dozum-yox\",\n      \"ot-n-gunl-rimi-qaytaraydilar-azerbaijani-song-piano\",\n      \"s-n-yadima-dus-nd\", // iv-V7-i, three chord minor\n    ],\n    composerBirthYear: 1949, // Elza Ibrahimova\n    genre: \"World music, Folk\",\n    style: \"Azerbaijani music, Folk\",\n    country: \"Azerbaijan\",\n  },\n  {\n    slug: \"bahram_dehghanyar\",\n    midis: [\"zireh-gonbadeh-kabood\", \"grand-mother\", \"aghaye-hekayati\"],\n    composerBirthYear: 1940, // Bahram Dehghanyar\n    genre: \"World music\",\n    style: \"Persian music, Folk\",\n    country: \"Iran\",\n  },\n  {\n    slug: \"jerry_goldsmith\",\n    midis: [\n      \"star-trek-voyager-theme-piano-arrangement\",\n      \"the-russia-house---jerry-goldsmith\",\n      \"the-gremlin-rag-accordion\",\n      \"king-solomon-s-mines---main-theme\",\n      \"theme-from-hoosiers\",\n      \"it-s-a-long-road-from-first-blood---jerry-goldsmith\",\n    ],\n    composerBirthYear: 1929, // Jerry Goldsmith\n    genre: \"Film score, TV music\",\n    style: \"Orchestral, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"eduard_artemyev\",\n    midis: [\n      \"sibirskiy-ciryulnik---eduard-artemev\",\n      \"svoy-sredi-chuzhih-chuzhoy-sredi-svoih---eduard-artemev\",\n      \"raba-lyubvi---eduard-artemev\",\n    ],\n    composerBirthYear: 1937, // Eduard Artemyev\n    genre: \"Film score\",\n    style: \"Orchestral, Soviet\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"vladimir_shainsky\",\n    midis: [\n      \"belye-korabliki-v.-shainskiy\",\n      \"chemu-uchat-v-shkole----vladimir-shainskiy\",\n      \"pesenka-krokodila-geny-iz-m-f-cheburashka---vladimir-shainskiy-perelozhenie-dlya-fortepiano-i-golosa\",\n      \"kukla---v.-shainskiy\",\n    ],\n    composerBirthYear: 1935, // Vladimir Shainsky\n    genre: \"Film score, Children's music\",\n    style: \"Soviet, Light Classical\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"kapustin\",\n    midis: [\"concert-etudes-op.-40-no.-1---prelude\"],\n    composerBirthYear: 1937, // Nikolai Kapustin\n    genre: \"Classical, Jazz\",\n    style: \"Jazz Classical\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"maksim_dunaevsky\",\n    midis: [\n      \"misyachniy-vals---i.-dunaievskiy\",\n      \"polka---i.-dunaievskiy\",\n      \"oy-cvite-kalina---i.-dunaievskiy\",\n      \"uvertyura-do-k-f-diti-kapitana-granta---i.-dunaievskiy\",\n    ],\n    composerBirthYear: 1942, // Maksim Dunaevsky\n    genre: \"Film score, Musical\",\n    style: \"Soviet, Musical\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"prokofiev\",\n    midis: [\"dance-of-the-knights\"],\n    composerBirthYear: 1891, // Sergei Prokofiev\n    genre: \"Classical\",\n    style: \"Classical, Modern\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"gennady_gladkov\",\n    midis: [\n      \"pesnya-genialnogo-syshchika---gennadiy-gladkov\",\n      \"duet-princessy-i-korolya---gennadiy-gladkov-duet-princessy-i-korolya\",\n      \"pesnya-atamanshi-i-razboynikov-govoryat-my-byaki-buki---gennadiy-gladkov-pesnya-atamanshi-i-razboynikov-govoryat-my-byaki-buki-g.-gladkov\",\n      \"prosnis-i-poy---gennadiy-gladkov\",\n      \"tviy-poyizd---g.-gladkov\",\n      \"proshchalna-pisnya---g.-gladkov\",\n      \"farewell-song----g.-gladkov----easy-violin-and-piano\",\n      \"pisnya-ostapa---g.-gladkov\", // reharm diatonic -> V/\n      \"golovna-tema---g.-gladkov\",\n      \"rio---g.-gladkov\",\n      \"pritvornaya-pesnya-trubadura---gladkov\",\n      \"shestvie-cortege\",\n      \"tango-lyubvi\",\n      \"a-mozhet-byt-vorona---g.-gladkov\",\n      \"dzhentlmeny-udachi---g.-gladkov\",\n      \"beleet-moy-parus-a.-mironov---gennadiy-gladkov\",\n      \"padal-proshlogodniy-sneg---grigoriy-gladkov\", // cool stuff\n    ],\n    composerBirthYear: 1935, // Gennady Gladkov\n    genre: \"Film score, Musical\",\n    style: \"Soviet, Musical\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"yuki_hayashi\",\n    midis: [\"my-hero-academia---you-say-run---piano-solo\"],\n    composerBirthYear: 1980, // Yuki Hayashi\n    genre: \"Anime music\",\n    style: \"Orchestral, Contemporary\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"brandon_hesslau\",\n    midis: [\n      \"our-happy-ending---brandon-hesslau---buddy-simulator-1984\",\n      \"a-lovely-little-town---brandon-hesslau---buddy-simulator-1984\",\n    ],\n    composerBirthYear: 1964,\n    genre: \"Video game music\",\n    style: \"Indie, Electronic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"studio_thumpy_puppy\",\n    midis: [\n      \"game-over---in-stars-and-time-ost---studio-thumpy-puppy\",\n      \"be-careful-everyone-boss-theme---in-stars-and-time\",\n      \"do-you-remember-king-s-theme---in-stars-and-time\",\n      \"thinking-time---in-stars-and-time-ost---studio-thumpy-puppy\",\n      \"frozen-in-time---studio-thumpy-puppy---in-stars-and-time-ost\",\n      \"friend-quest-solo---studio-thumpy-puppy-friend-quest-solo\",\n    ],\n    composerBirthYear: 1994, // Studio Thumpy Puppy (likely pseudonym or studio project)\n    genre: \"Video game music\",\n    style: \"Ambient, Orchestral\",\n    country: \"USA\",\n  },\n  {\n    slug: \"mikael_tariverdiev\",\n    midis: [\n      \"malenkiy-princ-m.-tariverdiev\",\n      \"vals-iz-ironii-sudby-ili-s-legkim-parom-the-waltz-from-the-irony-of-fate\",\n      \"dvoe-v-kafe\",\n      \"mne-nravitsya-chto-vy-bolny-ne-mnoy---mikael-tariverdie\",\n      \"mgnoveniya---m.-tariverdiiev\",\n      \"tihaya-muzyka-regtaym-no-9---m.-tariverdiev\",\n      \"tariverdiev-sudba-rezidenta-prelyudiya\",\n      \"po-ulice-moey---m.-tariverdiev\",\n      \"snow-above-leningrad-sneg-nad-leningradom---mikael-tariverdiev\",\n      \"pesnya-o-dalyokoy-rodine\",\n      \"tvoy-golos---mikael-tariverdiev\",\n      \"ne-zhaleyu-ne-zovu-ne-plachu\",\n      \"pesnya-tartali\",\n      \"na-tihoreckuyu-sostav-otpravitsya\",\n      \"v-sobore---m.-tariverdiev\",\n      \"ubil-ya-poemu---m.-tariverdiev\",\n      \"mikael-tariverdiev-michael-tariverdiyev---nikogo-ne-budet-v-dome-no-one-will-be-at-home\",\n      \"tariverdiev---net-eti-slyozy-ne-moi\",\n      \"ya-sprosil-u-yasenya---tariverdiev-tariverdiev\",\n    ],\n    composerBirthYear: 1931, // Mikael Tariverdiev\n    genre: \"Film score, Classical\",\n    style: \"Soviet Classical, Cinematic\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"bill_evans\",\n    midis: [\n      \"bill-evans-on-autunm-leaves-from-the-album-portrait-in-jazz\",\n      \"remembering-the-rain---bill-evans\",\n      \"danny-boy-bill-evans-ver.\",\n      \"bill-evans---waltz-for-debby-medium\",\n    ],\n    composerBirthYear: 1929, // Bill Evans\n    genre: \"Jazz\",\n    style: \"Post-bop, Cool Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"karsten_obarski\",\n    midis: [\n      \"oil-imperium-ingame-music-action-1---karsten-obarski\",\n      \"oil-imperium-title-music---karsten-obarski\",\n    ],\n    composerBirthYear: 1971, // Karsten Obarski\n    genre: \"Video game music\",\n    style: \"Electronic, Ambient\",\n    country: \"Germany\",\n  },\n  {\n    slug: \"jules_massenet\",\n    midis: [\n      \"thais-meditation-by-jules-massenet\",\n      \"aragonesa---jules-massenet\",\n      \"avril-est-amoureux---jules-massenet---arr.-for-flute-and-harp\",\n      \"musique-pour-bercer-les-petits-enfants-lullaby-jules-massenet---for-melodica-and-harmonium\",\n      \"elegie---jules-massenet---version-for-voice-cello-and-piano\",\n    ],\n    composerBirthYear: 1842, // Jules Massenet\n    genre: \"Classical\",\n    style: \"Romantic, French Classical\",\n    country: \"France\",\n  },\n  {\n    slug: \"cardiacs\",\n    midis: [\n      \"cardiacs---tarred-and-feathered-for-solo-piano\",\n      \"cardiacs---in-a-city-lining-for-solo-piano\",\n    ],\n    composerBirthYear: 1960, // Cardiacs (Tim Smith)\n    genre: \"Progressive rock, Experimental rock\",\n    style: \"Avant-garde, Math rock\",\n    country: \"UK\",\n  },\n  {\n    slug: \"cecile_chaminade\",\n    midis: [\"arabesque-op.-61-cecile-chaminade\"],\n    composerBirthYear: 1857, // Cecile Chaminade\n    genre: \"Classical\",\n    style: \"Romantic, French Classical\",\n    country: \"France\",\n  },\n  {\n    slug: \"taylor_swift\",\n    midis: [\n      \"cardigan---taylor-swift\",\n      \"champagne-problems---taylor-swift\",\n      \"evermore---taylor-swift-feat.-bon-iver\",\n      \"love-story---taylor-swift-taylor-s-version\",\n      \"tolerate-it---taylor-swift-intro-from-the-eras-tour\",\n      \"no-body-no-crime---taylor-swift\",\n      \"shake-it-off---taylor-swift\",\n      \"fearless---taylor-swift-2\",\n      \"enchanted-taylor-s-version---taylor-swift\",\n      \"forever-and-always---taylor-swift\",\n      \"lover---shawn-mendes-taylor-swift\",\n      \"blank-space---taylor-swift-easy-piano\",\n      \"wildest-dreams---taylor-swift\",\n      \"run-feat.-ed-sheeran-taylor-s-version-from-the-vault---taylor-swift-run-feat.-ed-sheeran-taylor-s-version-from-the-vault---flute-and-clarinet-duet\",\n    ],\n    composerBirthYear: 1989, // Taylor Swift\n    genre: \"Pop, Country\",\n    style: \"Pop, Singer-Songwriter\",\n    country: \"USA\",\n  },\n  {\n    slug: \"c_pop\",\n    midis: [\"meng---tntshi-dai-shao-nian-tuan\"],\n    composerBirthYear: 1990, // C-Pop (likely multiple artists)\n    genre: \"Pop\",\n    style: \"C-pop, Mandarin pop\",\n    country: \"China\",\n  },\n  {\n    slug: \"ttng\",\n    midis: [\n      \"ttng_26_is_dancier_than_4_tablature\",\n      \"ttng---empty-palms-tablature\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Math rock, Indie rock\",\n    style: \"Progressive rock, Post-rock\",\n    country: \"UK\",\n  },\n  {\n    slug: \"takahiro_unisuga\",\n    midis: [\"trails-of-cold-steel-iii----things-entrusted\"],\n    composerBirthYear: 1976, // Takahiro Unisuga\n    genre: \"Video game music\",\n    style: \"Orchestral, Contemporary\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"gustavo_santaolalla\",\n    midis: [\n      \"the-last-of-us---gustavo-santaolalla---hbo-opening-theme\",\n      \"de-ushuaia-a-la-quiaca\",\n      \"all-gone-no-escape---gustavo-santaolalla-all-gone-no-escape\",\n      \"the-choice-last-of-us\",\n    ],\n    composerBirthYear: 1951, // Gustavo Santaolalla\n    genre: \"Film score, Folk\",\n    style: \"Folk, Ambient\",\n    country: \"Argentina\",\n  },\n  {\n    slug: \"tonci_huljic\",\n    midis: [\n      \"claudine---tonci-huljic\",\n      \"cubana\",\n      \"still-waters---tonci-huljic\",\n      \"wonderland---tonci-huljic\",\n    ],\n    composerBirthYear: 1957, // Tonči Huljić\n    genre: \"Pop, Film score\",\n    style: \"Pop, Cinematic\",\n    country: \"Croatia\",\n  },\n  {\n    slug: \"hayato_sonoda\",\n    midis: [\n      \"ys-viii---dana-arcanashift\",\n      \"ys-viii---the-sibylline-road\",\n      \"the-legend-of-heroes--trails-in-the-sky---the-whereabouts-of-light\",\n    ],\n    composerBirthYear: 1984, // Hayato Sonoda\n    genre: \"Video game music\",\n    style: \"Orchestral, Symphonic\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"ken_nakagawa\",\n    midis: [\n      \"nefertiti---k.-nakagawa-d.-achiwa-mana-khemia\",\n      \"atelier-totori---her-future-1\",\n    ],\n    composerBirthYear: 1970, // Ken Nakagawa\n    genre: \"Video game music\",\n    style: \"Orchestral, Electronic\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"nihoshika\",\n    midis: [\n      \"bu-wu-nizhao-rasaretaguang---nihosika-heyani-terasareta-hikari---nihoshika\",\n      \"reinotubuyaki---nihosika\",\n    ],\n    composerBirthYear: 1992, // Nihoshika\n    genre: \"Video game music\",\n    style: \"Electronic, Ambient\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"joel_peters\",\n    midis: [\"trading-eights\", \"frostfang-s-theme\", \"waterfall---ec1ipze\"],\n    composerBirthYear: 1989, // Joel Peters\n    genre: \"Electronic, Video game music\",\n    style: \"Ambient, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"inon_zur\",\n    midis: [\n      \"dragon-age-origins-theme-song\",\n      \"hymn-of-vaghen---inon-zur\",\n      \"theme-from-fallout-76---inon-zur\",\n      \"in-uthenera\",\n    ],\n    composerBirthYear: 1965, // Inon Zur\n    genre: \"Video game music, Film score\",\n    style: \"Orchestral, Cinematic\",\n    country: \"Israel\",\n  },\n  {\n    slug: \"lena_raine_minecraft\",\n    midis: [\n      \"lena-raine---rubedo\",\n      \"pigstep\",\n      \"otherside---lena-raine-piano-solo\",\n    ],\n    composerBirthYear: 1983, // Lena Raine\n    genre: \"Video game music, Experimental\",\n    style: \"Ambient, Electronic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"lena_raine_celeste\",\n    midis: [\n      \"little-goth---celeste\",\n      \"scattered-and-lost---celeste\",\n      \"quiet-and-falling---celeste\",\n      \"awake-celeste-ost\",\n      \"resurrections---lena-raine\",\n    ],\n    composerBirthYear: 1983, // Lena Raine\n    genre: \"Video game music, Indie\",\n    style: \"Ambient, Electronic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"mamomo\",\n    midis: [\n      \"xiu-ti---mamomo\",\n      \"xxd44nature\",\n      \"summer-echoes---mamomo\",\n      \"silver----bai-yin\",\n      \"huan-chuang-noidea---prayer\",\n      \"sengokuhara_02\",\n    ],\n    composerBirthYear: 1990, // Mamomo\n    genre: \"Electronic, Experimental\",\n    style: \"Chillwave, IDM\",\n    country: \"China\",\n  },\n  {\n    slug: \"national_anthems\",\n    midis: [\n      \"zimbabwe-national-anthem\",\n      \"togo-national-anthem\",\n      \"nigeria-national-anthem\",\n      \"lesotho-national-anthem\",\n      \"burundi-national-anthem\",\n      \"chad-national-anthem\",\n      \"ghana-national-anthem\",\n      \"algeria-national-anthem\",\n    ],\n    composerBirthYear: null, // National anthems (varied composers)\n    genre: \"Patriotic, Folk\",\n    style: \"Classical, National\",\n    country: null,\n  },\n  {\n    slug: \"debussy\",\n    midis: [\n      \"Clair_de_Lune__Debussy\",\n      \"arabesque-l.-66-no.-1-in-e-major\",\n      \"estampes-i-pagodes----debussy\",\n      \"valse-romantique-claude-debussy\",\n      \"petite-suite-for-piano-four-hands---claude-debussy\",\n      \"debussy-claude---la-plus-que-lente\",\n      \"the-little-nigar-le-petit-negre---debussy\",\n      \"la-cathedrale-engloutie---debussy\",\n      \"debussy---suite-bergamasque-4-passepied\",\n      \"debussy---images-reflets-dans-leau\",\n      \"claude-debussy---la-fille-aux-cheveux-de-lin\",\n      \"prelude-l.-117-no.-6-in-d-minor---debussy\",\n      \"golliwog-s-cakewalk\",\n      \"reverie_galimberti\",\n    ],\n    composerBirthYear: 1862, // Claude Debussy\n    genre: \"Classical\",\n    style: \"Impressionist\",\n    country: \"France\",\n  },\n  {\n    slug: \"autumn_leaves\",\n    midis: [\n      \"autumn-leaves\",\n      \"autumn-leaves-les-feuilles-mortes\",\n      \"autumn-leaves---jazz-piano-solo-tutorial\",\n      \"bill-evans-on-autunm-leaves-from-the-album-portrait-in-jazz\",\n      \"autumn-leaves-jazz-piano\",\n      \"autumn-leaves-in-c\",\n      \"autumn_leaves_diatonic\",\n    ],\n    composerBirthYear: null, // Autumn Leaves (multiple composers)\n    genre: \"Jazz, Standard\",\n    style: \"Jazz, Ballad\",\n    country: \"France, USA\",\n  },\n  {\n    slug: \"komitas\",\n    midis: [\n      \"garown-a-garun-a-spring-clarinet-piano-komitas\",\n      \"garown-a-spring---komitas\",\n      \"chinar-es-komitas\",\n      \"ounabi-ndeg2-des-6-danses-armeniennes-de-komitas\",\n      \"alagyas-alaghiyssh-clarinettepiano-komitas-komitas\",\n      \"hov-arek---komitas\",\n      \"hoy-nazan---komitas\",\n      \"a.04-01-havadarim\",\n      \"saren-kowga-jowxtm-goc\",\n      \"kaqavik\",\n      \"yar-jan-ari---komitas-vardapet\",\n      \"a.03-01-vorti-assdoudzo-komitas\",\n    ],\n    composerBirthYear: 1869, // Komitas Vardapet\n    genre: \"Classical, Armenian Folk\",\n    style: \"Folk, Choral\",\n    country: \"Armenia\",\n  },\n  {\n    slug: \"ivan_zajc\",\n    midis: [\"na-gondoli---ivan-pl.-zajc\"],\n    composerBirthYear: 1832, // Ivan Zajc\n    genre: \"Classical\",\n    style: \"Opera, Romantic\",\n    country: \"Croatia\",\n  },\n  {\n    slug: \"stephen_rippy\",\n    midis: [\n      \"polyester-jammy-rome-2---age-of-empires\",\n      \"age-of-empires-ii-aoc-main-theme\",\n      \"music-9-operation-monkey-age-of-empires-ii-the-age-of-kings-for-piano----stephen-rippy\",\n    ],\n    composerBirthYear: 1974, // Stephen Rippy\n    genre: \"Video game music\",\n    style: \"Orchestral, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"grant_kirkhope\",\n    midis: [\n      \"mid-boss-mayhem\",\n      \"the-phantom-of-the-bwahpera-act-1---mario-rabbids-kingdom-battle\",\n    ],\n    composerBirthYear: 1962, // Grant Kirkhope\n    genre: \"Video game music\",\n    style: \"Orchestral, Funky\",\n    country: \"UK\",\n  },\n  {\n    slug: \"sage_guyton_jeremy_wakefield_nick_carr\",\n    midis: [\n      \"grass-skirt-chase-piano-arrangement\",\n      \"spm---spongebob-production-music-hawaiian-adventures-spongebob-theme\",\n      \"hello-blues---sage-guyton-jeremy-wakefield\",\n      \"rip-tide-ripped-hide\",\n    ],\n    composerBirthYear: null, // Multiple composers for Spongebob series\n    genre: \"Television, Film score\",\n    style: \"Cartoon, Funk\",\n    country: \"USA\",\n  },\n  {\n    slug: \"lionel_rusquet\",\n    midis: [\"le-monde-des-graves-piano\", \"reflet\"],\n    composerBirthYear: 1990, // Lionel Rusquet\n    genre: \"Classical, Contemporary\",\n    style: \"Piano, Romantic\",\n    country: \"France\",\n  },\n  {\n    slug: \"maclaine_diemer\",\n    midis: [\"path-of-fire-main-theme-menu---piano-arrangement\"],\n    composerBirthYear: 1947, // Maclaine Diemer\n    genre: \"Video game music\",\n    style: \"Orchestral, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"yuja_wang\",\n    midis: [\n      \"turkish-march-by-yuja-wang\",\n      \"rhapsody-on-a-theme-of-paganini-op.43---sergei-rachmaninoff-18th-variation-yuja-wang\",\n      \"yuja-wang-encore-transcription-of-orfeo-ed-euridice-wq.30---christoph-willibald-gluck\",\n    ],\n    composerBirthYear: 1987, // Yuja Wang\n    genre: \"Classical\",\n    style: \"Virtuoso, Piano\",\n    country: \"China\",\n  },\n  {\n    slug: \"scott_lloyd_shelly\",\n    midis: [\n      \"overworld-day---scott-lloyd-shelly-terraria-ost\",\n      \"boss-1---scott-lloyd-shelly-terraria-ost\",\n      \"windy-day---scott-lloyd-shelly-terraria-ost\",\n      \"alternate-day---scott-lloyd-shelly-terraria-ost\",\n      \"thunderstorm-storm---scott-lloyd-shelly-terraria-ost\",\n    ],\n    composerBirthYear: 1987, // Scott Lloyd Shelly\n    genre: \"Video game music\",\n    style: \"Ambient, Orchestral\",\n    country: \"USA\",\n  },\n  {\n    slug: \"jazz_solos\",\n    midis: [\"oblivion-bud-powell\"],\n    composerBirthYear: 1924, // Bud Powell\n    genre: \"Jazz\",\n    style: \"Bebop, Piano\",\n    country: \"USA\",\n  },\n  {\n    slug: \"michiru_yamane\",\n    midis: [\n      \"michiru-yamane---wood-carving-partita\",\n      \"dance-of-gold---castlevania-symphony-of-the-night\",\n    ],\n    composerBirthYear: 1963, // Michiru Yamane\n    genre: \"Video game music, Classical\",\n    style: \"Baroque, Orchestral\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"mendelssohn\",\n    midis: [\n      \"wedding-march-mendelssohn-piano\",\n      \"mendelssohn-opus-67-no.-2-aka-lost-illusions\",\n      \"mendelssohn-songs-without-words-no.-1-piano-solo\",\n    ],\n    composerBirthYear: 1809, // Felix Mendelssohn\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"Germany\",\n  },\n  {\n    slug: \"romantic_single_pieces\",\n    midis: [\"caprice-brillant-sur-romeo-et-juliette-op.-303---georges-lamothe\"],\n    composerBirthYear: 1809, // Georges Lamothe\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"France\",\n  },\n  {\n    slug: \"common_practice_single_pieces\",\n    midis: [\"valsy-griboedova---griboedov-s-waltzes\"],\n    composerBirthYear: 1795, // Alexander Griboedov\n    genre: \"Classical\",\n    style: \"Common-practice\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"shuki_levy_haim_saban\",\n    midis: [\n      \"inspecteur-gadget---shuki-levy-haim-saban-inspecteur-gadget\",\n      \"heathcliff-theme-song\",\n      \"bulk-skull-s-theme-mighty-morphin-power-rangers---shuki-levy-haim-saban-et-al\",\n      \"le-vol-du-condor---les-mysterieuses-cites-d-or---shuki-levy-haim-saban---4-mains\",\n      \"piano-duet-he-man-and-the-masters-of-the-universe-1980s---shuki-levi-haim-saban\",\n    ],\n    composerBirthYear: 1946, // Shuki Levy & Haim Saban\n    genre: \"Television, Pop\",\n    style: \"Theme songs, Children's\",\n    country: \"Israel/USA\",\n  },\n  {\n    slug: \"m2u\",\n    midis: [\"m2u---masquerade\"],\n    composerBirthYear: null, // M2U (not much info available)\n    genre: \"Electronic\",\n    style: \"Eurobeat, Trance\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"haywyre\",\n    midis: [\"prologue---haywyre\"],\n    composerBirthYear: 1992, // Haywyre\n    genre: \"Electronic\",\n    style: \"Chillstep, IDM\",\n    country: \"USA\",\n  },\n  {\n    slug: \"gari_biasillo\",\n    midis: [\n      \"target-renegade-main-theme---gari-biasillo\",\n      \"target-renegade-level-3-music---gari-biasillo\",\n      \"target-renegade-end-theme---gari-biasillo\",\n    ],\n    composerBirthYear: 1980, // Gari Biasillo\n    genre: \"Video game music\",\n    style: \"Chiptune, Synthwave\",\n    country: \"Spain\",\n  },\n  {\n    slug: \"zun_touhou\",\n    midis: [\n      \"touhou-8---maiden-s-capriccio-~-dream-battle\",\n      \"touhou---native-faith\",\n    ],\n    composerBirthYear: 1977, // ZUN\n    genre: \"Video game music\",\n    style: \"Electronic, Rock\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"edmund_fu\",\n    midis: [\n      \"dpsp-starting-wind---edmund-fu\",\n      \"yi-zhan-next-station---edmund-fu\",\n      \"deemo-walking-by-the-sea---edmund-fu\",\n    ],\n    composerBirthYear: 1989, // Edmund Fu\n    genre: \"Video game music\",\n    style: \"Ambient, Piano\",\n    country: \"Hong Kong\",\n  },\n  {\n    slug: \"farhan_sarasin\",\n    midis: [\n      \"original-reflect---gawr-gura---farhan-sarasin\",\n      \"id-entity-voices---hololive-idol-project\",\n      \"scent-from-voez\",\n    ],\n    composerBirthYear: 1995, // Farhan Sarasin\n    genre: \"Video game music\",\n    style: \"Ambient, Electronic\",\n    country: \"Indonesia\",\n  },\n  {\n    slug: \"yoko_shimomura\",\n    midis: [\n      \"guile-s-theme-street-fighter-ii\",\n      \"beware-the-forest-s-mushrooms-forest-maze---super-mario-rpg---yoko-shimomura-piano\",\n    ],\n    composerBirthYear: 1967, // Yoko Shimomura\n    genre: \"Video game music\",\n    style: \"Orchestral, Electronic\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"yasunori_mitsuda\",\n    midis: [\n      \"where-we-used-to-be---xenoblade-chronicles-2\",\n      \"xenoblade-chronicles-2---mor-ardain-~-roaming-the-wastes\",\n      \"xenoblade-2-one-last-you-piano-arrange---yasunori-mitsuda\",\n      \"chrono-trigger---wind-scene---yasunori-mitsuda-wind-scene---chrono-trigger\",\n      \"chrono-trigger---02-crono-s-theme-main-theme\",\n    ],\n    composerBirthYear: 1972, // Yasunori Mitsuda\n    genre: \"Video game music\",\n    style: \"Orchestral, Celtic\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"dm_dokuro\",\n    midis: [\n      \"terraria-calamity-mod-ost-dm-dokuro---stained-brutal-calamity-piano-solo\",\n      \"terraria-calamity-mod-ost-dm-dokuro---guardian-of-the-former-seas-piano-solo\",\n    ],\n    composerBirthYear: 1990, // DM Dokuro\n    genre: \"Video game music\",\n    style: \"Orchestral, Metal\",\n    country: \"USA\",\n  },\n  {\n    slug: \"geza_horvath\",\n    midis: [\"petite-saltarelle---geza-horvath\"],\n    composerBirthYear: 1985, // Geza Horvath\n    genre: \"Classical\",\n    style: \"Piano, Classical\",\n    country: \"Hungary\",\n  },\n  {\n    slug: \"nikolay_myaskovsky\",\n    midis: [\n      \"nikolai-myaskovsky---the-yellowed-leaves-op.-31-no-2\",\n      \"an-ancient-tale---drevnyaya-povest---nikolay-myaskovsky\",\n    ],\n    composerBirthYear: 1881, // Nikolay Myaskovsky\n    genre: \"Classical\",\n    style: \"Symphonic, Romantic\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"yoshito_sekigawa\",\n    midis: [\n      \"cafe-scene---paper-mario-the-origami-king\",\n      \"super-paper-mario---naoko-mitome-and-chika-sekigawa-staff-roll-\",\n      \"it-s-showtime-from-super-paper-mario---naoko-mitome-chika-sekigawa\",\n      \"the-museum---paper-mario-the-origami-king\",\n    ],\n    composerBirthYear: 1977, // Yoshito Sekigawa\n    genre: \"Video game music\",\n    style: \"Jazz, Orchestral\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"guns_n_roses\",\n    midis: [\"welcome-to-the-jungle\", \"november-rain---guns-n-roses\"],\n    composerBirthYear: 1985, // Guns N' Roses (band)\n    genre: \"Rock\",\n    style: \"Hard rock, Glam metal\",\n    country: \"USA\",\n  },\n  {\n    slug: \"dominic_james_la_rocca\",\n    midis: [\"barnyard-blues---dominic-james-la-rocca-1917\"],\n    composerBirthYear: 1889, // Dominic James La Rocca\n    genre: \"Jazz\",\n    style: \"Blues\",\n    country: \"USA\",\n  },\n  {\n    slug: \"oesterreichisch-magyar_dance_music\",\n    midis: [\n      \"dunapalota---rozsnyai-sandor-1919\",\n      \"the-star---rene-r.-schmal-1919\",\n    ],\n    composerBirthYear: null, // Traditional Hungarian and Austrian dance music\n    genre: \"Folk, Dance\",\n    style: \"March, Polka\",\n    country: \"Austria, Hungary\",\n  },\n  {\n    slug: \"theo_northrup\",\n    midis: [\n      \"the-two-happy-coons---theodore-h.-northrup-1891\",\n      \"plantation-echoes---theodore-h.-northrup-1897\",\n    ],\n    composerBirthYear: 1866, // Theodore H. Northrup\n    genre: \"Jazz, Ragtime\",\n    style: \"Ragtime\",\n    country: \"USA\",\n  },\n  {\n    slug: \"early_xx_century_single_pieces\",\n    midis: [\n      \"feuillet-d-album-no.1-in-f-minor---ludovic-lamothe-feuillet-d-album-no.1-in-f-minor\",\n    ],\n  },\n  {\n    slug: \"scott_bradlee\",\n    midis: [\n      \"i-wanna-be-like-you-ragtime---scott-bradlee\",\n      \"super-mario-bros.-ragtime-piano-medley---scott-bradlee\",\n    ],\n    composerBirthYear: 1980, // Scott Bradlee\n    genre: \"Jazz, Ragtime\",\n    style: \"Jazz, Ragtime\",\n    country: \"USA\",\n  },\n  {\n    slug: \"randy_newman\",\n    midis: [\n      \"you-ve-got-a-friend-in-me---randy-newman\",\n      \"dexter-s-tune---randy-newman\",\n      \"monsters-inc.-if-i-didn-t-have-you---randy-newman\",\n      \"boo-s-going-home-by-monsters-inc.-randy-newman-ofimaticagio2-v-2.0\",\n      \"its-a-jungle-out-there---randy-newman\",\n    ],\n    composerBirthYear: 1943, // Randy Newman\n    genre: \"Film score, Pop\",\n    style: \"Film music, Singer-songwriter\",\n    country: \"USA\",\n  },\n  {\n    slug: \"oleksii_omelchuk\",\n    midis: [\n      \"metro-2033-main-menu-theme\",\n      \"metro-exodus---race-against-fate\",\n      \"metro-last-light-ending-bad-ending\",\n    ],\n    composerBirthYear: 1982, // Oleksii Omelchuk\n    genre: \"Video game music\",\n    style: \"Orchestral, Cinematic\",\n    country: \"Ukraine\",\n  },\n  {\n    slug: \"alexander_goedicke\",\n    midis: [\"alexander-goedicke---dance\"],\n    composerBirthYear: 1877, // Alexander Goedicke\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"waldemar_kazanecki\",\n    midis: [\n      \"noce-i-dnie---walc-barbary---misc-soundtrack-walc-barbary\",\n      \"czarne-chmury-black-clouds-soundtrack-theme---waldemar-kazanecki\",\n    ],\n    composerBirthYear: 1947, // Waldemar Kazanecki\n    genre: \"Film score, Classical\",\n    style: \"Film music\",\n    country: \"Poland\",\n  },\n  {\n    slug: \"yoasobi\",\n    midis: [\"anomeng-wonazotute-ano-yume-wo-nazotte-marasiiver.\"],\n    composerBirthYear: 1998, // Yoasobi (Ayu and Ikura)\n    genre: \"J-Pop\",\n    style: \"Electropop, Synthpop\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"modern_composers_of_single_pieces\",\n    midis: [\n      \"after-school---weeekly\",\n      \"gray\",\n      \"changing-times---heather-hammond\",\n      \"ma-lu-mitai-baka-mitai---mitsuharu-fukuyama-piano-arrangement\",\n      \"devotion\",\n      \"tom-and-jerry-theme-piano-solo\",\n      \"pilot-for-hire--microsoft-flight-simulator-x\",\n      \"thundercats-theme\",\n      \"mighty-morphin-power-rangers-sheet-music-easy-piano\",\n      \"digimon-main-theme-organ-cover\",\n      \"vizisi\",\n      \"lost-patrol-main-theme---chris-glaister-jonathan-dunn\",\n      \"none-of-them-knew-they-were-robots---mr.-bungle-mostly\",\n      \"joker-folie-a-deux---trailer-theme---hildur-gudnadottir\",\n      \"warsaw-concerto-dangerous-moonlight-theme-1941\",\n      \"machinarium\",\n      \"chasing-kou---hidekazu-sakamoto-drowning-love---ni-rerunaihu-mule-bbajin-naipeu-ost\",\n      \"vostochnye-skazki---blestyashchie\",\n      \"bomnal-beojggoc-geurigo-neo-spring-day-cherry-blossoms-you---epitone-project\",\n      \"starry-dome---no.-15-from-piano-meditation---george-nevada\",\n      \"seven-nation-army-arr.-nikodem-lorenz\",\n      \"sing-hallelujah\",\n      \"amish-paradise---weird-al-yankovic-kaleidoscope\",\n    ],\n    composerBirthYear: 1950, // Various modern composers\n    genre: \"Pop, Video game, Film\",\n    style: \"Eclectic, Contemporary\",\n    country: \"Various\",\n  },\n  {\n    slug: \"stephen_foster\",\n    midis: [\n      \"stephen-foster---hard-times-come-again-no-more\",\n      \"jeanie-with-the-light-brown-hair---stephen-foster\",\n      \"old-black-joe-by-stephen-foster\",\n      \"beautiful-dreamer---stephen-foster\",\n      \"soiree-polka---stephen-c.-foster---1850\",\n      \"ah-may-the-red-rose-live-alway---stephen-foster-1850\", // Indian Guest\n      \"some-folks-like-to-sigh---s-foster-arr.-p.r.-brass-quintet\",\n      \"gentle-annie\",\n      \"beyond-the-mystic-river---stephen-c.-foster\",\n      \"445-friendship-with-jesus\",\n      \"old-dog-tray\",\n      \"weep-no-more---stephen-c.-foster\",\n      \"old-folks-at-home---theme-and-variations-by-stephen-foster\",\n      \"oh-susanna\",\n      \"gone-from-my-heart---stephen-c.-foster\",\n      \"angelina-baker-by-stephen-c.-foster-not-quite-angeline-the-baker\",\n      \"my-old-kentucky-home---stephen-collins-foster\",\n      \"slumber-my-darling-by-stephen-foster\",\n    ],\n    composerBirthYear: 1826, // Stephen Foster\n    genre: \"Folk, Popular\",\n    style: \"American, Minstrelsy\",\n    country: \"USA\",\n  },\n  {\n    slug: \"possibly_tango\",\n    midis: [\"veinte-anos\", \"rio---g.-gladkov\"],\n    composerBirthYear: null, // Various Tango composers\n    genre: \"Tango\",\n    style: \"Argentinian, Latin\",\n    country: \"Argentina\",\n  },\n  {\n    slug: \"dj_okawari\",\n    midis: [\n      \"flower-dance-dj-okawari\",\n      \"luv-letter-by-dj-okawari\",\n      \"perfect-blue---dj-okawari-piano-solo-hard\",\n    ],\n    composerBirthYear: 1986, // DJ Okawari\n    genre: \"Jazz, Hip Hop, Electronic\",\n    style: \"Lofi, Chillhop\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"nujabes\",\n    midis: [\n      \"aruarian-dance---nujabes\",\n      \"feather---nujabes\",\n      \"shiki-no-uta---nujabes\",\n      \"horizon---nujabes\",\n      \"nujabes---counting-stars---loop-piano-cover\",\n      \"another-reflection---nujabes\",\n      \"mystline\",\n      \"eclipse---nujabes\",\n      \"think-different---nujabes\",\n      \"letter-from-yokosuka---nujabes-uyama-hiroto-piano-soprano-saxophone-vibraphone\",\n      \"flowers---nujabes\",\n      \"reflection_eternal\",\n      \"kumomi---nujabes\",\n      \"nujabes--blessing-it-remix\",\n    ],\n    composerBirthYear: 1974, // Nujabes\n    genre: \"Hip Hop, Jazz\",\n    style: \"Lofi, Chillhop\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"eri_sasaki\",\n    midis: [\n      \"ring-of-fortune---eri-sasaki-plastic-memories-op-reiva-piano-cover\",\n    ],\n    composerBirthYear: 1989,\n    country: \"Japan\",\n  },\n  {\n    slug: \"joao_mateus_junior_8_fados\",\n    midis: [\"beijos-de-mae---joao-mateus-junior\"],\n    composerBirthYear: null, // João Mateus Junior (Fado composer)\n    genre: \"Fado, Folk\",\n    style: \"Traditional, Portuguese\",\n    country: \"Portugal\",\n  },\n  {\n    slug: \"angelo_frondoni\",\n    midis: [\n      \"marcha-as-tres-rocas-de-crystal---angelo-frondoni\",\n      \"diz-tudo-amor---romance---angelo-frondoni\",\n    ],\n    composerBirthYear: 1874, // Angelo Frondoni\n    genre: \"Classical\",\n    style: \"Romantic, Opera\",\n    country: \"Italy\",\n  },\n  {\n    slug: \"yuzo_koshiro\",\n    midis: [],\n  },\n  {\n    slug: \"derek_fiechter\",\n    midis: [\n      \"cats-of-whisker-hollow-spooky-autumn---derek-fiechter\",\n      \"osiris---derek-fiechter\",\n      \"spooky-autumn-ii---halloween-carnival---derek-fiechter-brandon-fiechter\",\n      \"the-tale-of-the-firebird---derek-brandon-fiechter\",\n    ],\n    composerBirthYear: 1990, // Derek Fiechter & Brandon Fiechter (Ambient composers)\n    genre: \"Ambient, Cinematic\",\n    style: \"Fantasy, Spooky\",\n    country: \"USA\",\n  },\n  {\n    slug: \"ryuichi_sakamoto\",\n    midis: [\n      \"merry-christmas-mr.-lawrence-forbidden-colours---ryuichi-sakamoto\",\n      \"aqua---ryuichi-sakamoto-ryuichi-sakamoto\", // ideal for beginners\n      \"energy-flow---ryuichi-sakamoto\",\n    ],\n    composerBirthYear: 1952, // Ryuichi Sakamoto\n    genre: \"Classical, Electronic\",\n    style: \"Ambient, Experimental\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"gesualdo\",\n    midis: [\n      \"moro-lasso-al-mio-duolo---gesualdo\",\n      \"belta-poi-che-t-assenti---carlo-gesualdo\",\n    ],\n    composerBirthYear: 1566, // Carlo Gesualdo\n    genre: \"Renaissance\",\n    style: \"Choral, Madrigal\",\n    country: \"Italy\",\n  },\n  {\n    slug: \"rimsky-korsakoff\",\n    midis: [\"song-of-the-indian-guest\", \"flight-of-the-bumblebee\"],\n    composerBirthYear: 1844, // Nikolai Rimsky-Korsakov\n    genre: \"Classical\",\n    style: \"Orchestral, Symphonic\",\n    country: \"Russia\",\n  },\n  {\n    // https://musescore.com/user/68853055\n    // also see https://musescore.com/sheetmusic?text=%CE%BC%CE%BF%CF%85%CF%83%CE%B9%CE%BA%CE%AE&type=non-official\n    // https://musescore.com/sheetmusic?text=%CE%97&type=non-official\n    slug: \"greek_music\",\n    midis: [\n      \"m.-theodorakis---ena-to-helidoni---greek-music-001\",\n      \"g.-katsaros---kathe-limani-kai-kaimos---greek-music-002\",\n      \"m.-loizos---o-dromos---greek-music-003\",\n\n      \"m.-theodorakis---omorfi-poli---greek-music-036\",\n      \"a.-kaldaras---nyhtose-horis-feggari---greek-music-037\",\n      \"m.-hatzidakis---efta-tragoydia-tha-soy-po---greek-music-038\",\n      \"g.-katsaros---pame-gia-upno-katerina---greek-music-039\",\n      \"g.-spanos---aspra-karavia---greek-music-040\",\n      \"g.-mitsakis---palamakia---greek-music-041\",\n      \"v.-tsitsanis---eimaste-alania---greek-music-042\",\n      \"pyx-lax---de-tha-dakryso-pia-gia-sena---greek-music-043\",\n      \"n.-portokalogloy---to-kalokairaki---greek-music-044\",\n      \"p.-sidiropoylos---o-mpampis-o-floy---greek-music-045\",\n      \"orf.-peridis---fotovolida---greek-music-046\",\n      \"th.-mikroytsikos---enas-negros-thermastis-apo-to-tzimpoyti---greek-music-047\",\n      \"m.-loizos---koytsi-kithara---greek-music-048\", // a capella thirds\n      \"g.-spanos---mia-agapi-gia-to-kalokairi---greek-music-049\",\n      \"h.-nikolopoylos---hronia-helidonia---greek-music-050\",\n      \"m.-hiotis---thessaloniki-moy---greek-music-051\",\n      \"m.-theodorakis---vrehei-sti-ftohogeitonia---greek-music-052\",\n      \"v.-tsitsanis---horisame-ena-deilino---greek-music-053\",\n      \"g.-zampetas---agonia---greek-music-054\",\n      \"s.-xarhakos---stoy-thoma---greek-music-055\",\n      \"g.-papaioannoy---vadizo-kai-paramilo---greek-music-056\",\n      \"g.-mpithikotsis---toy-votanikoy-o-magkas---greek-music-057\",\n      \"v.-tsitsanis---to-vapori-ap-tin-persia---greek-music-058\",\n      \"a.-kaldaras---min-perimeneis-pia---greek-music-059\",\n      \"m.-hiotis---perasmenes-moy-agapes---greek-music-060\",\n      \"g.-zampetas---stalia-stalia---greek-music-061\",\n      \"h.-nikolopoylos---ston-aggelon-ta-mpoyzoykia---greek-music-062\",\n      \"m.-plessas---ti-soy-kana-kai-pineis---greek-music-063\",\n      \"s.-koygioymtzis---to-kokkino-foystani---greek-music-064\",\n      \"t.-moysafiris---o-taxitzis---greek-music-065\",\n      \"g.-hatzinasios---me-lene-giorgo---greek-music-066\",\n      \"g.-spanos---tha-me-thymitheis---greek-music-067\",\n      \"m.-tokas---exartatai---greek-music-068\", // demo minor chord\n      \"h.-nikolopoylos---yparho---greek-music-069\", // phrygian\n      \"m.-loizos---ah-helidoni-moy---greek-music-070\",\n      \"g.-katsaros---ta-kythira-pote-de-tha-ta-vroyme---greek-music-071\", // typo in m.8\n      \"p.-katsimihas---an-yparhei-logos---greek-music-072\", // hijaz bvi-I7 feel of iv-V7-i\n      \"t.-morakis---se-magika-nisia---greek-music-073\",\n      \"s.-xarhakos---to-dihty---greek-music-074\",\n      \"g.-zampetas---ti-na-ftaiei---greek-music-075\",\n      \"h.-nikolopoylos---to-agrioloyloydo---greek-music-076\",\n      \"m.-hatzidakis---to-vals-ton-hamenon-oneiron---greek-music-077\",\n      \"d.-savvopoylos---dimosthenoys-lexis---greek-music-078\",\n      \"s.-xarhakos---mpoyrnovalia---greek-music-079\",\n      \"t.-moysafiris---kane-kati-na-haso-to-treno---greek-music-080\",\n    ],\n    composerBirthYear: 1925,\n    genre: \"Pop\",\n    style: \"Folk, Traditional, Pop, Traditional Fusion\",\n    country: \"Greece\",\n  },\n  {\n    slug: \"jesse_novak\",\n    midis: [\n      \"bojack-horseman-don-t-stop-dancing-piano-solo\",\n      \"concerto-in-f-major\",\n      \"i-will-always-think-of-you-bojack-horseman---piano-arrangement\",\n    ],\n    composerBirthYear: 1979,\n    country: \"USA\",\n    genre: \"Film Score\",\n  },\n  {\n    slug: \"j_p_ahmad\",\n    midis: [\"castlemania\", \"ninja-runner\", \"super-bounce\"],\n  },\n  {\n    slug: \"akira_yamaoka\",\n    midis: [\n      \"akira-yamaoka---silent-hill-2---promise-reprise\",\n      \"magdalene---akira-yamaoka\",\n      \"never-forgive-me-never-forget-me---akira-yamaoka\",\n      \"silent-hill-not-tomorrow-lisa-s-death\",\n      \"akira-yamaoka---true\",\n    ],\n    composerBirthYear: 1968,\n    genre: \"Video game music\",\n    style: \"Ambient, Industrial\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"shostakovich\",\n    midis: [\n      \"Waltz_No._2_The_Second_Waltz_by_Dmitri_Shostakovich_for_Piano\",\n      \"shostakovich_symphony_no5_2nd_movement_for_piano_solo\",\n      \"symphony-no.-10-by-dmitri-shostakovich---piano-reduction\",\n    ],\n    composerBirthYear: 1906,\n    genre: \"Classical\",\n    style: \"Symphonic, Modernist\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"vince_guaraldi\",\n    midis: [\"linus-and-lucy-peanuts---vince-guaraldi\"],\n    composerBirthYear: 1928,\n    genre: \"Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"jazz_standards\",\n    midis: [\n      \"recorda-me-no-me-esqueca\",\n      \"all-the-things-you-are\",\n      \"all-the-things-you-are-2\",\n      \"all-the-things-you-are-lead-sheet---jerome-kern-oscar-hammerstein-ii\",\n      \"all-the-things-you-are---reharmonized---jerome-kern\",\n      \"solo-transcription-all-the-things-you-are---paul-desmond\",\n      \"all-the-things-you-are-guitar-chord-melody\",\n      \"my-funny-valentine-lead-sheet-with-lyrics\",\n      \"tea-for-two---vincent-youmans-and-irving-caesar-1924-piano-voice-sheet-music-arrangement\",\n      \"tea-for-two-er-ren-deocha-wo---vincent-youmans\",\n      \"straight-no-chaser-thelonious-monk\",\n      \"blue-monk-piano\",\n      \"round-midnight---thelonious-monk\",\n      \"well-you-needn-t\",\n      \"footprints.mscz\",\n      \"satin-doll\",\n      \"lady_bird_piano_solo\",\n      \"a-night-in-tunisia---dizzy-gillespie-sarah-vaughan-a-night-in-tunisia\",\n      \"Bags_Groove__Lead_sheet_\",\n      \"footprints_r\",\n      \"armstrong-go-down-moses\",\n      \"all-of-me---new-york-jazz-lounge\",\n    ],\n    genre: \"Jazz\",\n    // This is a collection of jazz standards, no specific composer can be assigned.\n    style: \"Jazz Standards\",\n    country: \"USA\",\n  },\n  {\n    // https://musescore.com/user/24069/sets/4869434\n    slug: \"rachmaninoff\",\n    midis: [\n      \"rachmaninoff-piano-concerto-no.-2-1st-mvmt.-arr.-for-2-pianos\",\n      \"piano_concerto_no_4_op_40_sergei_rachmaninoff_i_allegro_vivace_alla_breve\",\n      \"prelude_in_c_sharp_minor_opus_3_no_2_sergei_rachmaninoff\",\n      \"rachmaninoff_piano_concerto_4_1\",\n      \"serguei-rachmaninov---piano-concerto-ndeg4-in-g-minor---1st-mouvement-intro\",\n      \"Prelude_in_G_Minor_Opus_23_No._5\",\n      \"symphony-no.-2-in-e-minor-op.-27-for-piano-duet---ii.-allegro-molto\",\n      \"prelude-in-c-sharp-minor-opus-3-no.-2---sergei-rachmaninoff\",\n      \"rachmaninoff-10-preludes-op.-23---no.-5-in-g-minor-m.-a.-deocariza\",\n    ],\n    composerBirthYear: 1873,\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"valentin_silvestrov\",\n    midis: [\n      \"five-pieces-op.-306-no.-4-waltz\",\n      \"abschiedsserenade-ii-farewell-serenade---valentin-silvestrov\",\n      \"english-serenades-op.-46-no.-1---valentin-silvestrov\",\n      \"english-serenades-op.-46-no.-4---valentin-silvestrov\",\n    ],\n    composerBirthYear: 1937,\n    genre: \"Classical\",\n    style: \"Postmodern, Minimalism\",\n    country: \"Ukraine\",\n  },\n  {\n    slug: \"george_pelecis\",\n    midis: [\n      \"all-in-the-past---georgs-pelecis\",\n      \"plaukstosais-jasmins---georgs-pelecis\",\n    ],\n    composerBirthYear: 1947,\n    genre: \"Classical\",\n    style: \"Contemporary\",\n    country: \"Latvia\",\n  },\n  {\n    slug: \"marco_beltrami\",\n    midis: [\n      \"rosemary-s-theme-the-giver\",\n      \"rosemary-s-waltz\",\n      \"st.-estes-reform-school-extended---marco-beltrami-venom-let-there-be-carnage\",\n      \"le-mans-66\",\n      \"theme-from-world-war-z---marco-beltrami-theme-from-world-war-z--isolated-system\",\n    ],\n    composerBirthYear: 1966,\n    genre: \"Film Score\",\n    style: \"Orchestral, Cinematic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"catherine_rollin\",\n    midis: [\n      \"french-movie-waltz---catherine-rollin\",\n      \"moonlight-nocturne---catherine-rollin\",\n      \"sneaky-skeleton---catherine-rollin\",\n      \"blues-train---catherine-rollin-catherine-rollin---blues-train-jazz\",\n      \"witches-brew---catherine-rollin\",\n    ],\n    composerBirthYear: 1954,\n    genre: \"Jazz\",\n    style: \"Jazz, Blues\",\n    country: \"USA\",\n  },\n  {\n    slug: \"jelly_roll_morton\",\n    midis: [\"king-porter-stomp---jelly-roll-morton---melrose-edition\"],\n    composerBirthYear: 1890,\n    genre: \"Jazz\",\n    style: \"Jazz, Blues\",\n    country: \"USA\",\n  },\n  {\n    slug: \"boogie_woogie\",\n    midis: [\n      \"boogie-woogie\",\n      \"original-boogie-woogie\",\n      \"boogie-woogie---misc-traditional-boogie-woogie-_-basic-piano-solo-for-beginners\",\n      \"pine-top-s-boogie-woogie---transcription-of-take-b\",\n      \"suzan-boogie-woogie-in-c---easy-piano-riff---basic-boogie\",\n      \"boogie-blues-etude-1974---oscar-peterson-piano-solo-transcription\",\n      \"boogie-woogie---monday-struggle---by-albert-ammons\",\n      \"boogie-woogie-stomp\",\n      \"easy-boogie-woogie\",\n      \"lewis-boogie-rock-n-roll-piano-arrangement\",\n      \"surfboard-boogie\",\n      \"boogie-woogie-7a11a3\",\n      \"boogie-woogie-piano\",\n      \"some-boogie-woogie-by-albert-ammons-friends\",\n      \"bumble-boogie---adapted-from-the-flight-of-the-bumble-bee\",\n    ],\n    genre: \"Boogie Woogie\",\n    // This is a genre-based collection, not tied to a specific composer.\n    style: \"Boogie Woogie\",\n  },\n  {\n    slug: \"fur_elise_covers\",\n    midis: [\n      \"fur-elise-reharmonization-cover\",\n      \"fur-elise-but-elise-is-scary\",\n      \"Fr_Elise\",\n    ],\n    // Cover of Beethoven's piece, so no new composer or style info necessary here.\n  },\n  {\n    slug: \"rhcp_red_hot_chili_peppers\",\n    midis: [\"road-trippin---red-hot-chili-peppers\"],\n    composerBirthYear: 1970,\n    genre: \"Funk Rock, Alternative Rock\",\n    country: \"USA\",\n  },\n  {\n    slug: \"martha_mier\",\n    midis: [\n      \"to-catch-a-dream---martha-mier\",\n      \"peppermint-rag---martha-mier\",\n      \"downright-happy-rag\",\n      \"just-struttin-along\",\n      \"surfboard-boogie\",\n      \"enchanted-waterfall---martha-mier\",\n      \"baroque-expression---martha-mier\",\n    ],\n    composerBirthYear: 1955,\n    genre: \"Classical, Ragtime\",\n    style: \"Ragtime, Light Classical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"scary\",\n    midis: [\n      \"fur-elise-but-elise-is-scary\",\n      \"funeral-march---f.-chopin-halloween-scary-version---easy-to-intermediate\",\n    ],\n    genre: \"Classical\",\n    style: \"Spooky Variations\",\n    // No specific country, these are just spooky versions of classical pieces.\n  },\n  {\n    slug: \"carlos_chavez\",\n    midis: [\"diez-preludios-para-piano---carlos-chavez\", \"ponchito-al-hombro\"],\n    composerBirthYear: 1899,\n    genre: \"Classical\",\n    style: \"Nationalist\",\n    country: \"Mexico\",\n  },\n  {\n    slug: \"anoushiravan_rohani\", // pure harmonic minor\n    midis: [\n      \"il-coure-mio---anoushiravan-rohani\",\n      \"maadar\",\n      \"gol-e-sang---anoushiravan-rohani\",\n      \"aziz-joon---anoushiravan-rohani\",\n      \"soltaan-e-ghalbhaa---anoushiravan-rohani\",\n      \"potpurri---anoshirvan-rohani\",\n      \"saraab---anoushiravan-rohani\",\n      \"bahaneh\",\n      \"queen-of-hearts\",\n    ],\n    composerBirthYear: 1959,\n    genre: \"World, Traditional\",\n    style: \"Persian, Classical\",\n    country: \"Iran\",\n  },\n  {\n    slug: \"evgeny_doga\",\n    midis: [\n      \"vals---ie.-doga\",\n      \"sonet---ie.-doga\",\n      \"meditation---ie.-doga\",\n      \"i-love-you---ie.-doga\",\n      \"portret---e.-doga\",\n    ],\n    composerBirthYear: 1937,\n    genre: \"Classical, Film Score\",\n    style: \"Romantic, Cinematic\",\n    country: \"Moldova\",\n  },\n  {\n    slug: \"marc_sabatella\",\n    midis: [\n      \"reunion\",\n      \"different-worlds\",\n      \"for-dad\",\n      \"coming-back-home\",\n      \"birthday-rag\",\n      \"fugue\",\n      \"autumn-fires\",\n    ],\n    composerBirthYear: 1966,\n    genre: \"Jazz, Classical\",\n    style: \"Jazz, Ragtime\",\n    country: \"USA\",\n  },\n  {\n    slug: \"raimonds_pauls\",\n    midis: [\n      \"million-alyh-roz---raimonds-pauls\",\n      \"ischezli-solnechnye-dni\",\n      \"raymond-pauls-ptichka-na-vetke\",\n      \"zelyonyy-svet---valeriy-leontev-raymond-pauls\",\n    ],\n    composerBirthYear: 1936,\n    genre: \"Pop, Jazz, Classical\",\n    style: \"Popular, Light Classical\",\n    country: \"Latvia\",\n  },\n  {\n    slug: \"alkan\",\n    midis: [\"nocturne-opus-22-in-b-major---alkan\"],\n    composerBirthYear: 1813,\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"France\",\n  },\n  {\n    slug: \"robert_d_vandall\",\n    midis: [\n      \"prelude-no.-4-in-f-major---robert-d.-vandall\",\n      \"rockin-at-the-hall\",\n      \"witches-waltz---robert-d.-vandall\",\n      \"slide-easy---robert-d.-vandall\", // test 12-bar blues search\n      \"in-the-groove---robert-d.-vandall-piano-trio\",\n      \"prelude-no.-7-in-b-minor\", // minor circle of fifths\n    ],\n    composerBirthYear: 1945,\n    genre: \"Classical, Educational\",\n    style: \"Jazz, Classical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"malcolm_arnold\",\n    midis: [\n      \"fanfara-for-horn---malcolm-arnold-fantasy-for-horn\",\n      \"fantasy-for-trumpet-op.-100---malcolm-arnold-excerpt-from-fantasy-for-trumpet-op.-100\",\n      \"fantasy-for-trombone\",\n      \"siciliano-from-prelude-siciliano-and-rondo\",\n      \"eight-children-s-pieces-op.36---malcolm-arnold\",\n      \"piano-reduction-mvt-i-from-four-cornish-dances---malcolm-arnold\",\n      \"whistle-down-the-wind---malcolm-arnold\",\n    ],\n    composerBirthYear: 1921,\n    genre: \"Classical\",\n    style: \"British, Orchestral\",\n    country: \"UK\",\n  },\n  {\n    slug: \"mark_fradkin\",\n    midis: [\n      \"techyot-reka-volga---muzyka-m-fradkin\",\n      \"doroga-na-berlin---mark-grigorevich-fradkin\",\n      \"sluchaynyy-vals---m.-fradkin\",\n    ],\n    composerBirthYear: 1926,\n    genre: \"Film Score, Classical\",\n    style: \"Orchestral, Cinematic\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"aleksey_rybnikov\",\n    midis: [\n      \"ya-tebya-nikogda-ne-zabudu---o.-ribnikov\",\n      \"pesnjakrasnoishapochki\",\n      \"pesnya-krasnoy-shapochki---a.-rybnikov\",\n      \"pesnya-krasnoy-shapochki---aleksey-rybnikov\",\n      \"poslednyaya-poema-the-last-poem---aleksey-rybnikov\", // many strategies\n      \"pisnya-kota-bazilio-ta-lisici-alisi---o.-ribnikov\",\n      \"meeting-a.-rybnikov---zustrich-o.-ribnikov\",\n      \"misyachna-pisnya---o.-ribnikov\",\n      \"main---alexey-rybnikov-golovna-tema---oleksiy-ribnikov\",\n      \"belyy-shipovnik---o.-ribnikov\",\n      \"tema-mriy---oleksiy-ribnikov-dream-theme-alexey-rybnikov\",\n      \"v-parke---aleksey-rybnikov-v-parke---aleksey-rybnikov-iz-kinofilma-vam-i-ne-snilos\",\n      \"recognition-alexey-rybnikov-a.-rybnikov-priznanie\",\n      \"groza---aleksey-rybnikov-iz-k-f-cherez-ternii-k-zvezdam\",\n      \"a.-rybnikov----the-lamplighter-s-song-ost-the-adventures-of-buratino-1976\",\n      \"ostrov-sokrovishch-aleksey-lvovich-rybnikov\",\n      \"mlechnyy-put-milky-way\",\n    ],\n    composerBirthYear: 1945,\n    genre: \"Film Score, Classical\",\n    style: \"Film, Popular Music\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"aleksandr_zatsepin\",\n    midis: [\n      \"pesenka-o-medvedyah---a.-zacepin\",\n      \"s-lyubovyu-vstretitsya---a.-zacepin\",\n      \"volki-gonyat-olenya---a.-zacepin\",\n      \"hudozhniki---a.-zacepin\",\n      \"island-of-misfortune-ostrov-nevezeniya---o.-zacepin\",\n      \"proshchay---a.-zacepin\",\n      \"tango-do-k-f-12-stulev---o.-zacepin\",\n      \"kak-zhe-mne-teper-tebya-lyubit---a.-zacepin\", // triton sub\n      \"lunnaya-serenada---a.-zacepin\",\n      \"volshebnik-nedouchka---aleksandr-zacepin\",\n    ],\n    composerBirthYear: 1926,\n    genre: \"Film Score, Popular\",\n    style: \"Film, Popular Music\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"tihon_hrennikov\",\n    midis: [\n      \"vals---t.-hrennikov\",\n      \"vals-davnim-davno---t.-hrennikov\",\n      \"prelyudiya---t.-hrennikov\",\n      \"moskovskie-okna-bossa-nova\",\n      \"chto-tak-serdce-rastrevozheno\",\n      \"marsh-artilleristov---t.-n.-hrennikov\",\n      \"proshchanie---tihon-hrennikov-proshchanie\",\n      \"koliskova-svitlani---t.-hrennikov\",\n      \"chastushki---t.-hrennikov\",\n    ],\n    composerBirthYear: 1913,\n    genre: \"Classical\",\n    style: \"Russian, Nationalist\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"sergey_banevich\",\n    midis: [\n      \"fantaziya---s.-banevich\",\n      \"soldatik-i-balerina\",\n      \"at-the-station-na-vokzale\",\n      \"road\", // seventh chords in minor, change of meter\n      \"pesenka-pro-vovu-rasteryashku\", // Iadd6 = ii65, V+/IV\n    ],\n    composerBirthYear: 1952,\n    genre: \"Classical\",\n    style: \"Contemporary\",\n    country: \"Russia\",\n  },\n  {\n    slug: \"bslick\",\n    midis: [\n      \"let-go-piggy-book-2-soundtrack---bslick\",\n      \"the-untold-story-ft.-melissa-medina---bslick\",\n      \"archie-theme-scary-shanty---bslick\",\n    ],\n    // Unknown composer and country, genre/style unclear.\n  },\n  {\n    slug: \"alan_hovhaness\",\n    midis: [\n      \"mountain-lullaby---jealous-of-the-birds-piano-solo\",\n      \"prayer-of-st-gregory---alan-hovhaness\",\n      \"symphony-no.-2-mysterious-mountain---alan-hovhaness-mysterious_mountain_iii\",\n    ],\n    composerBirthYear: 1911,\n    genre: \"Classical\",\n    style: \"Symphonic, Mystical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"duke_ellington\",\n    midis: [\n      \"solitude---duke-ellington\",\n      \"solitude---duke-ellington-eddie-de-lange-and-irving-mills-piano-version\",\n      \"solitude---duke-ellington-as-played-by-roland-hanna\",\n    ],\n    composerBirthYear: 1899,\n    genre: \"Jazz, Swing\",\n    style: \"Big Band, Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"rhythm_changes\",\n    midis: [\n      \"oleo---sonny-rollins\",\n      \"cottontail_sax_soli\",\n      \"cotton-tail---duke-ellington\",\n      \"cotton-tail---duke-ellington-musescore3\",\n      \"cotton-tail\",\n      \"dexterity\",\n      \"dexterity---charlie-parker\",\n      \"fungii-mama---richard-blue-mitchell\",\n    ],\n    genre: \"Jazz\",\n    style: \"Bebop, Swing\",\n    country: \"USA\",\n  },\n  {\n    slug: \"overcooked\",\n    midis: [\n      \"overcooked---menu-theme\",\n      \"overcooked-2-medley\",\n      \"overcooked-medley\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Video Game Music\",\n    style: \"Video Game Music\",\n    country: \"USA\",\n  },\n  {\n    slug: \"l_m_gottschalk\",\n    midis: [\n      \"grande-tarantelle---gottschalk-1872\",\n      \"the-dying-swan-1870\",\n      \"souvenirs-d-andalousie-1855\",\n      \"morte-l.-m.-gottschalk-in-memoriam\", // corrupted grid somehow\n      \"bamboula-1849\",\n      \"the-banjo-1855\",\n      \"tremolo---gottschalk-1868\",\n      \"le-bananier-chanson-negre-de-l.m-gottschalk-1846\",\n      \"souvenir-de-porto-rico-200-i.e.-206-follower-special\",\n      \"god-save-the-queen---gottschalk-c.1860\",\n    ],\n    composerBirthYear: 1829,\n    genre: \"Romantic\",\n    style: \"Virtuoso Piano, Early American\",\n    country: \"USA\",\n  },\n  {\n    slug: \"jean_henri_ravina\",\n    midis: [\n      \"etude---ravina-no.-22-op.-50---h-moll\",\n      \"petit-bolero-op.-62---jean-henri-ravina\",\n      \"nocturne-op.112---jean-henri-ravina\",\n    ],\n    composerBirthYear: 1813,\n    genre: \"Romantic\",\n    style: \"French Romanticism\",\n    country: \"France\",\n  },\n  {\n    slug: \"jean-luc_ponty\",\n    midis: [\"faith-in-you\"],\n    composerBirthYear: 1942,\n    genre: \"Jazz Fusion\",\n    style: \"Jazz, Fusion\",\n    country: \"France\",\n  },\n  {\n    slug: \"placebo\",\n    midis: [\"every-you-every-me---placebo\", \"the-bitter-end---placebo\"],\n    composerBirthYear: 1974,\n    genre: \"Alternative Rock\",\n    style: \"Alternative Rock, Britpop\",\n    country: \"UK\",\n  },\n  {\n    slug: \"john_cacavas\",\n    midis: [\n      \"jazzy-sax---john-cacavas\",\n      \"corsage-for-winds---john-cacavas-string-quartet\",\n    ],\n    composerBirthYear: 1930,\n    genre: \"Jazz\",\n    style: \"Jazz, Classical Crossover\",\n    country: \"USA\",\n  },\n  {\n    slug: \"joe_zawinul\",\n    midis: [\n      \"birdland-piano\",\n      \"mercy-mercy-mercy---joe-zawinul\",\n      \"mercy-mercy-mercy---joe-zawinul-2\",\n      \"boogie-woogie-waltz-zawinul-leadsheet\",\n      \"walk-tall---joe-zawinul\",\n      \"125th-street-congress-zawinul-leadsheet\",\n      \"cucumber-slumber-leadsheet-johnson-zawlinul\",\n    ],\n    composerBirthYear: 1932,\n    genre: \"Jazz Fusion\",\n    style: \"Fusion, Funk, Jazz\",\n    country: \"Austria\",\n  },\n  {\n    slug: \"lucas_pope\",\n    midis: [\"papers-please\"],\n    composerBirthYear: 1977,\n    genre: \"Video Game Music\",\n    country: \"USA\",\n  },\n  {\n    slug: \"manaka_kataoka\",\n    midis: [\n      \"main-theme---the-legend-of-zelda-tears-of-the-kingdom---manaka-kataoka-yasuaki-iwata-and-hajime-wakai-totk-sheet-music\",\n      \"attack-on-vah-naboris---manaka-kataoka\",\n    ],\n    composerBirthYear: 1985,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"altin_gun\",\n    midis: [\n      \"goca-dunya---altin-gun-goca-dunya.xml\",\n      \"rakiya-su-katamam---selami-sahin-altin-gun\",\n      \"badi-sabah-olmadan---altin-gun-badi-sabah-olmadan.xml\",\n    ],\n    composerBirthYear: 1970,\n    genre: \"Psychedelic Folk, Turkish Folk\",\n    style: \"Folk, Psychedelic\",\n    country: \"Netherlands/Turkey\",\n  },\n  {\n    slug: \"herbie_hancock\",\n    midis: [\"cantaloupe-island\"],\n    composerBirthYear: 1940,\n    genre: \"Jazz\",\n    style: \"Jazz, Fusion\",\n    country: \"USA\",\n  },\n  {\n    slug: \"michel_camilo\",\n    midis: [\n      \"one-more-once---michel-camilo\", // 12-bar blues\n      \"michel-camilo-from-within\",\n      \"blue-bossa-salsa---michel-camilo\",\n      \"caribe---michel-camilo\",\n    ],\n    composerBirthYear: 1954,\n    genre: \"Jazz\",\n    style: \"Latin Jazz\",\n    country: \"Dominican Republic\",\n  },\n  {\n    slug: \"hiromi_uehara\",\n    midis: [\n      \"the-tom-and-jerry-show---hiromi-uehara\",\n      \"hiromi-uehara---haze\",\n      \"hiromi-uehara---old-castle-by-the-river-in-the-middle-of-a-forest\",\n      \"mr.-c.c.-cm-ver.---hiromi-uehara\",\n      \"spark-by-hiromi-uehara-the-trio-project-piano-score\",\n    ],\n    composerBirthYear: 1979,\n    genre: \"Jazz\",\n    style: \"Jazz Fusion, Contemporary Jazz\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"george_duke\",\n    midis: [\"if-you-will---george-duke\", \"george-duke---it-s-on\"],\n    composerBirthYear: 1946,\n    genre: \"Jazz\",\n    style: \"Fusion, R&B, Funk\",\n    country: \"USA\",\n  },\n  {\n    slug: \"tonal_stretch\",\n    midis: [\n      \"jurassic-park---journey-to-the-island\",\n      \"na-krilah-vitru---a.-minov\",\n      \"narodniy-tanec---miroslav-skorik\",\n      \"skyscraper---wynn-anne-rossi\",\n      \"team-fortress---rise-of-the-living-bread---mike-morasky\",\n      \"eight-children-s-pieces-op.36---malcolm-arnold\",\n      \"the-tom-and-jerry-show---hiromi-uehara\",\n      \"irken-armada-invasion-zim-s-theme---mattias-hakulinen-and-pontus-askbrink\",\n      \"do-you-remember-king-s-theme---in-stars-and-time\",\n      \"marx-theme-from-kirby-super-star---jun-ishikawa\",\n      \"twilight-in-benares-1923\",\n      \"alien-lair\",\n      \"greenpath---christopher-larkin\",\n      \"qiao-shang-nozhan-i-battle-on-the-bridge---final-fantasy-tactics-ps1---hitoshi-sakimoto\",\n      \"heroes-of-might-magic-iii---fortress-town-theme\",\n    ],\n  },\n  {\n    slug: \"aaron_copland\",\n    midis: [\n      \"copland_s_third_symphony_first_movement\",\n      \"appalachian-spring---aaron-copland-appalachian-spring\",\n      \"hoe-down---aaron-copland\",\n      \"at-the-river-g\",\n      \"aaron-copland---story-of-our-town\",\n      \"the-cat-and-the-mouse\",\n    ],\n    composerBirthYear: 1900,\n    genre: \"Classical\",\n    style: \"American Classical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"revaz_laghidze\",\n    midis: [\"simg-era-t-bilisze---revaz-lag-iz-e\"],\n    composerBirthYear: 1930,\n    genre: \"Classical\",\n    style: \"Georgian Classical\",\n    country: \"Georgia\",\n  },\n  {\n    slug: \"john_williams\",\n    midis: [\n      \"john-william---jurassic-park-theme\",\n      \"jurassic-park-theme---john-williams-jurrasic-park-theme---john-williams\",\n      \"somewhere-in-my-memory-by-john-williams\",\n      \"theme-from-schindler-s-list---piano-solo\",\n      \"jurassic-park---journey-to-the-island\", // what's going on?\n      \"e.t.-end-credits-piano-solo\",\n      \"e.t.-theme---ywcm\",\n      \"jazz-autographs---john-williams-jazz-autographs-from-the-terminal---john-williams\",\n      \"holiday-flight-from-home-alone-2---john-williams-joni-leiman-solo-piano-transcription\",\n      \"jaws-theme\",\n      \"the-tale-of-viktor-navorski-john-williams\",\n      \"catch-me-if-you-can-sax-solo\",\n      \"nbc-sunday-night-football-theme\",\n      \"the-fabelmans---john-williams\",\n      \"helena-s-theme---john-williams-from-indiana-jones-and-the-dial-of-destiny\",\n      \"with-malice-toward-none---trumpet-solo-john-williams\", // very coplandinan quartal language\n    ],\n    composerBirthYear: 1932,\n    genre: \"Film Score\",\n    style: \"Film Music, Classical\",\n    country: \"USA\",\n  },\n  {\n    slug: \"john_philip_sousa\",\n    midis: [\n      \"the-liberty-bell-march---john-philip-sousa---1893\",\n      \"semper-fidelis-piano-john-philip-sousa\",\n      \"the-stars-and-stripes-forever--john-f-sousa---arr.-v-horowitz\",\n    ],\n    composerBirthYear: 1854,\n    genre: \"March\",\n    style: \"Military March, American Patriotic\",\n    country: \"USA\",\n  },\n  {\n    slug: \"cameron_lee_simpson\",\n    midis: [\n      \"mr.rogers-theme-wont-you-be-my-neighbor-arr.-cameron-lee-simpson\",\n      \"picking-the-chicken---cameron-lee-simpson---pjotr-kolster\",\n    ],\n    composerBirthYear: 1930,\n    genre: \"Pop, Children’s Music\",\n    style: \"Children’s Music, Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"chick_corea\",\n    midis: [\n      \"spain---chick-corea\",\n      \"children-s-song-no.-7---chick-corea\",\n      \"children-s-song-no.-6\",\n      \"children-s-song-2\",\n      \"children-s-song-no.-5\",\n\n      \"tones-for-joan-s-bones\",\n      \"fingerprints---chick-corea\",\n      \"chick-corea-s-scriabin\",\n    ],\n    composerBirthYear: 1941,\n    genre: \"Jazz\",\n    style: \"Jazz Fusion, Latin Jazz\",\n    country: \"USA\",\n  },\n  {\n    slug: \"dennis_alexander\",\n    midis: [\n      \"reflections-by-dennis-alexander\",\n      \"titanium_toccata-50\",\n      \"appaloosa-spirit---dennis-alexander\",\n      \"going-places---dennis-alexander\",\n      \"toccate---dennis-alexander-.\",\n      \"valse-romantique-sriram\",\n      \"grumpy-old-witch---dennis-alexander\",\n      \"nocturne-in-e-flat-major---dennis-alexander\",\n    ],\n    composerBirthYear: 1957, // Dennis Alexander was born in 1957\n    genre: \"Classical\", // Mainly classical, with some contemporary influences\n    style: \"Romantic, Contemporary\", // Known for both romantic and contemporary piano works\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"manfred_schmitz\",\n    midis: [\n      \"manfred-schmitz---kleine-pop-romanze-short-pop-romance\",\n      \"barkarole---manfred-schmitz\",\n      \"zimniy-vecher-winter-evening---manfred-shmitc-manfred-schmitz\",\n      \"am-abend---manfred-schmitz\",\n      \"elegie---manfred-schmitz\",\n      \"mickey-mouse---manfred-schmitz\", // rag\n      \"andrea---manfred-schmitz\",\n      \"for-linda-king---manfred-schmitz\",\n      \"manfredschmitzunpeutriste\",\n      \"old-movie-man---manfred-schmitz\",\n      \"bagatelle---manfred-schmitz\",\n      \"romance-melancolique---manfred-schmitz-easy\",\n      \"praerie-song---manfred-schmitz\",\n      \"episode---manfred-schmitz\",\n      \"spieluhr-serenade---manfred-schmitz\",\n      \"poetische-skizze---manfred-schmitz\",\n      \"prelude---manfred-schmitz\",\n    ],\n    composerBirthYear: 1950, // Born in 1950, known for contemporary classical compositions\n    genre: \"Teacher Music, Classical, Pop\", // Combines classical and pop elements\n    country: \"Germany\", // German composer\n  },\n  {\n    slug: \"ignacy_feliks_dobrzynski\",\n    midis: [\n      \"feliks-dobrzynski---farewell-nocturne\",\n      \"nocturne-op.21-no1---ignacy-feliks-dobrzynski\",\n      \"nocturne-in-f-minor-op.24-no.1---ignacy-feliks-dobrzynski\",\n    ],\n    composerBirthYear: 1807, // Born in 1807\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Romantic period composer\n    country: \"Poland\", // Polish composer\n  },\n  {\n    slug: \"ignacy_jan_paderewski\",\n    midis: [\n      \"elegy-op.4---ignacy-jan-paderewski\",\n      \"miscellanea-op.16---ignacy-jan-paderewski-no.4-nocturne\",\n      \"piano-concerto-op.17---ignacy-jan-paderewski\",\n      \"ignacy-jan-paderewski-sarabande-op.-14-no-2\",\n    ],\n    composerBirthYear: 1860, // Born in 1860\n    genre: \"Classical\", // Classical, especially known for his piano compositions\n    style: \"Late-Romantic\", // Late Romantic era style\n    country: \"Poland\", // Polish composer and statesman\n  },\n  {\n    slug: \"nikolay_zubov\",\n    midis: [\n      \"ne-uhodi-pobud-so-mnoyu-don-t-go-stay-with-me-romance\",\n      \"o-ni-nemaie-mriyi---m.-zubov\",\n      \"poglyad-tvoyih-chornih-ochey---m.-zubov\",\n    ],\n    composerBirthYear: 1915, // Born in 1915\n    genre: \"Romantic\", // Romantic and early 20th-century style\n    style: \"Romantic\", // Predominantly Romantic style\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"mykola_mozgovyy\",\n    midis: [\n      \"minaie-den-minaie-nich---mikola-mozgoviy\",\n      \"moya-zemlya---mikola-mozgoviy\",\n      \"zacharuy-nas-lyubov---mikola-mozgoviy\",\n      \"nazvi---m.-mozgoviy\",\n    ],\n    composerBirthYear: 1943, // Born in 1943\n    genre: \"Folk, Classical\", // Combines folk music with classical traditions\n    style: \"Romantic, Folk\", // Romantic influences with Ukrainian folk music\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"myroslav_skoryk\",\n    midis: [\n      \"melodiya-lya-minor-dlya-skripki-i-fortepiano---m.-skorik\",\n      \"namalyuy-meni-nich---m.-skorik\",\n      \"listok-do-albomu---miroslav-skorik\",\n      \"narodniy-tanec---miroslav-skorik\",\n      \"zhartivliva-p-iesa---miroslav-skorik\",\n      \"sini-ochi---miroslav-skorik\",\n      \"nav-yazliviy-motiv---miroslav-skorik\",\n      \"v-narodnomu-stili---miroslav-skorik\",\n      \"tanec-iz-guculskogo-triptiha\",\n    ],\n    composerBirthYear: 1938, // Born in 1938\n    genre: \"Classical, Folk\", // Classical and folk influences\n    style: \"Contemporary, Folk\", // Contemporary with traditional folk elements\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"moritz_moszkowski\",\n    midis: [\n      \"moszkowski---la-jongleuse-op.52-no.4\",\n      \"tarentelle-10-pieces-mignonnes-op.-77-no.-6-m.-moszkowski\",\n      \"spanish-dance---moritz-moszkowski\",\n      \"moszkowski---etincelles-op.36-no.6\",\n    ],\n    composerBirthYear: 1854, // Born in 1854\n    genre: \"Classical\", // Classical and Romantic composer\n    style: \"Romantic\", // Romantic era style\n    country: \"Poland\", // Polish composer\n  },\n  {\n    slug: \"platon_mayboroda\",\n    midis: [\n      \"bili-kashtani---platon-mayboroda\",\n      \"kiyivskiy-vals---p.-mayboroda\",\n      \"ridna-mati-moya-pisnya-pro-rushnik---p.-mayboroda\",\n    ],\n    composerBirthYear: 1918, // Born in 1918\n    genre: \"Folk, Classical\", // Combines Ukrainian folk and classical traditions\n    style: \"Romantic, Folk\", // Romantic and folk elements\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"yaroslav_kis\",\n    midis: [\"liricheskiy-vals---yaroslav-kis\"],\n    composerBirthYear: 1980, // Born in 1980\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Romantic piano music\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"yuriy_zubay\",\n    midis: [\n      \"babusya-yagusya---yu.-zubay\",\n      \"osinnya-pisnya---yuriy-zubay\",\n      \"koncertino---yu.-zubay\",\n    ],\n    composerBirthYear: 1952, // Born in 1952\n    genre: \"Classical, Folk\", // Classical with folk influences\n    style: \"Folk, Contemporary\", // Folk-inspired classical compositions\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"loginvovchyk_single\",\n    midis: [\n      \"na-krilah-vitru---a.-minov\",\n      \"dobriy-vechir-dole---o.-pushkarenko\",\n    ],\n    genre: \"Folk, Classical\", // Folk and classical music\n    style: \"Folk\", // Traditional folk music\n    country: \"Ukraine\", // Ukrainian composers\n  },\n  {\n    slug: \"valery_zubkov\",\n    midis: [\n      \"vozvrashchenie---v.-zubkov-return---v.-zubkov\",\n      \"gypsy-v.-zubkov-cygan-v.-zubkov\", // same?\n    ],\n    composerBirthYear: 1949, // Born in 1949\n    genre: \"Classical, Folk\", // Classical with folk influences\n    style: \"Folk\", // Ukrainian folk and classical music\n    country: \"Ukraine\", // Ukrainian composer\n  },\n  {\n    slug: \"john_field\",\n    midis: [\n      \"nocturne-no.5---h.37---john-field---edited-by-liszt\",\n      \"nocturne-no.1---field\",\n      \"john-field-nocturne-no.-12\",\n    ],\n    composerBirthYear: 1782, // Born in 1782\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Early Romantic composer\n    country: \"Ireland\", // Irish composer\n  },\n  {\n    slug: \"fuzzy\",\n    midis: [\n      \"julenat\",\n      \"en-gammel-knark---gamle-er-unge-der-er-blevet-aeldre\",\n      \"en-by-i-provinsen-mus3\",\n    ],\n    genre: \"Pop, Folk\", // Pop and folk influences\n    style: \"Pop, Folk\", // Pop and traditional folk\n    country: \"Denmark\", // Danish artists\n  },\n  {\n    slug: \"ebbe_raun\",\n    midis: [\n      \"melodien-som-evert-taube-aldrig-skrev\",\n      \"noget-om-mit-hjerterum\",\n      \"ingen-er-evig-ung\",\n    ],\n    genre: \"Folk\", // Primarily folk music\n    style: \"Folk\", // Folk music\n    country: \"Denmark\", // Danish composer\n  },\n  {\n    slug: \"ringmasters\",\n    midis: [\n      \"kung-liljekonvalje\",\n      \"you-ll-never-walk-alone\",\n      \"between-the-devil-and-the-deep-blue-sea\",\n    ],\n    composerBirthYear: 1975,\n    genre: \"Barbershop\", // Barbershop style\n    style: \"Barbershop\", // Traditional barbershop quartet\n    country: \"Sweden\", // Swedish barbershop quartet\n  },\n  {\n    slug: \"white_star_line_1912\",\n    midis: [\n      \"the-quaker-girl-valse---lionel-monckton-carl-kiefert-1910\", // iiø-V->V7/V\n      \"barber-of-seville-overture\",\n      \"overture-to-poet-and-peasant---franz-von-suppe-piano-reduction-solo\",\n    ],\n    composerBirthYear: 1870,\n    genre: \"Classical\", // Classical music\n    style: \"Romantic\", // Late Romantic period\n    country: \"UK\", // British composers\n  },\n  {\n    slug: \"louis_vierne\",\n    midis: [\"vierne-organ-symphony-no.-1-part-vi---final\"],\n  },\n  {\n    slug: \"tchaikovsky\",\n    midis: [\n      \"trepak-russian-dance---tchaikovsky---piano-transcription\",\n      \"dance-of-the-reed-flutes-the-nutcracker-suite---tchaikovsky\",\n      \"chinese-dance---the-nutcracker-suite---peter-tchaikovsky\",\n      \"tchaikovsky-waltz-of-the-flowers-from-the-nutcracker-piano-4-hands\",\n      \"dance-of-the-sugar-plum-fairy\",\n    ],\n    composerBirthYear: 1840, // Born in 1840\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Romantic era composer\n    country: \"Russia\", // Russian composer\n  },\n  {\n    slug: \"wagner\",\n    midis: [\n      \"wagner-siegfried-s-funeral-march-from-gotterdammerung-piano-solo\",\n      \"wagner-elsa-s-procession-to-the-cathedral-from-the-opera-lohengrin-piano-solo\",\n      \"wagner_tannhauser_overture_piano_solo\",\n    ],\n    composerBirthYear: 1813, // Born in 1813\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Romantic opera composer\n    country: \"Germany\", // German composer\n  },\n  {\n    slug: \"timothy_brown\",\n    midis: [\n      \"dance-of-the-wind---timothy-brown\",\n      \"toccatina---timothy-brown\",\n      \"summer-song\",\n      \"scherzino---timothy-brown\", // i like this one. simple and effective\n    ],\n    composerBirthYear: 1961, // Born in 1961\n    genre: \"Contemporary Classical\", // Contemporary classical music\n    style: \"Minimalism\", // Minimalism style\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"lionel_yu\",\n    midis: [\n      \"fight-for-freedom---lionel-yu\",\n      \"i-will-love-you-always---lionel-yu\",\n      \"the-cursed-path\",\n    ],\n    composerBirthYear: 1989,\n    genre: \"Contemporary\", // Contemporary classical and cinematic\n    style: \"Cinematic\", // Cinematic and contemporary classical\n    country: \"China, USA\", // American composer\n  },\n  {\n    slug: \"melody_bober\",\n    midis: [\n      \"stealth-mode---melody-bober\",\n      \"blues-006---blyuz-006\",\n      \"midnight-ride---melody-bober-midnight-ride\",\n      \"melody-bober----yellowhammer-stomp\",\n      \"antique-music-box---melody-bober\",\n      \"dance-of-the-autumn-leaves---melody-bober\",\n    ],\n    composerBirthYear: 1952, // Born in 1952\n    genre: \"Classical, Educational\", // Classical with an educational focus\n    style: \"Contemporary, Educational\", // Contemporary educational music\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"wynn-anne_rossi\",\n    midis: [\n      \"skyscraper---wynn-anne-rossi\",\n      \"cafe-cha-cha---wynn-anne-rossi\",\n      \"alma-del-tango---wynn-anne-rossi\",\n    ],\n    composerBirthYear: 1964, // Born in 1964\n    genre: \"Classical, Jazz\", // Classical with jazz influences\n    style: \"Contemporary, Jazz\", // Contemporary classical with jazz influences\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"jennifer_linn\",\n    midis: [\"the-dreamcatcher\", \"snowcrystals---jennifer-linn\"],\n    composerBirthYear: 1978, // Born in 1978\n    genre: \"Classical\", // Classical music\n    style: \"Contemporary\", // Contemporary classical music\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"john_adams\",\n    midis: [\n      \"piano-arr.-short-ride-in-a-fast-machine---john-adams\",\n      \"phrygian-gates-china-gates---john-adams\",\n    ],\n    composerBirthYear: 1947, // Born in 1947\n    genre: \"Minimalism\", // Minimalism composer\n    style: \"Minimalism\", // Famous for Minimalism music\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"ignacio_cervantes\",\n    midis: [\n      \"no-me-toques-danza-cubana-de-ignacio-cervantes\",\n      \"soledad-.-habanera-par-ignazio-cervantes\",\n      \"los-tres-golpes-danza-ignacio-cervantes\",\n    ],\n    composerBirthYear: 1847, // Born in 1847\n    genre: \"Classical\", // Classical and Cuban music\n    style: \"Romantic\", // Romantic period composer\n    country: \"Cuba\", // Cuban composer\n  },\n  {\n    slug: \"mozart_misc\",\n    midis: [\n      \"fantasia_in_d_minor_k_397_385g_wolfgang_amadeus_mozart\",\n      \"i_allegro_symphony_no_4_in_d_major_k_19_w_a_mozart\",\n      \"mozart_rondo_in_d_major_k_485_professional_production_score\",\n\n      \"mozart_string_quartet_no_18_in_a_major_k464\",\n      \"mozart_string_quartet_no_19_in_c_major_k465_dissonance\",\n\n      \"string_quartet_no_23_in_f_major_k_590_wolfgang_amadeus_mozart\",\n\n      \"sonata_no_9_3rd_movement_k_311\",\n      \"mozart_sonata_11_1st\",\n      \"sonata_no_13_1st_movement_k_333\",\n      \"piano_sonata_no_16_in_c_major_k_545_wolfgang_amadeus_mozart_piano_solo\",\n\n      \"wa-mozart-marche-turque-turkish-march-fingered\",\n\n      \"lacrimosa---requiem\",\n    ],\n    composerBirthYear: 1756, // Born in 1756\n    genre: \"Classical\", // Classical composer\n    style: \"Classical\", // Classical period composer, known for his operas, symphonies, and chamber music\n    country: \"Austria\", // Austrian composer\n  },\n  {\n    slug: \"chopin_misc\",\n    midis: [\n      \"nocturnes-op.-9---no.-1-in-b-minor-d.-inoue\",\n      \"Chopin_-_Nocturne_Op_9_No_2_E_Flat_Major\",\n      \"chopin_nocturne_op9_no2_maestro_2011r3d3t5\",\n      \"nocturne-in-c-minor-op.-posth.-d.-inoue\",\n      \"nocturne-in-c-sharp-minor\",\n      \"nocturnes-op.-9---no.-3-in-b-d.-inoue\",\n      \"nocturnes-op.-15---no.-1-in-f-d.-inoue\",\n      \"nocturnes-op.-15---no.-2-in-f-d.-inoue\",\n      \"nocturne-opus-15-no.-2-in-f-major\",\n      \"nocturne-opus-15-no.-3-in-g-minor\",\n      \"nocturne-opus-27-no.-1-in-c-minor\",\n      \"nocturne-opus-27-no.-2-in-d-major\",\n      \"nocturne-opus-32-no.-1-in-b-major\",\n      \"nocturne-opus-32-no.-2-in-a-major\",\n      \"nocturne-opus-48-no.-1-in-c-minor\",\n      \"nocturne-opus-55-no.-1-in-f-minor\",\n      \"nocturne-opus-62-no.-1-in-b-major\",\n\n      \"waltz-opus-18-in-e-major-grande-valse-brillante\",\n      \"chopin---waltz-no.-1-in-d-flat-major-op.-64\",\n      \"waltz-opus-64-no.-2-in-c-minor\",\n      \"waltz-opus-69-no.-1-in-a-major\",\n      \"waltz-opus-69-no.-2-in-b-minor\",\n      \"waltz-opus-70-no.-1-in-g-major\",\n      \"waltz-b.-133-in-e-major---chopin\",\n      \"Waltz_in_A_MinorChopin\",\n\n      \"chopin_ballade_fminor_op52\",\n      \"chopin_ballade_no_1_in_g_minor_op_23\",\n      \"chopin_ballade_no_4_piano_solo\",\n      \"chopin_military_polonaise\",\n\n      \"fantaisie-impromptu-in-c-minor---chopin\",\n\n      \"etude-opus-10-no.-1-in-c-major\",\n      \"etude-opus-10-no.-2-in-a-minor\",\n      \"etude-opus-25-no.-11-winter-wind-in-a-minor\",\n\n      \"mazurka-op.68-no.4---chopin---posth.\",\n      \"mazurkas-op.-63---no.-2-in-f-minor-r.-lubetsky\",\n    ],\n    composerBirthYear: 1810, // Born in 1810\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Romantic period composer, known for his piano works\n    country: \"Poland\", // Polish composer (spent much of his life in France)\n  },\n\n  {\n    slug: \"chopin_24_preludes\",\n    midis: [\n      \"prelude-opus-28-no.-1-in-c-major\",\n      \"prelude-opus-28-no.-2-in-a-minor\",\n\n      \"chopin-prelude-e-minor-op-28-no-4-w-chord-symbols\",\n      \"24-preludes-op.-28---no.-4-in-e-minor-suffocation-g.-d.-robertson\",\n\n      \"prelude-opus-28-no.-6-in-b-minor\",\n      \"prelude-opus-28-no.-7-in-a-major---chopin\",\n      \"prelude-opus-28-no.-8-in-f-minor\",\n\n      \"chopin_raindrop_prelude\",\n    ],\n    composerBirthYear: 1810, // Born in 1810\n    genre: \"Classical\", // Classical composer\n    style: \"Romantic\", // Romantic period composer, known for his piano works\n    country: \"Poland\", // Polish composer (spent much of his life in France)\n  },\n  {\n    slug: \"grieg_lyric_pieces\",\n    midis: [\"grieg_arietta_yaskawa\", \"grieg_lyric_2_waltz_yaskawa\"],\n    composerBirthYear: 1843, // Edvard Grieg\n    genre: \"Classical\", // Late Romantic period\n    style: \"Romantic\", // Known for his expressive piano pieces\n    country: \"Norway\", // Grieg was Norwegian\n  },\n  {\n    slug: \"kaijura_yuki\",\n    midis: [\"nara-no-kyoukai-vol.-2---m01\"],\n    composerBirthYear: 1963, // Yuki Kajiura\n    genre: \"Soundtrack\", // Known for composing anime soundtracks\n    style: \"Orchestral, Electronic\", // Combines orchestral with electronic music\n    country: \"Japan\", // Yuki Kajiura is Japanese\n  },\n  {\n    slug: \"jacob_axel_josephson\",\n    midis: [\"albumblad\"],\n    composerBirthYear: 1850, // Jacob Axel Josephson\n    genre: \"Classical\", // Primarily known for his works in the classical genre\n    style: \"Romantic\", // Romantic era composer\n    country: \"Sweden\", // Josephson was Swedish\n  },\n  {\n    slug: \"christian_hymns_worldwide\",\n    midis: [\"karibu-na-bwana\"],\n    composerBirthYear: undefined, // No specific composer\n    genre: \"Gospel\", // Christian hymns are often gospel in style\n    style: \"Gospel, Hymn\", // Traditional Christian hymns\n  },\n  {\n    slug: \"medleys\",\n    midis: [\"seru-giran-medley---charly-garcia\"],\n  },\n  {\n    slug: \"medorei\",\n    midis: [\n      \"zhao-he-aidorumedore\", // Showa Era J-Pop Idol Medley\n    ],\n    composerBirthYear: undefined, // Medley, no specific composer\n    genre: \"Pop\", // J-Pop, Japanese pop music\n    style: \"J-Pop, Idol\", // Showa era idol music\n    country: \"Japan\", // J-Pop is a genre from Japan\n  },\n  {\n    slug: \"dora_pejacevic\",\n    midis: [\n      \"the-life-of-flowers-violet---dora-pejacevic\",\n      \"papillon-op.-6---dora-pejacevic\",\n    ],\n    composerBirthYear: 1885, // Dora Pejacevic\n    genre: \"Classical\", // Primarily classical composer\n    style: \"Romantic\", // Works in the late Romantic style\n    country: \"Croatia\", // Dora Pejacevic was Croatian\n  },\n  {\n    slug: \"mikulas_schneider_trnavsky\",\n    midis: [\n      \"otec-nebesky-jks017---mikulas-schneider-trnavsky\",\n      \"kriste-zo-srdca-celeho-jks272---mikulas-schneider-trnavsky\",\n      \"hospodine-vyslys-nas-jks527---mikulas-schneider-trnavsky\",\n    ],\n    composerBirthYear: 1881, // Mikuláš Schneider-Trnavský\n    genre: \"Classical\", // Classical music with folk influences\n    style: \"Folk-inspired, Sacred\", // Known for sacred and folk-inspired compositions\n    country: \"Slovakia\", // Schneider-Trnavský was Slovak\n  },\n  {\n    slug: \"mihail_krug\",\n    midis: [\"prihodite-v-moy-dom\", \"fraer---mihail-krug\", \"kolshchik\"],\n    composerBirthYear: 1962, // Mikhail Krug\n    genre: \"Russian chanson\", // Popular in Russian chanson genre\n    style: \"Chanson\", // Known for his distinctive style in Russian chanson\n    country: \"Russia\", // Mikhail Krug was Russian\n  },\n  {\n    slug: \"danny_elfman\",\n    midis: [\n      \"victor-s-piano-solo---danny-elfman---corpse-bride\",\n      \"the-simpsons-main-title-theme---piano\",\n      \"the-simpsons-main-theme---danny-elfman\",\n      \"everybody-knows\",\n      \"hong-kong-disneyland-mystic-manor-theme-remastered---danny-elfman\",\n      \"hero-s-theme---justice-league-2017---danny-elfman---piano-solo\",\n      \"opening-titles-from-edward-scissorhands\",\n      \"main-titles-from-doctor-strange-in-the-multiverse-of-madness-2022---danny-elfman\",\n      \"wednesday---piano-opening-theme---danny-elfman-wednesday---piano-opening-theme\",\n      \"alice-in-wonderland\",\n      \"this-is-halloween-short-version---danny-elfman\",\n    ],\n    composerBirthYear: 1953, // Danny Elfman\n    genre: \"Film Score\", // Known for film scores and movie soundtracks\n    style: \"Orchestral, Gothic, Pop\", // A blend of orchestral, gothic, and sometimes pop elements\n    country: \"USA\", // Danny Elfman is American\n  },\n  {\n    slug: \"george_bruns\",\n    midis: [\n      \"les-aristochats---george-bruns\",\n      \"overture-from-the-jungle-book---george-bruns-overture-the-jungle-book---george-bruns\",\n      \"yo-ho-a-pirate-s-life-for-me---george-bruns-xavier-atencio-yo-ho-a-pirates-life-for-me\",\n    ],\n    composerBirthYear: 1914, // George Bruns\n    genre: \"Film Score\", // Composer of film scores\n    style: \"Orchestral\", // Traditional orchestral film scoring\n    country: \"USA\", // George Bruns was American\n  },\n  {\n    slug: \"yu-peng_chen\",\n    midis: [\n      \"rex-incognito-zhongli-s-theme-from-genshin-impact---yu-peng-chen-hoyo-mix\",\n      \"ganyu-radiant-dreams-genshin-impact---yu-peng-chen\",\n      \"kamisato-dance-cg-bgm-for-piano---genshin-impact-2.0-inazuma---yu-peng-chen\",\n      \"ruu-s-song---yu-peng-chen\",\n      \"yoimiya-dazzling-lights-in-the-summer-genshin-impact---yu-peng-chen\",\n      \"moonlike-smile---yu-peng-chen\",\n      \"genshin-impact---inazuma-miscellany---yu-peng-chen-genshin-impact-2.0-livestream-piano-part-1\",\n    ],\n    composerBirthYear: 1984,\n    genre: \"Video Game Music\", // Composer for video games, primarily Genshin Impact\n    style: \"Orchestral, Cinematic\", // Cinematic style with orchestral elements\n    country: \"China\", // Yu-Peng Chen is Chinese\n  },\n  {\n    slug: \"udo_jurgens\",\n    midis: [\n      \"griechischer-wein---udo-jurgens-griechischer-wein---udo-jurgens\",\n      \"griechischer-wein---udo-jurgens\",\n      \"zehn-nach-elf-udo-jurgens-piano-cover\",\n      \"vielen-dank-fur-die-blumen---udo-jurgens\",\n      \"ein-ehrenwertes-haus---udo-jurgens\",\n    ],\n    composerBirthYear: 1934, // Udo Jürgens\n    genre: \"Schlager, Pop\", // Schlager is a key genre he worked in\n    style: \"Pop, Easy Listening\", // His style was easy listening and pop\n    country: \"Austria\", // Udo Jürgens was Austrian\n  },\n  {\n    slug: \"geoffrey_gregoire_kargmax\",\n    midis: [\n      \"oriental-breath\",\n      \"menuet-en-mib-mineur\",\n      \"espieglerie-grazioso-entre-violon-et-piano-mi-m\",\n    ],\n    composerBirthYear: undefined, // Not enough information to determine\n    genre: \"Classical\", // Classical genre\n    style: \"Baroque, Classical\", // Works in classical and baroque style\n    country: undefined, // Country of origin unclear\n  },\n  {\n    slug: \"emmerich_kalman\",\n    midis: [\n      \"the-tercet-from-die-bajadere-by-emmerich-kalman-tercet-iz-operetty-bayadera-i.-kalmana\",\n      \"grafin-mariza.-no-7a-komm-zigany---emmerich-kalman\",\n      \"die-zirkusprinzessin---emmerich-kalman-reminiszenz_nr.15a_die-zirkusprinzessin_emmerich-kalman\",\n      \"die-herzogin-von-chicago-nr.1a---emmerich-kalman\",\n      \"i-still-can-dream---emmerich-kalman\",\n      \"throw-me-a-rose---emmerich-kalman-throw-me-a-rose\",\n      \"grafin-mariza.-no-3-wenn-es-abend-wird---emmerich-kalman-wenn-es-abend-wird\",\n    ],\n    composerBirthYear: 1882, // Emmerich Kálmán\n    genre: \"Operetta\", // Known for operettas and light opera\n    style: \"Operetta, Classical\", // Works in operetta and classical styles\n    country: \"Hungary\", // Emmerich Kálmán was Hungarian\n  },\n  {\n    slug: \"vicenzo_piano\",\n    midis: [\n      \"winter---lucia-salieri-vicenzo-piano\",\n      \"letter-to-my-mother---vicenzo-piano\",\n      \"introspection---vicenzo-piano\",\n      \"day-off---vicenzo-piano\",\n      \"awakening---vicenzo-piano\",\n      \"farewell---vicenzo-piano\",\n      \"the-golden-waltz---vicenzo-piano\",\n      \"the-midnight-waltz---vicenzo-piano\",\n      \"a-dream-i-had---vicenzo-piano\",\n      \"interstellar---vicenzo-piano\",\n    ],\n    composerBirthYear: undefined, // Information about Vicenzo Piano's birth year is unclear\n    genre: \"New Age\", // New Age piano compositions\n    style: \"Instrumental, Classical Crossover\", // Instrumental with elements of classical crossover\n    country: undefined, // Country of origin unclear\n  },\n  {\n    slug: \"todd_owen\",\n    midis: [\n      \"leaves-upon-tess\",\n      \"at-the-klutzy-ball\",\n      \"backpack-quest\",\n      \"when-i-am-dust-in-arcadia\",\n      \"sincerest-betrayal\",\n    ],\n    composerBirthYear: undefined, // Not enough information available\n    genre: \"Indie, Classical\", // Indie-classical style music\n    style: \"Minimalism\", // Minimalism piano compositions\n    country: undefined, // Country not specified\n  },\n  {\n    slug: \"SIX\",\n    midis: [\n      \"heart-of-stone-from-six-the-musical\",\n      \"six-the-musical---broadway-six-medley\",\n    ],\n    composerBirthYear: 1984, // Toby Marlow & Lucy Moss (co-composers of Six)\n    genre: \"Musical Theatre\", // Broadway musical\n    style: \"Pop Musical\", // Pop-influenced musical style\n    country: \"UK\", // SIX originated in the UK\n  },\n  {\n    slug: \"xix_century_russian_romance\",\n    midis: [\n      \"no-ya-vas-vse-taki-lyublyu...-nevertheless-i-love-you...---russian-romance\",\n    ],\n  },\n  {\n    slug: \"johann_pachelbel\",\n    midis: [\n      \"Canon_in_D\",\n      \"johann-pachelbel-1653~1706---fugue-in-c-major-p.144\",\n      \"pachelbel-chaconne-in-f-minor\",\n    ],\n    composerBirthYear: 1653, // Johann Pachelbel's birth year\n    genre: \"Baroque\", // Pachelbel was a Baroque composer\n    style: \"Classical\", // Common style descriptor for Baroque music\n    country: \"Germany\", // Pachelbel was German\n  },\n  {\n    slug: \"bebu_silvetti\",\n    midis: [\n      \"mexico-de-noche\",\n      \"quiero-amanecer-con-alguien---daniela-romo\",\n      \"melissa---bebu-silvetti\", // canon in D\n      \"bebu-silvetti---piano\",\n    ],\n    composerBirthYear: 1939, // Bebu Silvetti's birth year\n    genre: \"Latin\", // Bebu Silvetti was known for Latin music\n    style: \"Pop\", // Known for Latin pop arrangements\n    country: \"Argentina\", // Silvetti was from Argentina\n  },\n  {\n    slug: \"c_austin_miles\",\n    midis: [\"in-the-garden---c.-austin-miles\"],\n    composerBirthYear: 1868, // C. Austin Miles' birth year (composer of \"In the Garden\")\n    genre: \"Gospel\", // \"In the Garden\" is a Christian hymn\n    style: \"Hymn\", // Hymnal style music\n    country: \"USA\", // C. Austin Miles was American\n  },\n  {\n    slug: \"mikhail_glinka\",\n    midis: [\n      \"glinka---the-lark-from-a-farewell-to-saint-petersburg-no.-10\",\n      \"ya-pomnyu-chudnoe-mgnovene\",\n      \"noktyurn-razluka-nocturne-la-separation---m.-i.-glinka-m.-i.-glinka-razluka\",\n    ],\n    composerBirthYear: 1804, // Glinka's birth year\n    genre: \"Romantic\", // Glinka was a Romantic composer\n    style: \"Classical\", // Typical descriptor for his style\n    country: \"Russia\", // Glinka was Russian\n  },\n  {\n    slug: \"jared_emerson-johnson\",\n    midis: [\n      \"sam-and-max-save-the-world-the-office---jared-emerson-johnson\",\n      \"cruisin---jared-emerson-johnson\",\n      \"prologue---the-wolf-among-us\",\n      \"crane-s-business-office-the-wolf-among-us\",\n    ],\n    composerBirthYear: 1980, // Approximate birth year\n    genre: \"Video Game\", // Known for video game music\n    style: \"Orchestral, Electronic\", // Blend of orchestral and electronic styles\n    country: \"USA\", // Emerson-Johnson is American\n  },\n  {\n    slug: \"david_wise\",\n    midis: [\n      \"gang-plank-galleon-donkey-kong-country\",\n      \"aquatic-ambience\",\n      \"jib-jig-donkey-kong-country-2\",\n    ],\n    composerBirthYear: 1967, // David Wise's birth year\n    genre: \"Video Game\", // Known for video game music, specifically Donkey Kong Country\n    style: \"Electronic, Orchestral\", // Known for a mix of electronic and orchestral elements in video game scores\n    country: \"UK\", // David Wise is from the UK\n  },\n  {\n    slug: \"andrew_prahlow\",\n    midis: [\n      \"andrew-prahlow---echoes-of-the-eye\",\n      \"andrew-prahlow---end-times\",\n      \"outer-wilds---main-theme---andrew-prahlow\",\n      \"outer-wilds---timber-hearth\",\n      \"andrew-prahlow---the-river\",\n    ],\n    composerBirthYear: 1988,\n    genre: \"Video Game\", // Known for video game music, particularly Outer Wilds\n    style: \"Ambient, Electronic\", // Prahlow's music is largely ambient with electronic influences\n    country: \"USA\", // Prahlow is American\n  },\n  {\n    slug: \"bear_mccreary\",\n    midis: [\n      \"the-walking-dead---theme-song-tv-series-2010---bear-mccreary\",\n      \"god-of-war-ragnarok---raeb-s-lament---bear-mccreary\",\n      \"nori-brandyfoot---lord-of-the-rings-the-rings-of-power\",\n      \"this-wandering-day---bear-mccreary---the-rings-of-power\",\n      \"percy-jackson-and-the-olympians---bear-mccreary-piano-solo\",\n      \"god-of-war-ragnarok---giantess-of-ironwood---bear-mccreary\",\n      \"leonardo-s-theme\",\n      \"the-witcher-blood-origin---the-black-rose---bear-mccreary\",\n      \"the-day-will-come---bear-mccreary\",\n      \"the-veil-of-time---outlander-score\",\n      \"agents-of-s.h.i.e.l.d.-theme\",\n    ],\n    composerBirthYear: 1979, // Bear McCreary's birth year\n    genre: \"Film, TV\", // Known for composing for films and TV series\n    style: \"Orchestral, Electronic, Rock\", // McCreary blends orchestral, electronic, and rock styles\n    country: \"USA\", // McCreary is American\n  },\n  {\n    slug: \"joe_hisaishi\",\n    midis: [\n      \"Merry_Go_Round_of_Life_Howls_Moving_Castle_Piano_Tutorial_\",\n      \"One_Summers_Day_Spirited_Away\",\n      \"Summer_Joe_Hisaishi\",\n      \"a-town-with-an-ocean-view--joe-hisaishi--natural-key-signature\",\n      \"joe-hisaishi---hana-bi\",\n      \"the-name-of-life-inochi-no-namae-joe-hisaishi\",\n    ],\n    composerBirthYear: 1950, // Joe Hisaishi's birth year\n    genre: \"Film, Anime\", // Known for composing music for films and anime\n    style: \"Orchestral\", // His compositions are often orchestral\n    country: \"Japan\", // Hisaishi is Japanese\n  },\n  {\n    // https://musescore.com/user/19710/sets/3559241\n    slug: \"pictures_at_the_exhibition\",\n    midis: [\n      \"promenade-i\",\n      \"gnomus\",\n      \"promenade-ii\",\n      \"il-vecchio-castello\",\n      \"promenade-iii\",\n      \"tuileries-dispute-d-enfants-apres-jeux\",\n      \"bydlo\",\n    ],\n    composerBirthYear: 1834, // Modest Mussorgsky's birth year (composer of Pictures at an Exhibition)\n    genre: \"Romantic\", // Mussorgsky was a Romantic composer\n    style: \"Classical\", // Typical descriptor for Romantic era music\n    country: \"Russia\", // Mussorgsky was Russian\n  },\n  {\n    // https://www.discogs.com/release/17759461-Various-%D0%A8%D0%B5%D0%B4%D0%B5%D0%B2%D1%80%D1%8B-%D0%9A%D0%BB%D0%B0%D1%81%D1%81%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B9-%D0%9C%D1%83%D0%B7%D1%8B%D0%BA%D0%B8-%D0%9A%D0%BE%D0%BB%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D1%8F-2-%D0%92%D1%8B%D0%BF%D1%83%D1%81%D0%BA-5\n    // https://musescore.com/user/12163676\n    slug: \"popular_classics\",\n    midis: [\n      \"valse---coppelia---piano-solo---arr.-leo-delibes\",\n      \"le-carnaval-des-animaux---aquarium\",\n      \"hungarian-march---hector-berlioz\",\n      \"hungarian-dance-no-5-in-g-minor\",\n      \"waltz-no.-11-in-g-flat-major-op.70-no.1---frederic-chopin\",\n      \"swan-lake-op.-20-act-iii-no.-20-danse-hongroise-hungarian-dance-czardas\",\n      \"funiculi-funicula\",\n      \"chopin---waltz-no.-1-in-d-flat-major-op.-64\", // harmonic prototype for Scott Joplin\n      \"grand-march-from-the-opera-aida-by-giuseppe-verdi\",\n      \"danse-macabre-opus-40-s.-555\",\n\n      \"lyapunov-reverie-du-soir-op.3\",\n      \"thema-aus-die-moldau---b-smetana-s-sitnikava\",\n      \"mein-vaterland-nr2-moldau---bedrich-smetana-for-piano-solo\",\n      \"fantasia-on-greensleeves---ralph-vaughan-williams\",\n      \"der-flohwalzer\",\n      \"stanley-myers---cavatina-arranged-for-piano\",\n      \"imslp181922-wima.ec84-oginski_polonez_a\",\n      \"Entry_of_the_Gladiators_-_Julius_Fuk_-_1897\",\n    ],\n    composerBirthYear: 1836,\n    style: \"Classical\",\n    genre: \"Classical, Romantic\",\n  },\n  {\n    slug: \"smetana\",\n    midis: [\n      \"thema-aus-die-moldau---b-smetana-s-sitnikava\",\n      \"bedrich-smetana---vltava-ma-vlast\",\n      \"mein-vaterland-nr2-moldau---bedrich-smetana-for-piano-solo\",\n    ],\n    composerBirthYear: 1824, // Bedřich Smetana (1824-1884)\n    genre: \"Romantic\", // Romantic era composer\n    style: \"Symphonic, Nationalism\", // Known for his symphonic poems and Czech nationalistic music\n    country: \"Czech Republic\", // Born in what is now the Czech Republic\n  },\n  {\n    slug: \"kelly_bailey\",\n    midis: [\n      \"triage-at-dawn\",\n      \"portal-radio-music-for-trombone\",\n      \"something-secret-steers-us\",\n    ],\n    composerBirthYear: 1967, // Kelly Bailey (born 1967)\n    genre: \"Video Game Music\", // Known for composing for video games, notably Portal and Half-Life\n    style: \"Electronic, Ambient\", // Often uses electronic and ambient styles in his compositions\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"arif_malikov\",\n    midis: [\n      \"sehrli-xalat-filminin-musiqisi---arif-m-likov\",\n      \"cix-yasil-duz---arif-m-likov-azerbaijan-folk-song\",\n      \"brilliant-dadasova---gull-rim\",\n    ],\n    composerBirthYear: 1933, // Arif Malikov (born 1933)\n    genre: \"Classical, Film Music\", // Known for classical compositions and film scores\n    style: \"Romantic, Nationalism\", // Romanticism with elements of national identity in his music\n    country: \"Azerbaijan\", // Azerbaijani composer\n  },\n  {\n    slug: \"jobim\",\n    midis: [\"wave---antonio-carlos-jobim-jazz-piano-solo\"],\n    composerBirthYear: 1927, // Antônio Carlos Jobim (1927–1994)\n    genre: \"Bossa Nova\", // Pioneer of the bossa nova genre\n    style: \"Jazz, Brazilian\", // Known for blending jazz with Brazilian rhythms\n    country: \"Brazil\", // Brazilian composer\n  },\n  {\n    slug: \"chico_buarque\",\n    midis: [\"atras_da_porta\"],\n    composerBirthYear: 1944, // Chico Buarque (born 1944)\n    genre: \"Bossa Nova, MPB\", // Brazilian popular music (MPB) and bossa nova\n    style: \"Samba, Bossa Nova\", // Combines samba and bossa nova in his compositions\n    country: \"Brazil\", // Brazilian composer\n  },\n  {\n    slug: \"borislav_slavov\",\n    midis: [\"down-by-the-river---borislav-slavov-baldur-s-gate-3-ost\"],\n    composerBirthYear: 1980, // Borislav Slavov (born 1980)\n    genre: \"Video Game Music\", // Composer for video game soundtracks like Baldur's Gate 3\n    style: \"Orchestral, Cinematic\", // Orchestral music with cinematic qualities\n    country: \"Bulgaria\", // Bulgarian composer\n  },\n  {\n    slug: \"takeshi_abo\",\n    midis: [\n      \"gate-of-steiner\",\n      \"suzuha-s-farewell-wakare---steins-gate\",\n      \"steins-gate-0---messenger-piano\",\n    ],\n    composerBirthYear: 1977, // Takeshi Abo (born 1977)\n    genre: \"Video Game Music\", // Known for composing music for visual novels and video games\n    style: \"Electronic, Orchestral\", // A mix of electronic and orchestral elements in his compositions\n    country: \"Japan\", // Japanese composer\n  },\n  {\n    slug: \"esther_abrami\",\n    midis: [\n      \"no.9-esther-s-waltz---esther-abrami\",\n      \"no.2-remembering-her---esther-abrami\",\n      \"no.1-a-minor-waltz---esther-abrami-no-1-a-minor-waltz\",\n    ],\n    composerBirthYear: 1995, // Esther Abrami (born 1995)\n    genre: \"Classical\", // Classical composer and violinist\n    style: \"Romantic\", // Often performs and composes in the Romantic style\n    country: \"France\", // French composer and violinist\n  },\n  {\n    slug: \"brawl_stars\",\n    midis: [\n      \"brawl-stars---menu-theme\",\n      \"brawl-stars-metropolis-theme\",\n      \"brawl-stars---footbrawl-theme\",\n      \"brawl-stars---win-theme-piano\",\n      \"brawl-stars---draw-theme\",\n      \"brawl-stars---lose-theme\",\n      \"brawl-stars-ost---battle-8\",\n      \"brawl-stars---brawl-o-ween-battle-2\",\n      \"brawl-star\",\n      \"brawl-stars-summer-of-monsters-battle-2-insane\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Video Game Music\",\n    style: \"Electronic, Orchestral\",\n    country: \"Finland\",\n  },\n  {\n    slug: \"65daysofstatic\",\n    midis: [\n      \"don-t-go-down-to-sorrow---65daysofstatic\",\n      \"no-man-s-sky-escape-velocity---65daysofstatic\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Post-Rock, Electronic\", // Known for their mix of post-rock and electronic music\n    style: \"Instrumental\", // Primarily instrumental music\n    country: \"UK\", // British band\n  },\n  {\n    slug: \"mogwai\",\n    midis: [\"take-me-somewhere-nice---mogwai\"],\n    composerBirthYear: 1976,\n    genre: \"Post-Rock\", // A pioneering band in the post-rock genre\n    style: \"Instrumental, Atmospheric\", // Known for their atmospheric instrumental compositions\n    country: \"Scotland\", // Scottish band\n  },\n  {\n    slug: \"dmitry_kabalevsky\",\n    midis: [\n      \"slow-waltz-24-pieces-for-children-op.39-no.-23---dmitry-kabalevsky\",\n      \"clowns---dmitri-kabalevsky\", // I~i mix\n      \"a-happy-outing-24-pieces-for-children-op.39-no.-24---dmitry-kabalevsky\",\n      \"animato-24-pieces-for-children-op.-39-no.-18---dmitri-kabalevsky\",\n    ],\n    composerBirthYear: 1904, // Dmitri Kabalevsky (1904–1987)\n    genre: \"Classical\", // Prominent 20th-century classical composer\n    style: \"Neoclassical\", // Neoclassical style, often with elements of folk music\n    country: \"Russia\", // Russian composer\n  },\n  {\n    slug: \"mattias_hakulinen\",\n    midis: [\n      \"nickelodeon-all-star-brawl-menu-theme---mattias-hakulinen\",\n      \"irken-armada-invasion-zim-s-theme---mattias-hakulinen-and-pontus-askbrink\",\n      \"i-m-thinking---ittle-dew\",\n      \"that-cold-place-2nd-floor---ittle-dew\",\n      \"princess-remedy---shark-of-omen-shore\",\n    ],\n    composerBirthYear: 1976,\n    genre: \"Video Game Music\", // Composed for various video games\n    style: \"Electronic, Orchestral\", // A mix of electronic and orchestral music\n    country: \"Finland\", // Finnish composer\n  },\n  {\n    slug: \"james_newton_howard\",\n    midis: [\n      \"the-hunger-games-mockingjay-pt.-2-piano-suite\",\n      \"running-on-raindrops-from-raya-and-the-last-dragon---james-newton-howard\",\n    ],\n    composerBirthYear: 1951, // James Newton Howard (born 1951)\n    genre: \"Film Music\", // Famous for film scores\n    style: \"Orchestral, Cinematic\", // Orchestral and cinematic compositions for films\n    country: \"USA\", // American composer\n  },\n  {\n    slug: \"claude_morgan\",\n    midis: [\n      \"el-bimbo---claude-morgan\",\n      \"la-balanga\",\n      \"tchoo-tchoo-hold-on-the-line\",\n    ],\n    composerBirthYear: 1947,\n    genre: \"Pop\",\n    style: \"Pop\",\n    country: \"Tunisia\",\n  },\n  {\n    slug: \"vladimir_dashkevich\",\n    midis: [\n      \"rekviem-iz-k-f-sobache-serdce---vladimir-dashkevich\",\n      \"tam-na-nevedomyh-dorozhkah---v.-dashkevich\",\n      \"irene-adler-waltz----v.-dashkevich\",\n      \"marsh-krasnoarmeycev---vladimir-dashkevich-perelozhenie-dlya-fortepiano-i-golosa\",\n      \"uvertyura---v.-dashkevich\",\n      \"song-of-the-sea-pisnya-pro-more---v.-dashkevich\",\n      \"surovye-gody-uhodyat-iz-k-f-sobache-serdce---vladimir-dashkevich-yuriy-kim\",\n    ],\n    composerBirthYear: 1938, // Vladimir Dashkevich (1938–2019)\n    genre: \"Film Music\", // Known for composing film scores, particularly for Soviet films\n    style: \"Orchestral, Cinematic\", // His music is often cinematic and orchestral in style\n    country: \"Russia\", // Russian composer\n  },\n  {\n    slug: \"singles\",\n    midis: [\n      \"catherine-howard-s-fate---blackmore-s-night\",\n      \"moskau---dschinghis-khan-moskau\",\n    ],\n    // Not enough info to provide composerBirthYear, genre, style, and country\n  },\n  {\n    slug: \"anton_rubinstein\",\n    midis: [\n      \"melody-in-f-op.-3-no.-1---anton-rubinstein\",\n      \"morceau-d-anton-rubinstein-toreador-et-andalouse\",\n      \"melody-in-b-op.-3-no.-2---anton-rubinstein\",\n    ],\n    composerBirthYear: 1829, // Anton Rubinstein (1829–1894)\n    genre: \"Classical\", // Classical composer and pianist\n    style: \"Romantic\", // Romantic era composer\n    country: \"Russia\", // Russian composer\n  },\n  {\n    slug: \"russian_singles\",\n    midis: [\n      \"belym-snegom---muzyka-e-rodygina-belym-snegom---muzyka-e.-rodygina\",\n      \"beri_shinel-_poshli_domoy\",\n      \"i-hear-the-noise-of-birches...---konstantin-orbelyan\",\n    ],\n    composerBirthYear: 1950, // Konstantin Orbelyan was born in 1950\n    country: \"Russia\",\n  },\n  {\n    slug: \"fleur\",\n    midis: [\n      \"formalin-formalin---flyour\",\n      \"shelkopryad---flyour\",\n      \"teplye-koty---flyour\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Electronic\", // Based on the style of the artist\n    style: \"Ambient\", // Ambient electronic style\n    country: \"Russia\", // Assuming the artist is from Russia\n  },\n  {\n    slug: \"manisha_vremeni\",\n    midis: [\n      \"moy-drug---mashina-vremeni\",\n      \"odnazhdy-mir-prognetsya-pod-nas.\",\n      \"she-walks-through-life-a-smile-on-her-face----a.-makarevich\",\n    ],\n    composerBirthYear: 1949, // Andrei Makarevich (composer of Mashina Vremeni) was born in 1949\n    genre: \"Rock\", // Russian rock\n    style: \"Progressive Rock\", // Progressive elements in Mashina Vremeni\n    country: \"Russia\",\n  },\n  {\n    slug: \"melnitsa\",\n    midis: [\n      \"melnica---korolevna\",\n      \"melnica---doroga-sna\",\n      \"melnica----nevesta-poloza\",\n    ],\n    composerBirthYear: 1976,\n    genre: \"Folk Rock\", // Folk-rock style\n    style: \"Celtic Folk\", // Heavy influence of folk traditions\n    country: \"Russia\",\n  },\n  {\n    slug: \"igor_kornelyuk\",\n    midis: [\n      \"banditskiy-peterburg-gorod-kotorogo-net-fortepiano-a-town-that-does-not-exist\",\n      \"syuyita-mayster-ta-margarita---i.-kornelyuk\",\n    ],\n    composerBirthYear: 1961, // Igor Kornelyuk was born in 1961\n    genre: \"Classical\", // Mostly classical and cinematic music\n    style: \"Cinematic\", // Often composes for films and TV\n    country: \"Russia\",\n  },\n  {\n    slug: \"krematoriy\",\n    midis: [\"katmandu-polnaya-versiya\", \"musornyy-veter-gr.-krematoriy\"],\n    composerBirthYear: 1960,\n    genre: \"Rock\", // Russian rock\n    style: \"Post-punk\", // Post-punk and alternative rock elements\n    country: \"Russia\",\n  },\n  {\n    slug: \"wang_jian\",\n    midis: [\"fei-niao-he-chan-ren-ran\"],\n    composerBirthYear: 1973, // Wang Jian, a Chinese composer, born in 1973\n    genre: \"Classical\", // Chinese classical music\n    style: \"Traditional\", // Traditional Chinese music\n    country: \"China\",\n  },\n  {\n    slug: \"chinese_single_pieces\",\n    midis: [\n      \"spring-festival-overture-chun-jie-xu-qu---li-huan-zhi-piano-cover\",\n      \"cai-yun-zhui-yue-colorful-clouds-chasing-the-moon--piano-solo\", // ren guang\n    ],\n    genre: \"Classical\", // Classical Chinese music\n    style: \"Traditional\", // Traditional Chinese styles\n    country: \"China\",\n  },\n  {\n    slug: \"cornelius_gurlitt\",\n    midis: [\n      \"night-journey---cornelius-gurlitt\",\n      \"little-waltz---gurlitt-op.-205-no-10\",\n      \"gurlitt-cornelius---sonatina-in-a-minor-op.-76-no.-5-3rd-mvmt\",\n    ],\n    composerBirthYear: 1823, // Cornelius Gurlitt was born in 1823\n    genre: \"Classical\", // 19th-century German classical\n    style: \"Romantic\", // Romantic period style\n    country: \"Germany\",\n  },\n  {\n    slug: \"clara_schumann\",\n    midis: [\n      \"schumann-clara---lieder-op.12-no.4---liebst-du-um-schonheit\",\n      \"clara-schumann--notturno\",\n    ],\n    composerBirthYear: 1819, // Clara Schumann was born in 1819\n    genre: \"Classical\", // Classical, Romantic music\n    style: \"Romantic\", // Romantic period\n    country: \"Germany\",\n  },\n  {\n    slug: \"schumann\",\n    midis: [\"schumann-carnaval---no.-12-chopin-piano-solo\"],\n    composerBirthYear: 1810, // Robert Schumann was born in 1810\n    genre: \"Classical\", // Classical, Romantic music\n    style: \"Romantic\", // Romantic period\n    country: \"Germany\",\n  },\n  {\n    slug: \"norbert_schultze\",\n    midis: [\n      \"lili-marlene---norbert-schultz\",\n      \"von-finnland-bis-zum-schwarzen-meer\",\n      \"das-lied-vom-deutschen-u-boot-mann\",\n    ],\n    composerBirthYear: 1911, // Norbert Schultze was born in 1911\n    genre: \"Film Music\", // German film composer\n    style: \"Military\", // Often associated with wartime themes\n    country: \"Germany\",\n  },\n  {\n    slug: \"boban_markovic\",\n    midis: [\n      \"majstorski-cocek---boban-markovic\",\n      \"beli-dvor---boban-markovic\",\n      \"za-beograd---boban-markovic\",\n      \"zivot-cigana---boban-markovic\",\n      \"ciganin-kuca---boban-markovic\",\n    ],\n    composerBirthYear: 1964, // Boban Marković was born in 1964\n    genre: \"Balkan Brass\", // Traditional Balkan brass\n    style: \"Balkan\", // Traditional Serbian brass band music\n    country: \"Serbia\",\n  },\n  {\n    slug: \"thomas_attwood\",\n    midis: [\n      \"allegro---first-movement-from-sonatina-no.-1-in-g-trinity-grade-2-piano\",\n    ],\n    composerBirthYear: 1765, // Thomas Attwood was born in 1765\n    genre: \"Classical\", // Classical period music\n    style: \"Classical\", // Classical style\n    country: \"England\",\n  },\n  {\n    slug: \"nat_king_cole\",\n    midis: [\"nat-king-cole---easy-listening-blues-transcription\"],\n    composerBirthYear: 1919, // Nat King Cole was born in 1919\n    genre: \"Jazz\", // Jazz, Swing\n    style: \"Swing\", // Swing jazz style\n    country: \"USA\",\n  },\n  {\n    slug: \"martin_kratochwil\",\n    midis: [\n      \"potato-blues\",\n      \"sour-apple-blues\",\n      \"lonesome-broccoli-blues-_-easy-piano\",\n    ],\n    composerBirthYear: 1960,\n    genre: \"Blues\", // Blues music\n    style: \"Jazz Blues\", // Influences of jazz in blues\n    country: \"USA\", // Based on his genre\n  },\n  {\n    slug: \"hitoshi_sakimoto\",\n    midis: [\n      \"qiao-shang-nozhan-i-battle-on-the-bridge---final-fantasy-tactics-ps1---hitoshi-sakimoto\",\n      \"randam-waltz---final-fantasy-tactics-ps1---hitoshi-sakimoto\",\n    ],\n    composerBirthYear: 1969,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"glenn_stafford\",\n    midis: [\n      \"starcraft-2---wings-of-liberty---piano-solo\",\n      \"warcraft-2-human-1---by-glenn-stafford-arranged-by-gori-fater\",\n      \"warcraft-ii---orcs-betrayal\", // bvi in a functional context\n      \"brood-war-aria---glenn-stafford-and-neal-acree\",\n      \"warcraft-ii---humans-beyond-the-dark-portal\",\n      \"warcraft-2-intro---glenn-stafford\",\n      \"drustvar\",\n      \"grizzly-hills-wow\",\n      \"warcraft-iii---orc-theme-old-school-battle-net-theme\",\n    ],\n    composerBirthYear: 1969, // Glenn Stafford was born in 1969\n    genre: \"Video Game Music\", // Music for video games\n    style: \"Cinematic\", // Often cinematic in nature\n    country: \"USA\",\n  },\n  {\n    slug: \"ludwig_goransson\",\n    midis: [\n      \"can-you-hear-the-music---ludwig-goransson-from-oppenheimer\",\n      \"the-book-of-boba-fett---main-title-theme---ludwig-goransson---piano-version\",\n      \"venom-theme\",\n      \"wakanda-forever-from-wakanda-forever---ludwig-goransson\",\n      \"main-theme---black-panther---ludwig-goransson---piano-solo\",\n      \"foils---ludwig-goransson-from-tenet\",\n      \"the-mandalorian---main-theme\",\n      \"greendale-is-where-i-belong---ludwig-goransson---community\",\n    ],\n    composerBirthYear: 1982, // Ludwig Göransson was born in 1982\n    genre: \"Film Music\", // Film music composer\n    style: \"Cinematic\", // Film score style\n    country: \"Sweden\",\n  },\n  {\n    slug: \"brian_tyler\",\n    midis: [\n      \"formula-1-theme---brian-tyler\",\n      \"peaches-from-super-mario-bros-movie-for-violin---brian-tyler-jack-blackman\",\n      \"theme-from-rambo-brian-tyler\",\n    ],\n    composerBirthYear: 1972, // Brian Tyler was born in 1972\n    genre: \"Film Music\", // Film music composer\n    style: \"Cinematic\", // Film score style\n    country: \"USA\",\n  },\n  {\n    slug: \"miki_higashino_sukoiden_2\",\n    midis: [\"reminiscence---suikoden-2\", \"two-rivers---suikoden-2\"],\n    composerBirthYear: 1960,\n    genre: \"Video Game Music\", // Music for video games\n    style: \"Orchestral\", // Orchestral soundtrack\n    country: \"Japan\",\n  },\n  {\n    slug: \"rob_hubbard\",\n    midis: [\"monty-on-the-run\"],\n    composerBirthYear: 1955,\n    genre: \"Video Game Music\", // Music for video games\n    style: \"Chiptune\", // Early video game music style\n    country: \"UK\",\n  },\n  {\n    slug: \"jeremy_soule\",\n    midis: [\n      \"harry-potter-ii-game-main-menu---jeremy-soule\",\n      \"diagon-alley---jeremy-soule-from-harry-potter-and-the-chamber-of-secrets---solo-piano-arr.\",\n      \"happy-hogwarts-from-harry-potter-and-the-philosopher-s-stone\",\n      \"call-of-magic-nerevar-rising---the-elder-scrolls-morrowind-jeremy-soule\",\n      \"dragonborn---skyrim-theme-song-piano-solo\",\n      \"secunda-the-elder-scrolls-v-skyrim\",\n      \"fear-not-this-night-guild-wars-2-piano-version\",\n      \"guild-wars-2-trailer---jeremy-soule\",\n      \"guild-wars-factions-theme\",\n      \"ashford-abbey---jeremy-soule-guild-wars\",\n      \"overture-from-guild-wars-2\",\n    ],\n    composerBirthYear: 1975, // Jeremy Soule was born in 1975\n    genre: \"Video Game Music\", // Music for video games\n    style: \"Cinematic\", // Often cinematic and orchestral\n    country: \"USA\",\n  },\n  {\n    slug: \"natalia_lafourcade\",\n    midis: [\"soledad-y-el-mar\", \"mi-tierra-veracruzana---natalia-lafourcade\"],\n    composerBirthYear: 1984,\n    genre: \"Pop\", // Latin pop\n    style: \"Folk\", // Latin folk influence\n    country: \"Mexico\", // Mexican artist\n  },\n  {\n    slug: \"handel\",\n    midis: [\n      \"minuet-from-music-for-the-royal-fireworks---georg-friedrich-handel\",\n      \"gavotte_in_g_major_hwv_491_handel_george_frideric\",\n      \"passacaglia---handel-halvorsen\",\n      \"water-music-suite-in-d-major-ii---alla-hornpipe-handel\",\n    ],\n    composerBirthYear: 1685, // Georg Friedrich Handel was born in 1685\n    genre: \"Classical\", // Baroque period\n    style: \"Baroque\", // Baroque style\n    country: \"Germany\",\n  },\n  {\n    slug: \"bo_burnham\",\n    midis: [\"welcome-to-the-internet---bo-burnham-s-inside\"],\n    composerBirthYear: 1990,\n    genre: \"Comedy\", // Comedy music and satire\n    style: \"Satirical\", // Satirical comedy\n    country: \"USA\",\n  },\n  {\n    slug: \"lin-manuel_miranda\",\n    midis: [\n      \"We_Dont_Talk_about_Bruno\",\n      \"waiting-on-a-miracle-from-encanto---lin-manuel-miranda\",\n      \"keep-the-beat---lin-manuel-miranda-keep-the-beat\",\n      \"surface-pressure-disney-s-encanto\",\n      \"surface-pressure---encanto\",\n      \"moana-lin-manuel-miranda---you-re-welcome-piano-solo\",\n      \"how-far-i-ll-go-~-moana-ost\",\n      \"dos-oruguitas---lin-manuel-miranda-by-adonay-guedes\",\n      \"where-you-are-from-moana---lin-manuel-miranda-where-you-are-easy\",\n      \"aaron-burr-sir\",\n      \"lauren-s-interlude\",\n      \"the-family-madrigal-from-encanto---lin-manuel-miranda-simplified-for-kids-beginners-piano\",\n    ],\n    composerBirthYear: 1980, // Lin-Manuel Miranda was born in 1980\n    genre: \"Musical Theatre\", // Musical theatre music\n    style: \"Broadway\", // Broadway-style musical compositions\n    country: \"USA\",\n  },\n  {\n    slug: \"three_part_harmony\",\n    midis: [\"yksin-op.29b-no.4---toivo-kuula\", \"ekialde-dantza\"],\n  },\n  {\n    slug: \"dario_marianelli\",\n    midis: [\n      \"Dawn_Pride_and_Prejudice\",\n      \"liz-on-top-of-the-world\",\n      \"your-hands-are-cold-from-pride-and-prejudice-2005-soundtrack\",\n    ],\n    composerBirthYear: 1963, // Dario Marianelli was born in 1963\n    genre: \"Film Score\", // Known for composing film scores\n    style: \"Orchestral\", // Marianelli is recognized for his orchestral and emotive compositions\n    country: \"Italy\", // Italian composer\n  },\n  {\n    slug: \"enya\",\n    midis: [\n      \"watermark-enya\",\n      \"caribbean-blue---enya\",\n      \"a-day-without-rain---enya\",\n    ],\n    composerBirthYear: 1961, // Enya was born in 1961\n    genre: \"New Age\", // Enya is a prominent artist in the New Age genre\n    style: \"Ambient, Celtic\", // Known for ambient and Celtic musical influences\n    country: \"Ireland\", // Enya is from Ireland\n  },\n  {\n    slug: \"charles_villiers_stanford\",\n    midis: [\n      \"stanford-charles-villiers---the-blue-bird\",\n      \"when-mary-thro-the-garden-went---charles-villiers-stanford\",\n    ],\n    composerBirthYear: 1852, // Born in 1852\n    genre: \"Classical\", // Stanford was a classical composer\n    style: \"Romantic\", // His work is typically associated with the Romantic era\n    country: \"United Kingdom\", // Stanford was English\n  },\n  {\n    slug: \"2002_band\",\n    midis: [\"suddenly-yours---2002-band\", \"we-meet-again---2002-band\"],\n    composerBirthYear: undefined, // No clear composer is associated with the band\n    genre: \"Pop\", // The 2002 band is known for pop music\n    style: \"Soft Pop\", // Their music has a soft pop style\n    country: \"South Korea\", // 2002 was a South Korean band\n  },\n  {\n    slug: \"lyle_mays\",\n    midis: [\"lyle-mays-chorinho-arr.-for-solo-piano\"],\n    composerBirthYear: 1949, // Born in 1949\n    genre: \"Jazz\", // Lyle Mays was a jazz composer and pianist\n    style: \"Jazz Fusion\", // Known for his fusion of jazz with other styles\n    country: \"USA\", // Lyle Mays was American\n  },\n  {\n    slug: \"poulenc\",\n    midis: [\"poulenc-melancolie-piano-solo\"],\n    composerBirthYear: 1899, // Born in 1899\n    genre: \"Classical\", // Poulenc was a classical composer\n    style: \"20th Century\", // His works are characterized by 20th-century classical music styles\n    country: \"France\", // Poulenc was French\n  },\n  {\n    slug: \"chinese\",\n    midis: [\"han-gong-chun-li-chun-ri---song-yu-ning\", \"shan-zhi-gao---song\"],\n    composerBirthYear: undefined, // The specific composer is unclear for these tracks\n    genre: \"Traditional Chinese\", // The music is traditional Chinese\n    style: \"Folk\", // Folk music style with traditional Chinese instruments\n    country: \"China\", // Likely from China, given the titles\n  },\n  {\n    slug: \"karel_svoboda\",\n    midis: [\n      \"drei-haselnusse-fur-aschenbrodel---karel-svoboda-by-jacroby\",\n      \"n-a-v-s-t-e-v-n-i-c-i\",\n    ],\n    composerBirthYear: 1938, // Born in 1938\n    genre: \"Film Score\", // Known for composing film scores\n    style: \"Orchestral\", // His film scores are typically orchestral\n    country: \"Czech Republic\", // Svoboda was Czech\n  },\n  {\n    slug: \"benjamin_wallfisch\",\n    midis: [\n      \"a-cure-for-wellness---benjamin-wallfisch\",\n      \"volmer-s-lab-a-cure-for-wellness\",\n      \"magnificent-isn-t-it-a-cure-for-wellness\",\n      \"blade-runner\",\n      \"we-can-fix-this-the-flash-movie.-2023-ost\",\n    ],\n    composerBirthYear: 1976, // Born in 1976\n    genre: \"Film Score\", // Known for composing film scores\n    style: \"Modern Orchestral\", // Modern orchestral style with electronic elements\n    country: \"United Kingdom\", // Benjamin Wallfisch is from the UK\n  },\n  {\n    slug: \"schubert\",\n    midis: [\n      \"moments_musicaux_d_780_no_3_in_f_minor\",\n      // \"moments_musicaux_d_780_op_94_no_3_franz_schubert\",\n      \"schubert-impromptu-op.-90-no.-4\",\n      \"serenade---schubert\",\n      \"schubert-liszt---standchen\",\n      \"schubert-waltz-in-b-minor-op.-18-no.-6-d.145\",\n      \"schubert-waltz-in-bb---d.783-op.-33-no.-7\",\n      \"schubert-waltz-in-a-minor-d.924-op.-91a-no.-9\",\n      \"waltz-ndeg-7---op.-18---d.145\",\n      \"12-graz-waltzes-ndeg3---schubert\",\n      \"franz-schubert---waltz-in-b-major-d.-145-nr2\",\n      // \"ecossaise-no-3-d.529---franz-schubert\",\n      \"schubert-ecossaise-no.-4-op-18-d.145\",\n      \"schubert-ecossaise-no-8-op-18-d.145\",\n      \"ecossaise-in-c-major-no-8-d.299---franz-schubert\",\n      \"schubert-german-dance-d.783-op.-33-no.-2\",\n      \"german-dance-and-ecossaise-d.643---franz-schubert\",\n      \"schubert---sonata-in-a-op.120-d.664-movement-i\",\n    ],\n    composerBirthYear: 1797, // Franz Schubert was born in 1797\n    genre: \"Classical\", // Schubert is one of the most important composers of the Classical era\n    style: \"Romantic\", // Although his early works were Classical, Schubert's later works contributed significantly to the Romantic era\n    country: \"Austria\", // Schubert was Austrian\n  },\n\n  {\n    slug: \"brad_mehldau\",\n    midis: [\"anthropology---brad-mehldau\"],\n    composerBirthYear: 1970, // Brad Mehldau was born in 1970\n    genre: \"Jazz\", // Brad Mehldau is a jazz pianist\n    style: \"Post-bop, Contemporary Jazz\", // Known for blending post-bop with modern jazz styles\n    country: \"USA\", // Born in the United States\n  },\n  {\n    slug: \"aziza_mustafa_zadeh\",\n    midis: [\n      \"aziza_mustafa_zadeh_dance_of_fire_2010_live_trio\",\n      \"aziza_mustafa_zadeh_dance_of_fire_nicola_morali_solo_piano_cover\",\n      \"always---aziza-mustafa-zadeh\",\n    ],\n    composerBirthYear: 1969, // Aziza Mustafa Zadeh was born in 1969\n    genre: \"Jazz\", // She is a jazz pianist and composer\n    style: \"Fusion, Avant-garde Jazz\", // Known for jazz fusion and avant-garde styles\n    country: \"Azerbaijan\", // Born in Baku, Azerbaijan\n  },\n  {\n    // https://musescore.com/user/24069/sets/5098783\n    slug: \"dvorak\",\n    midis: [\n      \"Symphony_No9_From_The_New_World_1st_movement_for_piano_solo_\",\n      \"Symphony_No9__From_The_New_World__2nd_movement\",\n      \"Symphony_No.9_From_The_New_World_3rd_movement_Scherzo\",\n      \"Symphony_No9_From_The_New_World_4th_movement__Z_Novho_Svta\",\n      \"antonin-dvorak-serenade-for-string-orchestra-in-e-major-op.22-ii.-tempo-di-valse\",\n    ],\n    composerBirthYear: 1841, // Antonín Dvořák was born in 1841\n    genre: \"Classical\", // He was a classical composer\n    style: \"Romantic\", // Part of the Romantic movement\n    country: \"Czech Republic\", // Born in what is now the Czech Republic\n  },\n  {\n    // https://musescore.com/user/19710/sets\n    slug: \"beethoven\",\n    midis: [\n      \"beethoven---sonata-in-f-minor-op.2-no.1-movement-i\",\n      \"Sonate_No._14_Moonlight_1st_Movement\",\n      \"moonlight_sonata_ludwig_van_beethoven_piano_solo\",\n      \"Sonate_No._14_Moonlight_3rd_Movement\",\n      \"sonate-no.-17-tempest-3rd-movement\",\n      \"sonatina_in_g_beethoven_anh_5_no_1_beethoven\",\n      \"bagatelle_in_g_minor_op_119_no_1_ludwig_van_beethoven_16_07_1770_26_03_1827_piano_solo\",\n      \"beethoven-symphony-no.-5-1st-movement-piano-solo\",\n      \"beethoven_sonata_in_f_minor_op_2_no_1_movement_i\",\n      \"beethoven_sonata_in_g_op_14_no_2_movement_i\",\n      \"beethoven_sonate_5_1st\",\n      \"beethoven_trio_for_clarinet_cello_and_piano_no_4_op_11_2nd_movement\",\n      \"Fr_Elise\",\n      \"piano_sonata_no_3_in_c_major_op_2_no_3_ludwig_van_beethoven_piano_sonata_no_3_in_c_major_op_2_no_3_complete\",\n    ],\n    composerBirthYear: 1770, // Ludwig van Beethoven was born in 1770\n    genre: \"Classical\", // Beethoven bridged the Classical and Romantic eras, but is primarily associated with Classical music\n    style: \"Romantic\", // Beethoven's later works, particularly from his middle period onward, are often considered Romantic\n    country: \"Germany\", // Beethoven was German (born in Bonn, which was part of Electorate of Cologne, now Germany)\n  },\n  {\n    slug: \"einaudi\",\n    midis: [\n      \"the_earth_prelude_ludovico_einaudi_piano_solo\",\n      \"ludovico-einaudi-una-mattina\",\n    ],\n    composerBirthYear: 1955, // Ludovico Einaudi was born in 1955\n    genre: \"Classical\", // Modern classical music\n    style: \"Minimalism, Contemporary Classical\", // Known for Minimalism and contemporary classical style\n    country: \"Italy\", // Born in Italy\n  },\n  {\n    slug: \"horo\",\n    midis: [\n      \"aytoska-rchenica---unknown-aitoska_rachenitsa\",\n      \"backovsko-horo\",\n      \"bakovsko-horo\",\n      \"bavno-horo\",\n      \"bistrica-kopanica\",\n      \"bistrishka-kopanica\",\n      \"bistrishka-kopanitsa\",\n      \"blagoevgradsko-horo\",\n      \"bregovsko-horo-1\",\n      \"bregovsko-horo-2\",\n      \"brestaska-racenica---misc-traditional-brestaska-racenica\",\n      \"bulcenska-racenica\",\n      \"bulchenska-rachenitsa\",\n      \"cecovoto-horo-9-8\",\n      \"celebinsko-horo\",\n      \"cerovska-kopanica\",\n      \"cesto-horo\",\n      \"cetvorno-horo\",\n      \"cetvorno-horo-2\",\n      \"cetvorno-horo-4\",\n      \"chetvorno-horo---sofia\",\n      \"chetvorno-shopsko-horo\",\n      \"chtvorno-horo---misc-traditional\",\n      \"daichovo-horo\",\n      \"daichovo-horo---viacheslav-semyonov\",\n      \"daichovo-horo-2\",\n      \"daichovo-horo-3\",\n      \"daichovo_horo_1\",\n      \"denjovo-horo\",\n      \"devetorka-samokovsko-horo\",\n      \"drjanovska-racenica-ii\",\n      \"dudino-horo---boris-karlov\",\n      \"dunavsko-horo---diko-iliev-diko-iliev\",\n      \"eleno-mome-elenino-horo\",\n      \"elenska-racenica\",\n      \"elenska-racenica---misc-traditional-elenska-racenica\",\n      \"gankino_horo\",\n      \"gankino_horo_traditionnel_bulgare\",\n      \"gjusevska-racenica\",\n      \"gr-uan-vcarsko-horo\",\n      \"gr-uan-vcarsko-horo-1\",\n      \"gr-uan-vcarsko-horo-2\",\n      \"hanukah-in-santa-monica---tom-lehrer-8bbe875464c17f6faa9a162192557cf1a17a257d-2\",\n      \"ivailovsko-horo-in-c\",\n      \"kemensko-horo\",\n      \"kojovo-horo\",\n      \"kolev-s-kopanitsa\",\n      \"koljovo-horo\",\n      \"konushenska-rchenica---konushenski-orkestr\",\n      \"kopanica\",\n      \"kopanitsa\",\n      \"kopanitsa-a-la-turka\",\n      \"krajdunavsko-horo\",\n      \"krivo-horo\",\n      \"krivo_sadovsko_horo\",\n      \"kulsko-horo\",\n      \"kulsko-horo-1\",\n      \"kulsko-horo-2\",\n      \"lazarsko-horo\",\n      \"lazarsko-horo-1\",\n      \"lomka-po-lomka-kasapsko-horo\",\n      \"malisevsko-horo\",\n      \"mihaiylovgradsko-horo\",\n      \"misino-horo\",\n      \"momino-horo\",\n      \"mr-zvonsky-s-kopanica\",\n      \"novoselsko-kopanica\",\n      \"paidushko-choro\",\n      \"paidushko-horo\",\n      \"paidushko-horo-2\",\n      \"paidusko-horo\",\n      \"pajdusko-horo\",\n      \"pamela-s-ruchenitsa\",\n      \"pasard-vzijska-kopanica\",\n      \"pernishka-rchenica---ibro-lolov\",\n      \"pravo-horo-version-2\",\n      \"rachenica-for-three\",\n      \"rachenitsa\",\n      \"rachenitsa-1\",\n      \"rachenitsa-2\",\n      \"radino-horo\",\n      \"radomirsko-horo\",\n      \"sandansko-horo\",\n      \"sandansko-horo-1\",\n      \"satovcensko-horo\",\n      \"serbian-racenica\",\n      \"severnyashka-racenica\",\n      \"seymour_blagoevgradsko_horo\",\n      \"seymour_cekurjankino_horo\",\n      \"seymour_drjanovska_rachenica\",\n      \"seymour_elenska_rachenica\",\n      \"seymour_gjusevska_rachenica\",\n      \"shopska-rachenitsa\",\n      \"sitno-krajdunavsko-horo\",\n      \"smeceno_horo\",\n      \"starceska-racenica\",\n      \"suleman-s-kopanitsa\",\n      \"svatbarska-racenica---bulgarien\",\n      \"svatbarska-rachenitsa\",\n      \"svornato-horo\",\n      \"traditional-music---petrunino-horo\",\n      \"traditional_music_plevensko_daichovo_horo\",\n      \"trakijska-rachenica\",\n      \"trakiyska-rchenica\",\n      \"varnensko-horo\",\n      \"vcekurjankino-horo\",\n      \"vcerkesko-horo-3\",\n      \"veselinovo-horo\",\n      \"veselinovo-horo-1\",\n      \"veselinovo-horo-2\",\n      \"veselinovo-horo-3\",\n      \"yareshko-horo\",\n      \"sandansko-oro\",\n      \"seymour_jambolsko_pajdushko\",\n      \"seymour_paidushko\",\n      \"seymour_pajdusko_oro\",\n      \"bavno-oro\",\n      \"dospatsko-oro---misc-tunes\",\n      \"gankino\",\n      \"gankino-2\",\n      \"kasapsko\",\n      \"maricensko\",\n      \"chetvorno_shopsko_fixed\",\n      \"daichovo-chara\",\n      \"daichovo-hora\",\n    ],\n    country: \"Bulgaria\",\n  },\n  {\n    slug: \"franz_xaver_gruber\",\n    midis: [\"stille-nacht-heilige-nacht-the-1818-original-silent-night\"],\n    composerBirthYear: 1787,\n    country: \"Austria\",\n    genre: \"Classical\",\n    style: \"Romantic\",\n  },\n  {\n    slug: \"r_bryan_anthony\",\n    midis: [\n      \"away-in-a-manger-by-william-j.-kirkpatrick-arranged-by-r-bryan-anthony\",\n      \"silent-night-holy-night-piano-solo---arranged-by-r-bryan-anthony\",\n    ],\n    composerBirthYear: 1980,\n    style: \"Modern Jazz\",\n  },\n  {\n    slug: \"ernest_shand\",\n    midis: [\n      \"andante-espressivo-op-60---shand-ernest\",\n      \"songes-d-ete-op-95---shand-ernest\",\n    ],\n    composerBirthYear: 1868,\n    genre: \"Classical Guitar\",\n    country: \"UK\",\n  },\n  {\n    slug: \"william_j_kirkpatrick\",\n    midis: [\n      \"away-in-a-manger-cradle-song\",\n      \"crown-him-with-many-crowns-kirkpatrick---wm.-j.-kirkpatrick\",\n    ],\n    composerBirthYear: 1838,\n    country: \"Ireland, USA\",\n    genre: \"Classical\",\n    style: \"Hymn\",\n  },\n  {\n    slug: \"richard_clayderman\",\n    midis: [\n      \"ballade-pour-adeline---richard-clayderman\",\n      \"moon-tango---r.-clayderman\",\n      \"les-fleurs-sauvages---richard-clayderman\",\n      \"souvenirs-d-enfance---richard-clayderman\",\n      \"concerto-des-etoiles---richard-clayderman\",\n    ],\n    composerBirthYear: 1953, // Richard Clayderman was born in 1953\n    genre: \"Easy Listening, Classical Crossover\", // Known for his romantic and easy-listening style\n    style: \"Romantic, Piano\", // Often performs in a romantic piano style\n    country: \"France\", // Born in Paris, France\n  },\n  {\n    slug: \"marc_streitenfeld\",\n    midis: [\n      \"honoring-the-dead---marc-streitenfeld\",\n      \"american-gangster-frank-lucas---marc-streitenfeld\",\n      \"the-grey\",\n    ],\n    composerBirthYear: 1968, // Marc Streitenfeld was born in 1968\n    genre: \"Film Score\", // Known for composing film scores\n    style: \"Orchestral, Cinematic\", // His style is orchestral and cinematic\n    country: \"Germany\", // Born in Frankfurt, Germany\n  },\n  {\n    slug: \"brian_eno\",\n    midis: [\n      \"music_for_airports_1_1-eno\",\n      \"by-this-river---brian-eno\",\n      \"harold-budd-brian-eno---not-yet-remembered\",\n      \"blonde-by-roger-and-brian-eno\",\n    ],\n    composerBirthYear: 1948, // Brian Eno was born in 1948\n    genre: \"Ambient, Electronic\", // Known for ambient and electronic music\n    style: \"Ambient, Experimental\", // Pioneer of ambient music and experimental sound\n    country: \"UK\", // Born in England\n  },\n  {\n    slug: \"campyfire\",\n    midis: [\"greed---campyfire\", \"nut-cracker-march---arsenal-emote-music\"],\n    composerBirthYear: undefined, // Birth year not available\n    genre: \"Electronic\", // Electronic music\n    style: \"Chiptune, Lo-fi\", // Lo-fi and chiptune elements are present in their music\n    country: undefined, // Country not available\n  },\n  {\n    slug: \"gabriele_traietti\",\n    midis: [\"a-trip-to-rapture-i-in-the-bathysphere\"],\n    composerBirthYear: undefined, // Birth year not available\n    genre: \"Electronic\", // Likely an electronic artist based on the music\n    style: \"Ambient, Soundtrack\", // The track suggests a cinematic and ambient style\n    country: undefined, // Country not available\n  },\n  {\n    slug: \"lofi\",\n    midis: [\"cool-lofi-hip-hop-song\"],\n    composerBirthYear: undefined, // No specific birth year for this genre\n    genre: \"Lo-fi Hip Hop\", // The genre is lo-fi hip hop\n    style: \"Chill, Instrumental\", // Lo-fi is typically chill and instrumental\n    country: undefined, // Country not available\n  },\n  {\n    slug: \"horace_silver\",\n    midis: [\"song-for-my-father---horace-silver\"],\n    composerBirthYear: 1928, // Horace Silver was born in 1928\n    genre: \"Jazz\", // A legendary jazz pianist and composer\n    style: \"Hard Bop\", // Known for the hard bop style of jazz\n    country: \"USA\", // Born in the United States\n  },\n  {\n    slug: \"mulatu_astatke\",\n    midis: [\"yekermo_sew_-_mulatu_astatke-no-acc\"],\n    composerBirthYear: 1943, // Mulatu Astatke was born in 1943\n    genre: \"Jazz, Ethio-jazz\", // Known for Ethio-jazz, a fusion of jazz and traditional Ethiopian music\n    style: \"Fusion, Ethio-jazz\", // Pioneer of Ethio-jazz\n    country: \"Ethiopia\", // Born in Addis Ababa, Ethiopia\n  },\n  {\n    slug: \"kanye_west\",\n    midis: [\n      \"runaway---kanye-west-ramin-djawadi-arr.-by-alex-patience\",\n      \"kanye-west-homecoming-piano-cover\",\n    ],\n    composerBirthYear: 1977,\n    genre: \"Hip-hop\",\n    country: \"USA\",\n  },\n  {\n    slug: \"ramin_djawadi\",\n    midis: [\n      \"Game_of_Thrones_Easy_piano\",\n      \"light-of-the-seven---ramin-djawadi-complete-transcription\",\n      \"the-night-king---ramin-djawadi\",\n    ],\n    composerBirthYear: 1973, // Ramin Djawadi was born in 1973\n    genre: \"Film Score, Classical\", // Known for his film scores\n    style: \"Orchestral, Cinematic\", // Orchestral and cinematic style, particularly in soundtracks\n    country: \"Germany\", // Born in Germany\n  },\n  {\n    slug: \"vivaldi\",\n    midis: [\n      \"vivaldi---summer---piano\",\n      \"vivaldi---winter-rousseau-version-original\",\n    ],\n    composerBirthYear: 1678,\n    genre: \"Classical\",\n    style: \"Baroque\",\n    country: \"Italy\",\n  },\n  {\n    slug: \"coldplay\",\n    midis: [\n      \"Viva_La_Vida_Coldplay\",\n      \"the-scientist---coldplay-piano-arrangement\",\n      \"clocks---coldplay\",\n      \"fix-you---coldplay\",\n    ],\n    composerBirthYear: 1977,\n    genre: \"Pop, Pop Rock, Alternative Rock\",\n    country: \"UK\",\n  },\n  {\n    slug: \"brad_breeck\",\n    midis: [\n      \"Gravity_Falls_Opening\",\n      \"eda-s-requiem---brad-breeck-piano\",\n      \"we-ll-meet-again---gravity-falls\",\n    ],\n    composerBirthYear: 1978,\n    genre: \"Animation\",\n    country: \"USA\",\n  },\n  {\n    slug: \"bruno_mars\",\n    midis: [\n      \"when-i-was-your-man---bruno-mars-600e3a\",\n      \"bruno-mars-leave-the-door-open\",\n    ],\n    composerBirthYear: 1985,\n    genre: \"Pop\",\n    country: \"USA\",\n  },\n  {\n    slug: \"luo_ni\",\n    midis: [\n      \"g-minor-bach-original\",\n      \"crazy-pharaoh\",\n      \"miss-fox-piano-tiles-2\",\n      \"childhood-piano-tiles-2\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Music Game\",\n    country: \"China\",\n  },\n  {\n    slug: \"laura_shigihara\",\n    midis: [\n      \"loonboon---laura-shigihara-arranged-by-piano-keyng\",\n      \"moongrains---laura-shigihara\",\n    ],\n    composerBirthYear: 1980,\n    genre: \"Music Game\",\n    country: \"US, Japan\",\n  },\n  {\n    slug: \"yosuke_yamashita\",\n    midis: [\n      \"never-ending-saga---yosuke-yamashita\",\n      \"hikari-e---franchouchou-hikari-e---yosuke-yamashita-zombieland-saga\",\n      \"ookami-blues-tv-size---seton-academy-ed\",\n    ],\n    country: \"Japan\",\n  },\n  {\n    slug: \"christopher_larkin\",\n    midis: [\n      \"hollow-knight-main-theme---christopher-larkin\",\n      \"greenpath---christopher-larkin\",\n      \"sealed-vessel---christopher-larkin\",\n    ],\n    composerBirthYear: 1992,\n    genre: \"Video Game Music\",\n    country: \"Australia\",\n  },\n  {\n    slug: \"jose_asuncion_flores\",\n    midis: [\n      \"panambi-vera---manuel-ortiz-guerrero-y-jose-asuncion-flores\",\n      \"nde-rendape-aju-jose-a-suncion-flores-manuel-ortiz-guerrero\",\n    ],\n    composerBirthYear: 1904,\n    genre: \"Guarania\",\n    country: \"Paraguay\",\n  },\n  {\n    slug: \"fujii_kaze\",\n    midis: [\n      \"shinunoga-e-wa---fujii-kaze-si-nunogaiiwa\",\n      \"matsuri---fujii-kaze\",\n    ],\n    country: \"Japan\",\n    genre: \"J-Pop\",\n    composerBirthYear: 1997,\n  },\n  {\n    slug: \"kazumi_totaka\",\n    midis: [\"mii-channel-piano\", \"wii-sports-theme-piano\"],\n    composerBirthYear: 1967,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: \"hirokazu_tanaka\",\n    midis: [\n      \"overworld-from-kid-icarus---hirokazu-tanaka\",\n      \"adobansuadobentiya-pokemon-ag-japanese-op1-piano---hirokazu-tanaka\",\n    ],\n    composerBirthYear: 1957,\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n  },\n  {\n    slug: \"kohei_tanaka\",\n    midis: [\n      \"one-piece---bink-s-sake---kohei-tanaka\",\n      \"overtaken---kohei-tanaka-overtaken-one-piece---kohei-tanaka\",\n      \"if-you-live-one-piece-ost-bgm---kohei-tanaka-maranoch\",\n    ],\n    composerBirthYear: 1954,\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n  },\n  {\n    slug: \"hidenori_maezawa\",\n    midis: [\n      \"prelude---castlevania-iii\",\n      \"aquarius---castlevania-iii-dracula-s-curse\",\n      \"alien-lair\",\n      \"stage-1-jungle\",\n    ],\n    composerBirthYear: 1958,\n    country: \"Japan\",\n    genre: \"Video Game Music\",\n  },\n  {\n    slug: \"koji_kondo\",\n    midis: [\n      \"legend-of-zelda-main-theme-score\",\n      \"Legend_of_Zelda_Great_Fairy_Fountain\",\n      \"Super_Mario_Bros_Main_Theme\",\n      \"Zeldas_Lullaby\",\n    ],\n    composerBirthYear: 1961,\n    genre: \"Video Game Music\",\n    country: \"Japan\",\n  },\n  {\n    slug: MUSESCORE_TOP_100_SLUG,\n    posttext: AboutTop100Corpus,\n    midis: [\n      \"river-flows-in-you\", // Yiruma\n      \"Merry_Go_Round_of_Life_Howls_Moving_Castle_Piano_Tutorial_\", // Joe Hisaishi\n      \"Canon_in_D\", // Pachelbel\n      \"Clair_de_Lune__Debussy\", // Debussy\n      \"Fr_Elise\", // Beethoven\n      \"Chopin_-_Nocturne_Op_9_No_2_E_Flat_Major\", // Chopin\n      \"Gymnopdie_No._1__Satie\", // Satie\n      \"Undertale_-_Megalovania_Piano_ver._3\", // Toby Fox\n      \"Golden_Hour__JVKE_Updated_Ver.\", // JVKE\n      \"Je_Te_Laisserai_Des_Mots_-_Patrick_Watson\", // Patrick Watson\n\n      \"Hallelujah\", // Leonard Cohen\n      \"Interstellar\", // Hans Zimmer\n      \"Another_Love__-_Tom_Odell_Professional\", // Tom Odell\n      \"Sweden_Minecraft\", // C418\n      \"Pirates_of_the_Caribbean_-_Hes_a_Pirate\", // Klaus Badelt\n      \"Game_of_Thrones_Easy_piano\", // Ramin Djawadi\n      \"someone-you-loved-lewis-capaldi\", // Lewis Capaldi\n      \"Ed_Sheeran_Perfect\", // Ed Sheeran\n      \"Liebestraum_No._3_in_A_Major\", // Liszt\n      \"Believer_-_Imagine_Dragons\", // Imagine Dragons\n\n      \"All_Of_Me_-_John_Legend_Piano_Cover_-_ReiK\", // John Legend\n      \"Mad_world_Piano\", // Roland Orzabal\n      \"mariage-d-amour---paul-de-senneville-marriage-d-amour\", // Paul de Senneville\n      \"someone-like-you\", // Adele\n      \"my-heart-will-go-on\", // James Horner\n      \"Jojo_s_Bizarre_Adventure_Golden_Wind_Giornos_Theme_Ver_2\", // Yugo Kanno\n      \"Carol_of_the_Bells\", // Mykola Leontovych\n      \"piano-man-piano\", // Billy Joel\n      \"Fly_Me_to_the_Moon\", // Bart Howard\n      \"passacaglia---handel-halvorsen\", // Handel\n\n      \"prelude-i-in-c-major-bwv-846---well-tempered-clavier-first-book\", // Bach\n      \"All_I_Want_for_Christmas_is_You\", // Mariah Carey\n      \"Waltz_No._2_The_Second_Waltz_by_Dmitri_Shostakovich_for_Piano\", // Shostakovich\n      \"wa-mozart-marche-turque-turkish-march-fingered\", // Mozart\n      \"Viva_La_Vida_Coldplay\", // Coldplay\n      \"Gravity_Falls_Opening\", // Brad Breeck\n      \"the_entertainer_scott_joplin\", // Scott Joplin\n      \"Disney_Pixar_Up_Theme\", // Michael Giacchino\n      \"a-thousand-years\", // Christina Perri\n      \"John_Lennon_Imagine\", // John Lennon\n\n      \"runaway---kanye-west-ramin-djawadi-arr.-by-alex-patience\", // Kanye West\n      \"Lovely_Billie_Eilish\", // Billie Eilish\n      \"Omori_Duet\", // Pedro Silva\n      \"Never_Gonna_Give_You_Up\", // Mike Stock\n      \"despacito-piano-cover-peter-bence\", // Luis Fonsi\n      \"solas---jamie-duffy\", // Jamie Duffy\n      \"autumn-leaves-jazz-piano\", // Joseph Kosma\n      \"still-dre---variation-composition\", // Andre Young\n      // Jake 25.17 - duplicate, replaced\n      \"mii-channel-piano\", // Kazumi Totaka\n\n      \"sadness-and-sorrow-for-piano-solo\", // Toshio Masuda\n      \"Super_Mario_Bros_Main_Theme\", // Koji Kondo\n      \"Cant_Help_Falling_In_Love\", // Jean-Paul-Égide Martini\n      \"g-minor-bach-original\", // Luo Ni\n      \"when-i-was-your-man---bruno-mars-600e3a\", // Bruno Mars\n      \"gurenge--demon-slayer-kimetsu-no-yaiba-op\", // Kayoko Kusano\n      \"Let_Her_Go_Passenger\", // Passenger\n      \"we-are-number-one-but-it-s-a-piano-transcript\", // Máni Svavarsson\n      \"dragonborn---skyrim-theme-song-piano-solo\", // Jeremy Soule\n      \"doki-doki-literature-club-ost---your-reality\", // Dan Salvato\n\n      \"ylang-ylang---fkj-transcribed-by-lilroo\", // FKJ\n      \"attack-on-titan-theme-guren-no-yumiya\", // Hiroyuki Sawano\n      \"Bella_Ciao\", // Italian folk\n      \"minuet-bwv-anhang-114-in-g-major\", // Christian Petzold\n      \"Take_on_me\", // a-ha\n      \"congratulations---mac-miller\", // Mac Miller\n      // \"the-office---opening-titles-theme-song-for-piano\", // Jay Ferguson\n      \"the-office\", // Jay Ferguson\n      \"it-s-been-a-long-long-time---harry-james\", // Jule Styne\n      \"Dawn_Pride_and_Prejudice\", // Dario Marianelli\n      \"kimi-no-na-wa---sparkle-theishter-2016\", // Radwimps\n\n      \"Yann_Tiersen_Amelie\", // Yann Tiersen\n      \"sia---snowman\", // Sia\n      \"isabella-s-lullaby-the-promised-neverland-emotional-anime-on-piano-vol.-2\", // Takahiro Obata\n      \"theme-from-schindler-s-list---piano-solo\", // John Williams\n      \"happy-birthday\", // Patty Smith Hill\n      \"flight-of-the-bumblebee\", // Nikolai Rimsky-Korsakov\n      \"dance-of-the-sugar-plum-fairy\", // Pyotr Ilyich Tchaikovsky\n      \"dont-stop-believing-piano\", // Journey\n      \"sign-of-the-times---harry-styles\", // Harry Styles\n      \"Requiem_for_a_Dream\", // Clint Mansell\n\n      \"yuri-on-ice---piano-theme-full\", // Taro Umebayashi + Taku Matsushiba\n      \"ye-niqu-keru-yoru-ni-kakeru---racing-into-the-night\", // Ayase\n      \"africa---toto\", // Toto\n      \"vivaldi---summer---piano\", // Vivaldi\n      \"Love_Like_You_Steven_Universe\", // Steven Universe\n      \"alan-walker---alone-piano\", // Alan Walker\n      \"my-lie-watashi-no-uso---your-lie-in-april\", // Masaru Yokoyama\n      \"anastasia---once-upon-a-december\", // Stephen Flaherty\n      \"Test_Drive_How_to_Train_Your_Dragon\", // John Powell\n      \"Pokemon_Theme_Song\", // John Siegler\n\n      \"your-song-piano\", // Elton John\n      \"nothing-else-matters---metallica\", // Metallica\n      \"calum-scott---you-are-the-reason-piano-sheet-lyrics-lyrics-version-link-in-description\", // Calum Scott\n      \"fairy-tail-main-theme\", // Yasuharu Takanashi\n      \"welcome-to-the-black-parade---my-chemical-romance\", // My Chemical Romance\n      \"how-far-i-ll-go-~-moana-ost\", // Lin-Manuel Miranda\n      \"la-vie-en-rose-solo-accordion\", // Louiguy\n      \"Im_Blue_Eiffel_65\", // Eiffel 65\n      \"old-town-road---lil-nas-x-ft.-billy-ray-cyrus\", // Lil Nas X\n      \"abba--the-winner-takes-it-all\", // ABBA\n      \"A_Thousand_Miles\", // Vanessa Carlton\n    ],\n  },\n  {\n    slug: \"liszt\",\n    midis: [\n      \"tude_S._1413_in_G_Minor_La_Campanella__Liszt\",\n      \"liszt---hungarian-rhapsody-no.-2\",\n      \"Liebestraum_No._3_in_A_Major\",\n    ],\n    composerBirthYear: 1811,\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"Austria, Hungary\",\n  },\n  {\n    slug: \"billie_eilish\",\n    midis: [\"Billie_Eilish_Bad_Guy\", \"Lovely_Billie_Eilish\"],\n    composerBirthYear: 2001,\n    genre: \"Pop\",\n    country: \"USA\",\n  },\n  {\n    slug: \"toby_fox\",\n    midis: [\n      \"undertale-ost---hopes-and-dreams-save-the-world\",\n      \"undertale-undertale-piano\",\n      \"undertale-ost---nyeh-heh-heh-bonetrousle\",\n      \"Fallen_Down_Undertale\",\n    ],\n    composerBirthYear: 1991,\n    genre: \"Video Game Music\",\n    country: \"USA\",\n  },\n  {\n    slug: \"erik_satie\",\n    midis: [\"satie-e.---gnossienne-no.-1\", \"Gymnopdie_No._1__Satie\"],\n    composerBirthYear: 1866,\n    genre: \"Classical\",\n    style: \"Romantic\",\n    country: \"France\",\n  },\n  {\n    slug: \"ed_sheeran\",\n    midis: [\n      \"Ed_Sheeran_Shape_of_you\",\n      \"Photograph_Ed_Sheeran\",\n      \"shivers_ed_sheeran_shivers_ed_sheeran_mixed_ensemble\",\n      \"Ed_Sheeran_Perfect\",\n    ],\n    composerBirthYear: 1991,\n    genre: \"Pop\",\n    country: \"UK\",\n  },\n  {\n    slug: \"musescore_top100_more_works_same_composer\",\n    midis: [\n      \"ren-sheng-nomerigorando---jiu-shi-rang-jazz-arranged\",\n      \"the-office-opening-theme\",\n    ],\n  },\n\n  {\n    slug: \"musescore_top200_incomplete\",\n    midis: [\n      \"Godfather\",\n      \"Pink_Panther\",\n      \"bts-bangtansonyeondan---i-need-u-suga-piano-full-solo\",\n\n      \"stranger-things-theme\",\n\n      \"20th-century-fox-fanfare-piano-arr.\",\n      \"swan-lake-theme---tchaikovsky\",\n      \"marshmello-ft.-bastille---happier\",\n      \"kamado-tanjiro-no-uta-~-demon-slayer-ep-19-ed-ost-fonzi-m-improvised-hard-version\",\n      \"senorita---shawn-mendes-camilla-cabello\",\n      \"demons-imagine-dragons\",\n      \"easy-on-me---adele\",\n      \"bluestone-alley-piano-tiles-2\",\n      \"rihanna-ft.-mikky-echo---stay\",\n      \"olivia-rodrigo---drivers-license\",\n      \"forest-gump---main-title-feather-theme\",\n      \"the-avengers-theme---piano\",\n      \"hall-of-fame\",\n      \"rush-e-but-it-s-as-difficult-as-humanly-possible\",\n      \"Let_It_Go_Disney_Frozen\",\n      \"john-william---jurassic-park-theme\",\n      \"always-with-me-piano-cover.\",\n      \"spring-day---bts\",\n      // \"river_flows_in_you_yiruma_10th_anniversary_version_piano\",\n      \"lost-boy---ruth-b\",\n      \"itsumo-nando-demo-always-with-me---spirited-away\",\n    ],\n  },\n\n  {\n    slug: \"scarlatti\",\n    midis: [\n      \"Jupiter_-_arr._for_two_pianos_by_Gustav_Holst\",\n      \"neptune-the-mystic---gustav-holst-piano-reduction\",\n      \"the-planets-op.-32----ii.-venus-bringer-of-peace-for-piano\",\n      \"sonata_k159_scarlatti\",\n      \"scarlatti-sonata-aria-k.32\",\n    ],\n    composerBirthYear: 1685, // Domenico Scarlatti was born in 1685\n    genre: \"Classical\", // Classical composer\n    style: \"Baroque\", // Baroque period composer\n    country: \"Italy\", // Born in Naples, Italy\n  },\n\n  {\n    slug: \"bruckner\",\n    midis: [\n      \"bruckner_7_1\",\n      \"bruckner_7_2\",\n      \"bruckner_8\",\n      \"bruckner_8_a_j\",\n      \"bruckner_symphony_4_1\",\n    ],\n  },\n\n  {\n    slug: \"irving_aaronson\",\n    midis: [\"jazz-classique-1919\"],\n    genre: \"Fox Trot\",\n    composerBirthYear: 1895,\n    country: \"USA\",\n  },\n\n  {\n    slug: \"niki_reiser\",\n    midis: [\n      \"nordsee---niki-reiser-punktchen-und-anton\",\n      \"das-fliegende-klassenzimmer---overture\",\n    ],\n    composerBirthYear: 1958,\n    country: \"Switzerland\",\n  },\n  {\n    slug: \"jonathan_coulton\",\n    midis: [\"portal_still_alive\", \"re-your-brains-jonathan-coulton\"],\n    composerBirthYear: 1970,\n    genre: \"Folk Rock, Indie Rock, Comedy Rock\",\n  },\n  {\n    slug: \"haydn\",\n    midis: [\n      \"sonata_in_e_minor_hob_xvi_34_joseph_haydn_piano_sonata_hob_xvi_34_2_adagio\",\n      \"string_quartet_in_g_major_hob_iii_75_op_76_no_1_joseph_haydn\",\n      \"haydn_100_1\",\n      \"1.-andante-grazioso-b-major-hob.xvii-anh---joseph-haydn\",\n      \"2.-allegro-f-major-hob.xvii-anh---joseph-haydn\",\n    ],\n    composerBirthYear: 1732,\n    style: \"Classical\",\n    country: \"Austria\",\n  },\n\n  {\n    slug: \"unsorted\",\n    midis: [\n      \"Alice_DJ_Better_Off_Alone\",\n\n      \"Anders_Thue_Sonne\",\n\n      \"Attack_on_Titan_Shinzou_wo_Sasageyo\",\n      \"Avicii_Wake_me_up\",\n      \"Avril_14_Aphex_Twin\",\n      \"Axel_F_Beverly_Hills_Cop_III\",\n\n      \"Billie_s_Bounce_Billies_Bounce\",\n      \"Blue_Rondo_A_La_Turk\",\n      \"Blues_for_Alice\",\n      \"Blues_in_the_Closet_Lead_sheet_\",\n\n      \"Chris_Isaak_Wicked_Game\",\n\n      \"Close_to_the_edge\",\n      \"Coffin_dance\",\n\n      \"Dream_a_little_dream_of_me\",\n\n      \"Feliz_Navidad\",\n      \"Flight_Facilities_Crave_You\",\n      \"Flight_Facilities_Crave_You_2\",\n\n      \"Gershwin_Rhapsody_in_Blue_Piano_solo\",\n      \"Alone_Marshmello\",\n\n      \"Good_Bye_Hachiko\",\n\n      \"Hit_the_Road_Jack\",\n      \"How_long_blues\",\n\n      \"Jingle_Bell_Rock\",\n\n      \"Johnny_Cash_Hurt\",\n\n      \"Jolene\",\n\n      \"Krylya_Nautilus_duo\",\n      \"Kyle_Landrys_Tetris_Theme_Variations_for_Piano_SoloKorobeiniki\",\n      \"Lady_Gaga_Always_remember_us_this_way\",\n\n      \"Lena_Raine_Pigstep\",\n\n      \"Liana_Flores_Rises_the_Moon\",\n\n      \"Love_Store_Francis_Lai\",\n\n      \"Misty_piano_solo\",\n      \"Moon_River_Breakfast_at_Tiffanys\",\n      \"Morphine_Cure_for_Pain\",\n      \"My_War_Attack_on_Titan\",\n\n      \"Numb_-_Linkin_Park\",\n\n      \"Ophelia\",\n\n      \"Prlude_to_Act_1_of_Carmen_-_Piano_Solo_-_Bizet\",\n\n      \"Saint_Saens_Symphony_3_1st\",\n      \"Sandu\",\n\n      \"Sorcerers_doll___-_The_King_and_the_Jester___\",\n\n      \"Super_Mario_Bros_Peaches\",\n      \"Sviridov_Snowstorm_Waltz\",\n      \"Sviridov_Time_Foward\",\n      \"Sviridov_Time_Foward.1\",\n      \"Sweet_Dreams\",\n      \"Sweet_home_Chicago\",\n\n      \"Tetris_Theme\",\n      \"TheFatRat_Monody\",\n      \"TheFatRat_Unity\",\n      \"The_Prince_of_Silence____Nautilus_Pompilius\",\n      \"The_Strokes_Reptilia\",\n      \"The_Strokes_Reptilia_2\",\n      \"The_Strokes_Reptilia_3\",\n      \"The_Weeknd_Blinding_Lights\",\n      \"Titanic\",\n      \"To_be_over\",\n\n      \"Vangelis_Chariots_of_fire\",\n\n      \"Walking_On_a_dream\",\n\n      \"Wellerman_Sea_Shanty\",\n\n      \"alexey_bychkov_s_trio_goby_waltz\",\n      \"all-major-scales-arpeggios\",\n      \"all_of_the_girls_you_loved_before_taylor_swift\",\n      \"alto_sax_natural_minor_scales_and_arpeggios\",\n      \"as_it_was_harry_styles\",\n      \"asphyxia---tokyo-ghoul-re-op\",\n\n      \"average_rag_1\",\n      \"average_rag_2\",\n\n      \"bheki_mseleku_angola\",\n      \"brahms_118_1\",\n      \"brahms_op118_1\",\n      \"bubamara\",\n      \"cheek_to_cheek\",\n\n      \"classical_music_mashup\",\n      \"closed-topic----xiu-ti\",\n      \"cody_fry_eleanor_rigby_no_lead_vocal\",\n\n      \"contract---poshlaya-molly-easy-piano\",\n      \"corelli_op1_no8_ii\",\n      \"cuphead_a_quick_break\",\n\n      \"dance-of-the-knights-transcription-for-piano-solo\",\n      \"dazhe-moya-beybi-ne-znaet---poshlaya-molli\",\n      \"diatonic-7th-chords-in-major-key\",\n      \"directed_by_robert_b_weide\",\n\n      \"don_t_deal_with_the_devil_barbershop_quartet_cuphead\",\n\n      \"earth_wind_fire_september\",\n      \"ederlezi\",\n      \"eleanor_rigby_cody_fry_no_perc1\",\n      \"etude-op.-10-no.-5-black-keys-pentatonic-arrangement\",\n      \"examples_of_chord_progressions_in_a_minor\",\n\n      \"firuze\",\n      \"four-chord-song\",\n      \"gamzedeyim_deva_bulmam\",\n\n      \"gavotte\",\n      \"gavotte_f_j_gossec\",\n      \"glavinishko-cetvorno\",\n      \"god_only_knows_bioshock_infinite_2013\",\n      \"gotye_feat_kimbra_somebody_that_i_used_to_know\",\n      \"hanna-montana---poshlaya-molli-hannamontana---poshlaya-molli\",\n      \"hannamontana---poshlaya-molli-agga\",\n      \"hava-nagila\",\n\n      \"he_s_a_pirate_easy_piano\",\n      \"he_s_a_pirate_from_pirates_of_the_caribbean\",\n      \"he_s_a_pirate_hans_zimmer_klaus_badelt\",\n      \"he_s_a_pirate_hard_version\",\n      \"he_s_a_pirate_klaus_badelt_pirates_of_the_caribbean_ost_rock_version\",\n      \"he_s_a_pirate_ost_kalimba_cover\",\n      \"hojnacki_1\",\n\n      \"idotdotdot---yiruma\",\n      \"ii-v-i-jazz-voicings\",\n      \"ii-v-i-warmup\",\n      \"kalasnjikov\",\n      \"kars_1_tigran_hamasyan\",\n\n      \"kimigayo_national_anthem_of_japan\",\n      \"korobeiniki-tetris\",\n      \"kukla_kolduna\",\n      \"mahler_4_3\",\n      \"major_diatonic_chords\",\n\n      \"malenkiy-princ\",\n      \"maple_starts\",\n\n      \"mesecina\",\n      \"mihail-krug-vladimirskiy-central\",\n\n      \"motion-sickness---phoebe-bridgers\",\n\n      \"mpaintoyska\",\n      \"my_wild_irish_rose\",\n      \"never_gunna_give_you_up_barbershop\",\n      \"now_voyager_suite_max_steiner\",\n      \"opa-cupa\",\n\n      \"piano_tutorial\",\n      \"pirate_melody_16measures_chromatic\",\n      \"pirate_melody_16measures_scales\",\n      \"pirate_melody_16measures_transpositions\",\n      \"pirate_melody_16measures_whole_tone\",\n      \"pirates_5ch\",\n      \"pirates_of_the_caribbean_easy_piano\",\n      \"pirates_of_the_caribbean_easy_piano_capa\",\n      \"pirates_of_the_caribbean_for_alto_saxophone\",\n      \"pirates_of_the_caribbean_hans_zimmer_virtuosic_piano_solo_movement_3\",\n      \"pirates_of_the_caribbean_he_s_a_pirate_hard_version\",\n      \"pirates_of_the_caribbean_main_theme\",\n      \"pirates_of_the_carribean_beginner\",\n      \"pirati_dei_caraibi_per_trio_di_flauti_pirates_of_the_carribean_for_flute_trio\",\n      \"pizzicati-from-sylvia-act-iii-no.-20---leo-delibes---1876\",\n      \"pornofilmy-prosti_proshyay_privet\",\n      \"pornofilmy-prosti_proshyay_privet.1\",\n      \"pornofilmy-prosti_proshyay_privet.2\",\n      \"pornofilmy-ya_tak_soskuchilsya\",\n      \"pornofilmy-ya_tak_soskuchilsya.1\",\n      \"pornofilmy-ya_tak_soskuchilsya.2\",\n\n      \"prelude_in_c_major_bach_piano_solo\",\n\n      \"pyos\",\n\n      \"roumen-sirakov-s-daichevo\",\n\n      \"sadness-and-sorrow\",\n\n      \"sasha_2\",\n      \"scott-joplin-s-new-rag---revised-edition---c1914----piano-tutorial\",\n\n      \"skyrim-theme-for-piano\",\n\n      \"sonatina-in-c-major---dennis-alexander\",\n\n      \"sorcerer_s_puppet_the_king_and_the_jester\",\n      \"steve-reich---piano-phase\",\n\n      \"string_quartet_no_8_in_e_minor_opus_59_rasumovsky_no_2\",\n      \"sydameni_laulu\",\n      \"symphony_8_1\",\n      \"symphony_no_1_k_16_2nd_movement\",\n\n      \"the-blues-scale-in-all-12-keys\",\n      \"the-four-chord-song---axis-of-awesome\",\n\n      \"the-washington-post-piano-john-philip-sousa\",\n\n      \"the_lamp_is_low\",\n      \"the_seven_diatonic_natural_minor_chords_in_a_minor\",\n      \"thirty_five_smallest_non_diatonic_chords_in_c_or_b\",\n      \"this_charming_man_the_smiths_piano_vocal_guitar\",\n      \"tipichnaya_vecherinka_s_basseynom\",\n      \"tomorrow---giovanni-allevi\",\n\n      \"underground-cocek\",\n\n      \"varshaver-freylekhs-klezmer-tune\",\n\n      \"white_christmas\",\n      \"wonder-wave-by-david-lanz\",\n      \"something-human---muse\",\n      \"priboi\",\n      \"marshmello-alone-sergio-moy-20201220161814-nonstop2k.com\",\n      \"maromis-theme---smoke\",\n      \"na-zare---alyans-na-zare\",\n      \"zappaguri\",\n\n      \"genesis-that-s-all-piano\",\n    ],\n  },\n];\n","import { faClockRotateLeft } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport * as React from \"react\";\nimport { useState } from \"react\";\nimport { Redirect, useHistory, useParams } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { slugify } from \"transliteration\";\nimport { AppContext } from \"../../AppContext\";\nimport { Snippet } from \"../analysis\";\nimport { NewTonicSymbol } from \"../AnalysisGrid\";\nimport { RelatedCorporaDisplay } from \"../CompositionTitle\";\nimport { MUSESCORE_TOP_100_SLUG } from \"../corpora/corpora\";\nimport { CorpusLink } from \"../corpora/CorpusLink\";\nimport ChordStairs from \"../legends/ChordStairs\";\nimport { FoldablePianoLegend } from \"../legends/PianoLegend\";\nimport SnippetList from \"../SnippetList\";\nimport { NARRATIVES } from \"../SongNarrative\";\nimport { TOP_100_COMPOSERS } from \"../top100Composers\";\nimport {\n  CHAPTER_GROUPS,\n  CHAPTERS,\n  DOUBLE_TONIC_CHAPTER_TITLE,\n  MODULATIONS_CHAPTER_TITLE,\n  s,\n} from \"./chapters\";\n\nconst NAV_HORIZONTAL_GAP = 15;\nconst NAV_CHORD_STAIRS_SCALE = 0.6;\n\ntype EnhancedSnippet = Snippet & {\n  composerSlug: string;\n};\n\nconst BookContainer = styled.div`\n  width: 97%;\n  padding: 20px;\n  color: #ddd;\n  margin: 0 auto 100px auto;\n`;\n\nconst Title = styled.h1`\n  font-size: 24px;\n`;\n\nconst GroupContainer = styled.div`\n  margin-bottom: 80px;\n`;\n\nconst ComposersGrid = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 40px;\n  margin-bottom: 30px;\n`;\n\nconst ComposerItem = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n`;\n\nconst ComposerLink = styled.a`\n  color: white;\n  text-decoration: none;\n  cursor: pointer;\n  display: inline;\n`;\n\nconst ComposerWrapper = styled.div`\n  transition: all 0.3s ease;\n  padding: 4px 0px;\n  border-radius: 4px;\n`;\n\nconst SnippetContainer = styled.div`\n  margin: 0px 30px 30px 0px;\n`;\n\nconst ComposerList = styled.ul`\n  list-style: none;\n  padding-left: 0;\n  margin: 0;\n`;\n\nconst ComposerListItem = styled.li`\n  margin-left: 0;\n  white-space: nowrap;\n  transition: all 0.3s ease;\n  padding: 4px 0px;\n  border-radius: 4px;\n`;\n\nconst ChapterSelector = styled.div.attrs({ className: \"ChapterSelector\" })`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 10px ${NAV_HORIZONTAL_GAP}px;\n  padding: 0;\n  margin: 0;\n  overflow: visible;\n`;\n\nconst ChapterTitleTooltip = styled.div<{\n  isSelected?: boolean;\n  isHovered?: boolean;\n}>`\n  background: rgba(0, 0, 0, 0.9);\n  padding: 0px 8px;\n  white-space: nowrap;\n  pointer-events: none;\n  z-index: ${(props) => {\n    return props.isHovered ? 20000 : 10000;\n  }};\n  opacity: ${(props) => {\n    return props.isSelected || props.isHovered ? 1 : 0;\n  }};\n  color: ${(props) => (props.isSelected ? \"white\" : \"#aaa\")};\n`;\n\nconst ChapterButton = styled.button<{ isSelected: boolean }>`\n  background: black;\n  color: white;\n  cursor: pointer;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n  padding: 0;\n  border-radius: 0;\n  overflow: visible;\n  height: 80px;\n  overflow: visible;\n\n  ${ChapterTitleTooltip} {\n    position: absolute;\n    top: 55px;\n    left: 50%;\n    transform: translateX(-50%);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 25px;\n    white-space: nowrap;\n  }\n\n  &:hover {\n    ${ChapterTitleTooltip} {\n      display: flex;\n    }\n  }\n`;\n\nconst NavChordWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: black;\n  position: relative;\n  height: 60px;\n  width: 100%;\n`;\n\nexport const ReadableTextBlock = styled.div`\n  min-width: 43em;\n  width: 43em;\n  color: white;\n  border-radius: 10px;\n  margin: 20px 0px 100px 0px;\n  position: relative;\n`;\n\nconst ComposerListColumn = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 0.5em 3em;\n  font-size: 13px;\n  align-items: start;\n  align-content: flex-start;\n  justify-content: start;\n  min-width: 15em;\n`;\n\nconst TwoColumnLayout = styled.div`\n  display: flex;\n  gap: 3em;\n  margin: 0px 0px 100px 0px;\n  min-width: 43em;\n\n  @media (max-width: ${43 + 10 + 3}em) {\n    ${ComposerListColumn} {\n      display: none;\n    }\n  }\n`;\n\nexport const ComposerTitle: React.FC<{\n  composer: string;\n  displayTitle: string;\n  isVocal?: boolean;\n  style?: React.CSSProperties;\n}> = ({ composer, displayTitle, isVocal, style }) => (\n  <span style={style}>\n    <span style={{ color: \"#999\" }}>{composer}. </span>\n    <span style={{ color: \"white\" }}>\n      {displayTitle}\n      {/* {isVocal && <span style={{ marginLeft: \"4px\" }}>🎤</span>} */}\n    </span>\n  </span>\n);\n\nconst getChapterSlug = (chapter: string) => slugify(chapter.toLowerCase());\n\nexport const CompositionLink: React.FC<{\n  composer: (typeof TOP_100_COMPOSERS)[number];\n  onLinkClick?: (e: React.MouseEvent<HTMLAnchorElement>) => void;\n  showNarrativeIcon?: boolean;\n}> = ({ composer, onLinkClick, showNarrativeIcon = false }) => (\n  <ComposerLink\n    href={`/f/${composer.slug}`}\n    target=\"_blank\"\n    rel=\"noreferrer\"\n    onClick={onLinkClick}\n  >\n    <ComposerTitle\n      composer={composer.composer}\n      displayTitle={composer.displayTitle}\n      isVocal={composer.isVocal}\n    />\n    {showNarrativeIcon && NARRATIVES[composer.slug] && (\n      <span style={{ marginLeft: \"12px\", color: \"#999\" }}>\n        💬 {NARRATIVES[composer.slug].qa.length}\n      </span>\n    )}\n  </ComposerLink>\n);\n\nconst ChapterGroup = styled.div<{ isActive: boolean; hideHeader?: boolean }>`\n  display: inline-flex;\n  flex-direction: column;\n  width: fit-content;\n  min-width: min-content;\n  overflow: visible;\n\n  .group-header {\n    white-space: nowrap;\n    text-align: center;\n    color: ${(props) => (props.isActive ? \"#fff\" : \"#666\")};\n    font-size: 14px;\n    padding-bottom: 12px;\n    position: relative;\n    transition: color 0.3s ease;\n    width: 100%;\n    overflow: visible;\n    visibility: ${(props) => (props.hideHeader ? \"hidden\" : \"visible\")};\n\n    &::after {\n      content: \"\";\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      right: 0;\n      height: 8px;\n      border-top: 1px solid ${(props) => (props.isActive ? \"#fff\" : \"#666\")};\n      border-left: 1px solid ${(props) => (props.isActive ? \"#fff\" : \"#666\")};\n      border-right: 1px solid ${(props) => (props.isActive ? \"#fff\" : \"#666\")};\n      transition: border-color 0.3s ease;\n      visibility: ${(props) => (props.hideHeader ? \"hidden\" : \"visible\")};\n    }\n  }\n\n  .group-content {\n    display: flex;\n    flex-wrap: nowrap;\n    gap: ${NAV_HORIZONTAL_GAP}px;\n    overflow: visible;\n    scrollbar-width: none;\n    -ms-overflow-style: none;\n\n    &::-webkit-scrollbar {\n      display: none;\n    }\n  }\n`;\n\nconst findChapterForComposer = (composerSlug: string): string | null => {\n  return (\n    CHAPTERS.find((chapter) => chapter.composers.includes(composerSlug))\n      ?.title ?? null\n  );\n};\n\nconst ChapterArrow = styled.div`\n  position: absolute;\n  bottom: -20px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 1px;\n  height: 20px;\n  background: #666;\n  pointer-events: none;\n\n  &::after {\n    content: \"\";\n    position: absolute;\n    top: 0%;\n    left: 50%;\n    transform: translateX(-50%);\n    border-left: 3px solid transparent;\n    border-right: 3px solid transparent;\n    border-bottom: 4px solid #666;\n  }\n`;\n\nconst Book: React.FC = () => {\n  const { slug } = useParams<{ slug?: string }>();\n  const history = useHistory();\n  const appContext = React.useContext(AppContext);\n  const [hoveredChapter, setHoveredChapter] = React.useState<string | null>(\n    null,\n  );\n  const [hoveredComposerSlug, setHoveredComposerSlug] =\n    React.useState<string>(\"happy-birthday\");\n  const [hoveredColors, setHoveredColors] = useState<string[] | null>(null);\n\n  React.useEffect(() => {\n    if (appContext.currentMidi?.slug) {\n      setHoveredComposerSlug(appContext.currentMidi.slug);\n    }\n  }, [appContext.currentMidi?.slug]);\n\n  if (!appContext) throw new Error(\"AppContext not found\");\n  const { analyses, eject } = appContext;\n  const [loadingSnippets, setLoadingSnippets] = React.useState<Set<string>>(\n    new Set(),\n  );\n\n  // Add handler for composer link clicks\n  const handleComposerLinkClick = (e: React.MouseEvent<HTMLAnchorElement>) => {\n    eject(); // Eject the current player before navigating\n  };\n\n  // Handle snippet click with loading state\n  const handleSnippetClick = async (snippet: EnhancedSnippet) => {\n    const slug = snippet.composerSlug;\n    setLoadingSnippets((prev) => new Set([...prev, slug]));\n    try {\n      await appContext.handleSongClick(slug);\n      if (snippet.secondsSpan) {\n        const seekPosition = Math.max(0, (snippet.secondsSpan[0] - 1) * 1000);\n        appContext.seek(seekPosition);\n      }\n    } finally {\n      setLoadingSnippets((prev) => {\n        const next = new Set(prev);\n        next.delete(slug);\n        return next;\n      });\n    }\n  };\n\n  // Get unique chapter titles\n  const chapterTitles = React.useMemo(() => {\n    return CHAPTERS.map((chapter) => chapter.title);\n  }, []);\n\n  // Find selected chapter based on slug\n  const selectedChapter = React.useMemo(() => {\n    if (!slug) return \"Intro\";\n    return (\n      chapterTitles.find(\n        (chapter) => getChapterSlug(chapter) === slug.toLowerCase(),\n      ) || \"Intro\"\n    );\n  }, [slug, chapterTitles]);\n\n  const hoveredComposerChapter = React.useMemo(() => {\n    return findChapterForComposer(hoveredComposerSlug);\n  }, [hoveredComposerSlug]);\n\n  // Redirect from root to /100/intro\n  if (!slug) {\n    return <Redirect to=\"/100/intro\" />;\n  }\n\n  // Handle chapter selection\n  const handleChapterSelect = (chapter: string) => {\n    eject(); // Add this line to eject MIDI before changing chapters\n    const newSlug = getChapterSlug(chapter);\n    history.push(`/100/${newSlug}`);\n  };\n\n  const renderContent = () => {\n    const currentChapter = CHAPTERS.find(\n      (chapter) => chapter.title === selectedChapter,\n    );\n    if (!currentChapter) return null;\n\n    const currentSnippet = analyses[`f/${hoveredComposerSlug}`]?.snippets.find(\n      (s) => s.tag === \"book:index\",\n    );\n    const initialTonic =\n      currentSnippet?.frozenNotes.analysis.modulations[1] ?? 0;\n\n    return (\n      <>\n        <div style={{ marginTop: \"40px\" }}>\n          <FoldablePianoLegend\n            mode={currentChapter.mode}\n            setHoveredColors={setHoveredColors}\n            currentTonic={initialTonic}\n          />\n          {currentChapter.pretext &&\n            (currentChapter.title === \"Intro\" ? (\n              <div\n                style={{\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  gap: \"10px\",\n                }}\n              >\n                <CompositionLink\n                  composer={TOP_100_COMPOSERS.find(\n                    (c) => c.slug === hoveredComposerSlug,\n                  )}\n                  onLinkClick={handleComposerLinkClick}\n                />\n\n                <div\n                  style={{\n                    display: \"flex\",\n                    gap: \"20px\",\n                    flexDirection: \"row\",\n                  }}\n                >\n                  <div\n                    style={{\n                      minHeight: \"275px\",\n                      display: \"flex\",\n                      flexDirection: \"column\",\n                    }}\n                  >\n                    <SnippetList\n                      snippets={[\n                        analyses[`f/${hoveredComposerSlug}`]?.snippets\n                          .filter((snippet) => snippet.tag === \"book:index\")\n                          .pop(),\n                      ]\n                        .filter(Boolean)\n                        .map((snippet) => ({\n                          ...snippet,\n                          composerSlug: hoveredComposerSlug,\n                        }))}\n                      onSnippetClick={handleSnippetClick}\n                      loadingSnippets={loadingSnippets}\n                      isPreview={true}\n                      noteHeight={3}\n                      hoveredColors={hoveredColors}\n                    />\n                    <div\n                      style={{\n                        marginBottom: \"10px\",\n                        display: \"flex\",\n                        flexDirection: \"row\",\n                        gap: \"50px\",\n                      }}\n                    >\n                      {analyses[`f/${hoveredComposerSlug}`]?.tags && (\n                        <div\n                          style={{\n                            display: \"flex\",\n                            flexDirection: \"row\",\n                            gap: \"5px\",\n                            position: \"relative\",\n                            top: \"-3px\",\n                          }}\n                        >\n                          {analyses[`f/${hoveredComposerSlug}`].snippets\n                            .filter(\n                              (snippet: Snippet, index: number) =>\n                                snippet.tag !== \"book:index\" &&\n                                !snippet.tag.startsWith(\"last_chords\"),\n                            )\n                            .slice(0, 7)\n                            .map((snippet: Snippet) => (\n                              <div key={snippet.tag}>\n                                {s([snippet.tag] as any)}\n                              </div>\n                            ))}\n                        </div>\n                      )}\n                    </div>\n                    <RelatedCorporaDisplay\n                      slug={hoveredComposerSlug}\n                      horizontal={true}\n                      showMetadata={false}\n                    />\n                  </div>\n                </div>\n                <TwoColumnLayout>\n                  <ReadableTextBlock>\n                    {currentChapter.pretext()}\n                    <GroupContainer>\n                      <ComposersGrid>\n                        <ComposerWrapper>\n                          <CompositionLink\n                            composer={TOP_100_COMPOSERS.find(\n                              (c) => c.slug === \"happy-birthday\",\n                            )}\n                            onLinkClick={handleComposerLinkClick}\n                            showNarrativeIcon={true}\n                          />\n                        </ComposerWrapper>\n                      </ComposersGrid>\n                    </GroupContainer>\n                  </ReadableTextBlock>\n                  <ComposerListColumn>\n                    <div style={{ width: \"100%\", marginBottom: \"1em\" }}>\n                      <CorpusLink slug={MUSESCORE_TOP_100_SLUG} />\n                    </div>\n                    {TOP_100_COMPOSERS.slice(0, 100).map((composer) => (\n                      <div\n                        key={composer.slug}\n                        onMouseEnter={() =>\n                          setHoveredComposerSlug(composer.slug)\n                        }\n                        onMouseLeave={() =>\n                          setHoveredComposerSlug(\n                            appContext.currentMidi?.slug || \"happy-birthday\",\n                          )\n                        }\n                        style={{ cursor: \"pointer\" }}\n                      >\n                        <CompositionLink\n                          composer={composer}\n                          onLinkClick={(e) => {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            const snippet = analyses[\n                              `f/${composer.slug}`\n                            ]?.snippets\n                              .filter((s) => s.tag === \"book:index\")\n                              .pop();\n                            if (snippet) {\n                              handleSnippetClick({\n                                ...snippet,\n                                composerSlug: composer.slug,\n                              });\n                            }\n                          }}\n                        />\n                      </div>\n                    ))}\n                  </ComposerListColumn>\n                </TwoColumnLayout>\n              </div>\n            ) : (\n              <ReadableTextBlock>{currentChapter.pretext()}</ReadableTextBlock>\n            ))}\n          {currentChapter.title !== \"Intro\" && (\n            <GroupContainer>\n              <ComposersGrid>\n                {currentChapter.composers\n                  .map((slug) => TOP_100_COMPOSERS.find((c) => c.slug === slug))\n                  .filter(\n                    (\n                      composer,\n                    ): composer is (typeof TOP_100_COMPOSERS)[number] =>\n                      composer !== undefined &&\n                      analyses[`f/${composer.slug}`]?.snippets?.some(\n                        (s) => s.tag === \"book:index\",\n                      ),\n                  )\n                  .map((composer) => {\n                    const snippets = (\n                      analyses[`f/${composer.slug}`]?.snippets || []\n                    )\n                      .filter((snippet) => snippet.tag === \"book:index\")\n                      .map((snippet) => ({\n                        ...snippet,\n                        composerSlug: composer.slug,\n                      }));\n\n                    return (\n                      <ComposerItem key={composer.slug}>\n                        <ComposerWrapper>\n                          <CompositionLink\n                            composer={composer}\n                            onLinkClick={handleComposerLinkClick}\n                            showNarrativeIcon={true}\n                          />\n                        </ComposerWrapper>\n                        {snippets.map((snippet) => (\n                          <SnippetContainer>\n                            <SnippetList\n                              snippets={[snippet]}\n                              onSnippetClick={handleSnippetClick}\n                              loadingSnippets={loadingSnippets}\n                              isPreview={true}\n                              noteHeight={3}\n                              hoveredColors={hoveredColors}\n                            />\n                          </SnippetContainer>\n                        ))}\n                      </ComposerItem>\n                    );\n                  })}\n              </ComposersGrid>\n\n              {currentChapter.composers\n                .map((slug) => TOP_100_COMPOSERS.find((c) => c.slug === slug))\n                .filter(\n                  (composer): composer is (typeof TOP_100_COMPOSERS)[number] =>\n                    composer !== undefined &&\n                    !analyses[`f/${composer.slug}`]?.snippets?.some(\n                      (s) => s.tag === \"book:index\",\n                    ),\n                ).length > 0 && (\n                <>\n                  <ComposerList>\n                    {currentChapter.composers\n                      .map((slug) =>\n                        TOP_100_COMPOSERS.find((c) => c.slug === slug),\n                      )\n                      .filter(\n                        (\n                          composer,\n                        ): composer is (typeof TOP_100_COMPOSERS)[number] =>\n                          composer !== undefined &&\n                          !analyses[`f/${composer.slug}`]?.snippets?.some(\n                            (s) => s.tag === \"book:index\",\n                          ),\n                      )\n                      .map((composer) => (\n                        <ComposerListItem key={composer.slug}>\n                          <CompositionLink\n                            composer={composer}\n                            onLinkClick={handleComposerLinkClick}\n                          />\n                        </ComposerListItem>\n                      ))}\n                  </ComposerList>\n                </>\n              )}\n            </GroupContainer>\n          )}\n        </div>\n      </>\n    );\n  };\n\n  return (\n    <BookContainer>\n      <div className=\"Book\" style={{ position: \"relative\" }}>\n        <Title>Visual Harmony of Top 100 Composers on MuseScore.com</Title>\n        <ChapterSelector>\n          {Object.entries(CHAPTER_GROUPS).map(\n            ([name, [startIndex, endIndex]]) => {\n              const groupChapters = CHAPTERS.slice(startIndex - 1, endIndex);\n              const isActive = groupChapters.some(\n                (chapter) => chapter.title === selectedChapter,\n              );\n              const hideHeader =\n                name.toLowerCase() === \"intro\" ||\n                name.toLowerCase() === \"style\";\n\n              return (\n                <ChapterGroup\n                  key={name}\n                  isActive={isActive}\n                  hideHeader={hideHeader}\n                >\n                  <div className=\"group-header\">{name}</div>\n                  <div className=\"group-content\">\n                    {groupChapters.map((chapter) => (\n                      <ChapterButton\n                        key={chapter.title}\n                        isSelected={selectedChapter === chapter.title}\n                        onClick={() => handleChapterSelect(chapter.title)}\n                        onMouseEnter={() => setHoveredChapter(chapter.title)}\n                        onMouseLeave={() => setHoveredChapter(null)}\n                      >\n                        <NavChordWrapper>\n                          {chapter.title === MODULATIONS_CHAPTER_TITLE ? (\n                            <div\n                              style={{\n                                position: \"relative\",\n                                width: \"65px\",\n                                height: \"45px\",\n                                overflow: \"hidden\",\n                              }}\n                            >\n                              <div\n                                style={{\n                                  position: \"absolute\",\n                                  top: \"10px\",\n                                  width: \"65px\",\n                                }}\n                              >\n                                <NewTonicSymbol\n                                  left={0}\n                                  number={1}\n                                  previousTonic={0}\n                                  modulationDiff={5}\n                                  tonicStart={5}\n                                />\n                              </div>\n                              <div\n                                style={{\n                                  position: \"absolute\",\n                                  top: \"25px\",\n                                  width: \"65px\",\n                                }}\n                              >\n                                <NewTonicSymbol\n                                  left={0}\n                                  number={1}\n                                  previousTonic={0}\n                                  modulationDiff={7}\n                                  tonicStart={7}\n                                />\n                              </div>\n                            </div>\n                          ) : chapter.title === DOUBLE_TONIC_CHAPTER_TITLE ? (\n                            <>\n                              <ChordStairs\n                                mode={{ title: \"\", chords: [\"vi\"] }}\n                                scale={NAV_CHORD_STAIRS_SCALE}\n                                playbackMode=\"no\"\n                              />\n                              <span style={{ margin: 3, fontSize: \"28px\" }}>\n                                =\n                              </span>\n                              <ChordStairs\n                                mode={{ title: \"\", chords: [\"i\"] }}\n                                scale={NAV_CHORD_STAIRS_SCALE}\n                                playbackMode=\"no\"\n                              />\n                            </>\n                          ) : chapter.title === \"Style\" ? (\n                            <FontAwesomeIcon\n                              icon={faClockRotateLeft}\n                              style={{ fontSize: \"20px\", color: \"white\" }}\n                            />\n                          ) : chapter.titleChords ? (\n                            <ChordStairs\n                              mode={{ title: \"\", chords: chapter.titleChords }}\n                              scale={NAV_CHORD_STAIRS_SCALE}\n                              playbackMode=\"no\"\n                            />\n                          ) : (\n                            chapter.title\n                          )}\n                        </NavChordWrapper>\n                        <ChapterTitleTooltip\n                          isSelected={selectedChapter === chapter.title}\n                          isHovered={\n                            hoveredChapter === chapter.title ||\n                            (hoveredComposerChapter === chapter.title &&\n                              selectedChapter === \"Intro\" &&\n                              hoveredComposerChapter !== \"Intro\")\n                          }\n                        >\n                          {chapter.title}\n                        </ChapterTitleTooltip>\n                        {hoveredComposerChapter === chapter.title &&\n                          selectedChapter === \"Intro\" &&\n                          hoveredComposerChapter !== \"Intro\" && (\n                            <ChapterArrow />\n                          )}\n                      </ChapterButton>\n                    ))}\n                  </div>\n                </ChapterGroup>\n              );\n            },\n          )}\n        </ChapterSelector>\n\n        {renderContent()}\n      </div>\n    </BookContainer>\n  );\n};\n\nexport default Book;\n","import * as React from \"react\";\nimport { useContext, useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { AppContext } from \"../AppContext\";\nimport { RenumberMeasureCallback, getModulations } from \"./Rawl\";\nimport { MeasuresAndBeats, MidiRange } from \"./SystemLayout\";\nimport {\n  Analysis,\n  MeasureRenumbering,\n  MeasuresSpan,\n  PitchClass,\n} from \"./analysis\";\n\nexport const STACKED_RN_HEIGHT = 20;\nconst MIN_WIDTH_BETWEEN_BEATS = 10;\nconst GRADIENT_HEIGHT_IN_NOTES = 0.5;\n\nconst KEY_TO_OFFSET = {\n  z: -4,\n  x: -3,\n  c: -2,\n  v: -1,\n  b: 1,\n  n: 2,\n  m: 3,\n  \",\": 4,\n};\n\nconst VerticalBar = styled.div`\n  width: 1px;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n`;\n\nexport const Cursor = styled(VerticalBar)`\n  background-color: orange;\n  pointer-events: none;\n`;\n\nconst MeasureBar = styled(VerticalBar)`\n  background-color: #444;\n  z-index: 1;\n`;\n\nconst BeatBar = styled(VerticalBar)`\n  border-left: 0.5px dashed #333;\n  z-index: 1;\n`;\n\nexport type MeasureSelection = {\n  selectedMeasure: number;\n  selectMeasure: (number) => void;\n  splitAtMeasure: (boolean, number?) => void;\n  mergeAtMeasure: () => void;\n  renumberMeasure: RenumberMeasureCallback;\n};\n\nexport const PITCH_CLASS_TO_LETTER = {\n  0: \"C\",\n  1: \"D♭\",\n  2: \"D\",\n  3: \"E♭\",\n  4: \"E\",\n  5: \"F\",\n  6: \"F♯\",\n  7: \"G\",\n  8: \"A♭\",\n  9: \"A\",\n  10: \"B♭\",\n  11: \"B\",\n};\n\nconst RemeasuringInput: React.FC<{\n  selectedMeasure: number;\n  selectMeasure: (number) => void;\n  renumberMeasure: RenumberMeasureCallback;\n  splitAtMeasure: (boolean, number?) => void;\n  mergeAtMeasure: () => void;\n}> = ({\n  selectedMeasure,\n  selectMeasure,\n  renumberMeasure,\n  splitAtMeasure,\n  mergeAtMeasure,\n}) => {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [value, setValue] = useState<string>(\"\");\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(event.target.value);\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key in KEY_TO_OFFSET) {\n      event.preventDefault();\n      const offset = KEY_TO_OFFSET[event.key];\n      selectMeasure(selectedMeasure + offset);\n    }\n    if (event.key === \"Enter\") {\n      event.stopPropagation();\n      if (value === \"\") {\n        if (event.shiftKey) {\n          mergeAtMeasure();\n        } else {\n          splitAtMeasure(false);\n        }\n      } else {\n        const parsedValue = parseInt(value, 10);\n        if (!isNaN(parsedValue)) {\n          renumberMeasure(parsedValue, event.shiftKey);\n        }\n      }\n    }\n  };\n\n  useEffect(() => inputRef.current.focus(), []);\n\n  return (\n    <input\n      type=\"text\"\n      ref={inputRef}\n      value={value}\n      onChange={handleChange}\n      onKeyDown={handleKeyDown}\n      style={{ fontSize: \"10px\", width: \"3em\" }}\n      aria-label=\"Renumber measure\"\n      autoFocus\n    />\n  );\n};\n\nexport const NewTonicSymbol: React.FC<{\n  left: number;\n  number: number;\n  previousTonic: PitchClass | null;\n  modulationDiff: number | null;\n  tonicStart: PitchClass;\n}> = ({ left, number, previousTonic, modulationDiff, tonicStart }) => (\n  <>\n    <span\n      style={{\n        color: \"white\",\n        position: \"absolute\",\n        top: -2,\n        left:\n          left + (previousTonic === null ? String(number).length * 8 + 10 : 30),\n        fontSize: 12,\n        zIndex: 100,\n        fontWeight: 700,\n        userSelect: \"none\",\n        textAlign: \"left\",\n      }}\n    >\n      {previousTonic !== null && (\n        <>{`${\n          modulationDiff > 6\n            ? `↓${Math.abs(modulationDiff - 12)}`\n            : `↑${modulationDiff}`\n        } `}</>\n      )}\n      {PITCH_CLASS_TO_LETTER[tonicStart]}\n    </span>\n\n    <div\n      className={`noteColor_${modulationDiff}_colors`}\n      style={{\n        width: 80,\n        height: 12,\n        position: \"absolute\",\n        top: 0,\n        left: left,\n        zIndex: 3,\n        userSelect: \"none\",\n        maskImage:\n          \"linear-gradient(to right, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0) 100%)\",\n        WebkitMaskImage:\n          \"linear-gradient(to right, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0) 100%)\",\n      }}\n    />\n  </>\n);\n\nconst Measure: React.FC<{\n  span: [number, number];\n  number: number;\n  displayNumber: number;\n  isPhraseStart: boolean;\n  measureSelection: MeasureSelection;\n  showHeader: boolean;\n  secondsToX: (number) => number;\n  showNonPhraseStarts: boolean;\n  tonicStart?: PitchClass;\n  selectedPhraseStart: number;\n  sectionSpan: MeasuresSpan;\n  previousTonic: PitchClass | null;\n  isLastSection: boolean;\n}> = ({\n  span,\n  number,\n  displayNumber,\n  isPhraseStart,\n  measureSelection,\n  showHeader,\n  secondsToX,\n  showNonPhraseStarts,\n  tonicStart,\n  selectedPhraseStart,\n  sectionSpan,\n  previousTonic,\n  isLastSection,\n}) => {\n  const {\n    selectedMeasure,\n    selectMeasure,\n    splitAtMeasure,\n    mergeAtMeasure,\n    renumberMeasure,\n  } = measureSelection;\n\n  const left = secondsToX(span[0]) - 1;\n  const width = secondsToX(span[1]) - left - 1;\n\n  let modulationDiff: number | null = null;\n  if (tonicStart !== undefined && previousTonic !== null) {\n    modulationDiff = (tonicStart - previousTonic + 12) % 12;\n  }\n\n  const isLastMeasure = number === sectionSpan[1] + 1;\n  const showMeasureBar = !isLastMeasure;\n\n  const { hoveredMeasuresSpan } = useContext(AppContext);\n  const isHighlighted =\n    hoveredMeasuresSpan &&\n    number >= hoveredMeasuresSpan[0] &&\n    number <= hoveredMeasuresSpan[1];\n\n  return (\n    <>\n      {showHeader && tonicStart !== undefined && (\n        <NewTonicSymbol\n          left={left}\n          number={number}\n          previousTonic={previousTonic}\n          modulationDiff={modulationDiff}\n          tonicStart={tonicStart}\n        />\n      )}\n      {(showNonPhraseStarts || isPhraseStart) && showMeasureBar && (\n        <>\n          <MeasureBar\n            key={`db_${number}`}\n            style={{\n              left,\n              ...(showNonPhraseStarts && isPhraseStart\n                ? { backgroundColor: \"#bbb\" }\n                : {}),\n            }}\n          />\n          {width && showHeader ? (\n            <>\n              <div\n                key={`db_n_${number}`}\n                style={{\n                  position: \"absolute\",\n                  top: -6,\n                  left: left + 7,\n                  color:\n                    selectedMeasure === number\n                      ? \"red\"\n                      : selectedPhraseStart !== -1 &&\n                        Math.abs(number - selectedPhraseStart) <= 4\n                      ? \"orange\"\n                      : isHighlighted\n                      ? \"white\"\n                      : modulationDiff === null\n                      ? \"#666\"\n                      : \"black\",\n                  zIndex: 15,\n                  cursor: \"pointer\",\n                  userSelect: \"none\",\n                }}\n                onClick={(e) => {\n                  e.stopPropagation();\n                  selectMeasure(number);\n                }}\n              >\n                {selectedMeasure === number && (\n                  <>\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        top: 23,\n                        left: 0,\n                        color: \"gray\",\n                        fontSize: 12,\n                      }}\n                      onClick={(e) => {\n                        selectMeasure(null);\n                        e.stopPropagation();\n                      }}\n                    >\n                      Esc\n                    </div>\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        top: -20,\n                        left: 0,\n                        display: \"flex\",\n                        alignItems: \"center\",\n                      }}\n                    >\n                      <RemeasuringInput\n                        renumberMeasure={renumberMeasure}\n                        splitAtMeasure={splitAtMeasure}\n                        mergeAtMeasure={mergeAtMeasure}\n                        selectMeasure={selectMeasure}\n                        selectedMeasure={selectedMeasure}\n                      />\n                      <div\n                        style={{\n                          marginLeft: 5,\n                          color: \"white\",\n                          fontSize: 10,\n                          whiteSpace: \"nowrap\",\n                        }}\n                      >\n                        hover the new tonic, click to save modulation\n                        {selectedPhraseStart === number &&\n                        sectionSpan?.[0] === number - 1 ? (\n                          <span>\n                            . Shift+Enter to merge back to previous section\n                          </span>\n                        ) : (\n                          <span>. Enter to split into two sections</span>\n                        )}\n                      </div>\n                    </div>\n                  </>\n                )}\n                {selectedMeasure !== null &&\n                  selectedPhraseStart === selectedMeasure &&\n                  Object.entries(KEY_TO_OFFSET).map(([key, offset]) => {\n                    const targetMeasure = selectedMeasure + offset;\n                    if (targetMeasure === number) {\n                      return (\n                        <div\n                          key={key}\n                          style={{\n                            position: \"absolute\",\n                            top: -6,\n                            left: 0,\n                            color: \"orange\",\n                            fontSize: 10,\n                          }}\n                        >\n                          {key}\n                        </div>\n                      );\n                    }\n                    return null;\n                  })}\n                {selectedPhraseStart === number &&\n                  sectionSpan?.[0] !== number - 1 && (\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        top: -12,\n                        left: -26,\n                        color: \"red\",\n                        fontSize: 14,\n                        fontWeight: 700,\n                        zIndex: 100,\n                      }}\n                      onClick={(e) => {\n                        splitAtMeasure(false);\n                        e.stopPropagation();\n                      }}\n                    >\n                      ↵\n                    </div>\n                  )}\n                {selectedPhraseStart === number &&\n                  sectionSpan?.[0] !== number - 1 &&\n                  isLastSection && (\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        top: -18,\n                        left: -100,\n                        color: \"red\",\n                        fontSize: 14,\n                        fontWeight: 700,\n                        zIndex: 100,\n                        display: \"flex\",\n                        gap: \"5px\",\n                      }}\n                    >\n                      <span\n                        onClick={(e) => {\n                          splitAtMeasure(true, 2);\n                          e.stopPropagation();\n                        }}\n                      >\n                        /8\n                      </span>\n                      <span\n                        onClick={(e) => {\n                          splitAtMeasure(true, 3);\n                          e.stopPropagation();\n                        }}\n                      >\n                        /12\n                      </span>\n                      <span\n                        onClick={(e) => {\n                          splitAtMeasure(true, 4);\n                          e.stopPropagation();\n                        }}\n                      >\n                        /16\n                      </span>\n                    </div>\n                  )}\n                {selectedPhraseStart === number &&\n                  sectionSpan?.[0] === number - 1 && (\n                    <div\n                      style={{\n                        position: \"absolute\",\n                        top: 4,\n                        left: 18,\n                        color: \"red\",\n                        fontSize: 14,\n                        fontWeight: 700,\n                        zIndex: 100,\n                      }}\n                      onClick={(e) => {\n                        mergeAtMeasure();\n                        e.stopPropagation();\n                      }}\n                    >\n                      ↱\n                    </div>\n                  )}\n                <span\n                  style={{\n                    fontSize: \"12px\",\n                    fontFamily: \"sans-serif\",\n                  }}\n                >\n                  {displayNumber}\n                </span>\n              </div>\n            </>\n          ) : null}\n        </>\n      )}\n    </>\n  );\n};\n\nconst Beat: React.FC<{ second: number; secondsToX: (number) => number }> = ({\n  second,\n  secondsToX,\n}) => (\n  <BeatBar\n    style={{ left: secondsToX(second), zIndex: 2, pointerEvents: \"none\" }}\n  />\n);\n\nconst TonalGrid: React.FC<{\n  analysis: Analysis;\n  measures: number[];\n  midiNumberToY: (number) => number;\n  noteHeight: number;\n  midiRange: MidiRange;\n  secondsToX: (number) => number;\n  sectionSpan?: MeasuresSpan;\n}> = React.memo(\n  ({\n    analysis,\n    measures,\n    midiNumberToY,\n    noteHeight,\n    midiRange,\n    secondsToX,\n    sectionSpan,\n  }) => {\n    const modulations = getModulations(analysis);\n    if (!modulations || !measures) return;\n    modulations.push({\n      measure: measures.length,\n      tonic: modulations[0].tonic,\n    });\n\n    const minX = secondsToX(measures[sectionSpan?.[0] ?? 0]);\n    const maxX =\n      secondsToX(measures[sectionSpan?.[1] ?? measures.length - 1]) +\n      (modulations.filter(({ measure }) => measure === sectionSpan?.[1])\n        .length > 0\n        ? 30\n        : 0);\n\n    const result = [];\n    for (let i = 0; i + 1 < modulations.length; ++i) {\n      const fromIndex = modulations[i].measure;\n      const toIndex = modulations[i + 1].measure;\n      if (toIndex < 0 || fromIndex >= measures.length) {\n        continue;\n      }\n      const from = measures[Math.max(fromIndex, 0)];\n      const to = measures[Math.min(toIndex, measures.length - 1)];\n      const { tonic } = modulations[i];\n      const fromX = secondsToX(from);\n      const toX = secondsToX(to);\n      const width = Math.min(toX, maxX) - fromX;\n      for (let octave = 2; octave <= 9; ++octave) {\n        const midiNumber = tonic + octave * 12;\n        if (toX >= minX && fromX <= maxX) {\n          if (\n            midiNumber - 12 >= midiRange[0] &&\n            midiNumber - 12 <= midiRange[1]\n          )\n            // TODO: display a note like C4 gracefully at each gradient start\n            result.push(\n              <div\n                key={`tonalgrid_octave_${i}_${midiNumber}`}\n                style={{\n                  position: \"absolute\",\n                  width,\n                  height: GRADIENT_HEIGHT_IN_NOTES * noteHeight,\n                  left: fromX,\n                  top: midiNumberToY(\n                    midiNumber - 13 + GRADIENT_HEIGHT_IN_NOTES,\n                  ),\n                  pointerEvents: \"none\",\n                  background: `linear-gradient(to top, #333, transparent)`,\n                  zIndex: 0,\n                }}\n              />,\n            );\n          if (midiNumber - 7 >= midiRange[0] && midiNumber - 7 <= midiRange[1])\n            result.push(\n              <div\n                key={`tonalgrid_octave_${i}_fifth_${midiNumber}`}\n                style={{\n                  position: \"absolute\",\n                  width,\n                  height: 0,\n                  left: fromX,\n                  top: midiNumberToY(midiNumber - 6) - 0.5,\n                  pointerEvents: \"none\",\n                  borderBottom: \"0.5px dashed #333\",\n                  zIndex: 0,\n                }}\n              />,\n            );\n        }\n      }\n    }\n    return result;\n  },\n);\n\nconst renumberMeasure: (\n  measureStart: number,\n  measureRenumbering: MeasureRenumbering,\n) => number = (measureStart, measureRenumbering) => {\n  if (measureRenumbering === undefined) {\n    return measureStart;\n  }\n\n  let maxKey: number | undefined = undefined;\n  Object.keys(measureRenumbering).forEach((key) => {\n    const numericKey = parseInt(key, 10);\n    if (\n      numericKey <= measureStart &&\n      (maxKey === undefined || numericKey > maxKey)\n    ) {\n      maxKey = numericKey;\n    }\n  });\n\n  if (maxKey === undefined) {\n    return measureStart;\n  }\n  return measureStart + measureRenumbering[maxKey] - maxKey;\n};\n\ninterface AnalysisGridProps {\n  analysis: Analysis;\n  measuresAndBeats: MeasuresAndBeats;\n  midiNumberToY: (number: number) => number;\n  noteHeight: number;\n  phraseStarts: number[];\n  midiRange: MidiRange;\n  measureSelection: MeasureSelection;\n  showHeader?: boolean;\n  showTonalGrid?: boolean;\n  secondsToX: (number) => number;\n  sectionSpan?: MeasuresSpan;\n}\n\nexport const AnalysisGrid: React.FC<AnalysisGridProps> = React.memo(\n  ({\n    analysis,\n    measuresAndBeats,\n    midiNumberToY,\n    noteHeight,\n    measureSelection,\n    phraseStarts,\n    midiRange,\n    showHeader = true,\n    showTonalGrid = true,\n    secondsToX,\n    sectionSpan = null,\n  }) => {\n    const { measures, beats } = measuresAndBeats;\n    if (sectionSpan == null) {\n      sectionSpan = [0, measures.length - 1];\n    }\n    const modulationsArray = getModulations(analysis);\n    const modulations = new Map(\n      modulationsArray.map(({ measure, tonic }) => [measure, tonic]),\n    );\n\n    const findPreviousTonic = (currentMeasure: number): PitchClass | null =>\n      modulationsArray.reduce(\n        (acc, { measure, tonic }) =>\n          measure < currentMeasure && measure > acc.measure\n            ? { measure, tonic }\n            : acc,\n        { measure: -Infinity, tonic: null },\n      ).tonic;\n\n    const showAllMeasureBars = true;\n\n    // TODO: filter measures and beats using sectionSpan\n    const showBeats = React.useMemo(() => {\n      const relevantBars = [...measures, ...beats]\n        .filter(\n          (bar) =>\n            bar !== 0 &&\n            bar >= measures[sectionSpan[0]] &&\n            bar <= measures[sectionSpan[1]],\n        )\n        .sort((a, b) => a - b);\n      return (\n        (secondsToX(relevantBars.at(-1)) - secondsToX(relevantBars.at(0))) /\n          (relevantBars.length + 1) >=\n        MIN_WIDTH_BETWEEN_BEATS\n      );\n    }, [measures, beats, secondsToX, sectionSpan]);\n\n    const selectedPhraseStart =\n      phraseStarts.indexOf(measureSelection.selectedMeasure) !== -1\n        ? measureSelection.selectedMeasure\n        : -1;\n    return (\n      <div style={{ zIndex: 15 }}>\n        {measures.map((time, i) => {\n          const number = i + 1;\n          const displayNumber = renumberMeasure(\n            i + 1,\n            analysis.measureRenumbering,\n          );\n          return sectionSpan[0] <= i && i <= sectionSpan[1] ? (\n            <Measure\n              key={i}\n              showHeader={showHeader && i < sectionSpan[1]}\n              span={[time, measures[number] ?? time]}\n              isPhraseStart={phraseStarts.indexOf(number) !== -1}\n              number={number}\n              displayNumber={displayNumber}\n              measureSelection={measureSelection}\n              secondsToX={secondsToX}\n              showNonPhraseStarts={showAllMeasureBars}\n              tonicStart={modulations.get(i)}\n              previousTonic={findPreviousTonic(i)}\n              selectedPhraseStart={selectedPhraseStart}\n              sectionSpan={sectionSpan}\n              isLastSection={sectionSpan?.[1] + 1 === measures.length}\n            />\n          ) : null;\n        })}\n        {showBeats &&\n          beats.map((time) =>\n            time >= measures[sectionSpan[0]] &&\n            time <= measures[sectionSpan[1]] ? (\n              <Beat key={time} second={time} secondsToX={secondsToX} />\n            ) : null,\n          )}\n        {showTonalGrid && analysis.modulations[0] !== null && (\n          <TonalGrid\n            analysis={analysis}\n            measures={measures}\n            midiNumberToY={midiNumberToY}\n            noteHeight={noteHeight}\n            midiRange={midiRange}\n            secondsToX={secondsToX}\n            sectionSpan={sectionSpan}\n          />\n        )}\n      </div>\n    );\n  },\n);\n","import { faArrowUpRightFromSquare } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { doc, getFirestore, updateDoc } from \"firebase/firestore\";\nimport * as React from \"react\";\nimport {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { playRawMidiNote } from \"../../sampler/sampler\";\nimport { VoiceMask } from \"../App\";\nimport { AppContext } from \"../AppContext\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport { MeasureSelection } from \"./AnalysisGrid\";\nimport CompositionTitle from \"./CompositionTitle\";\nimport FrozenNotesLayout from \"./FrozenNotesLayout\";\nimport { MergedSystemLayout, SystemLayoutProps } from \"./SystemLayout\";\nimport {\n  ANALYSIS_STUB,\n  Analysis,\n  PitchClass,\n  advanceAnalysis,\n  getNewAnalysis,\n  getPhraseStarts,\n} from \"./analysis\";\nimport { findFirstPhraseStart, findTonic } from \"./autoAnalysis\";\nimport { MouseHandlers } from \"./getNoteRectangles\";\nimport LayoutSelector, { SystemLayout } from \"./layouts/LayoutSelector\";\nimport { buildManualMeasuresAndBeats } from \"./measures\";\nimport { ColoredNotesInVoices, Note, ParsingResult } from \"./parseMidi\";\n\nexport type SecondsSpan = [number, number];\n\nconst SECOND_WIDTH = 40;\n\nexport type SecondsConverter = (number) => number;\nexport const secondsToX__: SecondsConverter = (seconds) =>\n  seconds * SECOND_WIDTH;\nexport const xToSeconds__: SecondsConverter = (x) => x / SECOND_WIDTH;\n\nexport type SetVoiceMask = (mask: boolean[]) => void;\n\nexport type AppStateForRawl = {\n  voiceNames: string[];\n  voiceMask: VoiceMask;\n  setVoiceMask: SetVoiceMask;\n  latencyCorrectionMs: number;\n};\n\nexport const getTonic = (measure: number, analysis: Analysis): PitchClass => {\n  const modulations = getModulations(analysis);\n  let i = 0;\n  while (i + 1 < modulations.length && modulations[i + 1].measure <= measure) {\n    i++;\n  }\n  return modulations[i].tonic as PitchClass;\n};\n\nexport const getModulations = (analysis: Analysis) =>\n  Object.entries(analysis.modulations || [])\n    .map((entry) => ({\n      measure: parseInt(entry[0], 10) - 1,\n      tonic: entry[1],\n    }))\n    .sort((a, b) => a.measure - b.measure);\n\nconst getSecondsMeasure = (\n  seconds: number,\n  measures: number[] | null,\n): number => {\n  if (!measures) {\n    return -1;\n  }\n  const result = measures.findIndex((time) => time >= seconds);\n  return (result === -1 ? measures.length - 1 : result) - 1;\n};\n\nconst getNoteMeasure = (note: Note, measures: number[] | null): number =>\n  getSecondsMeasure((note.span[0] + note.span[1]) / 2, measures);\n\nexport const getNoteColor = (\n  note: Note,\n  analysis: Analysis,\n  measures: number[],\n): string =>\n  `noteColor_${\n    analysis.modulations[1] === null\n      ? \"default\"\n      : (note.note.midiNumber -\n          getTonic(getNoteMeasure(note, measures), analysis)) %\n        12\n  }_colors`;\n\nexport type RenumberMeasureCallback = (\n  measure: number,\n  isShift: boolean,\n) => void;\n\nexport type RawlProps = {\n  parsingResult: ParsingResult;\n  getCurrentPositionMs: () => number;\n  savedAnalysis?: Analysis;\n  saveAnalysis: (analysis: Analysis) => void;\n  voiceNames: string[];\n  voiceMask: VoiceMask;\n  setVoiceMask: (mask: VoiceMask) => void;\n  showAnalysisBox: boolean;\n  seek: (ms: number) => void;\n  latencyCorrectionMs: number;\n  sourceUrl: string | null;\n  measureStart?: number;\n  isEmbedded?: boolean;\n  isHiddenRoute?: boolean;\n};\n\nconst Rawl: React.FC<RawlProps> = ({\n  parsingResult,\n  getCurrentPositionMs,\n  savedAnalysis,\n  saveAnalysis,\n  voiceNames,\n  voiceMask,\n  setVoiceMask,\n  showAnalysisBox: enableManualRemeasuring,\n  seek,\n  latencyCorrectionMs,\n  sourceUrl,\n  measureStart,\n  isEmbedded = false,\n  isHiddenRoute = false,\n}) => {\n  const { currentMidi, setCurrentMidi, rawlProps, togglePause } =\n    useContext(AppContext);\n  const slug = currentMidi?.slug || \"\";\n\n  const [analysis, setAnalysis] = useState<Analysis>(\n    savedAnalysis || rawlProps?.savedAnalysis || ANALYSIS_STUB,\n  );\n\n  useEffect(() => {\n    if (savedAnalysis) {\n      setAnalysis(savedAnalysis);\n    } else if (rawlProps?.savedAnalysis) {\n      setAnalysis(rawlProps.savedAnalysis);\n    }\n  }, [savedAnalysis, rawlProps?.savedAnalysis]);\n\n  const analysisRef = useRef(analysis);\n  useEffect(() => {\n    analysisRef.current = analysis;\n  }, [analysis]);\n\n  const [systemLayout, setSystemLayout] = useState<SystemLayout>(\"merged\");\n\n  const commitAnalysisUpdate = useCallback(\n    (analysisUpdate: Partial<Analysis>) => {\n      const updatedAnalysis = { ...analysis, ...analysisUpdate };\n      saveAnalysis(updatedAnalysis);\n      setAnalysis(updatedAnalysis);\n    },\n    [analysis, saveAnalysis],\n  );\n\n  const [selectedMeasure, setSelectedMeasure] = useState<number | null>(null);\n\n  const selectedMeasureRef = useRef(selectedMeasure);\n  useEffect(() => {\n    selectedMeasureRef.current = selectedMeasure;\n  }, [selectedMeasure]);\n\n  const { notes } = parsingResult;\n  const allNotes = useMemo(() => notes.flat(), [notes]);\n\n  const [hoveredNote, setHoveredNote] = useState<Note | null>(null);\n\n  const playNote = useCallback((note: Note) => {\n    const duration = note.span[1] - note.span[0];\n    playRawMidiNote(note.note.midiNumber, duration * 1000);\n  }, []);\n\n  const handleMouseEnter = useCallback(\n    (note: Note) => {\n      if (!enableManualRemeasuring) {\n        if (selectedMeasureRef.current) {\n          setHoveredNote(note);\n        } else if (\n          window.event instanceof MouseEvent &&\n          window.event.shiftKey\n        ) {\n          playNote(note);\n        }\n      }\n    },\n    [enableManualRemeasuring, playNote],\n  );\n\n  const handleMouseLeave = useCallback(() => {\n    if (!enableManualRemeasuring) {\n      setHoveredNote(null);\n    }\n  }, [enableManualRemeasuring]);\n\n  const futureAnalysis = useMemo(\n    () =>\n      hoveredNote\n        ? getNewAnalysis(\n            hoveredNote,\n            selectedMeasureRef.current,\n            enableManualRemeasuring,\n            analysisRef.current,\n          )\n        : analysis,\n    [hoveredNote, analysis, enableManualRemeasuring],\n  );\n  const measuresAndBeats = useMemo(() => {\n    if (futureAnalysis.measures) {\n      return buildManualMeasuresAndBeats(futureAnalysis.measures, allNotes);\n    }\n    return parsingResult?.measuresAndBeats;\n  }, [futureAnalysis, allNotes, parsingResult]);\n\n  const selectMeasure = useCallback(\n    (measure) => {\n      if (\n        selectedMeasure &&\n        getPhraseStarts(analysis, measuresAndBeats.measures.length).indexOf(\n          selectedMeasure,\n        ) !== -1\n      ) {\n        const diff = measure - selectedMeasure;\n        if (diff >= -4) {\n          // prevent accidental misclicks when a selection is forgotten by user\n          const analysisUpdate: Partial<Analysis> = {\n            phrasePatch: [\n              ...analysis.phrasePatch,\n              { measure: selectedMeasure, diff },\n            ],\n          };\n          setSelectedMeasure(null);\n          commitAnalysisUpdate(analysisUpdate);\n        }\n      } else {\n        setSelectedMeasure(measure);\n      }\n      setHoveredNote(null);\n    },\n    [selectedMeasure, analysis, measuresAndBeats],\n  );\n  const splitAtMeasure = useCallback(\n    (groupByPhrasesTillTheEnd: boolean, groupSize: number = 2) => {\n      const phraseStarts = getPhraseStarts(\n        analysis,\n        measuresAndBeats.measures.length,\n      );\n      const newSections = [phraseStarts.indexOf(selectedMeasure)];\n\n      if (newSections[0] === -1) {\n        alert(\n          `splitAtMeasure, not found ${selectedMeasure} in ${JSON.stringify(\n            phraseStarts,\n          )}`,\n        );\n      } else {\n        if (groupByPhrasesTillTheEnd) {\n          for (\n            let i = newSections[0];\n            i < phraseStarts.length - 1;\n            i += groupSize\n          ) {\n            newSections.push(i);\n          }\n        }\n\n        const analysisUpdate: Partial<Analysis> = {\n          sections: [\n            ...new Set([...(analysis.sections ?? [0]), ...newSections]),\n          ].sort((a, b) => a - b),\n        };\n        setSelectedMeasure(null);\n        commitAnalysisUpdate(analysisUpdate);\n      }\n    },\n    [selectedMeasure, analysis, measuresAndBeats],\n  );\n  const mergeAtMeasure = useCallback(() => {\n    const phraseStarts = getPhraseStarts(\n      analysis,\n      measuresAndBeats.measures.length,\n    );\n    const sectionToRemove = phraseStarts.indexOf(selectedMeasure);\n    if (sectionToRemove === -1) {\n      alert(\n        `mergeAtMeasure, not found ${selectedMeasure} in ${JSON.stringify(\n          phraseStarts,\n        )}`,\n      );\n    } else {\n      const analysisUpdate: Partial<Analysis> = {\n        sections: (analysis.sections ?? [0]).filter(\n          (section) => section !== sectionToRemove,\n        ),\n      };\n      setSelectedMeasure(null);\n      commitAnalysisUpdate(analysisUpdate);\n    }\n  }, [selectedMeasure, analysis, measuresAndBeats]);\n\n  const renumberMeasure = useCallback(\n    (displayNumber, isShift) => {\n      setSelectedMeasure(null);\n\n      const analysisUpdate =\n        enableManualRemeasuring && isShift\n          ? {\n              measures: {\n                beatsPerMeasure: {\n                  ...(analysis.measures?.beatsPerMeasure ?? {}),\n                  [selectedMeasure]: displayNumber,\n                },\n                measureStarts: analysis.measures?.measureStarts ?? {},\n              },\n            }\n          : {\n              measureRenumbering: {\n                [selectedMeasure]: displayNumber,\n              },\n            };\n      commitAnalysisUpdate(analysisUpdate);\n    },\n    [selectMeasure, analysis, selectedMeasure, enableManualRemeasuring],\n  );\n\n  useEffect(() => {\n    if (analysis.phrasePatch?.length > 0) {\n      return;\n    }\n\n    const firstPhraseStart = findFirstPhraseStart(allNotes, measuresAndBeats);\n    const diff: Partial<Analysis> = {};\n    if (firstPhraseStart !== -1) {\n      diff.phrasePatch = [{ measure: 1, diff: firstPhraseStart }];\n    }\n\n    const tonic = findTonic(allNotes);\n    if (tonic !== -1 && analysis.modulations[1] === null) {\n      diff.modulations = { 1: tonic };\n    }\n    setAnalysis({ ...analysis, ...diff });\n  }, [allNotes]);\n\n  const handleNoteClick = useCallback(\n    (note: Note) => {\n      if (selectedMeasureRef.current) {\n        advanceAnalysis(\n          note,\n          selectedMeasureRef.current,\n          enableManualRemeasuring,\n          setSelectedMeasure,\n          analysisRef.current,\n          commitAnalysisUpdate,\n        );\n      } else {\n        playNote(note);\n      }\n    },\n    [enableManualRemeasuring, commitAnalysisUpdate, playNote],\n  );\n\n  const [positionMs, setPositionMs] = useState(0);\n\n  useEffect(() => {\n    let running = true;\n\n    const animate = () => {\n      if (!running) {\n        return;\n      }\n\n      setPositionMs(getCurrentPositionMs() - latencyCorrectionMs);\n      requestAnimationFrame(animate);\n    };\n\n    animate();\n\n    return () => {\n      running = false;\n    };\n  }, [latencyCorrectionMs]);\n\n  useEffect(() => {\n    const handleEscapePress = (event) => {\n      if (event.key === \"Escape\" || event.keyCode === 27) {\n        selectMeasure(null);\n      }\n    };\n\n    document.addEventListener(\"keydown\", handleEscapePress);\n\n    return () => {\n      document.removeEventListener(\"keydown\", handleEscapePress);\n    };\n  }, []);\n\n  const systemClickHandler = useCallback(\n    (e: React.MouseEvent, xToSeconds = xToSeconds__) => {\n      const targetElement = e.target as HTMLElement;\n      const rect = targetElement.getBoundingClientRect();\n      const distance = e.clientX - rect.left + targetElement.scrollLeft;\n      const time = xToSeconds(distance);\n\n      if (enableManualRemeasuring && selectedMeasure) {\n        advanceAnalysis(\n          {\n            span: [time, -1],\n            note: { midiNumber: -1 },\n            isDrum: false,\n            chipState: { on: {}, off: {} },\n            id: -1,\n            voiceIndex: -1,\n          },\n          selectedMeasureRef.current,\n          enableManualRemeasuring,\n          setSelectedMeasure,\n          analysisRef.current,\n          commitAnalysisUpdate,\n        );\n      } else {\n        selectMeasure(null);\n\n        seek(time * 1000);\n      }\n    },\n    [\n      seek,\n      selectMeasure,\n      selectedMeasure,\n      enableManualRemeasuring,\n      commitAnalysisUpdate,\n    ],\n  );\n\n  const positionSeconds = positionMs / 1000;\n\n  // Calculate current tonic based on position\n  const currentTonic = useMemo(() => {\n    if (!measuresAndBeats?.measures) return 0;\n    const currentMeasure = getSecondsMeasure(\n      positionSeconds,\n      measuresAndBeats.measures,\n    );\n    return getTonic(currentMeasure, futureAnalysis);\n  }, [positionSeconds, measuresAndBeats, futureAnalysis]);\n\n  const mouseHandlers: MouseHandlers = useMemo(\n    () => ({\n      handleNoteClick,\n      handleMouseEnter,\n      handleMouseLeave,\n      hoveredNote,\n      systemClickHandler,\n    }),\n    [\n      handleNoteClick,\n      handleMouseEnter,\n      handleMouseLeave,\n      hoveredNote,\n      systemClickHandler,\n    ],\n  );\n\n  const measureSelection: MeasureSelection = useMemo(\n    () => ({\n      selectedMeasure,\n      selectMeasure,\n      splitAtMeasure,\n      mergeAtMeasure,\n      renumberMeasure,\n    }),\n    [\n      selectedMeasure,\n      selectMeasure,\n      splitAtMeasure,\n      mergeAtMeasure,\n      renumberMeasure,\n    ],\n  );\n\n  const [hoveredColors, setHoveredColors] = useState<string[] | null>(null);\n\n  const coloredNotes: ColoredNotesInVoices = useMemo(\n    () =>\n      notes.map((notesInVoice, voiceIndex) =>\n        notesInVoice.map((note) => {\n          const colorPitchClass = note.isDrum ? -1 : note.note.midiNumber % 12;\n          return {\n            ...note,\n            color: note.isDrum\n              ? \"noteColor_drum\"\n              : getNoteColor(note, futureAnalysis, measuresAndBeats.measures),\n            isActive: voiceMask[voiceIndex],\n            colorPitchClass,\n          };\n        }),\n      ),\n    [notes, futureAnalysis, measuresAndBeats, voiceMask],\n  );\n\n  const systemLayoutProps: SystemLayoutProps = useMemo(\n    () => ({\n      notes: coloredNotes,\n      voiceMask,\n      voiceNames,\n      setVoiceMask,\n      measuresAndBeats,\n      positionSeconds,\n      mouseHandlers,\n      measureSelection,\n      analysis: futureAnalysis,\n      frozenNotes: coloredNotes,\n      saveAnalysis,\n      measureStart,\n      slug,\n      currentTonic,\n      togglePause,\n      seek,\n      hoveredColors,\n      setHoveredColors,\n    }),\n    [\n      coloredNotes,\n      voiceMask,\n      voiceNames,\n      setVoiceMask,\n      measuresAndBeats,\n      positionSeconds,\n      mouseHandlers,\n      measureSelection,\n      futureAnalysis,\n      saveAnalysis,\n      measureStart,\n      slug,\n      currentTonic,\n      togglePause,\n      seek,\n      hoveredColors,\n      setHoveredColors,\n    ],\n  );\n\n  useEffect(() => {\n    console.log(\"Rawl: measureStart changed\", measureStart);\n    if (measureStart !== undefined && measuresAndBeats) {\n      const absoluteMeasureStart =\n        measureStart + (analysis.measureRenumbering?.[1] || 0) - 1;\n      const seekTime = measuresAndBeats.measures[absoluteMeasureStart] - 1;\n      if (seekTime !== undefined) {\n        console.log(\"Seeking to time:\", seekTime * 1000);\n        seek(seekTime * 1000);\n      }\n    }\n  }, [measureStart, measuresAndBeats, analysis.measureRenumbering, seek]);\n\n  const handleSourceUrlUpdate = async (newUrl: string) => {\n    if (currentMidi) {\n      const db = getFirestore();\n      const midiDocRef = doc(db, \"midis\", currentMidi.id);\n\n      try {\n        await updateDoc(midiDocRef, { url: newUrl });\n        setCurrentMidi({ ...currentMidi, sourceUrl: newUrl });\n      } catch (error) {\n        console.error(\"Error updating source URL:\", error);\n        alert(\"Failed to update source URL. Please try again.\");\n      }\n    }\n  };\n\n  return (\n    <div\n      style={{\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: \"100%\",\n        paddingLeft: \"30px\",\n        overflow: \"hidden\",\n      }}\n    >\n      {isEmbedded && (\n        <>\n          <div\n            style={{\n              borderTop: \"1px solid #666\",\n              flexShrink: 0,\n            }}\n          />\n          <Link\n            to={`/f/${slug}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            style={{\n              position: \"fixed\",\n              top: \"calc(50vh + 1px)\",\n              right: \"10px\",\n              color: \"white\",\n              backgroundColor: \"black\",\n              padding: \"5px 10px\",\n              borderRadius: \"5px\",\n              textDecoration: \"none\",\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: \"5px\",\n              zIndex: 100000000,\n              fontSize: \"14px\",\n            }}\n          >\n            <span>\n              {slug\n                .replace(/---/g, \" – \")\n                .replace(/-/g, \" \")\n                .replace(/_/g, \" \")}\n            </span>\n            <FontAwesomeIcon icon={faArrowUpRightFromSquare} />\n          </Link>\n        </>\n      )}\n      <div\n        style={{\n          flexGrow: 1,\n          display: \"flex\",\n          flexDirection: \"column\",\n          overflow: \"hidden\",\n        }}\n      >\n        <div\n          key=\"innerLeftPanel\"\n          style={{\n            margin: 0,\n            padding: 0,\n            position: \"relative\",\n            overflowX: \"scroll\",\n            overflowY: \"scroll\",\n            flexGrow: 1,\n            backgroundColor: \"black\",\n          }}\n          className=\"Rawl\"\n        >\n          {slug && !isHiddenRoute && (\n            <CompositionTitle\n              slug={slug}\n              sourceUrl={sourceUrl}\n              onSourceUrlUpdate={handleSourceUrlUpdate}\n            />\n          )}\n          {systemLayout === \"merged\" ? (\n            <MergedSystemLayout\n              {...systemLayoutProps}\n              enableManualRemeasuring={enableManualRemeasuring}\n              isEmbedded={isEmbedded}\n            />\n          ) : (\n            <ErrorBoundary\n              fallback={<div>Error loading Frozen Notes Layout</div>}\n            >\n              <FrozenNotesLayout\n                {...systemLayoutProps}\n                saveAnalysis={saveAnalysis}\n              />\n            </ErrorBoundary>\n          )}\n        </div>\n        {!isEmbedded && <LayoutSelector setSystemLayout={setSystemLayout} />}\n      </div>\n      <div style={{ color: \"gray\" }}>\n        Shift+hover or click the note to play it separately\n        <br />\n        Press \"Space\" to play/pause\n      </div>\n    </div>\n  );\n};\n\nexport default Rawl;\n","import { MAJOR_MODE, MINOR_MODE, STRICT_NATURAL_MINOR } from \"./legends/chords\";\n\nexport type Top100Composer = {\n  slug: string;\n  composer: string;\n  chords?: string[];\n  displayTitle: string;\n  isVocal?: boolean;\n};\n\nexport const TOP_100_COMPOSERS: Top100Composer[] = [\n  {\n    slug: \"river-flows-in-you\",\n    composer: \"Yiruma\",\n    displayTitle: \"River Flows in You\",\n    chords: MINOR_MODE.chords,\n  },\n  {\n    slug: \"Merry_Go_Round_of_Life_Howls_Moving_Castle_Piano_Tutorial_\",\n    composer: \"Joe Hisaishi\",\n    displayTitle: \"Merry-Go-Round of Life (from Howl's Moving Castle)\",\n  },\n  {\n    slug: \"Canon_in_D\",\n    composer: \"Johann Pachelbel\",\n    displayTitle: \"Canon in D major\",\n  },\n  {\n    slug: \"Clair_de_Lune__Debussy\",\n    composer: \"Claude Debussy\",\n    displayTitle: \"Clair de Lune\",\n  },\n  {\n    slug: \"Fr_Elise\",\n    composer: \"Ludwig van Beethoven\",\n    displayTitle: \"Für Elise\",\n  },\n  {\n    slug: \"Chopin_-_Nocturne_Op_9_No_2_E_Flat_Major\",\n    composer: \"Frédéric Chopin\",\n    displayTitle: \"Nocturne in E-flat major, Op. 9 No. 2\",\n  },\n  {\n    slug: \"Gymnopdie_No._1__Satie\",\n    composer: \"Erik Satie\",\n    displayTitle: \"Gymnopédie No. 1\",\n  },\n  {\n    slug: \"Undertale_-_Megalovania_Piano_ver._3\",\n    composer: \"Toby Fox\",\n    displayTitle: \"Megalovania (from Undertale)\",\n  },\n  {\n    slug: \"Golden_Hour__JVKE_Updated_Ver.\",\n    composer: \"JVKE\",\n    displayTitle: \"Golden Hour\",\n    isVocal: true,\n  },\n  {\n    slug: \"Je_Te_Laisserai_Des_Mots_-_Patrick_Watson\",\n    composer: \"Patrick Watson\",\n    displayTitle: \"Je te laisserai des mots\",\n    isVocal: true,\n  },\n  {\n    slug: \"Hallelujah\",\n    composer: \"Leonard Cohen\",\n    displayTitle: \"Hallelujah\",\n    isVocal: true,\n  },\n  {\n    slug: \"Interstellar\",\n    composer: \"Hans Zimmer\",\n    displayTitle: \"Interstellar Main Theme\",\n    chords: STRICT_NATURAL_MINOR.chords,\n  },\n  {\n    slug: \"Another_Love__-_Tom_Odell_Professional\",\n    composer: \"Tom Odell\",\n    displayTitle: \"Another Love\",\n    isVocal: true,\n  },\n  {\n    slug: \"Sweden_Minecraft\",\n    composer: \"C418\",\n    displayTitle: \"Sweden (from Minecraft)\",\n  },\n  {\n    slug: \"Pirates_of_the_Caribbean_-_Hes_a_Pirate\",\n    composer: \"Klaus Badelt\",\n    displayTitle: \"He's a Pirate (from Pirates of the Caribbean)\",\n  },\n  {\n    slug: \"Game_of_Thrones_Easy_piano\",\n    composer: \"Ramin Djawadi\",\n    displayTitle: \"Game of Thrones Main Theme\",\n  },\n  {\n    slug: \"someone-you-loved-lewis-capaldi\",\n    composer: \"Lewis Capaldi\",\n    displayTitle: \"Someone You Loved\",\n    isVocal: true,\n  },\n  {\n    slug: \"Ed_Sheeran_Perfect\",\n    composer: \"Ed Sheeran\",\n    displayTitle: \"Perfect\",\n    isVocal: true,\n  },\n  {\n    slug: \"Liebestraum_No._3_in_A_Major\",\n    composer: \"Franz Liszt\",\n    displayTitle: \"Liebestraum No. 3 in A-flat major\",\n  },\n  {\n    slug: \"Believer_-_Imagine_Dragons\",\n    composer: \"Imagine Dragons\",\n    displayTitle: \"Believer\",\n    chords: [\"i\", \"bVI\", \"V\"],\n    isVocal: true,\n  },\n  {\n    slug: \"All_Of_Me_-_John_Legend_Piano_Cover_-_ReiK\",\n    composer: \"John Legend\",\n    displayTitle: \"All of Me\",\n    isVocal: true,\n  },\n  {\n    slug: \"Mad_world_Piano\",\n    composer: \"Tears for Fears (Roland Orzabal)\",\n    displayTitle: \"Mad World\",\n    chords: [\"ii\", \"IV\", \"I\", \"V\"],\n    isVocal: true,\n  },\n  {\n    slug: \"mariage-d-amour---paul-de-senneville-marriage-d-amour\",\n    composer: \"Paul de Senneville\",\n    displayTitle: \"Mariage d'Amour\",\n  },\n  {\n    slug: \"someone-like-you\",\n    composer: \"Adele\",\n    chords: MAJOR_MODE.chords,\n    displayTitle: \"Someone Like You\",\n    isVocal: true,\n  },\n  {\n    slug: \"my-heart-will-go-on\",\n    composer: \"James Horner\",\n    displayTitle: \"My Heart Will Go On (from Titanic)\",\n    isVocal: true,\n  },\n  {\n    slug: \"Jojo_s_Bizarre_Adventure_Golden_Wind_Giornos_Theme_Ver_2\",\n    composer: \"Yugo Kanno\",\n    displayTitle: \"Il vento d'oro (Giorno's Theme)\",\n    isVocal: true,\n  },\n  {\n    slug: \"Carol_of_the_Bells\",\n    composer: \"Mykola Leontovych\",\n    displayTitle: \"Carol of the Bells (Shchedryk)\",\n    isVocal: true,\n  },\n  {\n    slug: \"piano-man-piano\",\n    composer: \"Billy Joel\",\n    displayTitle: \"Piano Man\",\n    isVocal: true,\n  },\n  {\n    slug: \"Fly_Me_to_the_Moon\",\n    composer: \"Bart Howard\",\n    displayTitle: \"Fly Me to the Moon (In Other Words)\",\n    isVocal: true,\n  },\n  {\n    slug: \"passacaglia---handel-halvorsen\",\n    composer: \"Handel\",\n    displayTitle: \"Passacaglia in G minor (arr. Halvorsen)\",\n  },\n\n  {\n    slug: \"prelude-i-in-c-major-bwv-846---well-tempered-clavier-first-book\",\n    composer: \"Bach\",\n    displayTitle: \"Prelude in C major, BWV 846\",\n  },\n  {\n    slug: \"All_I_Want_for_Christmas_is_You\",\n    composer: \"Mariah Carey\",\n    displayTitle: \"All I Want for Christmas Is You\",\n    isVocal: true,\n  },\n  {\n    slug: \"Waltz_No._2_The_Second_Waltz_by_Dmitri_Shostakovich_for_Piano\",\n    composer: \"Shostakovich\",\n    displayTitle: \"Waltz No. 2 (Suite for Variety Orchestra)\",\n  },\n  {\n    slug: \"wa-mozart-marche-turque-turkish-march-fingered\",\n    composer: \"Mozart\",\n    displayTitle: \"Turkish March (Rondo alla Turca)\",\n  },\n  {\n    slug: \"Viva_La_Vida_Coldplay\",\n    composer: \"Coldplay\",\n    displayTitle: \"Viva la Vida\",\n    chords: [\"IV\", \"V\", \"I\", \"vi\"],\n    isVocal: true,\n  },\n  {\n    slug: \"Gravity_Falls_Opening\",\n    composer: \"Brad Breeck\",\n    displayTitle: \"Gravity Falls Theme\",\n  },\n  {\n    slug: \"the_entertainer_scott_joplin\",\n    composer: \"Scott Joplin\",\n    displayTitle: \"The Entertainer\",\n  },\n  {\n    slug: \"Disney_Pixar_Up_Theme\",\n    composer: \"Michael Giacchino\",\n    displayTitle: \"Married Life (from Up)\",\n  },\n  {\n    slug: \"a-thousand-years\",\n    composer: \"Christina Perri\",\n    displayTitle: \"A Thousand Years\",\n    isVocal: true,\n  },\n  {\n    slug: \"John_Lennon_Imagine\",\n    composer: \"John Lennon\",\n    displayTitle: \"Imagine\",\n    isVocal: true,\n  },\n\n  {\n    slug: \"runaway---kanye-west-ramin-djawadi-arr.-by-alex-patience\",\n    composer: \"Kanye West\",\n    displayTitle: \"Runaway (arr. Ramin Djawadi for Westworld Season 2)\",\n    chords: [\"I\", \"iii\", \"IV\", \"vi\"],\n    isVocal: true,\n  },\n  {\n    slug: \"Lovely_Billie_Eilish\",\n    composer: \"Billie Eilish\",\n    displayTitle: \"Lovely (with Khalid)\",\n    isVocal: true,\n    chords: STRICT_NATURAL_MINOR.chords,\n  },\n  {\n    slug: \"Omori_Duet\",\n    composer: \"Pedro Silva\",\n    displayTitle: \"Duet (from Omori)\",\n  },\n  {\n    slug: \"Never_Gonna_Give_You_Up\",\n    composer: \"Mike Stock\",\n    displayTitle: \"Never Gonna Give You Up\",\n    isVocal: true,\n    chords: STRICT_NATURAL_MINOR.chords,\n  },\n  {\n    slug: \"despacito-piano-cover-peter-bence\",\n    composer: \"Luis Fonsi\",\n    displayTitle: \"Despacito\",\n    chords: [\"i\", \"bVI\", \"bVII\", \"bIII\"],\n    isVocal: true,\n  },\n  {\n    slug: \"solas---jamie-duffy\",\n    composer: \"Jamie Duffy\",\n    displayTitle: \"Solas\",\n  },\n  {\n    slug: \"autumn-leaves-jazz-piano\",\n    composer: \"Joseph Kosma\",\n    displayTitle: \"Autumn Leaves (Les Feuilles mortes)\",\n    isVocal: true,\n  },\n  {\n    slug: \"still-dre---variation-composition\",\n    composer: \"Andre Young\",\n    displayTitle: \"Still D.R.E.\",\n    chords: [\"i\", \"iv\"],\n    isVocal: true,\n  },\n\n  {\n    slug: \"mii-channel-piano\",\n    composer: \"Kazumi Totaka\",\n    displayTitle: \"Mii Channel Theme\",\n  },\n\n  {\n    slug: \"sadness-and-sorrow-for-piano-solo\",\n    composer: \"Toshio Masuda\",\n    displayTitle: \"Sadness and Sorrow (from Naruto)\",\n  },\n  {\n    slug: \"Super_Mario_Bros_Main_Theme\",\n    composer: \"Koji Kondo\",\n    displayTitle: \"Super Mario Bros. Main Theme\",\n  },\n  {\n    slug: \"Cant_Help_Falling_In_Love\",\n    composer: \"Jean-Paul-Égide Martini\",\n    displayTitle: \"Can't Help Falling in Love\",\n    isVocal: true,\n  },\n  {\n    slug: \"g-minor-bach-original\",\n    composer: \"Luo Ni\",\n    displayTitle: \"G minor Bach (from Piano Tiles 2, an adaptation of BWV 847)\",\n  },\n  {\n    slug: \"when-i-was-your-man---bruno-mars-600e3a\",\n    composer: \"Bruno Mars\",\n    displayTitle: \"When I Was Your Man\",\n    isVocal: true,\n  },\n  {\n    slug: \"gurenge--demon-slayer-kimetsu-no-yaiba-op\",\n    composer: \"Kayoko Kusano\",\n    displayTitle: \"Gurenge (Demon Slayer Opening)\",\n    isVocal: true,\n  },\n  {\n    slug: \"Let_Her_Go_Passenger\",\n    composer: \"Passenger\",\n    displayTitle: \"Let Her Go\",\n    isVocal: true,\n  },\n  {\n    slug: \"we-are-number-one-but-it-s-a-piano-transcript\",\n    composer: \"Máni Svavarsson\",\n    displayTitle: \"We Are Number One (LazyTown)\",\n    chords: [\"i\", \"bVI\", \"V\"],\n    isVocal: true,\n  },\n  {\n    slug: \"dragonborn---skyrim-theme-song-piano-solo\",\n    composer: \"Jeremy Soule\",\n    displayTitle: \"Dragonborn (Skyrim Theme)\",\n    isVocal: true,\n  },\n  {\n    slug: \"doki-doki-literature-club-ost---your-reality\",\n    composer: \"Dan Salvato\",\n    displayTitle: \"Your Reality (from Doki Doki Literature Club)\",\n  },\n\n  {\n    slug: \"ylang-ylang---fkj-transcribed-by-lilroo\",\n    composer: \"FKJ\",\n    displayTitle: \"Ylang Ylang\",\n  },\n  {\n    slug: \"attack-on-titan-theme-guren-no-yumiya\",\n    composer: \"Hiroyuki Sawano\",\n    displayTitle: \"Guren no Yumiya (Attack on Titan Opening)\",\n    isVocal: true,\n  },\n  {\n    slug: \"Bella_Ciao\",\n    composer: \"Italian folk\",\n    displayTitle: \"Bella ciao\",\n    isVocal: true,\n  },\n  {\n    slug: \"minuet-bwv-anhang-114-in-g-major\",\n    composer: \"Christian Petzold\",\n    displayTitle: \"Minuet in G major, BWV Anh. 114\",\n  },\n  {\n    slug: \"Take_on_me\",\n    composer: \"a-ha\",\n    displayTitle: \"Take On Me\",\n    isVocal: true,\n  },\n  {\n    slug: \"congratulations---mac-miller\",\n    composer: \"Mac Miller\",\n    displayTitle: \"Congratulations\",\n    isVocal: true,\n  },\n  {\n    slug: \"the-office\",\n    composer: \"Jay Ferguson\",\n    displayTitle: \"The Office - Main Theme\",\n    chords: [\"I\", \"iii\", \"IV\", \"vi\"],\n  },\n  {\n    slug: \"it-s-been-a-long-long-time---harry-james\",\n    composer: \"Jule Styne\",\n    displayTitle: \"It's Been a Long, Long Time\",\n    isVocal: true,\n  },\n  {\n    slug: \"Dawn_Pride_and_Prejudice\",\n    composer: \"Dario Marianelli\",\n    displayTitle: \"Dawn (from Pride & Prejudice)\",\n  },\n  {\n    slug: \"kimi-no-na-wa---sparkle-theishter-2016\",\n    composer: \"Radwimps\",\n    displayTitle: \"Sparkle (from Your Name 2016)\",\n    isVocal: true,\n  },\n\n  {\n    slug: \"Yann_Tiersen_Amelie\",\n    composer: \"Yann Tiersen\",\n    displayTitle: \"Comptine d'un autre été (from Amélie)\",\n    chords: [\"vi\", \"I\", \"iii\", \"V\"],\n  },\n  {\n    slug: \"sia---snowman\",\n    composer: \"Sia\",\n    displayTitle: \"Snowman\",\n    isVocal: true,\n  },\n  {\n    slug: \"isabella-s-lullaby-the-promised-neverland-emotional-anime-on-piano-vol.-2\",\n    composer: \"Takahiro Obata\",\n    displayTitle: \"Isabella's Lullaby (The Promised Neverland)\",\n  },\n  {\n    slug: \"theme-from-schindler-s-list---piano-solo\",\n    composer: \"John Williams\",\n    displayTitle: \"Theme from Schindler's List\",\n  },\n  {\n    slug: \"happy-birthday\",\n    composer: \"Patty Smith Hill\",\n    displayTitle: \"Happy Birthday to You\",\n    chords: [\"I\", \"IV\", \"V\"],\n    isVocal: true,\n  },\n  {\n    slug: \"flight-of-the-bumblebee\",\n    composer: \"Nikolai Rimsky-Korsakov\",\n    displayTitle: \"Flight of the Bumblebee\",\n  },\n  {\n    slug: \"dance-of-the-sugar-plum-fairy\",\n    composer: \"Pyotr Ilyich Tchaikovsky\",\n    displayTitle: \"Dance of the Sugar Plum Fairy\",\n  },\n  {\n    slug: \"dont-stop-believing-piano\",\n    composer: \"Journey\",\n    displayTitle: \"Don't Stop Believin'\",\n    isVocal: true,\n  },\n  {\n    slug: \"sign-of-the-times---harry-styles\",\n    composer: \"Harry Styles\",\n    displayTitle: \"Sign of the Times\",\n    isVocal: true,\n  },\n  {\n    slug: \"Requiem_for_a_Dream\",\n    composer: \"Clint Mansell\",\n    displayTitle: \"Lux Aeterna (from Requiem for a Dream)\",\n    chords: [\"i\", \"bVI\", \"V\"],\n  },\n\n  {\n    slug: \"yuri-on-ice---piano-theme-full\",\n    composer: \"Taro Umebayashi + Taku Matsushiba\",\n    displayTitle: \"Yuri on Ice Main Theme\",\n  },\n  {\n    slug: \"ye-niqu-keru-yoru-ni-kakeru---racing-into-the-night\",\n    composer: \"Ayase\",\n    displayTitle: \"Yoru ni Kakeru (Racing into the Night)\",\n    isVocal: true,\n  },\n  {\n    slug: \"africa---toto\",\n    composer: \"Toto (David Paich + Jeff Porcaro)\",\n    displayTitle: \"Africa\",\n    isVocal: true,\n  },\n  {\n    slug: \"vivaldi---summer---piano\",\n    composer: \"Antonio Vivaldi\",\n    displayTitle: \"Summer (from The Four Seasons)\",\n  },\n  {\n    slug: \"Love_Like_You_Steven_Universe\",\n    composer: \"Rebecca Sugar\",\n    displayTitle: \"Love Like You (from Steven Universe)\",\n    isVocal: true,\n  },\n  {\n    slug: \"alan-walker---alone-piano\",\n    composer: \"Alan Walker\",\n    displayTitle: \"Alone\",\n    chords: [\"vi\", \"I\", \"IV\", \"V\", \"iii\"],\n    isVocal: true,\n  },\n  {\n    slug: \"my-lie-watashi-no-uso---your-lie-in-april\",\n    composer: \"Masaru Yokoyama\",\n    displayTitle: \"Watashi no Uso, My Lie (from Your Lie in April)\",\n  },\n  {\n    slug: \"anastasia---once-upon-a-december\",\n    composer: \"Stephen Flaherty\",\n    displayTitle: \"Once Upon a December (from Anastasia)\",\n    isVocal: true,\n  },\n  {\n    slug: \"Test_Drive_How_to_Train_Your_Dragon\",\n    composer: \"John Powell\",\n    displayTitle: \"Test Drive (from How to Train Your Dragon)\",\n  },\n  {\n    slug: \"Pokemon_Theme_Song\",\n    composer: \"John Siegler\",\n    displayTitle: \"Pokémon Theme\",\n    isVocal: true,\n  },\n\n  {\n    slug: \"your-song-piano\",\n    composer: \"Elton John\",\n    displayTitle: \"Your Song\",\n    isVocal: true,\n  },\n  {\n    slug: \"nothing-else-matters---metallica\",\n    composer: \"Metallica\",\n    displayTitle: \"Nothing Else Matters\",\n    isVocal: true,\n  },\n  {\n    slug: \"calum-scott---you-are-the-reason-piano-sheet-lyrics-lyrics-version-link-in-description\",\n    composer: \"Calum Scott\",\n    displayTitle: \"You Are the Reason\",\n    isVocal: true,\n  },\n  {\n    slug: \"fairy-tail-main-theme\",\n    composer: \"Yasuharu Takanashi\",\n    displayTitle: \"Fairy Tail Main Theme\",\n  },\n  {\n    slug: \"welcome-to-the-black-parade---my-chemical-romance\",\n    composer: \"My Chemical Romance\",\n    displayTitle: \"Welcome to the Black Parade\",\n    isVocal: true,\n  },\n  {\n    slug: \"how-far-i-ll-go-~-moana-ost\",\n    composer: \"Lin-Manuel Miranda\",\n    displayTitle: \"How Far I'll Go (from Moana)\",\n    isVocal: true,\n  },\n  {\n    slug: \"la-vie-en-rose-solo-accordion\",\n    composer: \"Louiguy\",\n    displayTitle: \"La Vie en rose\",\n    isVocal: true,\n  },\n  {\n    slug: \"Im_Blue_Eiffel_65\",\n    composer: \"Eiffel 65\",\n    displayTitle: \"Blue (Da Ba Dee)\",\n    isVocal: true,\n    chords: STRICT_NATURAL_MINOR.chords,\n  },\n  {\n    slug: \"A_Thousand_Miles\",\n    composer: \"Vanessa Carlton\",\n    displayTitle: \"A Thousand Miles\",\n    isVocal: true,\n  },\n  {\n    slug: \"old-town-road---lil-nas-x-ft.-billy-ray-cyrus\",\n    composer: \"Lil Nas X\",\n    displayTitle: \"Old Town Road\",\n    isVocal: true,\n  },\n  {\n    slug: \"abba--the-winner-takes-it-all\",\n    composer: \"ABBA\",\n    displayTitle: \"The Winner Takes It All\",\n    isVocal: true,\n  },\n  {\n    slug: \"Sonate_No._14_Moonlight_1st_Movement\",\n    composer: \"Ludwig van Beethoven\",\n    displayTitle: \"Piano Sonata No. 14 'Moonlight', 1st Movement\",\n  },\n  {\n    slug: \"One_Summers_Day_Spirited_Away\",\n    composer: \"Joe Hisaishi\",\n    displayTitle: \"One Summer's Day (from Spirited Away)\",\n  },\n  {\n    slug: \"Waltz_in_A_MinorChopin\",\n    composer: \"Frédéric Chopin\",\n    displayTitle: \"Waltz No. 19 in A minor\",\n  },\n  {\n    slug: \"tude_S._1413_in_G_Minor_La_Campanella__Liszt\",\n    composer: \"Franz Liszt\",\n    displayTitle: \"Étude S. 141/3 in G minor (La Campanella)\",\n  },\n  {\n    slug: \"Kiss_The_Rain_-_Yiruma_-_10th_Anniversary_Version_Piano_Updated_2019\",\n    composer: \"Yiruma\",\n    displayTitle: \"Kiss the Rain - 10th Anniversary Version\",\n  },\n  {\n    slug: \"Wet_Hands_Minecraft\",\n    composer: \"C418\",\n    displayTitle: \"Wet Hands (from Minecraft)\",\n  },\n  {\n    slug: \"eda-s-requiem---brad-breeck-piano\",\n    composer: \"Brad Breeck\",\n    displayTitle: \"Eda's Requiem\",\n  },\n  {\n    slug: \"Maple_Leaf_Rag_Scott_Joplin\",\n    composer: \"Scott Joplin\",\n    displayTitle: \"Maple Leaf Rag\",\n  },\n  {\n    slug: \"kanye-west-homecoming-piano-cover\",\n    composer: \"Kanye West\",\n    displayTitle: \"Homecoming\",\n  },\n  {\n    slug: \"what-falling-in-love-feels-like---jake25.17-fanmade-extended-version\",\n    composer: \"JVKE\",\n    displayTitle: \"What Falling in Love Feels Like\",\n  },\n  {\n    slug: \"pachelbel-chaconne-in-f-minor\",\n    composer: \"Johann Pachelbel\",\n    displayTitle: \"Chaconne in F minor\",\n  },\n  {\n    slug: \"wii-sports-theme-piano\",\n    composer: \"Kazumi Totaka\",\n    displayTitle: \"Wii Sports Theme (From 'Nintendo Wii')\",\n  },\n  {\n    slug: \"Billie_Eilish_Bad_Guy\",\n    composer: \"Billie Eilish\",\n    displayTitle: \"Bad Guy\",\n  },\n  {\n    slug: \"secunda-the-elder-scrolls-v-skyrim\",\n    composer: \"Jeremy Soule\",\n    displayTitle: \"Secunda (from The Elder Scrolls V: Skyrim)\",\n  },\n  {\n    slug: \"liz-on-top-of-the-world\",\n    composer: \"Dario Marianelli\",\n    displayTitle: \"Liz on Top of the World\",\n  },\n  {\n    slug: \"Zeldas_Lullaby\",\n    composer: \"Koji Kondo\",\n    displayTitle: \"Zelda's Lullaby\",\n  },\n  {\n    slug: \"lacrimosa---requiem\",\n    composer: \"Mozart\",\n    displayTitle: \"Lacrimosa\",\n  },\n  {\n    slug: \"satie-e.---gnossienne-no.-1\",\n    composer: \"Erik Satie\",\n    displayTitle: \"Gnossienne No. 1\",\n  },\n  {\n    slug: \"arabesque-l.-66-no.-1-in-e-major\",\n    composer: \"Claude Debussy\",\n    displayTitle: \"Arabesque L. 66 No. 1 in E major\",\n  },\n  {\n    slug: \"Fallen_Down_Undertale\",\n    composer: \"Toby Fox\",\n    displayTitle: \"Fallen Down (from Undertale)\",\n  },\n  {\n    slug: \"the-scientist---coldplay-piano-arrangement\",\n    composer: \"Coldplay\",\n    displayTitle: \"The Scientist\",\n  },\n  {\n    slug: \"ballade-pour-adeline---richard-clayderman\",\n    composer: \"Richard Clayderman\",\n    displayTitle: \"Ballade pour Adeline\",\n  },\n];\n","import autoBindReact from \"auto-bind/react\";\nimport { initializeApp as firebaseInitializeApp } from \"firebase/app\";\nimport {\n  GoogleAuthProvider,\n  User,\n  getAuth,\n  onAuthStateChanged,\n  signInWithPopup,\n  signOut,\n} from \"firebase/auth\";\nimport { Bytes } from \"firebase/firestore\";\nimport {\n  Firestore,\n  doc,\n  getDoc,\n  getFirestore,\n  setDoc,\n} from \"firebase/firestore/lite\";\nimport clamp from \"lodash/clamp\";\nimport md5 from \"md5\";\nimport path from \"path\";\nimport queryString from \"querystring\";\nimport React from \"react\";\nimport Dropzone from \"react-dropzone\";\nimport Modal from \"react-modal\";\nimport {\n  Redirect,\n  Route,\n  RouteComponentProps,\n  Switch,\n  useParams,\n  withRouter,\n} from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { slugify } from \"transliteration\";\n\nimport ChipCore from \"../chip-core\";\nimport {\n  CATALOG_PREFIX,\n  ERROR_FLASH_DURATION_MS,\n  MAX_VOICES,\n  SOUNDFONT_MOUNTPOINT,\n} from \"../config\";\nimport firebaseConfig from \"../config/firebaseConfig\";\nimport defaultAnalyses from \"../corpus/analyses.json\";\nimport { handleSongClick as handleSongClickUtil } from \"../handlers/handleSongClick\";\nimport keySlugMapping from \"../keySlugMapping\";\nimport MIDIPlayer from \"../players/MIDIPlayer\";\nimport promisify from \"../promisify-xhr\";\nimport { ensureEmscFileWithData, unlockAudioContext } from \"../util\";\nimport Alert from \"./Alert\";\nimport { AppContext } from \"./AppContext\";\nimport AppFooter from \"./AppFooter\";\nimport AppHeader from \"./AppHeader\";\nimport DropMessage from \"./DropMessage\";\nimport Timeline from \"./Timeline\";\nimport CorpusSearch from \"./rawl/CorpusSearch\";\nimport OldLandingPage from \"./rawl/OldLandingPage\";\nimport Rawl, { RawlProps } from \"./rawl/Rawl\";\nimport { ShortcutHelp } from \"./rawl/ShortcutHelp\";\nimport { Analyses, MeasuresSpan } from \"./rawl/analysis\";\nimport Book from \"./rawl/book/Book\";\nimport Corpus from \"./rawl/corpora/Corpus\";\nimport Structures, { StructuresProps } from \"./rawl/corpora/Structures\";\nimport { DropSaveForm, saveMidiFromLink } from \"./rawl/midiStorage\";\nimport DAW from \"./rawl/pages/DAW\";\nimport { ParsingResult } from \"./rawl/parseMidi\";\nimport transformMidi from \"./rawl/transformMidi\";\n\nexport const DUMMY_CALLBACK = () => {};\n\nexport type VoiceMask = boolean[];\n\ntype AppState = {\n  loading: boolean;\n  loadingUser: boolean;\n  paused: boolean;\n  ejected: boolean;\n  playerError: null;\n  currentSongNumVoices: number;\n  currentSongDurationMs: number;\n  currentSongPositionMs: number;\n  tempo: number;\n  voiceMask: VoiceMask;\n  voiceNames: string[];\n  showPlayerError: boolean;\n  user: User;\n  songUrl: string;\n  volume: number;\n  directories: any;\n  paramDefs: any;\n  parsing: ParsingResult;\n  analysisEnabled: boolean;\n  analyses: Analyses;\n  latencyCorrectionMs: number;\n  fileToDownload: Uint8Array;\n  showShortcutHelp: boolean;\n  rawlProps: RawlProps | null;\n  currentMidi: {\n    id: string;\n    title: string;\n    slug: string;\n    sourceUrl: string | null;\n    isHiddenRoute: boolean;\n  } | null;\n  audioContextLocked: boolean;\n  audioContextState: string;\n  currentPlaybackTime: number | null;\n  currentMidiBuffer: ArrayBuffer | null;\n  hoveredMeasuresSpan: MeasuresSpan | null;\n};\n\nexport interface FirestoreMidiIndex {\n  midis: { id: string; slug: string; title: string }[];\n}\n\nexport interface FirestoreMidiDocument {\n  blob: Bytes;\n  slug: string;\n  title: string;\n  url: string | null; // This is named 'url' in Firestore but we use it as 'sourceUrl' internally\n}\n\ntype KeyboardHandler = (e: KeyboardEvent) => void;\n\nModal.setAppElement(\"#root\");\n\nfunction mergeAnalyses(existingAnalyses, newAnalyses) {\n  return {\n    ...existingAnalyses,\n    ...newAnalyses,\n  };\n}\n\nconst AppMainContent = styled.div`\n  margin-bottom: 25px; // Add space for fixed footer\n  height: 100vh; // Subtract header height and footer margin\n  overflow-y: auto; // Enable vertical scrolling\n  padding: 0; // Add some horizontal padding\n`;\n\nclass App extends React.Component<RouteComponentProps, AppState> {\n  private contentAreaRef: React.RefObject<HTMLDivElement>;\n  private errorTimer: number;\n  private midiPlayer: MIDIPlayer;\n  private currUrl: string;\n  private songRequest: (method: string, url: string) => Promise<any>;\n  private db: Firestore;\n  private mediaSessionAudio: HTMLAudioElement;\n  private gainNode: GainNode;\n  private chipCore: any;\n  private path: string;\n  private hash: string;\n  private midi: ArrayBuffer;\n  private droppedFilename: string;\n  private keyboardHandlers: Map<string, KeyboardHandler> = new Map();\n  private audioContext: AudioContext;\n  private playbackTimer: NodeJS.Timeout;\n\n  constructor(props) {\n    super(props);\n    autoBindReact(this);\n\n    this.attachMediaKeyHandlers();\n    this.contentAreaRef = React.createRef();\n    this.errorTimer = null;\n    this.midiPlayer = null; // Need a reference to MIDIPlayer to handle SoundFont loading.\n    this.currUrl = null;\n    this.songRequest = null;\n\n    // Initialize Firebase\n    const firebaseApp = firebaseInitializeApp(firebaseConfig);\n    const auth = getAuth(firebaseApp);\n    this.db = getFirestore(firebaseApp);\n\n    // Load the admin analyses\n    const adminDocRef = doc(this.db, \"users\", \"RK31rsh4tDdUGlNYQvakXW4AYbB3\");\n    getDoc(adminDocRef).then((adminSnapshot) => {\n      if (adminSnapshot.exists() && adminSnapshot.data().analyses) {\n        this.setState({\n          analyses: { ...defaultAnalyses, ...adminSnapshot.data().analyses },\n        });\n      }\n    });\n\n    onAuthStateChanged(auth, (user) => {\n      this.setState({\n        user,\n        loadingUser: !!user,\n      });\n      if (user) {\n        this.loadUserAnalyses(user.uid);\n      } else {\n        this.setState({ loadingUser: false });\n      }\n    });\n\n    // Initialize audio context\n    // @ts-ignore webkitAudioContext needed for Safari <=13\n    this.audioContext = new (window.AudioContext || window.webkitAudioContext)({\n      latencyHint: \"playback\",\n    });\n\n    // Initialize state with actual audio context state\n    this.state = {\n      loading: true,\n      loadingUser: true,\n      paused: true,\n      ejected: true,\n      playerError: null,\n      currentSongNumVoices: 0,\n      currentSongDurationMs: 1,\n      currentSongPositionMs: 0,\n      tempo: 1,\n      voiceMask: Array(MAX_VOICES).fill(true),\n      voiceNames: Array(MAX_VOICES).fill(\"\"),\n      showPlayerError: false,\n      user: null,\n      songUrl: null,\n      volume: 100,\n      directories: {},\n      paramDefs: [],\n      parsing: null,\n      analysisEnabled: false,\n      analyses: defaultAnalyses as unknown as Analyses,\n      latencyCorrectionMs: 0,\n      fileToDownload: null,\n      showShortcutHelp: false,\n      rawlProps: null,\n      currentMidi: null,\n      audioContextLocked: this.audioContext.state === \"suspended\",\n      audioContextState: this.audioContext.state,\n      currentPlaybackTime: null,\n      currentMidiBuffer: null,\n      hoveredMeasuresSpan: null,\n    };\n\n    const bufferSize = Math.max(\n      Math.pow(\n        2,\n        Math.ceil(\n          Math.log2(\n            (this.audioContext.baseLatency || 0.001) *\n              this.audioContext.sampleRate,\n          ),\n        ),\n      ),\n      16384,\n    );\n    const gainNode = (this.gainNode = this.audioContext.createGain());\n    gainNode.gain.value = 1;\n    gainNode.connect(this.audioContext.destination);\n    const playerNode = this.audioContext.createScriptProcessor(\n      bufferSize,\n      0,\n      2,\n    );\n    playerNode.connect(gainNode);\n\n    unlockAudioContext(this.audioContext);\n    console.log(\n      \"Sample rate: %d hz. Base latency: %d. Buffer size: %d.\",\n      this.audioContext.sampleRate,\n      this.audioContext.baseLatency * this.audioContext.sampleRate,\n      bufferSize,\n    );\n\n    this.initChipCore(playerNode, bufferSize);\n\n    // Inline processMidiUrls here\n    const location = this.props.location;\n    const params = new URLSearchParams(location.search);\n\n    const link = params.get(\"link\");\n    if (link) {\n      saveMidiFromLink(link);\n    }\n\n    const [, urlSlug] = location.pathname.split(\"/f/\");\n    const [, keySlug] = location.pathname.split(\"/h/\");\n\n    if (urlSlug) {\n      this.handleSongClick(urlSlug);\n    } else if (keySlug) {\n      const valueSlug = keySlugMapping[keySlug];\n      if (valueSlug) {\n        this.handleSongClick(valueSlug, true);\n      } else {\n        console.error(`No mapping found for key slug: ${keySlug}`);\n      }\n    }\n  }\n\n  loadUserAnalyses(userId: string) {\n    const userDocRef = doc(this.db, \"users\", userId);\n    getDoc(userDocRef)\n      .then((userSnapshot) => {\n        if (userSnapshot.exists()) {\n          const userData = userSnapshot.data();\n          if (userData.analyses) {\n            this.setState((prevState) => ({\n              analyses: mergeAnalyses(prevState.analyses, userData.analyses),\n            }));\n          }\n        } else {\n          // Create user document if it doesn't exist\n          console.debug(\"Creating user document\", userId);\n          setDoc(userDocRef, {\n            user: {\n              email: this.state.user.email,\n            },\n          });\n        }\n      })\n      .finally(() => {\n        this.setState({ loadingUser: false });\n      });\n  }\n\n  async initChipCore(playerNode, bufferSize) {\n    const audioState = this.audioContext.state;\n    console.log(\"AudioContext initial state:\", audioState);\n\n    this.setState({\n      audioContextLocked: audioState === \"suspended\",\n      audioContextState: audioState,\n    });\n\n    // Add event listener to track audio context state changes\n    this.audioContext.addEventListener(\"statechange\", () => {\n      const newState = this.audioContext.state;\n      console.log(\"AudioContext state changed to:\", newState);\n      this.setState({\n        audioContextLocked: newState === \"suspended\",\n        audioContextState: newState,\n      });\n    });\n\n    // Load the chip-core Emscripten runtime\n    try {\n      // @ts-ignore\n      this.chipCore = await new ChipCore({\n        // Look for .wasm file in web root, not the same location as the app bundle (static/js).\n        locateFile: (path, prefix) => {\n          if (path.endsWith(\".wasm\") || path.endsWith(\".wast\"))\n            return `${process.env.PUBLIC_URL}/${path}`;\n          return prefix + path;\n        },\n        print: (msg) => console.debug(\"[stdout] \" + msg),\n        printErr: (msg) => console.debug(\"[stderr] \" + msg),\n      });\n    } catch (e) {\n      // Browser doesn't support WASM (Safari in iOS Simulator)\n      Object.assign(this.state, {\n        playerError: \"Error loading player engine. Old browser?\",\n        loading: false,\n      });\n      return;\n    }\n\n    // Get debug from location.search\n    const debug = queryString.parse(window.location.search.substring(1)).debug;\n    // Create all the players. Players will set up IDBFS mount points.\n    const self = this;\n    this.midiPlayer = new MIDIPlayer(\n      this.chipCore,\n      this.audioContext.sampleRate,\n      bufferSize,\n      debug,\n      (parsing) =>\n        self.setState({\n          parsing,\n        }),\n      this.togglePause,\n    );\n    this.midiPlayer.on(\"playerStateUpdate\", this.handlePlayerStateUpdate);\n    this.midiPlayer.on(\"playerError\", this.handlePlayerError);\n\n    // Set up the central audio processing callback. This is where the magic happens.\n    playerNode.onaudioprocess = (e) => {\n      const channels = [];\n      for (let i = 0; i < e.outputBuffer.numberOfChannels; i++) {\n        channels.push(e.outputBuffer.getChannelData(i));\n      }\n      if (!this.midiPlayer?.stopped) {\n        this.midiPlayer?.processAudio(channels);\n      }\n    };\n\n    // Populate all mounted IDBFS file systems from IndexedDB.\n    this.chipCore.FS.syncfs(true, (err) => {\n      if (err) {\n        console.log(\"Error populating FS from indexeddb.\", err);\n      }\n      this.midiPlayer?.handleFileSystemReady();\n    });\n\n    this.setState({ loading: false });\n  }\n\n  static mapSequencerStateToAppState(sequencerState) {\n    const map = {\n      ejected: \"isEjected\",\n      paused: \"isPaused\",\n      currentSongNumVoices: \"numVoices\",\n      currentSongPositionMs: \"positionMs\",\n      currentSongDurationMs: \"durationMs\",\n      tempo: \"tempo\",\n      voiceNames: \"voiceNames\",\n      voiceMask: \"voiceMask\",\n      songUrl: \"url\",\n      // TODO: add param values? move to paramStateUpdate?\n      paramDefs: \"paramDefs\",\n    };\n    const appState = {};\n    for (let prop in map) {\n      const seqProp = map[prop];\n      if (seqProp in sequencerState) {\n        appState[prop] = sequencerState[seqProp];\n      }\n    }\n    return appState;\n  }\n\n  handleLogin() {\n    const auth = getAuth();\n    const provider = new GoogleAuthProvider();\n    signInWithPopup(auth, provider)\n      .then((result) => {\n        console.log(\"Firebase auth result:\", result);\n      })\n      .catch((error) => {\n        console.log(\"Firebase auth error:\", error);\n      });\n  }\n\n  handleLogout() {\n    const auth = getAuth();\n    signOut(auth).then(() => {\n      this.setState({\n        user: null,\n      });\n    });\n  }\n\n  async saveAnalysis(analysis) {\n    if (this.path === \"drop\") return;\n\n    const user = this.state.user;\n    if (user) {\n      const userRef = doc(this.db, \"users\", user.uid);\n      const userDoc = await getDoc(userRef);\n\n      let userData = userDoc.exists() ? userDoc.data() : {};\n      userData.analyses = mergeAnalyses(userData.analyses ?? {}, {\n        [this.path]: analysis,\n      });\n\n      await setDoc(userRef, userData).catch((e) => {\n        console.log(\"Couldn't save analysis.\", e);\n        alert(\"Could not save analysis\");\n      });\n\n      this.setState((prevState) => ({\n        analyses: mergeAnalyses(prevState.analyses, userData.analyses),\n      }));\n    } else {\n      if (this.state.currentMidi) {\n        this.setState((prevState) => ({\n          analyses: mergeAnalyses(prevState.analyses, {\n            [`f/${this.state.currentMidi.slug}`]: analysis,\n          }),\n        }));\n      }\n    }\n  }\n\n  attachMediaKeyHandlers() {\n    if (\"mediaSession\" in navigator) {\n      console.log(\"Attaching Media Key event handlers.\");\n\n      // Limitations of MediaSession: there must always be an active audio element.\n      // See https://bugs.chromium.org/p/chromium/issues/detail?id=944538\n      //     https://github.com/GoogleChrome/samples/issues/637\n      this.mediaSessionAudio = document.createElement(\"audio\");\n      this.mediaSessionAudio.src =\n        process.env.PUBLIC_URL + \"/5-seconds-of-silence.mp3\";\n      this.mediaSessionAudio.loop = true;\n      this.mediaSessionAudio.volume = 0;\n\n      navigator.mediaSession.setActionHandler(\"play\", () => this.togglePause());\n      navigator.mediaSession.setActionHandler(\"pause\", () =>\n        this.togglePause(),\n      );\n      navigator.mediaSession.setActionHandler(\"seekbackward\", () =>\n        this.seekRelative(-5000),\n      );\n      navigator.mediaSession.setActionHandler(\"seekforward\", () =>\n        this.seekRelative(5000),\n      );\n    }\n\n    document.addEventListener(\"keydown\", (e) => {\n      // Keyboard shortcuts: tricky to get it just right and keep the browser behavior intact.\n      // The order of switch-cases matters. More privileged keys appear at the top.\n      // More restricted keys appear at the bottom, after various input focus states are filtered out.\n      if (e.ctrlKey || e.metaKey) return; // avoid browser keyboard shortcuts\n\n      switch (e.key) {\n        case \"Escape\":\n          if (e.target instanceof HTMLElement) {\n            e.target.blur();\n          }\n          break;\n        default:\n      }\n\n      if (\n        e.target instanceof HTMLInputElement &&\n        e.target.tagName === \"INPUT\" &&\n        e.target.type === \"text\"\n      )\n        return; // text input has focus\n\n      switch (e.key) {\n        case \" \":\n          this.togglePause();\n          e.preventDefault();\n          break;\n        case \"u\":\n          const { location } = this.props;\n          navigator.clipboard.writeText(\n            `\"${location.pathname.substring(\n              location.pathname.lastIndexOf(\"/\") + 1,\n            )}\", `,\n          );\n          e.preventDefault();\n          break;\n        case \"-\":\n          this.setSpeedRelative(-0.1);\n          break;\n        case \"_\":\n          this.setSpeedRelative(-0.01);\n          break;\n        case \"=\":\n          this.setSpeedRelative(0.1);\n          break;\n        case \"+\":\n          this.setSpeedRelative(0.01);\n          break;\n        case \"p\":\n          this.setLatencyCorrectionMs(0);\n          e.preventDefault();\n          break;\n        case \"[\":\n          this.setLatencyCorrectionMs(200);\n          e.preventDefault();\n          break;\n        case \"]\":\n          this.setLatencyCorrectionMs(800);\n          e.preventDefault();\n          break;\n        case \"h\":\n          this.toggleShortcutHelp();\n          e.preventDefault();\n          break;\n        case \"r\":\n          this.setState((prevState) => ({\n            analysisEnabled: !prevState.analysisEnabled,\n          }));\n          e.preventDefault();\n          break;\n        default:\n      }\n\n      if (\n        e.target instanceof HTMLInputElement &&\n        e.target.tagName === \"INPUT\" &&\n        e.target.type === \"range\"\n      )\n        return; // a range slider has focus\n\n      switch (e.key) {\n        case \"ArrowLeft\":\n          this.seekRelative(-5000);\n          e.preventDefault();\n          break;\n        case \"ArrowRight\":\n          this.seekRelative(5000);\n          e.preventDefault();\n          break;\n        default:\n      }\n\n      // Run all registered handlers\n      this.keyboardHandlers.forEach((handler) => handler(e));\n    });\n  }\n\n  handleSequencerStateUpdate(sequencerState) {\n    const { isEjected } = sequencerState;\n    console.log(\"App.handleSequencerStateUpdate(isEjected=%s)\", isEjected);\n\n    if (isEjected) {\n      this.setState({\n        ejected: true,\n        currentSongNumVoices: 0,\n        currentSongPositionMs: 0,\n        currentSongDurationMs: 1,\n        songUrl: null,\n      });\n      // TODO: Disabled to support scroll restoration.\n      // updateQueryString({ play: undefined });\n\n      if (\"mediaSession\" in navigator) {\n        this.mediaSessionAudio.pause();\n\n        navigator.mediaSession.playbackState = \"none\";\n      }\n    } else {\n      if (\"mediaSession\" in navigator) {\n        this.mediaSessionAudio.play();\n      }\n\n      this.setState({\n        ...App.mapSequencerStateToAppState(sequencerState),\n      });\n    }\n  }\n\n  handlePlayerError(message) {\n    this.handleSequencerStateUpdate({ isEjected: true });\n    if (message) this.setState({ playerError: message });\n    this.setState({ showPlayerError: !!message });\n    clearTimeout(this.errorTimer);\n    // see https://chatgpt.com/share/14effd20-b14e-4fb1-b644-6b76a6151c1d\n    // @ts-ignore\n    this.errorTimer = setTimeout(\n      () => this.setState({ showPlayerError: false }),\n      ERROR_FLASH_DURATION_MS,\n    );\n  }\n\n  togglePause() {\n    if (this.state.ejected) return;\n\n    const paused = this.midiPlayer?.togglePause();\n    if (\"mediaSession\" in navigator) {\n      if (paused) {\n        this.mediaSessionAudio.pause();\n      } else {\n        this.mediaSessionAudio.play();\n      }\n    }\n    this.setState({ paused: paused });\n  }\n\n  handleTimeSliderChange(event) {\n    const pos = event.target ? event.target.value : event;\n    const seekMs = Math.floor(pos * this.state.currentSongDurationMs);\n\n    this.seekRelativeInner(seekMs);\n  }\n\n  seekRelative(ms: number) {\n    const durationMs = this.state.currentSongDurationMs;\n    const seekMs = clamp(this.midiPlayer?.getPositionMs() + ms, 0, durationMs);\n\n    this.seekRelativeInner(seekMs);\n  }\n\n  seekRelativeInner(seekMs: number) {\n    this.midiPlayer?.seekMs(seekMs);\n    this.setState({\n      currentSongPositionMs: seekMs, // Smooth\n    });\n    setTimeout(() => {\n      if (this.midiPlayer?.isPlaying()) {\n        this.setState({\n          currentSongPositionMs: this.midiPlayer?.getPositionMs(), // Accurate\n        });\n      }\n    }, 100);\n  }\n\n  seekForRawl = (seekMs: number) => this.seekRelativeInner(seekMs);\n\n  handleSetVoiceMask(voiceMask: VoiceMask) {\n    this.midiPlayer?.setVoiceMask(voiceMask);\n    this.setState({ voiceMask: [...voiceMask] });\n  }\n\n  handleTempoChange(event) {\n    const tempo = parseFloat(event.target ? event.target.value : event) || 1.0;\n    this.midiPlayer?.setTempo(tempo);\n    this.setState({\n      tempo: tempo,\n    });\n  }\n\n  setSpeedRelative(delta) {\n    const tempo = clamp(this.state.tempo + delta, 0.1, 4);\n    this.midiPlayer?.setTempo(tempo);\n    this.setState({\n      tempo: tempo,\n    });\n  }\n\n  handleSongClick = async (slug: string, isHiddenRoute: boolean = false) => {\n    console.log(\"[App] handleSongClick:\", { slug, isHiddenRoute });\n\n    try {\n      await handleSongClickUtil(\n        {\n          setState: this.setState.bind(this),\n          loadMidi: this.loadMidi,\n          state: this.state,\n        },\n        slug,\n        isHiddenRoute,\n      );\n\n      // After successful load, start playback automatically\n      console.log(\"[App] Starting playback after load\");\n      if (this.midiPlayer && this.state.paused) {\n        this.togglePause();\n      }\n    } catch (error) {\n      console.error(\"[App] Error in handleSongClick:\", error);\n    }\n  };\n\n  loadMidi = (midiBlob: Blob, playbackStartedCallback?: () => void) => {\n    console.log(\"loadMidi called with blob:\", midiBlob);\n\n    if (this.midiPlayer) {\n      console.log(\"MIDIPlayer exists, loading data\");\n\n      midiBlob\n        .arrayBuffer()\n        .then((arrayBuffer) => {\n          const transformedBuffer = transformMidi(new Uint8Array(arrayBuffer));\n\n          // Store the original MIDI buffer\n          this.setState({ currentMidiBuffer: arrayBuffer });\n\n          this.midiPlayer.setPlaybackStartedCallback(playbackStartedCallback);\n          this.midiPlayer\n            .loadData(transformedBuffer, this.state.currentMidi?.slug || \"\")\n            .then((parsingResult) => {\n              console.log(\"MIDI data loaded, parsing result:\", parsingResult);\n              this.setState({ parsing: parsingResult }, () => {\n                console.log(\"State updated with parsing result\");\n                this.setupMidiPlayer();\n              });\n            })\n            .catch((error) => {\n              console.error(\"Error loading MIDI data:\", error);\n            });\n        })\n        .catch((error) => {\n          console.error(\"Error converting Blob to ArrayBuffer:\", error);\n        });\n    } else {\n      console.error(\"MIDIPlayer not initialized\");\n    }\n  };\n\n  setupMidiPlayer = () => {\n    console.log(\"Setting up MIDI player\");\n\n    console.log(\"Setting up rawlProps\");\n    this.setState(\n      (prevState) => {\n        const slug = prevState.currentMidi?.slug;\n        const analysisKey = `f/${slug}`;\n        const savedAnalysis = prevState.analyses[analysisKey];\n        console.log(\n          `Retrieving analysis for key: ${analysisKey}`,\n          savedAnalysis,\n        );\n\n        const newRawlProps = {\n          parsingResult: this.state.parsing,\n          getCurrentPositionMs: this.midiPlayer?.getPositionMs || (() => 0),\n          savedAnalysis: savedAnalysis,\n          saveAnalysis: this.saveAnalysis,\n          voiceNames: this.state.voiceNames,\n          voiceMask: this.state.voiceMask,\n          setVoiceMask: this.handleSetVoiceMask,\n          showAnalysisBox: this.state.analysisEnabled,\n          seek: this.seekForRawl,\n          latencyCorrectionMs:\n            this.state.latencyCorrectionMs * this.state.tempo,\n          registerKeyboardHandler: this.registerKeyboardHandler,\n          unregisterKeyboardHandler: this.unregisterKeyboardHandler,\n          sourceUrl: prevState.currentMidi?.sourceUrl || null,\n          isHiddenRoute: prevState.currentMidi?.isHiddenRoute || false,\n        };\n        console.log(\"New rawlProps:\", newRawlProps);\n        return { rawlProps: newRawlProps };\n      },\n      () => {\n        console.log(\"State updated with rawlProps\");\n        this.startPlayback();\n      },\n    );\n  };\n\n  startPlayback = () => {\n    console.log(\"Starting playback\");\n    if (this.midiPlayer) {\n      console.log(\"MIDIPlayer exists, starting playback\");\n    } else {\n      console.error(\"MIDIPlayer not initialized\");\n    }\n  };\n\n  handleVolumeChange(volume: number) {\n    this.setState({ volume });\n    this.gainNode.gain.value = Math.max(0, Math.min(2, volume * 0.01));\n  }\n\n  processFetchedDirectory(path, items) {\n    const directories = {\n      ...this.state.directories,\n      [path]: items,\n    };\n    this.setState({ directories });\n  }\n\n  onDrop = (droppedFiles) => {\n    const reader = new FileReader();\n    const file = droppedFiles[0];\n    this.droppedFilename = slugify(file.name.replace(/\\.mid$/i, \"\"));\n    const ext = path.extname(file.name).toLowerCase();\n    if (ext === \".sf2\" && !this.midiPlayer) {\n      this.handlePlayerError(\n        \"MIDIPlayer has not been created - unable to load SoundFont.\",\n      );\n      return;\n    }\n    reader.onload = async () => {\n      const result = reader.result as ArrayBuffer;\n      if (ext === \".sf2\" && this.midiPlayer) {\n        const sf2Path = `user/${file.name}`;\n        const forceWrite = true;\n        const isTransient = false;\n        await ensureEmscFileWithData(\n          this.chipCore,\n          `${SOUNDFONT_MOUNTPOINT}/${sf2Path}`,\n          new Uint8Array(result),\n          forceWrite,\n        );\n        this.midiPlayer?.updateSoundfontParamDefs();\n        this.midiPlayer?.setParameter(\"soundfont\", sf2Path, isTransient);\n        // TODO: emit \"paramDefsChanged\" from player.\n        // See https://reactjs.org/docs/integrating-with-other-libraries.html#integrating-with-model-layers\n        this.forceUpdate();\n      } else {\n        this.props.history.push(\"/drop\");\n        this.currUrl = null;\n        this.midi = result;\n        this.playSongBuffer(file.name, result);\n      }\n    };\n    reader.readAsArrayBuffer(file);\n  };\n\n  setLatencyCorrectionMs = (latencyCorrectionMs: number) => {\n    this.setState({ latencyCorrectionMs });\n    localStorage.setItem(\"latencyCorrectionMs\", latencyCorrectionMs.toString());\n  };\n\n  handlePlayerStateUpdate(playerState) {\n    const { isStopped } = playerState;\n    console.debug(\"Sequencer.handlePlayerStateUpdate(isStopped=%s)\", isStopped);\n\n    if (isStopped) {\n      this.currUrl = null;\n    } else {\n      this.handleSequencerStateUpdate({\n        url: this.currUrl,\n        isEjected: false,\n        ...playerState,\n      });\n    }\n  }\n\n  toggleShortcutHelp = () => {\n    this.setState((prevState) => ({\n      showShortcutHelp: !prevState.showShortcutHelp,\n    }));\n  };\n\n  playSong(url) {\n    if (url.startsWith(\"static/f\")) return;\n\n    if (url.startsWith(\"static\")) {\n      url = url.replace(\"static\", \"https://rawl.rocks/midi\");\n    } else {\n      // Normalize url - paths are assumed to live under CATALOG_PREFIX\n      url =\n        url.startsWith(\"http\") || url.startsWith(\"f:\")\n          ? url\n          : CATALOG_PREFIX + encodeURIComponent(encodeURIComponent(url));\n    }\n\n    // Find a player that can play this filetype\n    const ext =\n      url.includes(\"score.mid\") || url.startsWith(\"f:\")\n        ? \"mid\"\n        : url.split(\".\").pop().toLowerCase();\n\n    if (!this.midiPlayer.canPlay(ext)) {\n      this.handlePlayerError(`The file format \".${ext}\" was not recognized.`);\n      return;\n    }\n\n    if (url.startsWith(\"f:\")) {\n      const playFromFirestore = async () => {\n        const firestore = getFirestore();\n        const { blob, url: sourceUrl } = (\n          await getDoc(doc(firestore, \"midis\", url.slice(2)))\n        ).data() as FirestoreMidiDocument;\n\n        // Update the state with sourceUrl\n        this.setState((prevState) => ({\n          currentMidi: {\n            ...prevState.currentMidi,\n            sourceUrl: sourceUrl || null, // Use null if sourceUrl is undefined or empty\n          },\n        }));\n\n        const transformedMidi = transformMidi(\n          Uint8Array.from(blob.toUint8Array()),\n        );\n\n        this.playSongBuffer(url, transformedMidi);\n      };\n      playFromFirestore();\n    } else {\n      // Fetch the song file (cancelable request)\n      // Cancel any outstanding request so that playback doesn't happen out of order\n      if (this.songRequest) {\n        // @ts-ignore\n        this.songRequest.abort();\n      }\n      // TODO: rewrite on fetch()\n      this.songRequest = promisify(new XMLHttpRequest());\n      // @ts-ignore\n      this.songRequest.responseType = \"arraybuffer\";\n      // @ts-ignore\n      this.songRequest.open(\"GET\", url);\n      this.songRequest\n        // @ts-ignore\n        .send()\n        .then((xhr) => xhr.response)\n        .then((buffer) => {\n          this.currUrl = url;\n          const filepath = url.replace(CATALOG_PREFIX, \"\");\n          this.playSongBuffer(filepath, buffer);\n        })\n        .catch((e) => {\n          this.handlePlayerError(\n            e.message || `HTTP ${e.status} ${e.statusText} ${url}`,\n          );\n        });\n    }\n  }\n\n  async playSongBuffer(filepath: string, buffer: ArrayBuffer | Uint8Array) {\n    this.midiPlayer.suspend();\n    const uint8Array = transformMidi(new Uint8Array(buffer));\n\n    this.hash = md5(uint8Array);\n    console.log(\"MD5\", this.hash);\n    this.midiPlayer.setTempo(1);\n    this.setState({\n      fileToDownload: uint8Array,\n    });\n    try {\n      await this.midiPlayer.loadData(uint8Array, filepath);\n    } catch (e) {\n      this.handlePlayerError(`Unable to play ${filepath} (${e.message}).`);\n    }\n    const numVoices = this.midiPlayer.getNumVoices();\n    this.midiPlayer.setVoiceMask([...Array(numVoices)].fill(true));\n  }\n\n  registerKeyboardHandler = (id: string, handler: KeyboardHandler) => {\n    this.keyboardHandlers.set(id, handler);\n  };\n\n  unregisterKeyboardHandler = (id: string) => {\n    this.keyboardHandlers.delete(id);\n  };\n\n  resetMidiPlayerState = () => {\n    if (this.midiPlayer) {\n      this.midiPlayer.eject();\n    }\n    this.setState({\n      ejected: true,\n      currentSongNumVoices: 0,\n      currentSongPositionMs: 0,\n      currentSongDurationMs: 1,\n      songUrl: null,\n      rawlProps: null,\n      currentMidi: null,\n      parsing: null,\n    });\n  };\n\n  handleUnlockAudioContext = async () => {\n    if (this.audioContext) {\n      await this.audioContext.resume();\n      this.setState({\n        audioContextLocked: this.audioContext.state === \"suspended\",\n        audioContextState: this.audioContext.state,\n      });\n    }\n  };\n\n  // Add this method to update playback time\n  updatePlaybackTime = () => {\n    if (this.midiPlayer && this.midiPlayer.isPlaying()) {\n      const positionMs = this.midiPlayer.getPositionMs();\n      this.setState({ currentPlaybackTime: positionMs / 1000 });\n    }\n  };\n\n  componentDidMount() {\n    // Start the playback time update timer with a longer interval\n    this.playbackTimer = setInterval(this.updatePlaybackTime, 100); // Update every 100ms instead of 50ms\n  }\n\n  componentWillUnmount() {\n    // Clear the playback timer\n    if (this.playbackTimer) {\n      clearInterval(this.playbackTimer);\n    }\n  }\n\n  eject = () => {\n    if (this.midiPlayer) {\n      this.midiPlayer.eject();\n      this.handleSequencerStateUpdate({ isEjected: true });\n    }\n  };\n\n  componentDidUpdate(prevProps: RouteComponentProps) {\n    const prevPath = prevProps.location.pathname;\n    const currentPath = this.props.location.pathname;\n    const isStructuresRoute = currentPath.startsWith(\"/s/\");\n    const wasStructuresRoute = prevPath.startsWith(\"/s/\");\n\n    // Only eject if navigating into Structures from a non-Structures route\n    if (isStructuresRoute && !wasStructuresRoute) {\n      this.eject();\n      // Reset rawlProps to hide InlineRawl\n      this.setState({\n        rawlProps: null,\n        currentMidi: null,\n      });\n    }\n  }\n\n  render() {\n    const { location } = this.props;\n    const rawlProps: RawlProps = {\n      parsingResult: this.state.parsing,\n      getCurrentPositionMs: this.midiPlayer?.getPositionMs || (() => 0),\n      savedAnalysis: this.state.analyses[this.path] ?? null,\n      saveAnalysis: this.saveAnalysis,\n      voiceNames: this.state.voiceNames,\n      voiceMask: this.state.voiceMask,\n      setVoiceMask: this.handleSetVoiceMask,\n      showAnalysisBox: this.state.analysisEnabled,\n      seek: this.seekForRawl,\n      latencyCorrectionMs: this.state.latencyCorrectionMs * this.state.tempo,\n      sourceUrl: this.state.currentMidi?.sourceUrl || null,\n    };\n\n    const rawlRoute = (\n      <Route\n        path={[\"/f/:slug*\", \"/h/:keySlug*\", \"/c/:chiptuneUrl*\", \"/drop\"]}\n        render={({ match }) => {\n          const { keySlug } = match.params as {\n            slug?: string;\n            keySlug?: string;\n            chiptuneUrl?: string;\n          };\n          const { parsing } = this.state;\n          this.path = match.url.slice(1);\n          return (\n            <>\n              {parsing && (\n                <>\n                  <Rawl\n                    parsingResult={parsing}\n                    getCurrentPositionMs={this.midiPlayer?.getPositionMs}\n                    savedAnalysis={this.state.analyses[this.path] ?? null}\n                    saveAnalysis={this.saveAnalysis}\n                    showAnalysisBox={this.state.analysisEnabled}\n                    seek={this.seekForRawl}\n                    sourceUrl={this.state.currentMidi?.sourceUrl || null}\n                    isHiddenRoute={!!keySlug}\n                    {...rawlProps}\n                  />\n                  {match.path === \"/drop\" && (\n                    <DropSaveForm\n                      midi={this.midi}\n                      filename={this.droppedFilename}\n                    />\n                  )}\n                </>\n              )}\n            </>\n          );\n        }}\n      />\n    );\n\n    const isStructuresRoute = location.pathname.startsWith(\"/s/\");\n\n    if (isStructuresRoute) {\n      return (\n        <AppContext.Provider\n          value={{\n            handleSongClick: this.handleSongClick,\n            rawlProps: this.state.rawlProps,\n            analyses: this.state.analyses,\n            saveAnalysis: this.saveAnalysis,\n            resetMidiPlayerState: this.resetMidiPlayerState,\n            registerKeyboardHandler: this.registerKeyboardHandler,\n            unregisterKeyboardHandler: this.unregisterKeyboardHandler,\n            currentMidi: this.state.currentMidi,\n            setCurrentMidi: (currentMidi) => this.setState({ currentMidi }),\n            user: this.state.user,\n            seek: this.seekForRawl,\n            currentPlaybackTime: this.state.currentPlaybackTime || null,\n            eject: this.eject,\n            currentMidiBuffer: this.state.currentMidiBuffer,\n            hoveredMeasuresSpan: this.state.hoveredMeasuresSpan,\n            setHoveredMeasuresSpan: (span) =>\n              this.setState({ hoveredMeasuresSpan: span }),\n            togglePause: this.togglePause,\n            handleLogin: this.handleLogin,\n            handleLogout: this.handleLogout,\n            handleToggleAnalysis: () => {\n              this.setState((prevState) => ({\n                analysisEnabled: !prevState.analysisEnabled,\n              }));\n            },\n            analysisEnabled: this.state.analysisEnabled,\n          }}\n        >\n          <AppHeader />\n          <Switch>\n            <Route\n              path=\"/s/\"\n              exact\n              render={() => <Structures analyses={this.state.analyses} />}\n            />\n            <Route\n              path=\"/s/:chapter/:topic\"\n              render={() => (\n                <StructuresWithParams analyses={this.state.analyses} />\n              )}\n            />\n            <Route\n              path=\"/s/:chapter\"\n              render={() => (\n                <StructuresWithParams analyses={this.state.analyses} />\n              )}\n            />\n          </Switch>\n        </AppContext.Provider>\n      );\n    }\n\n    // The rest of your existing render method for other routes\n    return (\n      <AppContext.Provider\n        value={{\n          handleSongClick: this.handleSongClick,\n          rawlProps: this.state.rawlProps,\n          analyses: this.state.analyses,\n          saveAnalysis: this.saveAnalysis,\n          resetMidiPlayerState: this.resetMidiPlayerState,\n          registerKeyboardHandler: this.registerKeyboardHandler,\n          unregisterKeyboardHandler: this.unregisterKeyboardHandler,\n          currentMidi: this.state.currentMidi,\n          setCurrentMidi: (currentMidi) => this.setState({ currentMidi }),\n          user: this.state.user,\n          seek: this.seekForRawl,\n          currentPlaybackTime: this.state.currentPlaybackTime || null,\n          eject: this.eject,\n          currentMidiBuffer: this.state.currentMidiBuffer,\n          hoveredMeasuresSpan: this.state.hoveredMeasuresSpan,\n          setHoveredMeasuresSpan: (span) =>\n            this.setState({ hoveredMeasuresSpan: span }),\n          togglePause: this.togglePause,\n          handleLogin: this.handleLogin,\n          handleLogout: this.handleLogout,\n          handleToggleAnalysis: () => {\n            this.setState((prevState) => ({\n              analysisEnabled: !prevState.analysisEnabled,\n            }));\n          },\n          analysisEnabled: this.state.analysisEnabled,\n        }}\n      >\n        <Dropzone disableClick style={{}} onDrop={this.onDrop}>\n          {/* @ts-ignore */}\n          {(dropzoneProps) => (\n            <>\n              {this.state.audioContextLocked && this.state.parsing && (\n                <div className=\"audio-context-overlay\">\n                  <button\n                    className=\"unlock-audio-button\"\n                    onClick={this.handleUnlockAudioContext}\n                  >\n                    Play\n                  </button>\n                </div>\n              )}\n              <DropMessage dropzoneProps={dropzoneProps} />\n              <Alert\n                handlePlayerError={this.handlePlayerError}\n                playerError={this.state.playerError}\n                showPlayerError={this.state.showPlayerError}\n              />\n\n              <AppHeader />\n              <AppMainContent ref={this.contentAreaRef}>\n                <Switch>\n                  <Route path=\"/old\" render={() => <OldLandingPage />} />\n                  <Route\n                    path=\"/corpus/:corpus?\"\n                    render={({ match }) =>\n                      match.params.corpus ? (\n                        <Corpus slug={match.params.corpus} />\n                      ) : (\n                        <CorpusSearch />\n                      )\n                    }\n                  />\n                  <Route path=\"/daw\" render={() => <DAW />} />\n                  {rawlRoute}\n                  <Route path=\"/100/:slug?\" component={Book} />\n                  <Route path=\"/timeline\" component={Timeline} />\n                  <Redirect exact from=\"/\" to=\"/100\" />\n                </Switch>\n              </AppMainContent>\n              <AppFooter\n                currentSongDurationMs={this.state.currentSongDurationMs}\n                ejected={this.state.ejected}\n                paused={this.state.paused}\n                volume={this.state.volume}\n                handleTimeSliderChange={this.handleTimeSliderChange}\n                handleVolumeChange={this.handleVolumeChange}\n                togglePause={this.togglePause}\n                latencyCorrectionMs={this.state.latencyCorrectionMs}\n                setLatencyCorrectionMs={this.setLatencyCorrectionMs}\n                getCurrentPositionMs={this.midiPlayer?.getPositionMs}\n                tempo={this.state.tempo}\n                setTempo={this.handleTempoChange}\n              />\n\n              <Modal\n                isOpen={this.state.showShortcutHelp}\n                onRequestClose={this.toggleShortcutHelp}\n                contentLabel=\"Keyboard Shortcuts\"\n                style={{\n                  content: {\n                    background: \"black\",\n                    border: \"none\",\n                  },\n                  overlay: {\n                    backgroundColor: \"rgba(0, 0, 0, 0.75)\",\n                  },\n                }}\n              >\n                <ShortcutHelp />\n              </Modal>\n            </>\n          )}\n        </Dropzone>\n      </AppContext.Provider>\n    );\n  }\n}\n\n// New component to handle route params\nconst StructuresWithParams: React.FC<StructuresProps> = ({ analyses }) => {\n  const { chapter, topic } = useParams<{ chapter: string; topic?: string }>();\n\n  return (\n    <Structures\n      analyses={analyses}\n      initialChapter={decodeURIComponent(chapter)}\n      initialTopic={topic ? decodeURIComponent(topic) : undefined}\n    />\n  );\n};\n\nexport default withRouter(App);\n","import path from \"path\";\nimport queryString from \"querystring\";\n\nimport { CATALOG_PREFIX } from \"./config\";\n\nexport function updateQueryString(newParams) {\n  // Merge new params with current query string\n  const params = {\n    ...queryString.parse(window.location.search.substr(1)),\n    ...newParams,\n  };\n  // Delete undefined properties\n  Object.keys(params).forEach(\n    (key) => params[key] === undefined && delete params[key],\n  );\n  // Object.keys(params).forEach(key => params[key] = decodeURIComponent(params[key]));\n  const stateUrl = \"?\" + queryString.stringify(params).replace(/%20/g, \"+\");\n  // Update address bar URL\n  window.history.replaceState(null, \"\", stateUrl);\n}\n\nexport function unlockAudioContext(context) {\n  return new Promise((resolve) => {\n    if (context.state === \"suspended\") {\n      const events = [\"touchstart\", \"touchend\", \"mousedown\", \"mouseup\"];\n      const unlock = () => {\n        context.resume().then(() => {\n          events.forEach((event) =>\n            document.body.removeEventListener(event, unlock),\n          );\n          resolve();\n        });\n      };\n      events.forEach((event) =>\n        document.body.addEventListener(event, unlock, false),\n      );\n    } else {\n      resolve();\n    }\n  });\n}\n\nexport function titlesFromMetadata(metadata) {\n  if (metadata.formatted) {\n    return metadata.formatted;\n  }\n\n  const title = allOrNone(metadata.artist, \" - \") + metadata.title;\n  const subtitle =\n    [metadata.game, metadata.system].filter((x) => x).join(\" - \") +\n    allOrNone(\" (\", metadata.copyright, \")\");\n  return { title, subtitle };\n}\n\nexport function allOrNone(...args) {\n  let str = \"\";\n  for (let i = 0; i < args.length; i++) {\n    if (!args[i]) return \"\";\n    str += args[i];\n  }\n  return str;\n}\n\nexport function getFilepathFromUrl(url) {\n  return url.replace(CATALOG_PREFIX, \"/\");\n}\n\nexport function ensureEmscFileWithUrl(emscRuntime, filename, url) {\n  if (emscRuntime.FS.analyzePath(filename).exists) {\n    console.debug(`${filename} exists in Emscripten file system.`);\n    return Promise.resolve(filename);\n  } else {\n    console.log(`Downloading ${filename}...`);\n    return fetch(url)\n      .then((response) => {\n        // Because fetch doesn't reject on 404\n        if (!response.ok)\n          throw Error(`HTTP ${response.status} while fetching ${filename}`);\n        return response;\n      })\n      .then((response) => response.arrayBuffer())\n      .then((buffer) => {\n        const arr = new Uint8Array(buffer);\n        return ensureEmscFileWithData(emscRuntime, filename, arr, true);\n      });\n  }\n}\n\nexport function ensureEmscFileWithData(\n  emscRuntime,\n  filename,\n  uint8Array,\n  forceWrite = false,\n) {\n  if (!forceWrite && emscRuntime.FS.analyzePath(filename).exists) {\n    console.debug(`${filename} exists in Emscripten file system.`);\n    return Promise.resolve(filename);\n  } else {\n    console.debug(`Writing ${filename} to Emscripten file system...`);\n    const dir = path.dirname(filename);\n    emscRuntime.FS.mkdirTree(dir);\n    emscRuntime.FS.writeFile(filename, uint8Array);\n    return new Promise((resolve, reject) => {\n      emscRuntime.FS.syncfs(false, (err) => {\n        if (err) {\n          console.error(\"Error synchronizing to indexeddb.\", err);\n          reject(err);\n        } else {\n          console.debug(`Synchronized ${filename} to indexeddb.`);\n          resolve(filename);\n        }\n      });\n    });\n  }\n}\n\nexport function remap(number, fromLeft, fromRight, toLeft, toRight) {\n  return (\n    toLeft + ((number - fromLeft) / (fromRight - fromLeft)) * (toRight - toLeft)\n  );\n}\n\nexport function remap01(number, toLeft, toRight) {\n  return remap(number, 0, 1, toLeft, toRight);\n}\n","import { flag } from \"country-emoji\";\nimport * as React from \"react\";\nimport { ReactNode } from \"react\";\nimport styled from \"styled-components\";\n\nexport const Flags = styled.span`\n  display: inline-flex;\n  align-items: center;\n  margin-right: 4px;\n`;\n\nexport const GenreList = styled.div`\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  color: #999;\n`;\n\nexport const GenreItem = styled.span`\n  cursor: default;\n`;\n\nexport const getUniqueStyles = (genre?: string, style?: string): string[] => {\n  const styles = new Set<string>();\n  if (genre) {\n    genre\n      .split(\",\")\n      .map((s) => s.trim())\n      .forEach((s) => styles.add(s));\n  }\n  if (style) {\n    style\n      .split(\",\")\n      .map((s) => s.trim())\n      .forEach((s) => styles.add(s));\n  }\n  return Array.from(styles);\n};\n\nexport const getEmojis = (country?: string): ReactNode[] => {\n  if (!country) return [];\n  const countries = country.split(\",\").map((c) => c.trim());\n  return countries.map((c) => <Flags key={c}>{flag(c)}</Flags>);\n};\n\nexport interface HasMetadata {\n  composerBirthYear?: number;\n  country?: string;\n  genre?: string;\n  style?: string;\n}\n\nexport const hasMetadata = (corpus: HasMetadata): boolean => {\n  return Boolean(\n    corpus.composerBirthYear || corpus.country || corpus.genre || corpus.style,\n  );\n};\n\nexport const formatComposerName = (slug: string): string => {\n  return slug\n    .split(\"_\")\n    .map((word) =>\n      word\n        .split(\"-\")\n        .map((part) => part.charAt(0).toUpperCase() + part.slice(1))\n        .join(\"-\"),\n    )\n    .join(\" \");\n};\n","import React from \"react\";\n\nexport const CHORDS = {\n  i: [0, 3, 7],\n  biiio7: [3, 6, 9, 0],\n  \"#ivo7\": [6, 9, 0, 3],\n  vio7: [9, 0, 3, 6],\n  iiio7: [4, 7, 10, 1],\n  vo7: [7, 10, 1, 4],\n  bviio7: [10, 1, 4, 7],\n  ivo7: [5, 8, 11, 2],\n  bvio7: [8, 11, 2, 5],\n  ii: [2, 5, 9],\n  II: [2, 6, 9],\n  II7: [2, 6, 9, 0],\n  ii7: [2, 5, 9, 0],\n  iii: [4, 7, 11],\n  III: [4, 8, 11],\n  iii7: [4, 7, 11, 2],\n  iv: [5, 8, 0],\n  iv7: [5, 8, 0, 3],\n  I: [0, 4, 7],\n  \"V7/IV\": [0, 4, 7, 10],\n  \"V7/iv\": [0, 4, 7, 10],\n  I7: [0, 4, 7, 10],\n  vi: [9, 0, 4],\n  VI: [9, 1, 4],\n  vi7: [9, 0, 4, 7],\n  IV: [5, 9, 0],\n  IV7: [5, 9, 0, 3],\n  V: [7, 11, 2],\n  V7: [7, 11, 2, 5],\n  V43: [2, 5, 7, 11],\n  V9: [7, 11, 2, 5, 9],\n  V13: [7, 11, 2, 5, 9, 0, 4],\n  V7b9: [7, 11, 2, 5, 8],\n  \"V/V\": [2, 6, 9],\n  \"V7/V\": [2, 6, 9, 0],\n  \"V/V/V\": [9, 1, 4],\n  \"V/ii\": [9, 1, 4],\n  \"V7/ii\": [9, 1, 4, 7],\n  \"V/iii\": [11, 3, 6],\n  \"V7/iii\": [11, 3, 6, 9],\n  \"V/vi\": [4, 8, 11],\n  \"V7/vi\": [4, 8, 11, 2],\n  Vsus4: [7, 0, 2],\n  Vsus47: [7, 0, 2, 5],\n  Imaj7: [0, 4, 7, 11],\n  IVmaj7: [5, 9, 0, 4],\n  I5: [0, 7],\n  IV5: [5, 0],\n  V5: [7, 2],\n  v: [7, 10, 2],\n  bVI: [8, 0, 3],\n  bVII: [10, 2, 5],\n  bvi: [8, 11, 3],\n  bvii: [10, 1, 5],\n  bIII: [3, 7, 10],\n  biii: [3, 6, 10],\n  bII: [1, 5, 8],\n  bII7: [1, 5, 8, 11],\n  \"V+\": [7, 11, 3],\n  viio7: [11, 2, 5, 8],\n  biio7: [1, 4, 7, 10],\n  io7: [0, 3, 6, 9],\n  It: [8, 0, 6],\n  Fr: [8, 0, 2, 6],\n  Ger: [8, 0, 3, 6],\n  Cad64: [7, 0, 4],\n  cad64: [7, 0, 3],\n  \"viio7/V\": [6, 9, 0, 3],\n  i64: [7, 0, 3],\n  ii65: [5, 9, 0, 2],\n  iiø65: [5, 8, 0, 2],\n  io: [0, 3, 6],\n  \"I+\": [0, 4, 8],\n  imaj7: [0, 3, 7, 11],\n  i7: [0, 3, 7, 10],\n  iø7: [0, 3, 6, 10],\n  iio: [2, 5, 8],\n  iio7: [2, 5, 8, 11],\n  iiø7: [2, 5, 8, 12],\n  viio: [11, 2, 5],\n  IPAC: [0, 4, 12],\n  I6: [4, 7, 12],\n  i6: [3, 7, 0],\n  \"1\": [0],\n  b2: [1],\n  \"2\": [2],\n  b3: [3],\n  \"3\": [4],\n  \"4\": [5],\n  \"#4\": [6],\n  \"5\": [7],\n  b6: [8],\n  \"6\": [9],\n  b7: [10],\n  \"7\": [11],\n} as const;\n\nexport type Chord = keyof typeof CHORDS;\n\nexport const MAJOR_MODE: Mode = {\n  title: \"major\",\n  chords: [\"ii\", \"IV\", \"vi\", \"I\", \"iii\", \"V\", \"V7\"],\n};\n\nexport const MINOR_MODE: Mode = {\n  title: \"minor\",\n  chords: [\"iiø7\", \"iv\", \"bVI\", \"i\", \"bIII\", \"v\", \"V\", \"V7\", \"bVII\"],\n};\n\nexport const STRICT_NATURAL_MINOR: Mode = {\n  title: \"\",\n  chords: [\"i\", \"iv\", \"v\", \"bVI\", \"bVII\"],\n};\n\nexport const CHROMATIC_CHORDS: Mode = {\n  title: \"chromatic\",\n  chords: [\n    \"V7/IV\",\n    \"bII\",\n    \"V7/V\",\n    \"V7/vi\",\n    \"viio7/V\",\n    \"Fr\",\n    \"Ger\",\n    \"V7/ii\",\n    \"V7/iii\",\n  ],\n};\n\nexport type Mode = { title: string; chords: Chord[] };\n\nexport const formatChordName = (name: string) => {\n  // note to AI: never change this function\n  const parts = name.split(\"ø\");\n  if (parts.length === 1) {\n    return name.replace(\"b\", \"♭\");\n    // .replace(\"7\", \"⁷\")\n    // .replace(\"1\", \"¹\")\n    // .replace(\"3\", \"³\");\n  }\n  return (\n    <>\n      {parts[0].replace(\"b\", \"♭\")}\n      <sup>ø</sup>\n      {parts[1].replace(\"7\", \"⁷\").replace(\"1\", \"¹\").replace(\"3\", \"³\")}\n    </>\n  );\n};\n\nconst stackChordUp = (pitches: readonly number[]): number[] => {\n  const result = [...pitches];\n  for (let j = 1; j < result.length; j++) {\n    while (result[j] < result[j - 1]) {\n      result[j] += 12;\n    }\n  }\n  return result;\n};\n\nexport interface RehydratedChord {\n  name: Chord;\n  pitches: number[];\n  positions: Array<number>;\n}\n\nexport const rehydrateChords = (chords: Chord[]): RehydratedChord[] => {\n  const rehydratedChords = chords.map((chord) => ({\n    name: chord,\n    pitches: [...stackChordUp(CHORDS[chord])],\n    positions: new Array(CHORDS[chord].length).fill(0),\n  }));\n\n  // Calculate positions\n  for (let i = 0; i < rehydratedChords.length; ++i) {\n    const { pitches, positions } = rehydratedChords[i];\n    if (i > 0) {\n      const prevRoot = rehydratedChords[i - 1].pitches[0];\n      const currentRoot = pitches[0];\n\n      // Calculate the two possible minimal distances\n      const distanceUp =\n        (prevRoot < currentRoot ? 0 : 12) + currentRoot - prevRoot;\n      const distanceDown = 12 - distanceUp;\n\n      // Choose whether to place the root up or down\n      if (distanceUp <= distanceDown) {\n        positions[0] = rehydratedChords[i - 1].positions[0] + distanceUp;\n      } else {\n        positions[0] = rehydratedChords[i - 1].positions[0] - distanceDown;\n      }\n    } else {\n      positions[0] = 0;\n    }\n\n    // Stack the rest of the notes above the root\n    for (let j = 1; j < positions.length; ++j) {\n      positions[j] =\n        positions[j - 1] + ((pitches[j] - pitches[j - 1] + 12) % 12);\n    }\n  }\n\n  return rehydratedChords;\n};\n"],"sourceRoot":""}